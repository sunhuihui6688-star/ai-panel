import{d as Zl,D as Ll,i as et,o,c as f,b as n,a as e,w as t,k as V,F as K,m as oe,s as he,t as p,j as C,h as r,f as Ge,n as Le,p as Oe,G as Il,v as Qt,l as B,e as u,z as fl,E as m,H as vl,r as b,I as Zt,J as ea,g as Qe,T as pt,K as la,x as Sl,L as ta,A as aa,B as Nl,M as na,N as Ql,O as sa,P as oa,Q as ia,R as ua}from"./index-Se2ENCi_.js";import{h as $l,f as q,i as _t,b as Vl,m as da,j as zl,k as Tl,g as Bl,r as mt,e as Se,l as yt}from"./index-B6SLQW8T.js";import{A as lt}from"./AiChat-H1YzF7t3.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ra={class:"skill-studio"},ca={class:"sidebar-top"},va={class:"sidebar-acts"},fa={class:"skill-list"},pa={key:0,class:"list-empty"},ma=["onClick"],ya={class:"sk-icon"},ga={key:0},_a={class:"sk-info"},wa={class:"sk-name"},ba={class:"sk-id"},ka={class:"sk-right"},ha={key:0,class:"sk-streaming-dot",title:"AI ÁîüÊàê‰∏≠‚Ä¶"},xa={class:"studio-editor"},Ca={key:0,class:"editor-empty"},$a={class:"editor-toolbar"},Va={class:"editor-breadcrumb"},za={class:"crumb-name"},Ta={class:"toolbar-acts"},Sa={class:"editor-body"},La={class:"tree-title"},Ia={class:"tree-item tree-dir"},Ma=["onClick"],Ua={key:0,class:"tree-empty"},Aa={key:0,class:"file-editor"},Da={class:"file-editor-head"},Fa={style:{display:"flex","align-items":"center",gap:"10px"}},Na={style:{"font-size":"12px",color:"#909399"}},Ba={class:"json-preview"},Ea={key:1,class:"file-editor"},Ra={class:"file-editor-head"},Ka={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Pa={style:{"font-size":"11px",color:"#c0c4cc"}},ja={key:2,class:"file-editor"},Wa={class:"file-editor-head"},Oa={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Ha={style:{"font-size":"11px",color:"#c0c4cc"}},Ya=["placeholder"],Xa={class:"chat-panel-head"},qa={key:0,style:{"margin-left":"auto","font-size":"11px",color:"#c0c4cc"}},Ja={key:0,style:{"margin-left":"6px",color:"#e6a23c"}},Ga={class:"chat-wrap"},Qa=Zl({__name:"SkillStudio",props:{agentId:{}},setup(pl){const xe=pl,_=xe.agentId,P=u(200),Ie=u(140),le=u(340),ce=u("");function Ce(g,d){const A=g.clientX,$=d==="side"?P.value:d==="tree"?Ie.value:le.value;ce.value=d;const E=ae=>{const T=ae.clientX-A;d==="side"?P.value=Math.max(140,Math.min(340,$+T)):d==="tree"?Ie.value=Math.max(100,Math.min(280,$+T)):le.value=Math.max(240,Math.min(560,$-T))},D=()=>{ce.value="",window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",D),document.body.style.cursor="",document.body.style.userSelect=""};window.addEventListener("mousemove",E),window.addEventListener("mouseup",D),document.body.style.cssText+="cursor:col-resize;user-select:none;"}const J=u([]),$e=u(!1),y=u(null),S=u("meta"),I=u({name:"",icon:"",category:"",description:"",version:"1.0.0",enabled:!0}),O=u(""),ye=u(!1),x=u(!1),W=u(!1),G=u(!1),X=u(!1),Me=u([]),te=u(!1),ge=u(""),ve=u(!1),fe=u(!1),U={};function Pe(g,d){d?U[g]=d:delete U[g]}function Q(g){return g?U[g]:null}const ke=u(new Set);function _e(g,d){const A=new Set(ke.value);d?A.add(g):A.delete(g),ke.value=A}const ie=u(new Set);Ll(y,async g=>{g&&(ie.value.has(g.id)||(ie.value.add(g.id),await vl(),await Q(g.id)?.resumeSession?.(`skill-studio-${g.id}`)))},{flush:"post"});const Ve=fl(()=>{if(!y.value)return"‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÂ∏ÆÂä©Áî®Êà∑ËÆæËÆ°Âíå‰ºòÂåñ AI ÊäÄËÉΩÁöÑÁ≥ªÁªüÊèêÁ§∫ËØç„ÄÇ";const g=JSON.stringify({id:y.value.id,name:y.value.name,icon:y.value.icon||"",category:y.value.category||"",description:y.value.description||"",version:y.value.version||"1.0.0",enabled:y.value.enabled,source:"local",installedAt:""},null,2);return`‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÊ≠£Âú®Â∏ÆÂä©Áî®Êà∑ÈÖçÁΩÆÊäÄËÉΩÔºàID: ${y.value.id}Ôºâ„ÄÇ

## ‚ö†Ô∏è Êñá‰ª∂Ë∑ØÂæÑËßÑÂàôÔºàÂøÖÈ°ªÈÅµÂÆàÔºâ
ÊâÄÊúâÊñá‰ª∂ÂøÖÈ°ªÂú® skills/${y.value.id}/ ÁõÆÂΩï‰∏ãÔºö
- ‚úÖ skills/${y.value.id}/SKILL.md
- ‚úÖ skills/${y.value.id}/skill.json
- ‚úÖ skills/${y.value.id}/tools/helper.py
- ‚ùå ‰ªª‰ΩïÂÖ∂‰ªñË∑ØÂæÑ

## ‚ö†Ô∏è ÂàõÂª∫ÊàñÊõ¥Êñ∞ÊäÄËÉΩÊó∂ÔºåÂøÖÈ°ªÂêåÊó∂ÂÜô‰∏§‰∏™Êñá‰ª∂

### 1. skills/${y.value.id}/skill.jsonÔºàÊäÄËÉΩÂÖÉÊï∞ÊçÆÔºâ
Ê†ºÂºèÂ¶Ç‰∏ãÔºå‰øÆÊîπ name/icon/category/description Â≠óÊÆµÔºö
\`\`\`json
${g}
\`\`\`

### 2. skills/${y.value.id}/SKILL.mdÔºàÁ≥ªÁªüÊèêÁ§∫ËØçÔºâ
ÂΩìÂâçÂÜÖÂÆπÔºö
\`\`\`markdown
${O.value||"ÔºàÁ©∫Ôºâ"}
\`\`\`

## ‰Ω†ÂèØ‰ª•Â∏ÆÂä©Ôºö
- ÂàõÂª∫/‰ºòÂåñÊäÄËÉΩÔºöÂêåÊó∂ÂÜô skill.jsonÔºàÂêçÁß∞„ÄÅÂàÜÁ±ª„ÄÅÊèèËø∞ÔºâÂíå SKILL.mdÔºàÊèêÁ§∫ËØçÔºâ
- Âú®ÊäÄËÉΩÁõÆÂΩï‰∏ãÂàõÂª∫Â∑•ÂÖ∑Êñá‰ª∂ÔºàPython Á≠âÔºâ
- ÊµãËØïÊäÄËÉΩÊïàÊûúÔºàÁõ¥Êé•ÂØπËØùÂç≥ÂèØÊµãËØïÔºâ`}),je=fl(()=>y.value?X.value?`Êñ∞ÊäÄËÉΩÂ∑≤ÂàõÂª∫ÔºàID: ${y.value.id}Ôºâ„ÄÇÂëäËØâÊàë‰Ω†ÊÉ≥Ë¶Å‰ªÄ‰πàÂäüËÉΩÔºåÊàëÊù•Â∏Æ‰Ω†ÁîüÊàêÂÆåÊï¥ÁöÑ SKILL.md ÂÜÖÂÆπÔºåÁîüÊàêÂêéÁõ¥Êé•ÁÇπ‰øùÂ≠òÂç≥ÂèØ„ÄÇ`:`ÂΩìÂâçÁºñËæë„Äå${y.value.name}„Äç„ÄÇ‰Ω†ÂèØ‰ª•ËÆ©Êàë‰ºòÂåñ SKILL.md„ÄÅÊµãËØïÊïàÊûúÔºåÊàñËÄÖÁõ¥Êé•ÂØπËØù‰ΩìÈ™åÂΩìÂâçÊäÄËÉΩ„ÄÇ`:"ÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂêéÔºåÊàëÂèØ‰ª•Â∏Æ‰Ω†‰ºòÂåñÈÖçÁΩÆ„ÄÅÂÜô SKILL.md„ÄÅÊµãËØïÊïàÊûú„ÄÇ"),ml=fl(()=>y.value?X.value?[]:[`Â∏ÆÊàë‰ºòÂåñ„Äå${y.value.name}„ÄçÁöÑ SKILL.md`,"Ëøô‰∏™ÊäÄËÉΩÊÄé‰πàÂÜôÊïàÊûúÊõ¥Â•ΩÔºü","Áî®‰∏≠ÊñáÂõûÁ≠î‰∏ÄÈÅìÂéÜÂè≤È¢òÔºåÊµãËØïÂΩìÂâçÊäÄËÉΩÊïàÊûú"]:["Â∏ÆÊàëËÆæËÆ°‰∏Ä‰∏™‰ª£Á†ÅÂÆ°Êü•ÊäÄËÉΩ","Â∏ÆÊàëÂÜô‰∏Ä‰∏™ÁøªËØëÂä©ÊâãÁöÑ SKILL.md"]);async function we(){$e.value=!0;try{const g=await $l.list(_);if(J.value=g.data||[],y.value){const d=J.value.find(A=>A.id===y.value.id);d&&(y.value=d,Ze(d))}}catch{}finally{$e.value=!1}}function Ze(g){I.value={name:g.name,icon:g.icon||"",category:g.category||"",description:g.description||"",version:g.version||"1.0.0",enabled:g.enabled}}async function el(g){y.value?.id!==g.id&&(y.value=g,Ze(g),S.value="meta",x.value=!1,O.value="",X.value=!1,ze(),pe())}async function j(){y.value&&S.value!=="prompt"&&(S.value="prompt",O.value||await pe())}async function ue(g,d,A){const $=await q.read(_,g),E=Array.isArray($.data)?$.data:[],D=[];for(const ae of E){if(A===0&&ae.name==="skill.json")continue;const T=d?`${d}/${ae.name}`:ae.name;if(D.push({name:ae.name,path:T,isDir:ae.isDir,depth:A}),ae.isDir){const Xe=await ue(`skills/${y.value.id}/${T}`,T,A+1);D.push(...Xe)}}return D}async function ze(){if(y.value){te.value=!0;try{Me.value=await ue(`skills/${y.value.id}/`,"",0)}catch{Me.value=[{name:"SKILL.md",path:"SKILL.md",isDir:!1,depth:0}]}finally{te.value=!1}}}async function yl(g,d){if(!d){if(g==="SKILL.md"){await j();return}S.value=g,ve.value=!1,await He()}}async function He(){if(!(!y.value||!S.value||S.value==="meta"||S.value==="prompt")){fe.value=!0;try{const g=await q.read(_,`skills/${y.value.id}/${S.value}`);ge.value=g.data?.content||"",ve.value=!1}catch{ge.value=""}finally{fe.value=!1}}}async function nl(g){if(y.value)try{await q.delete(_,`skills/${y.value.id}/${g}`),S.value===g&&(S.value="prompt"),await ze(),m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}async function Ue(){if(y.value){W.value=!0;try{S.value==="meta"||S.value==="prompt"?(await $l.update(xe.agentId,y.value.id,{name:I.value.name,icon:I.value.icon,category:I.value.category,description:I.value.description,enabled:I.value.enabled}),(S.value==="prompt"||O.value)&&(await q.write(_,`skills/${y.value.id}/SKILL.md`,O.value),x.value=!1),await we()):(await q.write(_,`skills/${y.value.id}/${S.value}`,ge.value),ve.value=!1),m.success("‰øùÂ≠òÊàêÂäü")}catch(g){m.error(g.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{W.value=!1}}}async function Ae(g,d){try{await $l.update(xe.agentId,g.id,{enabled:d}),await we()}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}}async function ll(){if(y.value)try{await $l.remove(xe.agentId,y.value.id),m.success("Â∑≤Âà†Èô§"),y.value=null,await we()}catch{m.error("Âà†Èô§Â§±Ë¥•")}}async function De(){if(G.value)return;G.value=!0;const g="skill_"+Date.now().toString(36);try{await $l.create(xe.agentId,{meta:{id:g,name:"Êñ∞ÊäÄËÉΩ",icon:"",category:"",description:"",version:"1.0.0",enabled:!1,source:"local",installedAt:""},promptContent:""}),await we();const d=J.value.find(A=>A.id===g);d&&(await el(d),S.value="prompt",O.value="",X.value=!0,await vl(),ie.value.has(g)||(ie.value.add(g),await Q(g)?.resumeSession?.(`skill-studio-${g}`)))}catch(d){m.error(d.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}finally{G.value=!1}}async function Fe(g,d){g===y.value?.id&&(X.value=!1),await we(),g===y.value?.id&&(await Promise.all([ze(),pe()]),S.value!=="meta"&&S.value!=="prompt"&&await He())}async function pe(){if(y.value){ye.value=!0;try{const g=await q.read(_,`skills/${y.value.id}/SKILL.md`);O.value=g.data?.content||"",x.value=!1}catch{O.value=""}finally{ye.value=!1}}}async function Ye(){if(!y.value)return;O.value||await j();const g=`ËØ∑Áî®„Äå${y.value.name}„ÄçÊäÄËÉΩÊïàÊûúÂõûÂ§çÔºö‰Ω†Â•ΩÔºåËØ∑‰ªãÁªç‰∏Ä‰∏ã‰Ω†ÁöÑÂäüËÉΩ„ÄÇ`;Q(y.value?.id)?.fillInput?.(g),m.info("ÊµãËØïÊ∂àÊÅØÂ∑≤Â°´ÂÖ•Âè≥‰æßËÅäÂ§©Ê°ÜÔºåÁÇπÂáªÂèëÈÄÅÂç≥ÂèØÊµãËØï")}return et(we),(g,d)=>{const A=b("Refresh"),$=b("el-icon"),E=b("el-button"),D=b("Plus"),ae=b("Tools"),T=b("el-tag"),Xe=b("el-switch"),gl=b("Setting"),sl=b("FolderOpened"),_l=b("VideoPlay"),wl=b("DocumentChecked"),qe=b("Delete"),We=b("el-popconfirm"),tl=b("Folder"),Ne=b("Document"),Te=b("el-input"),de=b("el-form-item"),i=b("el-col"),c=b("el-row"),M=b("el-collapse-item"),Z=b("el-collapse"),ol=b("el-form"),be=b("ChatLineRound");return o(),f("div",ra,[n("div",{class:"studio-sidebar",style:Le({width:P.value+"px"})},[n("div",ca,[d[16]||(d[16]=n("span",{class:"sidebar-title"},"ÊäÄËÉΩÂ∫ì",-1)),n("div",va,[e(E,{size:"small",loading:$e.value,circle:"",onClick:we},{default:t(()=>[e($,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"]),e(E,{size:"small",type:"primary",circle:"",loading:G.value,onClick:De},{default:t(()=>[e($,null,{default:t(()=>[e(D)]),_:1})]),_:1},8,["loading"])])]),n("div",fa,[!$e.value&&J.value.length===0?(o(),f("div",pa,"ÊöÇÊó†ÊäÄËÉΩ")):V("",!0),(o(!0),f(K,null,oe(J.value,w=>(o(),f("div",{key:w.id,class:he(["skill-item",{active:y.value?.id===w.id}]),onClick:ee=>el(w)},[n("span",ya,[w.icon?(o(),f("span",ga,p(w.icon),1)):(o(),C($,{key:1},{default:t(()=>[e(ae)]),_:1}))]),n("div",_a,[n("div",wa,p(w.name),1),n("div",ba,p(w.id),1)]),n("div",ka,[ke.value.has(w.id)?(o(),f("span",ha)):w.category?(o(),C(T,{key:1,size:"small",effect:"plain",style:{"margin-right":"6px","font-size":"11px"}},{default:t(()=>[r(p(w.category),1)]),_:2},1024)):V("",!0),e(Xe,{"model-value":w.enabled,size:"small",onChange:ee=>Ae(w,ee),onClick:d[0]||(d[0]=Ge(()=>{},["stop"]))},null,8,["model-value","onChange"])])],10,ma))),128))])],4),n("div",{class:he(["ss-handle",{dragging:ce.value==="side"}]),onMousedown:d[1]||(d[1]=w=>Ce(w,"side"))},[...d[17]||(d[17]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),n("div",xa,[y.value?(o(),f(K,{key:1},[n("div",$a,[n("div",Va,[e($,{style:{color:"#909399"}},{default:t(()=>[e(sl)]),_:1}),d[20]||(d[20]=n("span",{class:"crumb-sep"},"skills /",-1)),n("span",za,p(y.value.id),1)]),n("div",Ta,[e(E,{size:"small",onClick:Ye},{default:t(()=>[e($,null,{default:t(()=>[e(_l)]),_:1}),d[21]||(d[21]=r(" ÊµãËØï ",-1))]),_:1}),e(E,{size:"small",type:"primary",loading:W.value,onClick:Ue},{default:t(()=>[e($,null,{default:t(()=>[e(wl)]),_:1}),d[22]||(d[22]=r(" ‰øùÂ≠ò ",-1))]),_:1},8,["loading"]),e(We,{title:"Á°ÆËÆ§Âà†Èô§ËØ•ÊäÄËÉΩÔºü",onConfirm:ll},{reference:t(()=>[e(E,{size:"small",type:"danger",plain:""},{default:t(()=>[e($,null,{default:t(()=>[e(qe)]),_:1})]),_:1})]),_:1})])]),n("div",Sa,[n("div",{class:"file-tree",style:Le({width:Ie.value+"px"})},[n("div",La,[d[23]||(d[23]=r(" ÁõÆÂΩï ",-1)),e(E,{link:"",size:"small",loading:te.value,onClick:ze,style:{"margin-left":"auto",padding:"0"}},{default:t(()=>[e($,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"])]),n("div",Ia,[e($,null,{default:t(()=>[e(tl)]),_:1}),n("span",null,p(y.value.id)+"/",1)]),n("div",{class:he(["tree-item",{"tree-active":S.value==="meta"}]),onClick:d[2]||(d[2]=w=>S.value="meta")},[e($,null,{default:t(()=>[e(Ne)]),_:1}),d[24]||(d[24]=n("span",null,"skill.json",-1))],2),(o(!0),f(K,null,oe(Me.value,w=>(o(),f("div",{key:w.path,class:he(["tree-item",{"tree-active":S.value===(w.path==="SKILL.md"?"prompt":w.path),"tree-dir-row":w.isDir}]),style:Le({paddingLeft:`${12+w.depth*12}px`}),onClick:ee=>yl(w.path,w.isDir)},[w.isDir?(o(),C($,{key:0,style:{color:"#e6a23c"}},{default:t(()=>[e(tl)]),_:1})):(o(),C($,{key:1},{default:t(()=>[e(Ne)]),_:1})),n("span",null,p(w.name),1),w.path==="SKILL.md"&&y.value.enabled?(o(),C(T,{key:2,size:"small",type:"success",effect:"plain",style:{"margin-left":"4px","font-size":"10px"}},{default:t(()=>[...d[25]||(d[25]=[r("Ê≥®ÂÖ•‰∏≠",-1)])]),_:1})):V("",!0)],14,Ma))),128)),!te.value&&Me.value.length===0?(o(),f("div",Ua,"Á©∫ÁõÆÂΩï")):V("",!0)],4),n("div",{class:he(["ss-handle",{dragging:ce.value==="tree"}]),onMousedown:d[3]||(d[3]=w=>Ce(w,"tree"))},[...d[26]||(d[26]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),S.value==="meta"?(o(),f("div",Aa,[n("div",Da,[e($,null,{default:t(()=>[e(Ne)]),_:1}),d[27]||(d[27]=r(" skill.json ",-1)),d[28]||(d[28]=n("span",{class:"file-hint"},"ÊäÄËÉΩÂÖÉ‰ø°ÊÅØÔºåÂΩ±ÂìçÂàóË°®Â±ïÁ§∫Âíå runner Ë°å‰∏∫",-1))]),e(ol,{model:I.value,"label-width":"72px",size:"small",style:{padding:"16px 20px"}},{default:t(()=>[e(de,{label:"ÊäÄËÉΩ ID"},{default:t(()=>[e(Te,{value:y.value.id,disabled:""},null,8,["value"])]),_:1}),e(c,{gutter:12},{default:t(()=>[e(i,{span:14},{default:t(()=>[e(de,{label:"ÂêçÁß∞"},{default:t(()=>[e(Te,{modelValue:I.value.name,"onUpdate:modelValue":d[4]||(d[4]=w=>I.value.name=w),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:10},{default:t(()=>[e(de,{label:"ÂõæÊ†á"},{default:t(()=>[e(Te,{modelValue:I.value.icon,"onUpdate:modelValue":d[5]||(d[5]=w=>I.value.icon=w),placeholder:"emoji"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{gutter:12},{default:t(()=>[e(i,{span:14},{default:t(()=>[e(de,{label:"ÂàÜÁ±ª"},{default:t(()=>[e(Te,{modelValue:I.value.category,"onUpdate:modelValue":d[6]||(d[6]=w=>I.value.category=w),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:10},{default:t(()=>[e(de,{label:"ÁâàÊú¨"},{default:t(()=>[e(Te,{modelValue:I.value.version,"onUpdate:modelValue":d[7]||(d[7]=w=>I.value.version=w),placeholder:"1.0.0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(de,{label:"ÊèèËø∞"},{default:t(()=>[e(Te,{modelValue:I.value.description,"onUpdate:modelValue":d[8]||(d[8]=w=>I.value.description=w),type:"textarea",rows:2,placeholder:"ÁÆÄË¶ÅÊèèËø∞ÊäÄËÉΩÂäüËÉΩ"},null,8,["modelValue"])]),_:1}),e(de,{label:"Áä∂ÊÄÅ"},{default:t(()=>[n("div",Fa,[e(Xe,{modelValue:I.value.enabled,"onUpdate:modelValue":d[9]||(d[9]=w=>I.value.enabled=w)},null,8,["modelValue"]),n("span",Na,p(I.value.enabled?"Â∑≤ÂêØÁî®ÔºåSKILL.md Â∞ÜÊ≥®ÂÖ•Á≥ªÁªüÊèêÁ§∫":"Â∑≤Á¶ÅÁî®"),1)])]),_:1}),e(Z,{style:{"margin-top":"8px"}},{default:t(()=>[e(M,{title:"Êü•Áúã skill.json ÂéüÊñá"},{default:t(()=>[n("pre",Ba,p(JSON.stringify({id:y.value.id,...I.value},null,2)),1)]),_:1})]),_:1})]),_:1},8,["model"])])):S.value==="prompt"?(o(),f("div",Ea,[n("div",Ra,[e($,null,{default:t(()=>[e(Ne)]),_:1}),d[30]||(d[30]=r(" SKILL.md ",-1)),d[31]||(d[31]=n("span",{class:"file-hint"},"Ê≥®ÂÖ•Âà∞ AI System Prompt ÁöÑÊåá‰ª§ÂÜÖÂÆπ",-1)),n("div",Ka,[x.value?(o(),C(T,{key:0,type:"warning",size:"small"},{default:t(()=>[...d[29]||(d[29]=[r("Êú™‰øùÂ≠ò",-1)])]),_:1})):V("",!0),n("span",Pa,p(O.value.length)+" Â≠óÁ¨¶",1),e(E,{size:"small",circle:"",loading:ye.value,onClick:pe,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e($,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"])])]),Oe(n("textarea",{"onUpdate:modelValue":d[10]||(d[10]=w=>O.value=w),class:"code-textarea",spellcheck:"false",placeholder:`# ÊäÄËÉΩÂêçÁß∞

## ÂäüËÉΩËØ¥Êòé
ÊèèËø∞ËØ•ÊäÄËÉΩÁöÑÁî®ÈÄî‚Ä¶

## Ë°å‰∏∫ËßÑËåÉ
- ËßÑËåÉ 1
- ËßÑËåÉ 2`,onInput:d[11]||(d[11]=w=>x.value=!0)},null,544),[[Il,O.value]])])):(o(),f("div",ja,[n("div",Wa,[e($,null,{default:t(()=>[e(Ne)]),_:1}),r(" "+p(S.value)+" ",1),n("div",Oa,[ve.value?(o(),C(T,{key:0,type:"warning",size:"small"},{default:t(()=>[...d[32]||(d[32]=[r("Êú™‰øùÂ≠ò",-1)])]),_:1})):V("",!0),n("span",Ha,p(ge.value.length)+" Â≠óÁ¨¶",1),e(E,{size:"small",circle:"",loading:fe.value,onClick:He,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e($,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"]),e(We,{title:"Á°ÆËÆ§Âà†Èô§ËØ•Êñá‰ª∂Ôºü",onConfirm:d[12]||(d[12]=w=>nl(S.value))},{reference:t(()=>[e(E,{size:"small",circle:"",type:"danger",plain:""},{default:t(()=>[e($,null,{default:t(()=>[e(qe)]),_:1})]),_:1})]),_:1})])]),Oe(n("textarea",{"onUpdate:modelValue":d[13]||(d[13]=w=>ge.value=w),class:"code-textarea",spellcheck:"false",placeholder:`ÁºñËæë ${S.value} ‚Ä¶`,onInput:d[14]||(d[14]=w=>ve.value=!0)},null,40,Ya),[[Il,ge.value]])]))])],64)):(o(),f("div",Ca,[e($,{size:"48",color:"#c0c4cc"},{default:t(()=>[e(gl)]),_:1}),d[19]||(d[19]=n("p",null,"‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂºÄÂßãÁºñËæë",-1)),e(E,{type:"primary",onClick:De},{default:t(()=>[e($,null,{default:t(()=>[e(D)]),_:1}),d[18]||(d[18]=r(" Êñ∞Âª∫ÊäÄËÉΩ",-1))]),_:1})]))]),n("div",{class:he(["ss-handle",{dragging:ce.value==="chat"}]),onMousedown:d[15]||(d[15]=w=>Ce(w,"chat"))},[...d[33]||(d[33]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),n("div",{class:"studio-chat",style:Le({width:le.value+"px"})},[n("div",Xa,[e($,null,{default:t(()=>[e(be)]),_:1}),d[34]||(d[34]=r(" AI Âçè‰ΩúÈÖçÁΩÆ ",-1)),y.value?(o(),f("span",qa,[r(" ÂΩìÂâç: "+p(y.value.name)+" ",1),ke.value.size>1?(o(),f("span",Ja," ("+p(ke.value.size)+" ‰∏™Âπ∂Ë°åÁîüÊàê‰∏≠) ",1)):V("",!0)])):V("",!0)]),n("div",Ga,[(o(!0),f(K,null,oe(J.value,w=>Oe((o(),C(lt,{key:w.id,ref_for:!0,ref:ee=>Pe(w.id,ee),"agent-id":B(_),context:y.value?.id===w.id?Ve.value:"",scenario:"skill-studio","skill-id":w.id,"welcome-message":y.value?.id===w.id?je.value:"",examples:y.value?.id===w.id?ml.value:[],compact:"",onResponse:ee=>Fe(w.id),onStreamingChange:ee=>_e(w.id,ee)},null,8,["agent-id","context","skill-id","welcome-message","examples","onResponse","onStreamingChange"])),[[Qt,y.value?.id===w.id]])),128))])],4)])}}}),Za=tt(Qa,[["__scopeId","data-v-bbfc3342"]]),en={class:"wc-layout"},ln={class:"wc-panel-header"},tn={class:"wc-header-actions"},an={class:"wc-panel-body file-tree-body"},nn={key:0,class:"wc-loading"},sn={key:1,class:"wc-empty"},on={class:"tree-icon-wrap"},un={key:0,class:"icon-folder-open",viewBox:"0 0 16 16"},dn={key:1,class:"icon-folder",viewBox:"0 0 16 16"},rn=["onKeyup","onBlur"],cn={key:1,class:"tree-node-name"},vn=["onClick"],fn=["onClick"],pn={class:"wc-panel-header"},mn={key:0,class:"wc-panel-title file-path-title"},yn={class:"file-ext-badge"},gn=["title"],_n={key:1,class:"wc-panel-title muted"},wn={class:"wc-header-actions"},bn={class:"wc-panel-body editor-body"},kn={key:0,class:"wc-empty-editor"},hn={key:1,class:"wc-binary-notice"},xn={class:"editor-wrap"},Cn=["onKeydown"],$n={class:"editor-statusbar"},Vn={class:"stat-chip"},zn={key:0},Tn={key:1,class:"status-dirty"},Sn={key:2,class:"status-saved"},Ln={class:"wc-panel wc-panel-right"},In={class:"session-bar"},Mn={class:"session-bar-left"},Un={class:"session-opt"},An={class:"session-opt-title"},Dn={class:"session-opt-time"},Fn={class:"chat-area"},Nn={class:"wc-modal"},Bn={class:"wc-modal-footer"},gt=140,En=380,Rn=900,Kn=Zl({__name:"WorkspaceChatLayout",props:{agentId:{}},emits:["session-change"],setup(pl,{emit:xe}){const _=pl,P=xe,Ie={label:"name",children:"children",isLeaf:i=>!i.isDir},le=u(200),ce=u(460),Ce=u(),J=u(),$e=u(),y=u(),S=u(),I=u(),O=u([]),ye=u(!1),x=u(""),W=u(""),G=u(!1),X=u(!1),Me=u(null),te=u(!1),ge=u(""),ve=u(""),fe=u(""),U=u({visible:!1,x:0,y:0,node:null}),Pe=u([]),Q=u();let ke=0,_e=0,ie=null;const Ve=u(!1),je=u(!1);function ml(i){Ze(i,"left")}function we(i){Ze(i,"right")}function Ze(i,c){ke=i.clientX,_e=c==="left"?le.value:ce.value,ie=c,c==="left"?Ve.value=!0:je.value=!0,window.addEventListener("mousemove",el),window.addEventListener("mouseup",j),document.body.style.cssText+="cursor:col-resize;user-select:none;"}function el(i){const c=i.clientX-ke;ie==="left"?le.value=Math.max(gt,Math.min(En,_e+c)):ie==="right"&&(ce.value=Math.max(gt,Math.min(Rn,_e+c)))}function j(){Ve.value=!1,je.value=!1,ie=null,window.removeEventListener("mousemove",el),window.removeEventListener("mouseup",j),document.body.style.cursor="",document.body.style.userSelect=""}async function ue(){ye.value=!0;try{const i=await q.readTree(_.agentId);O.value=ze(i.data)}catch{O.value=[]}finally{ye.value=!1}}function ze(i){return(Array.isArray(i)?i:i?.children??[]).map(M=>({name:M.name,path:M.path??M.name,isDir:!!(M.isDir??M.type==="dir"),size:M.size,children:M.children?.length?ze(M.children):void 0})).sort((M,Z)=>+Z.isDir-+M.isDir||M.name.localeCompare(Z.name))}function yl(i){U.value.visible=!1,i.isDir||nl(i.path)}function He(i,c){i.preventDefault(),U.value={visible:!0,x:i.clientX,y:i.clientY,node:c}}async function nl(i){G.value&&x.value&&!await Sl.confirm("ÊúâÊú™‰øùÂ≠òÊõ¥ÊîπÔºåÁªßÁª≠ÂàáÊç¢Ôºü","ÊèêÁ§∫",{confirmButtonText:"ÁªßÁª≠",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)||(x.value=i,G.value=!1,vl(()=>Ce.value?.setCurrentKey(i)),await Ue())}async function Ue(){if(x.value)try{const c=(await q.read(_.agentId,x.value)).data;X.value=c.binary??c.encoding==="base64",X.value||(W.value=c.content??"",Me.value=c.size!=null?{size:c.size,modTime:c.modTime}:null),G.value=!1}catch{W.value=""}}async function Ae(){if(!(!x.value||X.value))try{await q.write(_.agentId,x.value,W.value),G.value=!1,m.success("Â∑≤‰øùÂ≠ò")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}}async function ll(){if(!(!x.value||!await Sl.confirm(`Âà†Èô§ ${x.value}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await q.delete(_.agentId,x.value),x.value="",W.value="",G.value=!1,await ue(),m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}async function De(){const i=ge.value.trim();if(i)try{await q.write(_.agentId,i,""),te.value=!1,ge.value="",await ue(),await nl(i)}catch{m.error("ÂàõÂª∫Â§±Ë¥•")}}async function Fe(i){if(await Sl.confirm(`Âà†Èô§ ${i.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1))try{await q.delete(_.agentId,i.path),x.value===i.path&&(x.value="",W.value=""),await ue(),m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}function pe(i){ve.value=i.path,fe.value=i.name,vl(()=>S.value?.focus())}async function Ye(i){if(!ve.value||fe.value===i.name){ve.value="";return}const M=(i.path.includes("/")?i.path.substring(0,i.path.lastIndexOf("/")+1):"")+fe.value;try{const Z=await q.read(_.agentId,i.path);await q.write(_.agentId,M,Z.data?.content??""),await q.delete(_.agentId,i.path),x.value===i.path&&(x.value=M),await ue(),m.success("Â∑≤ÈáçÂëΩÂêç")}catch{m.error("ÈáçÂëΩÂêçÂ§±Ë¥•")}ve.value=""}function g(){U.value.visible=!1,te.value=!0}function d(){U.value.visible=!1,te.value=!0}function A(){const i=U.value.node;U.value.visible=!1,i&&pe(i)}async function $(){const i=U.value.node;if(U.value.visible=!1,!(!i||!await Sl.confirm(`Âà†Èô§ ${i.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await q.delete(_.agentId,i.path),x.value===i.path&&(x.value="",W.value=""),await ue(),m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}function E(){U.value.visible&&(U.value.visible=!1)}async function D(){try{const i=await _t.list({agentId:_.agentId,limit:50});Pe.value=(i.data?.sessions||[]).sort((c,M)=>M.lastAt-c.lastAt)}catch{Pe.value=[]}}function ae(i){Q.value=i||void 0,i?I.value?.resumeSession(i):I.value?.startNewSession()}function T(){Q.value=void 0,I.value?.startNewSession()}function Xe(i){Q.value=i,P("session-change",i),D()}async function gl(){await ue(),x.value&&(await new Promise(i=>setTimeout(i,300)),await Ue())}const sl=fl(()=>(W.value.match(/\n/g)??[]).length+1),_l=fl(()=>x.value?`Áî®Êà∑ÂΩìÂâçÊâìÂºÄÁöÑÊñá‰ª∂: ${x.value}`:void 0);function wl(i){const c=J.value,M=c.selectionStart;W.value=c.value.slice(0,M)+"  "+c.value.slice(c.selectionEnd),vl(()=>{c.selectionStart=c.selectionEnd=M+2})}function qe(){$e.value&&J.value&&($e.value.scrollTop=J.value.scrollTop)}Ll(te,async i=>{i&&(await vl(),y.value?.focus())});function We(i){const c=i.split(".").pop()?.toLowerCase();return c?`.${c}`:"txt"}function tl(i){return i?i<1024?`${i}B`:i<1048576?`${(i/1024).toFixed(0)}K`:`${(i/1048576).toFixed(1)}M`:""}function Ne(i){return tl(i)??""}function Te(i){const c=i.split(".").pop()?.toLowerCase()??"";return{ts:"fc-blue",tsx:"fc-blue",js:"fc-yellow",jsx:"fc-yellow",vue:"fc-green",py:"fc-blue",go:"fc-teal",rs:"fc-orange",md:"fc-gray",json:"fc-yellow",yaml:"fc-red",yml:"fc-red",toml:"fc-gray",html:"fc-orange",css:"fc-blue",scss:"fc-pink",sh:"fc-green",bash:"fc-green",sql:"fc-orange",png:"fc-purple",jpg:"fc-purple",jpeg:"fc-purple",gif:"fc-purple",svg:"fc-purple",webp:"fc-purple",env:"fc-yellow",gitignore:"fc-gray",dockerfile:"fc-teal"}[c]??"fc-default"}function de(i){if(!i)return"";const c=new Date(i),Z=Date.now()-i;return Z<6e4?"ÂàöÂàö":Z<36e5?`${Math.floor(Z/6e4)}ÂàÜÈíüÂâç`:Z<864e5?`${Math.floor(Z/36e5)}Â∞èÊó∂Ââç`:c.toLocaleDateString()}return et(()=>{ue(),D(),document.addEventListener("click",E)}),Zt(()=>{j(),document.removeEventListener("click",E)}),(i,c)=>{const M=b("el-tooltip"),Z=b("el-icon"),ol=b("el-tree"),be=b("el-tag"),w=b("el-option"),ee=b("el-select");return o(),f("div",en,[n("div",{class:"wc-panel wc-panel-left",style:Le({width:le.value+"px"})},[n("div",ln,[c[12]||(c[12]=n("span",{class:"wc-panel-title"},"üìÅ Â∑•‰ΩúÂå∫Êñá‰ª∂",-1)),n("div",tn,[e(M,{content:"Êñ∞Âª∫Êñá‰ª∂",placement:"top","show-after":500},{default:t(()=>[n("button",{class:"wc-icon-btn",onClick:c[0]||(c[0]=z=>te.value=!0)},"Ôºã")]),_:1}),e(M,{content:"Âà∑Êñ∞",placement:"top","show-after":500},{default:t(()=>[n("button",{class:"wc-icon-btn",onClick:ue},"‚Ü∫")]),_:1})])]),n("div",an,[ye.value?(o(),f("div",nn,[e(Z,{class:"rotating"},{default:t(()=>[e(B(ea))]),_:1}),c[13]||(c[13]=r(" Âä†ËΩΩ‰∏≠‚Ä¶ ",-1))])):O.value.length?(o(),C(ol,{key:2,ref_key:"treeRef",ref:Ce,data:O.value,props:Ie,"highlight-current":!0,"expand-on-click-node":!0,"default-expand-all":!1,"node-key":"path",class:"wc-file-tree",onNodeClick:yl,onNodeContextmenu:He},{default:t(({node:z,data:re})=>[n("span",{class:he(["tree-node",{active:re.path===x.value}])},[n("span",on,[re.isDir&&z.expanded?(o(),f("svg",un,[...c[14]||(c[14]=[n("path",{d:"M1.5 3A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H7.914a.5.5 0 0 1-.354-.146L6.146 2.94A1.5 1.5 0 0 0 5.086 2.5H1.5z"},null,-1)])])):re.isDir?(o(),f("svg",dn,[...c[15]||(c[15]=[n("path",{d:"M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31z"},null,-1)])])):(o(),f("svg",{key:2,class:he(["icon-file",Te(re.name)]),viewBox:"0 0 16 16"},[...c[16]||(c[16]=[n("path",{"fill-rule":"evenodd",d:"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3z"},null,-1)])],2))]),ve.value===re.path?Oe((o(),f("input",{key:0,"onUpdate:modelValue":c[1]||(c[1]=Be=>fe.value=Be),class:"tree-rename-input",onKeyup:[Qe(Be=>Ye(re),["enter"]),c[2]||(c[2]=Qe(Be=>ve.value="",["escape"]))],onBlur:Be=>Ye(re),onClick:c[3]||(c[3]=Ge(()=>{},["stop"])),ref_key:"renameInputRef",ref:S},null,40,rn)),[[Il,fe.value]]):(o(),f("span",cn,p(re.name),1)),n("span",{class:"tree-node-actions",onClick:c[4]||(c[4]=Ge(()=>{},["stop"]))},[n("button",{class:"tree-act-btn",title:"ÈáçÂëΩÂêç",onClick:Be=>pe(re)},[...c[17]||(c[17]=[n("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[n("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"})],-1)])],8,vn),n("button",{class:"tree-act-btn danger",title:"Âà†Èô§",onClick:Be=>Fe(re)},[...c[18]||(c[18]=[n("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[n("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),n("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1)])],8,fn)])],2)]),_:1},8,["data"])):(o(),f("div",sn,"Â∑•‰ΩúÂå∫‰∏∫Á©∫"))]),(o(),C(pt,{to:"body"},[U.value.visible?(o(),f("div",{key:0,class:"ctx-menu",style:Le({left:U.value.x+"px",top:U.value.y+"px"}),onMouseleave:c[5]||(c[5]=z=>U.value.visible=!1)},[n("div",{class:"ctx-item",onClick:g},"üìÑ Êñ∞Âª∫Êñá‰ª∂"),n("div",{class:"ctx-item",onClick:d},"üìÅ Êñ∞Âª∫Êñá‰ª∂Â§π"),U.value.node&&!U.value.node.isDir?(o(),f("div",{key:0,class:"ctx-item",onClick:A},"‚úé ÈáçÂëΩÂêç")):V("",!0),c[19]||(c[19]=n("div",{class:"ctx-divider"},null,-1)),n("div",{class:"ctx-item danger",onClick:$},"‚úï Âà†Èô§")],36)):V("",!0)]))],4),n("div",{class:he(["wc-handle",{dragging:Ve.value}]),onMousedown:ml},[...c[20]||(c[20]=[n("div",{class:"wc-handle-bar"},null,-1)])],34),n("div",{class:"wc-panel wc-panel-mid",style:Le({width:ce.value+"px"})},[n("div",pn,[x.value?(o(),f("span",mn,[n("span",yn,p(We(x.value)),1),n("span",{class:"file-path-text",title:x.value},p(x.value),9,gn)])):(o(),f("span",_n,"ÈÄâÊã©Êñá‰ª∂Êü•Áúã")),n("div",wn,[G.value?(o(),C(be,{key:0,size:"small",type:"warning",style:{"margin-right":"4px"}},{default:t(()=>[...c[21]||(c[21]=[r("Êú™‰øùÂ≠ò",-1)])]),_:1})):V("",!0),x.value&&G.value?(o(),f("button",{key:1,class:"wc-save-btn",onClick:Ae},"‰øùÂ≠ò")):V("",!0),x.value?(o(),f("button",{key:2,class:"wc-icon-btn",title:"Âà∑Êñ∞",onClick:Ue},"‚Ü∫")):V("",!0),x.value?(o(),f("button",{key:3,class:"wc-icon-btn danger",title:"Âà†Èô§Êñá‰ª∂",onClick:ll},"‚úï")):V("",!0)])]),n("div",bn,[x.value?X.value?(o(),f("div",hn,"‚õî ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÊó†Ê≥ïÁºñËæë")):(o(),f(K,{key:2},[n("div",xn,[n("div",{class:"line-numbers",ref_key:"lineNumRef",ref:$e},[(o(!0),f(K,null,oe(sl.value,z=>(o(),f("div",{key:z,class:"line-num"},p(z),1))),128))],512),Oe(n("textarea",{ref_key:"editorRef",ref:J,"onUpdate:modelValue":c[6]||(c[6]=z=>W.value=z),class:"code-editor",spellcheck:"false",autocorrect:"off",autocapitalize:"off",onInput:c[7]||(c[7]=z=>{G.value=!0,qe()}),onScroll:qe,onKeydown:[Qe(Ge(wl,["prevent"]),["tab"]),Qe(Ge(Ae,["ctrl","prevent"]),["s"]),Qe(Ge(Ae,["meta","prevent"]),["s"])]},null,40,Cn),[[Il,W.value]])]),n("div",$n,[n("span",Vn,p(We(x.value)),1),n("span",null,p(sl.value)+" Ë°å",1),n("span",null,p(W.value.length)+" Â≠óÁ¨¶",1),Me.value?(o(),f("span",zn,p(Ne(Me.value.size)),1)):V("",!0),c[23]||(c[23]=n("span",{class:"stat-flex"},null,-1)),G.value?(o(),f("span",Tn,"‚óè Êú™‰øùÂ≠ò")):(o(),f("span",Sn,"‚úì Â∑≤‰øùÂ≠ò"))])],64)):(o(),f("div",kn,[...c[22]||(c[22]=[n("div",{class:"wc-empty-icon"},"‚úèÔ∏è",-1),n("div",null,"‰ªéÂ∑¶‰æßÈÄâÊã©Êñá‰ª∂",-1),n("div",{class:"wc-empty-hint"},"ÊîØÊåÅÊãñÊãΩÊñá‰ª∂Âà∞Âè≥‰æßËÅäÂ§©Ê°Ü",-1)])]))])],4),n("div",{class:he(["wc-handle",{dragging:je.value}]),onMousedown:we},[...c[24]||(c[24]=[n("div",{class:"wc-handle-bar"},null,-1)])],34),n("div",Ln,[n("div",In,[n("div",Mn,[e(Z,{style:{color:"#64748b","font-size":"13px"}},{default:t(()=>[e(B(la))]),_:1}),e(ee,{modelValue:Q.value,"onUpdate:modelValue":c[8]||(c[8]=z=>Q.value=z),placeholder:"Êñ∞ÂØπËØù",size:"small",clearable:"",class:"session-select",onChange:ae},{default:t(()=>[(o(!0),f(K,null,oe(Pe.value,z=>(o(),C(w,{key:z.id,value:z.id,label:z.title||"ÂØπËØù "+z.id.slice(0,8)},{default:t(()=>[n("div",Un,[n("span",An,p(z.title||"Êó†Ê†áÈ¢ò"),1),n("span",Dn,p(de(z.lastAt)),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),n("button",{class:"session-new-btn",title:"Êñ∞Âª∫ÂØπËØù",onClick:T},"Ôºã Êñ∞ÂØπËØù")]),n("div",Fn,[e(lt,{"agent-id":pl.agentId,"session-id":Q.value||void 0,context:_l.value,height:"100%",ref_key:"chatRef",ref:I,onResponse:gl,onSessionChange:Xe},null,8,["agent-id","session-id","context"])])]),(o(),C(pt,{to:"body"},[te.value?(o(),f("div",{key:0,class:"wc-modal-mask",onClick:c[11]||(c[11]=Ge(z=>te.value=!1,["self"]))},[n("div",Nn,[c[25]||(c[25]=n("div",{class:"wc-modal-title"},"Êñ∞Âª∫Êñá‰ª∂",-1)),Oe(n("input",{"onUpdate:modelValue":c[9]||(c[9]=z=>ge.value=z),class:"wc-modal-input",placeholder:"Â¶Ç notes.md Êàñ scripts/run.sh",onKeyup:Qe(De,["enter"]),ref_key:"newFileInput",ref:y},null,544),[[Il,ge.value]]),n("div",Bn,[n("button",{class:"wc-btn",onClick:c[10]||(c[10]=z=>te.value=!1)},"ÂèñÊ∂à"),n("button",{class:"wc-btn primary",onClick:De},"ÂàõÂª∫")])])])):V("",!0)]))])}}}),Pn=tt(Kn,[["__scopeId","data-v-945cea34"]]),jn={class:"header-left"},Wn={class:"chat-layout"},On={class:"session-sidebar"},Hn={class:"session-sidebar-header"},Yn={class:"session-list"},Xn=["onClick"],qn={class:"session-item-title"},Jn={class:"session-item-meta"},Gn={key:0,class:"session-empty"},Qn={class:"at-panel"},Zn={key:0,class:"at-form"},es={class:"chat-area"},ls={style:{display:"flex","justify-content":"space-between",width:"100%"}},ts={style:{color:"#999","font-size":"12px"}},as={style:{display:"flex","align-items":"center",gap:"8px"}},ns={style:{"font-weight":"600"}},ss={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},os={style:{display:"flex","align-items":"center",gap:"8px"}},is={style:{"font-size":"13px"}},us={style:{"font-size":"13px",color:"#606266"}},ds={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},rs={key:1,class:"relations-list"},cs={class:"relation-info"},vs={class:"relation-name"},fs={class:"relation-tags"},ps={class:"relation-desc"},ms={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ys={style:{display:"flex",gap:"8px","margin-top":"4px"}},gs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},_s={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},ws={style:{"font-size":"12px"}},bs={style:{"font-size":"12px",color:"#606266"}},ks={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},hs={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},xs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Cs={style:{"margin-bottom":"16px",display:"flex","align-items":"center",gap:"8px"}},$s={class:"conv-drawer-body"},Vs={key:0,style:{"text-align":"center","margin-bottom":"12px"}},zs={class:"conv-msg-list"},Ts={class:"conv-msg-meta"},Ss={class:"conv-msg-role"},Ls={key:0,class:"conv-msg-sender"},Is={class:"conv-msg-time"},Ms={class:"conv-msg-content"},Us={key:0,class:"conv-msg-empty"},As={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Ds={class:"channel-card-header"},Fs={class:"channel-card-left"},Ns={class:"channel-card-name"},Bs={key:0,class:"channel-bot-username"},Es={class:"channel-card-actions"},Rs={key:0,class:"channel-card-body"},Ks={class:"channel-info-row"},Ps={class:"channel-info-value"},js={class:"channel-info-row"},Ws={class:"channel-info-value"},Os={key:1,class:"channel-card-body"},Hs={class:"channel-info-row"},Ys={class:"channel-info-value"},Xs={style:{opacity:"0.6","font-size":"11px","margin-left":"3px"}},qs={class:"pending-section"},Js=["onClick"],Gs={key:0,class:"pending-list"},Qs={key:0,style:{"text-align":"center",padding:"12px"}},Zs={class:"pending-user-info"},eo={class:"pending-user-name"},lo={key:0,class:"pending-user-username"},to={class:"pending-user-id"},ao={class:"pending-user-actions"},no={key:2,class:"pending-empty"},so={style:{width:"100%"}},oo={style:{display:"flex",gap:"6px","align-items":"center"}},io={key:0,style:{"margin-top":"6px",display:"flex","align-items":"center",gap:"6px",color:"#909399","font-size":"13px"}},uo={key:1,style:{"margin-top":"6px",color:"#67c23a","font-size":"13px"}},ro={key:2,style:{"margin-top":"6px",color:"#e6a23c","font-size":"13px"}},co={key:3,style:{"margin-top":"6px",color:"#f56c6c","font-size":"13px"}},vo={key:4,style:{"margin-top":"4px"}},fo={class:"channel-url-preview"},po={class:"channel-url-text"},mo={class:"channel-url-preview"},yo={class:"channel-url-text"},go={style:{padding:"20px","max-width":"800px"}},_o={style:{display:"flex",gap:"8px","margin-bottom":"16px","align-items":"flex-start"}},wo={style:{"font-size":"13px"}},bo=50,ko=Zl({__name:"AgentDetailView",setup(pl){const xe=ta(),_=xe.params.id,P=u(null),Ie=u("chat"),le=u(),ce=u([]),Ce=u(!1),J=u();async function $e(){Ce.value=!0;try{const s=await _t.list({agentId:_,limit:50});ce.value=s.data.sessions}catch{}finally{Ce.value=!1}}function y(s){J.value=s.id,le.value?.resumeSession(s.id)}function S(){J.value=void 0,le.value?.startNewSession()}function I(s){J.value=s,setTimeout($e,500)}function O(s){if(!s)return"";const l=Date.now()-s;return l<6e4?"ÂàöÂàö":l<36e5?`${Math.floor(l/6e4)}ÂàÜÂâç`:l<864e5?`${Math.floor(l/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(l/864e5)}Â§©Ââç`}const ye=u(!1),x=u(""),W=u(""),G=u(!1),X=u([]);function Me(){ye.value=!ye.value,ye.value&&!X.value.length&&te()}async function te(){try{const s=await Vl.list();X.value=s.data.filter(l=>l.id!==_)}catch{X.value=[]}}function ge(s){const l=X.value.find(v=>v.id===s);l&&le.value?.fillInput(`@${l.name}: `)}async function ve(){const s=x.value,l=W.value.trim();if(!s||!l)return;const L=X.value.find(al=>al.id===s)?.name??s;G.value=!0;const ne={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${L}Ôºö
${l}`};le.value?.appendMessage(ne);try{const F=(await Vl.message(s,l,_)).data.response,Ee={role:"assistant",text:`‚Üê **${L}** ÂõûÂ§çÔºö

${F}`};le.value?.appendMessage(Ee),W.value="",x.value="",ye.value=!1,m.success(`${L} Â∑≤ÂõûÂ§ç`)}catch(al){const F={role:"system",text:`[Â§±Ë¥•] ËΩ¨ÂèëÂ§±Ë¥•Ôºö${al.response?.data?.error??al.message??"ÁΩëÁªúÈîôËØØ"}`};le.value?.appendMessage(F),m.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{G.value=!1}}const fe=u(""),U=u(""),Pe=u([]),Q=u(""),ke=u(!1),_e=u([]),ie=u(""),Ve=u(""),je=u(!1);function ml(){const s=P.value?.env||{};_e.value=Object.entries(s).map(([l,v])=>({key:l,value:v}))}function we(){const s=ie.value.trim();if(!s)return;const l=_e.value.findIndex(v=>v.key===s);l>=0?_e.value[l].value=Ve.value:_e.value.push({key:s,value:Ve.value}),ie.value="",Ve.value=""}function Ze(s){_e.value.splice(s,1)}async function el(){je.value=!0;try{const s={};for(const{key:v,value:L}of _e.value)v.trim()&&(s[v.trim()]=L);const l=await Vl.update(_,{env:s});P.value=l.data,m.success("ÁéØÂ¢ÉÂèòÈáèÂ∑≤‰øùÂ≠ò")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{je.value=!1}}const j=u({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),ue=u(!1),ze=u(!1);async function yl(){try{const s=await Bl.getConfig(_);j.value=s.data,ll()}catch{}}async function He(){ue.value=!0;try{const s=await Bl.setConfig(_,j.value);j.value=s.data,m.success(j.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ue.value=!1}}async function nl(){ze.value=!0;try{await Bl.consolidate(_),m.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(ll,1e4)}catch{m.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{ze.value=!1}}const Ue=u([]),Ae=u(!1);async function ll(){Ae.value=!0;try{const s=await Bl.runLog(_);Ue.value=s.data||[]}catch{Ue.value=[]}finally{Ae.value=!1}}const De=u([]),Fe=u(""),pe=u(""),Ye=u(!1),g=u([]),d=u(!1),A=u(""),$=u(!1),E=u(""),D=u([]),ae=u(!1),T=u({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function Xe(){try{const s=await mt.get(_);D.value=s.data.parsed||[]}catch{D.value=[]}}function gl(s){const l=X.value.find(v=>v.id===s);T.value.agentName=l?l.name:s}async function sl(){if(!T.value.agentId)return;if(D.value.find(l=>l.agentId===T.value.agentId)){m.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}D.value.push({...T.value}),T.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await qe()}async function _l(s){D.value.splice(s,1),await qe()}function wl(){if(D.value.length===0)return"";const s=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,l=D.value.map(v=>`| ${v.agentId} | ${v.agentName} | ${v.relationType} | ${v.strength} | ${v.desc||""} |`).join(`
`);return s+`
`+l}async function qe(){ae.value=!0;try{await mt.put(_,wl()),m.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ae.value=!1}}function We(s){const l=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let v=0;for(let L=0;L<s.length;L++)v=s.charCodeAt(L)+((v<<5)-v);return l[Math.abs(v)%l.length]??"#409EFF"}function tl(s){return s==="‰∏äÁ∫ß"?"danger":s==="‰∏ãÁ∫ß"?"":s==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function Ne(s){return s==="Ê†∏ÂøÉ"?"danger":s==="Â∏∏Áî®"?"warning":"info"}const Te=u([]),de=u(!1),i=u({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function c(s){return s==="running"?"success":s==="stopped"?"danger":"info"}function M(s){return s==="running"?"ËøêË°å‰∏≠":s==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function Z(s){return s?s<1024?s+" B":s<1048576?(s/1024).toFixed(1)+" KB":(s/1048576).toFixed(1)+" MB":"0 B"}function ol(s){return s?new Date(s).toLocaleString():""}const be=u([]),w=u(!1),ee=u(!1),z=u(""),re=u(""),Be=u(!1),El=u(""),k=u({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""}),R=u({loading:!1,status:""});let Rl=null;function Kl(s){return/^\*+$/.test(s)}async function at(){const s=k.value.botToken;if(!(!s||Kl(s))){R.value={loading:!0,status:""};try{const v=(await Se.checkToken(_,s)).data;v.duplicate?R.value={loading:!1,status:"duplicate",usedBy:v.usedBy,usedByCh:v.usedByCh}:v.valid?(R.value={loading:!1,status:"ok",botName:v.botName},!k.value.name&&v.botName&&(k.value.name=v.botName)):R.value={loading:!1,status:"error",error:v.error||"Token Êó†Êïà"}}catch{R.value={loading:!1,status:"error",error:"ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï"}}}}Ll(()=>k.value.type,s=>{z.value||(re.value=Pl(s))}),Ll(()=>k.value.botToken,s=>{R.value={loading:!1,status:""},Rl&&clearTimeout(Rl),!(!s||Kl(s)||s.length<20||!s.includes(":"))&&(Rl=setTimeout(at,800))});function il(s,l){return l?`${window.location.origin}/chat/${s}/${l}`:`${window.location.origin}/chat/${s}`}function nt(s){navigator.clipboard.writeText(s).then(()=>m.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function ul(){w.value=!0;try{const s=await Se.list(_);be.value=s.data||[]}catch{be.value=[]}finally{w.value=!1}}function Pl(s){return s+"-"+Date.now().toString(36)}function wt(){z.value="";const s=P.value?.name||"";re.value=Pl("telegram"),k.value={type:"telegram",name:s,enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},R.value={loading:!1,status:""},ee.value=!0}function bt(s){z.value=s.id,k.value={type:s.type,name:s.name,enabled:s.enabled,botToken:s.config?.botToken||"",allowedFrom:s.config?.allowedFrom||"",webPassword:"",webWelcome:s.config?.welcomeMsg||"",webTitle:s.config?.title||""},R.value={loading:!1,status:""},ee.value=!0}async function kt(){if(!k.value.name||!k.value.type){m.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}if(R.value.status==="duplicate"){m.error(`Bot Token Â∑≤Ë¢´ÊàêÂëò„Äå${R.value.usedBy}„Äç‰ΩøÁî®ÔºåËØ∑Êõ¥Êç¢`);return}Be.value=!0;try{const s={};if(k.value.type==="telegram"?(k.value.botToken&&(s.botToken=k.value.botToken),k.value.allowedFrom&&(s.allowedFrom=k.value.allowedFrom)):k.value.type==="web"&&(k.value.webPassword&&(s.password=k.value.webPassword),k.value.webWelcome&&(s.welcomeMsg=k.value.webWelcome),k.value.webTitle&&(s.title=k.value.webTitle)),z.value){const l=be.value.map(v=>v.id!==z.value?v:{...v,name:k.value.name,type:k.value.type,enabled:k.value.enabled,config:{...v.config,...s}});await Se.set(_,l)}else{const l={id:re.value||Pl(k.value.type),name:k.value.name,type:k.value.type,enabled:k.value.enabled,config:s,status:"untested"};await Se.set(_,[...be.value,l])}m.success(k.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),ee.value=!1,await ul()}catch(s){m.error(s.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Be.value=!1}}async function ht(){try{await Se.set(_,be.value)}catch(s){m.error(s.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•"),await ul()}}async function xt(s){const l=be.value.filter(v=>v.id!==s.id);try{await Se.set(_,l),be.value=l,m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}async function Ct(s){El.value=s.id;try{const l=await Se.test(_,s.id);l.data.valid?m.success(l.data.botName?`ÊµãËØïÊàêÂäü (@${l.data.botName})`:"ÊµãËØïÊàêÂäü"):m.error(l.data.error||"ÊµãËØïÂ§±Ë¥•"),await ul()}catch{m.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{El.value=""}}const dl=u({}),jl=u({}),bl=u(""),Wl=u("");async function Ml(s){jl.value[s]=!0;try{const l=await Se.listPending(_,s);dl.value[s]=l.data||[]}catch{dl.value[s]=[]}finally{jl.value[s]=!1}}function $t(s){bl.value===s?bl.value="":(bl.value=s,Ml(s))}async function Vt(s,l){Wl.value=`${s}-${l}`;try{await Se.allowUser(_,s,l),m.success(`Áî®Êà∑ ${l} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Ml(s),await ul()}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}finally{Wl.value=""}}async function zt(s,l){try{await Se.dismissUser(_,s,l),m.success("Â∑≤ÂøΩÁï•"),await Ml(s)}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}}async function st(s,l){try{await Sl.confirm(`Á°ÆÂÆöÂ∞ÜÁî®Êà∑ ${l} ‰ªéÁôΩÂêçÂçï‰∏≠ÁßªÈô§ÔºüÁßªÈô§ÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®Ê≠§ Bot„ÄÇ`,"ÁßªÈô§ÁôΩÂêçÂçï",{confirmButtonText:"Á°ÆËÆ§ÁßªÈô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"})}catch{return}try{await Se.removeAllowed(_,s,l),m.success(`Áî®Êà∑ ${l} Â∑≤‰ªéÁôΩÂêçÂçïÁßªÈô§`),await ul()}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}}et(async()=>{try{const v=await Vl.get(_);P.value=v.data}catch{m.error("Âä†ËΩΩ Agent Â§±Ë¥•")}Tt(),St(),Xe(),te(),yl(),Ul(),ul(),ml(),await $e();const s=xe.query.tab;s&&(Ie.value=s);const l=xe.query.resumeSession;l&&(J.value=l,await new Promise(L=>setTimeout(L,100)),le.value?.resumeSession(l),ce.value.find(L=>L.id===l)||(J.value=l))});async function Tt(){try{const[s,l]=await Promise.all([q.read(_,"IDENTITY.md"),q.read(_,"SOUL.md")]);fe.value=s.data?.content||"",U.value=l.data?.content||""}catch{}kl()}async function ot(s,l){try{await q.write(_,s,l),m.success(`${s} Â∑≤‰øùÂ≠ò`)}catch{m.error(`‰øùÂ≠ò ${s} Â§±Ë¥•`)}}async function St(){try{const s=await da.list();if(Pe.value=s.data||[],P.value?.modelId)Q.value=P.value.modelId;else{const l=Pe.value.find(v=>v.provider+"/"+v.model===P.value?.model||v.id===P.value?.model);Q.value=l?.id||""}}catch{}}async function Lt(){if(Q.value){ke.value=!0;try{const s=await Vl.update(_,{modelId:Q.value});P.value=s.data,m.success("Ê®°ÂûãÂ∑≤Êõ¥Êñ∞")}catch{m.error("Êõ¥Êñ∞Â§±Ë¥•")}finally{ke.value=!1}}}async function kl(){try{const s=await zl.tree(_);De.value=s.data||[]}catch{De.value=[]}}async function It(s){if(!s.isDir){Fe.value=s.path,g.value=s.path.split("/");try{const l=await zl.readFile(_,s.path);pe.value=l.data?.content||""}catch{pe.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function Mt(){if(Fe.value){Ye.value=!0;try{await zl.writeFile(_,Fe.value,pe.value),m.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),kl()}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ye.value=!1}}}async function Ut(){const s=A.value.trim();if(!s){m.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await zl.writeFile(_,s,`# ${s.split("/").pop()?.replace(".md","")||"New File"}

`),m.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),d.value=!1,A.value="",kl(),Fe.value=s,g.value=s.split("/"),pe.value=`# ${s.split("/").pop()?.replace(".md","")||"New File"}

`}catch{m.error("ÂàõÂª∫Â§±Ë¥•")}}async function At(){const s=E.value.trim();if(!s){m.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await zl.dailyLog(_,s),m.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),$.value=!1,E.value="",kl()}catch{m.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Ul(){try{const s=await Tl.list(_);Te.value=s.data||[]}catch{}}async function Dt(){try{await Tl.create({name:i.value.name,enabled:i.value.enabled,agentId:_,schedule:{kind:"cron",expr:i.value.expr,tz:i.value.tz},payload:{kind:"agentTurn",message:i.value.message},delivery:{mode:"announce"}}),m.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),de.value=!1,Ul()}catch(s){m.error(s.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Ft(s){try{await Tl.update(s.id,s)}catch{m.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function it(s){try{await Tl.run(s.id),m.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(Ul,2e3)}catch{m.error("ËøêË°åÂ§±Ë¥•")}}async function Nt(s){try{await Tl.delete(s.id),m.success("Â∑≤Âà†Èô§"),Ul()}catch{m.error("Âà†Èô§Â§±Ë¥•")}}const Al=u(!1),Ol=u([]),Hl=u(!1),Yl=u(""),Je=u([]),Xl=u(0),Dl=u(0),Bt=fl(()=>Je.value.length<Xl.value),hl=u(!1);async function ut(){Al.value=!0;try{const s=await yt.list(_);Ol.value=s.data}catch{m.error("Âä†ËΩΩÂØπËØùÊ∏†ÈÅìÂ§±Ë¥•")}finally{Al.value=!1}}async function Et(s){Yl.value=s.channelId,Je.value=[],Xl.value=0,Dl.value=0,Hl.value=!0,await dt()}async function dt(){hl.value=!0;try{const l=(await yt.messages(_,Yl.value,{limit:bo,offset:Dl.value})).data;Xl.value=l.total,Dl.value===0?Je.value=l.messages:Je.value=[...l.messages,...Je.value],Dl.value+=l.messages.length}catch{m.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•")}finally{hl.value=!1}}async function Rt(){await dt()}return Ll(Ie,s=>{s==="convlogs"&&Ol.value.length===0&&ut()}),(s,l)=>{const v=b("el-button"),L=b("el-tag"),ne=b("el-text"),al=b("el-header"),F=b("el-option"),Ee=b("el-select"),H=b("el-input"),Re=b("el-tab-pane"),N=b("el-form-item"),rl=b("el-form"),Ke=b("el-card"),me=b("el-col"),cl=b("el-row"),rt=b("el-badge"),Y=b("el-table-column"),xl=b("el-table"),Cl=b("el-switch"),Kt=b("el-input-number"),se=b("el-icon"),Pt=b("el-tree"),ql=b("el-empty"),ct=b("el-breadcrumb-item"),jt=b("el-breadcrumb"),Fl=b("el-dialog"),Wt=b("el-drawer"),Ot=b("el-link"),Ht=b("CircleCheck"),Yt=b("Warning"),Xt=b("CircleClose"),vt=b("InfoFilled"),ft=b("Link"),qt=b("el-tabs"),Jt=b("el-main"),Gt=b("el-container"),Jl=ua("loading");return o(),C(Gt,{class:"agent-detail"},{default:t(()=>[e(al,{class:"detail-header"},{default:t(()=>[n("div",jn,[e(v,{icon:B(aa),onClick:l[0]||(l[0]=a=>s.$router.push("/agents")),circle:""},null,8,["icon"]),n("h2",null,p(P.value?.name||"..."),1),e(L,{type:c(P.value?.status)},{default:t(()=>[r(p(M(P.value?.status)),1)]),_:1},8,["type"])]),e(ne,{type:"info"},{default:t(()=>[r(p(P.value?.model),1)]),_:1})]),_:1}),e(Jt,null,{default:t(()=>[e(qt,{modelValue:Ie.value,"onUpdate:modelValue":l[47]||(l[47]=a=>Ie.value=a),type:"border-card"},{default:t(()=>[e(Re,{label:"ÂØπËØù",name:"chat"},{default:t(()=>[n("div",Wn,[n("div",On,[n("div",Hn,[l[49]||(l[49]=n("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),e(v,{size:"small",type:"primary",plain:"",onClick:S,icon:B(Nl)},{default:t(()=>[...l[48]||(l[48]=[r("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),Oe((o(),f("div",Yn,[(o(!0),f(K,null,oe(ce.value,a=>(o(),f("div",{key:a.id,class:he(["session-item",{active:J.value===a.id}]),onClick:h=>y(a)},[n("div",qn,p(a.title||"Êñ∞ÂØπËØù"),1),n("div",Jn,[n("span",null,p(O(a.lastAt)),1),e(L,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[r(p(a.messageCount)+" Êù° ",1)]),_:2},1024),a.tokenEstimate>6e4?(o(),C(L,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[r("~"+p(Math.round(a.tokenEstimate/1e3))+"k",1)]),_:2},1024)):V("",!0)])],10,Xn))),128)),!Ce.value&&!ce.value.length?(o(),f("div",Gn," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):V("",!0)])),[[Jl,Ce.value]]),n("div",Qn,[e(v,{size:"small",plain:"",class:"at-toggle-btn",onClick:Me},{default:t(()=>[...l[50]||(l[50]=[n("span",{class:"at-icon"},"@",-1),r(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),ye.value?(o(),f("div",Zn,[e(Ee,{modelValue:x.value,"onUpdate:modelValue":l[1]||(l[1]=a=>x.value=a),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:ge},{default:t(()=>[(o(!0),f(K,null,oe(X.value,a=>(o(),C(F,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(H,{modelValue:W.value,"onUpdate:modelValue":l[2]||(l[2]=a=>W.value=a),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),e(v,{type:"primary",size:"small",style:{width:"100%"},loading:G.value,disabled:!x.value||!W.value.trim(),onClick:ve},{default:t(()=>[...l[51]||(l[51]=[r(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):V("",!0)])]),n("div",es,[e(lt,{ref_key:"aiChatRef",ref:le,"agent-id":B(_),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${P.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:I},null,8,["agent-id","welcome-message"])])])]),_:1}),e(Re,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:t(()=>[e(Pn,{"agent-id":B(_),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Re,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:t(()=>[e(Ke,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[52]||(l[52]=[n("span",{style:{"font-weight":"600"}},"Âü∫Êú¨ËÆæÁΩÆ",-1)])]),default:t(()=>[e(rl,{"label-width":"80px",size:"default"},{default:t(()=>[e(N,{label:"‰ΩøÁî®Ê®°Âûã"},{default:t(()=>[e(Ee,{modelValue:Q.value,"onUpdate:modelValue":l[3]||(l[3]=a=>Q.value=a),placeholder:"ÈÄâÊã©Ê®°Âûã",style:{width:"280px","margin-right":"10px"}},{default:t(()=>[(o(!0),f(K,null,oe(Pe.value,a=>(o(),C(F,{key:a.id,label:a.name||a.model,value:a.id},{default:t(()=>[n("div",ls,[n("span",null,p(a.name||a.model),1),n("span",ts,p(a.provider),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(v,{type:"primary",loading:ke.value,onClick:Lt,disabled:!Q.value},{default:t(()=>[...l[53]||(l[53]=[r("‰øùÂ≠ò",-1)])]),_:1},8,["loading","disabled"]),P.value?.model?(o(),C(ne,{key:0,type:"info",style:{"margin-left":"12px","font-size":"12px"}},{default:t(()=>[r(" ÂΩìÂâçÔºö"+p(P.value.model),1)]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1}),e(cl,{gutter:20},{default:t(()=>[e(me,{span:12},{default:t(()=>[e(Ke,{header:"IDENTITY.md"},{default:t(()=>[e(H,{modelValue:fe.value,"onUpdate:modelValue":l[4]||(l[4]=a=>fe.value=a),type:"textarea",rows:15,onBlur:l[5]||(l[5]=a=>ot("IDENTITY.md",fe.value))},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{span:12},{default:t(()=>[e(Ke,{header:"SOUL.md"},{default:t(()=>[e(H,{modelValue:U.value,"onUpdate:modelValue":l[6]||(l[6]=a=>U.value=a),type:"textarea",rows:15,onBlur:l[7]||(l[7]=a=>ot("SOUL.md",U.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Re,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:t(()=>[e(cl,{gutter:20},{default:t(()=>[e(me,{span:14},{default:t(()=>[e(Ke,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[54]||(l[54]=[n("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:t(()=>[e(rl,{model:T.value,"label-position":"top",size:"default"},{default:t(()=>[e(cl,{gutter:12},{default:t(()=>[e(me,{span:10},{default:t(()=>[e(N,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:t(()=>[e(Ee,{modelValue:T.value.agentId,"onUpdate:modelValue":l[8]||(l[8]=a=>T.value.agentId=a),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:gl},{default:t(()=>[(o(!0),f(K,null,oe(X.value,a=>(o(),C(F,{key:a.id,label:a.name,value:a.id},{default:t(()=>[n("div",as,[n("div",{style:Le([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:We(a.id)}])},p(a.name.charAt(0)),5),n("span",null,p(a.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(me,{span:7},{default:t(()=>[e(N,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:t(()=>[e(Ee,{modelValue:T.value.relationType,"onUpdate:modelValue":l[9]||(l[9]=a=>T.value.relationType=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),e(F,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),e(F,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),e(F,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(me,{span:7},{default:t(()=>[e(N,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:t(()=>[e(Ee,{modelValue:T.value.strength,"onUpdate:modelValue":l[10]||(l[10]=a=>T.value.strength=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),e(F,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),e(F,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(cl,{gutter:12},{default:t(()=>[e(me,{span:18},{default:t(()=>[e(N,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:t(()=>[e(H,{modelValue:T.value.desc,"onUpdate:modelValue":l[11]||(l[11]=a=>T.value.desc=a),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{span:6},{default:t(()=>[e(N,{label:" "},{default:t(()=>[e(v,{type:"primary",style:{width:"100%"},disabled:!T.value.agentId||!T.value.relationType||!T.value.strength,loading:ae.value,onClick:sl},{default:t(()=>[...l[55]||(l[55]=[r(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Ke,null,{header:t(()=>[n("span",ns,[l[56]||(l[56]=r("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),e(rt,{value:D.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:t(()=>[D.value.length===0?(o(),f("div",ss," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(o(),C(xl,{key:1,data:D.value,size:"small",style:{width:"100%"}},{default:t(()=>[e(Y,{label:"ÊàêÂëò","min-width":"120"},{default:t(({row:a})=>[n("div",os,[n("div",{style:Le([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:We(a.agentId)}])},p(a.agentName.charAt(0)),5),n("span",is,p(a.agentName),1)])]),_:1}),e(Y,{label:"Á±ªÂûã",width:"100"},{default:t(({row:a})=>[e(L,{type:tl(a.relationType),size:"small"},{default:t(()=>[r(p(a.relationType),1)]),_:2},1032,["type"])]),_:1}),e(Y,{label:"Á®ãÂ∫¶",width:"80"},{default:t(({row:a})=>[e(L,{type:Ne(a.strength),size:"small",effect:"plain"},{default:t(()=>[r(p(a.strength),1)]),_:2},1032,["type"])]),_:1}),e(Y,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:t(({row:a})=>[n("span",us,p(a.desc||"‚Äî"),1)]),_:1}),e(Y,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:t(({$index:a})=>[e(v,{type:"danger",link:"",size:"small",onClick:h=>_l(a)},{default:t(()=>[...l[57]||(l[57]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),e(me,{span:10},{default:t(()=>[e(Ke,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:t(()=>[D.value.length===0?(o(),f("div",ds," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(o(),f("div",rs,[(o(!0),f(K,null,oe(D.value,a=>(o(),f("div",{key:a.agentId,class:"relation-card"},[n("div",{class:"relation-avatar",style:Le({background:We(a.agentId)})},p(a.agentName.charAt(0).toUpperCase()),5),n("div",cs,[n("div",vs,p(a.agentName),1),n("div",fs,[e(L,{type:tl(a.relationType),size:"small"},{default:t(()=>[r(p(a.relationType),1)]),_:2},1032,["type"]),e(L,{type:Ne(a.strength),size:"small",effect:"plain"},{default:t(()=>[r(p(a.strength),1)]),_:2},1032,["type"])]),n("div",ps,p(a.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(Re,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:t(()=>[e(Ke,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[n("div",ms,[l[58]||(l[58]=n("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),e(Cl,{modelValue:j.value.enabled,"onUpdate:modelValue":l[12]||(l[12]=a=>j.value.enabled=a),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:He},null,8,["modelValue"])])]),default:t(()=>[e(rl,{model:j.value,"label-position":"top",size:"small",disabled:!j.value.enabled},{default:t(()=>[e(cl,{gutter:16},{default:t(()=>[e(me,{span:6},{default:t(()=>[e(N,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:t(()=>[e(Ee,{modelValue:j.value.schedule,"onUpdate:modelValue":l[13]||(l[13]=a=>j.value.schedule=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),e(F,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),e(F,{label:"ÊØèÂ§©",value:"daily"}),e(F,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(me,{span:5},{default:t(()=>[e(N,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:t(()=>[e(Kt,{modelValue:j.value.keepTurns,"onUpdate:modelValue":l[14]||(l[14]=a=>j.value.keepTurns=a),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{span:13},{default:t(()=>[e(N,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:t(()=>[e(H,{modelValue:j.value.focusHint,"onUpdate:modelValue":l[15]||(l[15]=a=>j.value.focusHint=a),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n("div",ys,[e(v,{type:"primary",size:"small",loading:ue.value,onClick:He},{default:t(()=>[...l[59]||(l[59]=[r(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),e(v,{size:"small",loading:ze.value,onClick:nl},{default:t(()=>[...l[60]||(l[60]=[r(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),e(ne,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:t(()=>[r(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+p(j.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),e(Ke,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[n("div",gs,[l[62]||(l[62]=n("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),e(v,{size:"small",text:"",onClick:ll,loading:Ae.value},{default:t(()=>[...l[61]||(l[61]=[r("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:t(()=>[Ue.value.length===0&&!Ae.value?(o(),f("div",_s," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(o(),C(xl,{key:1,data:Ue.value.slice(0,20),size:"small"},{default:t(()=>[e(Y,{label:"Êó∂Èó¥",width:"160"},{default:t(({row:a})=>[n("span",ws,p(ol(a.timestamp)),1)]),_:1}),e(Y,{label:"Áä∂ÊÄÅ",width:"72"},{default:t(({row:a})=>[e(L,{type:a.status==="ok"?"success":"danger",size:"small"},{default:t(()=>[r(p(a.status),1)]),_:2},1032,["type"])]),_:1}),e(Y,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[n("span",bs,p(a.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),n("div",ks,[e(v,{type:"primary",size:"small",onClick:l[16]||(l[16]=a=>d.value=!0)},{default:t(()=>[e(se,null,{default:t(()=>[e(B(Nl))]),_:1}),l[63]||(l[63]=r(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),e(v,{size:"small",onClick:l[17]||(l[17]=a=>$.value=!0)},{default:t(()=>[e(se,null,{default:t(()=>[e(B(na))]),_:1}),l[64]||(l[64]=r(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),e(v,{size:"small",onClick:kl},{default:t(()=>[e(se,null,{default:t(()=>[e(B(Ql))]),_:1}),l[65]||(l[65]=r(" Âà∑Êñ∞ ",-1))]),_:1})]),e(cl,{gutter:16},{default:t(()=>[e(me,{span:7},{default:t(()=>[e(Ke,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:t(()=>[e(Pt,{data:De.value,props:{label:"name",children:"children",isLeaf:a=>!a.isDir},onNodeClick:It,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:t(({data:a})=>[n("span",hs,[a.isDir?(o(),C(se,{key:0,style:{color:"#E6A23C"}},{default:t(()=>[e(B(sa))]),_:1})):(o(),C(se,{key:1,style:{color:"#409EFF"}},{default:t(()=>[e(B(oa))]),_:1})),n("span",null,p(a.name),1),!a.isDir&&a.size?(o(),C(ne,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:t(()=>[r(p(Z(a.size)),1)]),_:2},1024)):V("",!0)])]),_:1},8,["data","props"]),De.value.length===0?(o(),C(ql,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):V("",!0)]),_:1})]),_:1}),e(me,{span:17},{default:t(()=>[e(Ke,{shadow:"hover"},{header:t(()=>[n("div",xs,[e(jt,{separator:"/"},{default:t(()=>[e(ct,null,{default:t(()=>[...l[66]||(l[66]=[r("memory",-1)])]),_:1}),(o(!0),f(K,null,oe(g.value,(a,h)=>(o(),C(ct,{key:h},{default:t(()=>[r(p(a),1)]),_:2},1024))),128))]),_:1}),Fe.value?(o(),C(v,{key:0,type:"primary",size:"small",onClick:Mt,loading:Ye.value},{default:t(()=>[...l[67]||(l[67]=[r("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):V("",!0)])]),default:t(()=>[Fe.value?(o(),C(H,{key:0,modelValue:pe.value,"onUpdate:modelValue":l[18]||(l[18]=a=>pe.value=a),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(o(),C(ql,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),e(Fl,{modelValue:d.value,"onUpdate:modelValue":l[21]||(l[21]=a=>d.value=a),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:t(()=>[e(v,{onClick:l[20]||(l[20]=a=>d.value=!1)},{default:t(()=>[...l[69]||(l[69]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Ut},{default:t(()=>[...l[70]||(l[70]=[r("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(rl,{"label-width":"80px"},{default:t(()=>[e(N,{label:"Ë∑ØÂæÑ"},{default:t(()=>[e(H,{modelValue:A.value,"onUpdate:modelValue":l[19]||(l[19]=a=>A.value=a),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),e(ne,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:t(()=>[...l[68]||(l[68]=[r("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Fl,{modelValue:$.value,"onUpdate:modelValue":l[24]||(l[24]=a=>$.value=a),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:t(()=>[e(v,{onClick:l[23]||(l[23]=a=>$.value=!1)},{default:t(()=>[...l[71]||(l[71]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:At},{default:t(()=>[...l[72]||(l[72]=[r("Êèê‰∫§",-1)])]),_:1})]),default:t(()=>[e(H,{modelValue:E.value,"onUpdate:modelValue":l[22]||(l[22]=a=>E.value=a),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(Re,{label:"ÊäÄËÉΩ",name:"skills"},{default:t(()=>[e(Za,{"agent-id":B(_),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Re,{label:"ÂéÜÂè≤ÂØπËØù",name:"convlogs"},{default:t(()=>[n("div",Cs,[l[73]||(l[73]=n("span",{style:{"font-weight":"600","font-size":"15px"}},"Ê∏†ÈÅìÂØπËØùËÆ∞ÂΩï",-1)),e(v,{size:"small",icon:B(Ql),circle:"",onClick:ut,loading:Al.value},null,8,["icon","loading"])]),Oe((o(),C(xl,{data:Ol.value,stripe:"","empty-text":"ÊöÇÊó†ÂØπËØùËÆ∞ÂΩï"},{default:t(()=>[e(Y,{label:"Ê∏†ÈÅì","min-width":"200"},{default:t(({row:a})=>[n("span",null,p(a.channelType==="telegram"?"Telegram":"Web")+" "+p(a.channelId),1)]),_:1}),e(Y,{label:"Ê∂àÊÅØÊï∞",width:"100"},{default:t(({row:a})=>[r(p(a.messageCount)+" Êù°",1)]),_:1}),e(Y,{label:"ÊúÄÂêéÊ¥ªË∑É",width:"180"},{default:t(({row:a})=>[r(p(a.lastAt?new Date(a.lastAt).toLocaleString("zh-CN"):"-"),1)]),_:1}),e(Y,{label:"Êìç‰Ωú",width:"100"},{default:t(({row:a})=>[e(v,{size:"small",type:"primary",plain:"",onClick:h=>Et(a)},{default:t(()=>[...l[74]||(l[74]=[r("Êü•Áúã",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Jl,Al.value]]),e(Wt,{modelValue:Hl.value,"onUpdate:modelValue":l[25]||(l[25]=a=>Hl.value=a),title:Yl.value+" ÂØπËØùËÆ∞ÂΩï",direction:"rtl",size:"520px","destroy-on-close":!1},{default:t(()=>[n("div",$s,[Bt.value?(o(),f("div",Vs,[e(v,{size:"small",plain:"",loading:hl.value,onClick:Rt},{default:t(()=>[...l[75]||(l[75]=[r("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):V("",!0),Oe((o(),f("div",zs,[(o(!0),f(K,null,oe(Je.value,(a,h)=>(o(),f("div",{key:h,class:he(["conv-msg-item",a.role==="user"?"conv-msg-user":"conv-msg-assistant"])},[n("div",Ts,[n("span",Ss,p(a.role==="user"?"Áî®Êà∑":"Âä©Êâã"),1),a.sender?(o(),f("span",Ls,p(a.sender),1)):V("",!0),n("span",Is,p(a.ts?new Date(a.ts).toLocaleString("zh-CN"):""),1)]),n("div",Ms,p(a.content),1)],2))),128)),!hl.value&&Je.value.length===0?(o(),f("div",Us," ÊöÇÊó†Ê∂àÊÅØËÆ∞ÂΩï ")):V("",!0)])),[[Jl,hl.value&&Je.value.length===0]])])]),_:1},8,["modelValue","title"])]),_:1}),e(Re,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:t(()=>[e(v,{type:"primary",onClick:l[26]||(l[26]=a=>de.value=!0),style:{"margin-bottom":"16px"}},{default:t(()=>[e(se,null,{default:t(()=>[e(B(Nl))]),_:1}),l[76]||(l[76]=r(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),e(xl,{data:Te.value,stripe:""},{default:t(()=>[e(Y,{prop:"name",label:"ÂêçÁß∞"}),e(Y,{label:"Ë∞ÉÂ∫¶"},{default:t(({row:a})=>[r(p(a.schedule?.expr)+" ("+p(a.schedule?.tz)+")",1)]),_:1}),e(Y,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:t(({row:a})=>[a.state?.lastRunAtMs?(o(),f(K,{key:0},[e(L,{type:a.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:t(()=>[r(p(a.state?.lastStatus),1)]),_:2},1032,["type"]),e(ne,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:t(()=>[r(p(ol(a.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(o(),C(ne,{key:1,type:"info",size:"small"},{default:t(()=>[...l[77]||(l[77]=[r("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),e(Y,{label:"ÂêØÁî®",width:"80"},{default:t(({row:a})=>[e(Cl,{modelValue:a.enabled,"onUpdate:modelValue":h=>a.enabled=h,onChange:h=>Ft(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(Y,{label:"Êìç‰Ωú",width:"220"},{default:t(({row:a})=>[a.payload?.message==="__MEMORY_CONSOLIDATE__"?(o(),f(K,{key:0},[e(L,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:t(()=>[...l[78]||(l[78]=[r("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),e(v,{size:"small",onClick:h=>it(a)},{default:t(()=>[...l[79]||(l[79]=[r("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(o(),f(K,{key:1},[e(v,{size:"small",onClick:h=>it(a)},{default:t(()=>[...l[80]||(l[80]=[r("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),e(v,{size:"small",type:"danger",onClick:h=>Nt(a)},{default:t(()=>[...l[81]||(l[81]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),e(Fl,{modelValue:de.value,"onUpdate:modelValue":l[33]||(l[33]=a=>de.value=a),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:t(()=>[e(v,{onClick:l[32]||(l[32]=a=>de.value=!1)},{default:t(()=>[...l[82]||(l[82]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Dt},{default:t(()=>[...l[83]||(l[83]=[r("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(rl,{model:i.value,"label-width":"100px"},{default:t(()=>[e(N,{label:"ÂêçÁß∞"},{default:t(()=>[e(H,{modelValue:i.value.name,"onUpdate:modelValue":l[27]||(l[27]=a=>i.value.name=a)},null,8,["modelValue"])]),_:1}),e(N,{label:"Cron Ë°®ËææÂºè"},{default:t(()=>[e(H,{modelValue:i.value.expr,"onUpdate:modelValue":l[28]||(l[28]=a=>i.value.expr=a),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),e(N,{label:"Êó∂Âå∫"},{default:t(()=>[e(Ee,{modelValue:i.value.tz,"onUpdate:modelValue":l[29]||(l[29]=a=>i.value.tz=a)},{default:t(()=>[e(F,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(F,{label:"UTC",value:"UTC"}),e(F,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),e(N,{label:"Ê∂àÊÅØ"},{default:t(()=>[e(H,{modelValue:i.value.message,"onUpdate:modelValue":l[30]||(l[30]=a=>i.value.message=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(N,{label:"ÂêØÁî®"},{default:t(()=>[e(Cl,{modelValue:i.value.enabled,"onUpdate:modelValue":l[31]||(l[31]=a=>i.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),e(Re,{label:"Ê∏†ÈÅì",name:"channels"},{default:t(()=>[n("div",As,[e(ne,{type:"info",size:"small"},{default:t(()=>[...l[84]||(l[84]=[r("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),e(v,{type:"primary",size:"small",onClick:wt},{default:t(()=>[e(se,null,{default:t(()=>[e(B(Nl))]),_:1}),l[85]||(l[85]=r(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(o(!0),f(K,null,oe(be.value,a=>(o(),f("div",{key:a.id,class:"channel-card"},[n("div",Ds,[n("div",Fs,[e(L,{size:"small",style:{"margin-right":"8px"}},{default:t(()=>[r(p(a.type),1)]),_:2},1024),n("span",Ns,p(a.name),1),a.config?.botName?(o(),f("span",Bs,"@"+p(a.config.botName),1)):V("",!0),e(L,{type:a.status==="ok"?"success":a.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:t(()=>[r(p(a.status==="ok"?"‚úì Ê≠£Â∏∏":a.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),n("div",Es,[e(Cl,{modelValue:a.enabled,"onUpdate:modelValue":h=>a.enabled=h,size:"small",onChange:ht,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),e(v,{size:"small",onClick:h=>Ct(a),loading:El.value===a.id},{default:t(()=>[...l[86]||(l[86]=[r("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),e(v,{size:"small",onClick:h=>bt(a)},{default:t(()=>[...l[87]||(l[87]=[r("ÁºñËæë",-1)])]),_:1},8,["onClick"]),e(v,{size:"small",type:"danger",plain:"",onClick:h=>xt(a)},{default:t(()=>[...l[88]||(l[88]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),a.type==="web"?(o(),f("div",Rs,[n("div",Ks,[l[90]||(l[90]=n("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),n("span",Ps,[e(Ot,{href:il(B(_),a.id),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:t(()=>[r(p(il(B(_),a.id)),1)]),_:2},1032,["href"]),e(v,{size:"small",link:"",style:{"margin-left":"8px"},onClick:h=>nt(il(B(_),a.id))},{default:t(()=>[...l[89]||(l[89]=[r("Â§çÂà∂",-1)])]),_:1},8,["onClick"])])]),n("div",js,[l[91]||(l[91]=n("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),n("span",Ws,[e(L,{size:"small",type:a.config?.password?"warning":"info",effect:"plain"},{default:t(()=>[r(p(a.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):V("",!0),a.type==="telegram"?(o(),f("div",Os,[n("div",Hs,[l[93]||(l[93]=n("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),n("span",Ys,[a.allowedFromUsers?.length?(o(!0),f(K,{key:0},oe(a.allowedFromUsers,h=>(o(),C(L,{key:h.id,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Gl=>st(a.id,h.id)},{default:t(()=>[r(p(h.username?"@"+h.username:h.firstName||String(h.id))+" ",1),n("span",Xs,"("+p(h.id)+")",1)]),_:2},1032,["onClose"]))),128)):a.config?.allowedFrom?(o(!0),f(K,{key:1},oe(a.config.allowedFrom.split(","),h=>(o(),C(L,{key:h,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Gl=>st(a.id,Number(h.trim()))},{default:t(()=>[r(p(h.trim()),1)]),_:2},1032,["onClose"]))),128)):(o(),C(ne,{key:2,type:"warning",size:"small"},{default:t(()=>[...l[92]||(l[92]=[r("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),n("div",qs,[n("div",{class:"pending-section-header",onClick:h=>$t(a.id)},[l[95]||(l[95]=n("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),e(rt,{value:(dl.value[a.id]||[]).length,hidden:!(dl.value[a.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),e(v,{size:"small",link:"",onClick:Ge(h=>Ml(a.id),["stop"]),style:{"margin-left":"8px"}},{default:t(()=>[...l[94]||(l[94]=[r("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),e(se,{style:Le([{"margin-left":"4px",transition:"transform 0.2s"},{transform:bl.value===a.id?"rotate(180deg)":""}])},{default:t(()=>[e(B(ia))]),_:1},8,["style"])],8,Js),bl.value===a.id?(o(),f("div",Gs,[jl.value[a.id]?(o(),f("div",Qs,[e(ne,{type:"info",size:"small"},{default:t(()=>[...l[96]||(l[96]=[r("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(dl.value[a.id]||[]).length?(o(!0),f(K,{key:1},oe(dl.value[a.id],h=>(o(),f("div",{key:h.id,class:"pending-user-row"},[n("div",Zs,[n("span",eo,p(h.firstName||"Êú™Áü•"),1),h.username?(o(),f("span",lo,"@"+p(h.username),1)):V("",!0),n("span",to,"ID: "+p(h.id),1),e(ne,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[r(p(O(h.lastSeen)),1)]),_:2},1024)]),n("div",ao,[e(v,{size:"small",type:"success",plain:"",onClick:Gl=>Vt(a.id,h.id),loading:Wl.value===`${a.id}-${h.id}`},{default:t(()=>[...l[97]||(l[97]=[r("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),e(v,{size:"small",type:"danger",plain:"",onClick:Gl=>zt(a.id,h.id)},{default:t(()=>[...l[98]||(l[98]=[r("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(o(),f("div",no," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):V("",!0)])])):V("",!0)]))),128)),!w.value&&!be.value.length?(o(),C(ql,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):V("",!0),e(Fl,{modelValue:ee.value,"onUpdate:modelValue":l[44]||(l[44]=a=>ee.value=a),title:z.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:t(()=>[e(v,{onClick:l[43]||(l[43]=a=>ee.value=!1)},{default:t(()=>[...l[108]||(l[108]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:kt,loading:Be.value},{default:t(()=>[...l[109]||(l[109]=[r("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(rl,{model:k.value,"label-width":"120px"},{default:t(()=>[e(N,{label:"Á±ªÂûã",required:""},{default:t(()=>[e(Ee,{modelValue:k.value.type,"onUpdate:modelValue":l[34]||(l[34]=a=>k.value.type=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"Telegram",value:"telegram"}),e(F,{label:"Web ËÅäÂ§©È°µ",value:"web"}),e(F,{label:"iMessage",value:"imessage"}),e(F,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),e(N,{label:"ÂêçÁß∞",required:""},{default:t(()=>[e(H,{modelValue:k.value.name,"onUpdate:modelValue":l[35]||(l[35]=a=>k.value.name=a),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),k.value.type==="telegram"?(o(),f(K,{key:0},[e(N,{label:"Bot Token",required:""},{default:t(()=>[n("div",so,[n("div",oo,[e(H,{modelValue:k.value.botToken,"onUpdate:modelValue":l[36]||(l[36]=a=>k.value.botToken=a),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ",style:{flex:"1"},status:R.value.status==="error"?"error":R.value.status==="ok"?"success":""},null,8,["modelValue","status"]),e(v,{size:"default",loading:R.value.loading,type:R.value.status==="ok"?"success":R.value.status==="error"?"danger":"default",onClick:at,disabled:!k.value.botToken||Kl(k.value.botToken)},{default:t(()=>[...l[99]||(l[99]=[r("È™åËØÅ",-1)])]),_:1},8,["loading","type","disabled"])]),R.value.loading?(o(),f("div",io,[e(se,{class:"is-loading"},{default:t(()=>[e(B(Ql))]),_:1}),l[100]||(l[100]=r(" Ê≠£Âú®È™åËØÅ Token‚Ä¶ ",-1))])):R.value.status==="ok"?(o(),f("div",uo,[e(se,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Ht)]),_:1}),l[101]||(l[101]=r("Token ÊúâÊïàÔºåBot ÂêçÁß∞Ôºö",-1)),n("b",null,"@"+p(R.value.botName),1)])):R.value.status==="duplicate"?(o(),f("div",ro,[e(se,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Yt)]),_:1}),l[102]||(l[102]=r("Ê≠§ Token Â∑≤Ë¢´ÊàêÂëò„Äå",-1)),n("b",null,p(R.value.usedBy),1),r("„ÄçÁöÑÊ∏†ÈÅì„Äå"+p(R.value.usedByCh)+"„Äç‰ΩøÁî® ",1)])):R.value.status==="error"?(o(),f("div",co,[e(se,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Xt)]),_:1}),r(p(R.value.error),1)])):(o(),f("div",vo,[e(ne,{type:"info",size:"small"},{default:t(()=>[e(se,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(vt)]),_:1}),l[103]||(l[103]=r("ËæìÂÖ•ÂÆåÊàêÂêéËá™Âä®È™åËØÅÔºå‰πüÂèØÁÇπÂè≥‰æß„ÄåÈ™åËØÅ„ÄçÊåâÈíÆÊâãÂä®Ëß¶Âèë",-1))]),_:1})]))])]),_:1}),e(N,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:t(()=>[e(H,{modelValue:k.value.allowedFrom,"onUpdate:modelValue":l[37]||(l[37]=a=>k.value.allowedFrom=a),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),e(ne,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[e(se,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(vt)]),_:1}),l[104]||(l[104]=r("ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1))]),_:1})]),_:1})],64)):V("",!0),k.value.type==="web"?(o(),f(K,{key:1},[z.value?(o(),C(N,{key:0,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[n("div",fo,[e(se,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(ft)]),_:1}),n("span",po,p(il(B(_),z.value)),1),e(v,{size:"small",link:"",onClick:l[38]||(l[38]=a=>nt(il(B(_),z.value)))},{default:t(()=>[...l[105]||(l[105]=[r("Â§çÂà∂",-1)])]),_:1})])]),_:1})):V("",!0),z.value?V("",!0):(o(),C(N,{key:1,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[n("div",mo,[e(se,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(ft)]),_:1}),n("span",yo,p(il(B(_),re.value)),1),e(L,{size:"small",type:"info",effect:"plain"},{default:t(()=>[...l[106]||(l[106]=[r("‰øùÂ≠òÂêéÁîüÊïà",-1)])]),_:1})]),e(ne,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...l[107]||(l[107]=[r(" ÊØè‰∏™ Web Ê∏†ÈÅìÊúâÁã¨Á´ãÈìæÊé•ÔºåÂèØÂêåÊó∂ÂºÄÊîæÂ§ö‰∏™ÂÖ•Âè£ ",-1)])]),_:1})]),_:1})),e(N,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:t(()=>[e(H,{modelValue:k.value.webPassword,"onUpdate:modelValue":l[39]||(l[39]=a=>k.value.webPassword=a),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),e(N,{label:"Ê¨¢ËøéËØ≠"},{default:t(()=>[e(H,{modelValue:k.value.webWelcome,"onUpdate:modelValue":l[40]||(l[40]=a=>k.value.webWelcome=a),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),e(N,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:t(()=>[e(H,{modelValue:k.value.webTitle,"onUpdate:modelValue":l[41]||(l[41]=a=>k.value.webTitle=a),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):V("",!0),e(N,{label:"ÂêØÁî®"},{default:t(()=>[e(Cl,{modelValue:k.value.enabled,"onUpdate:modelValue":l[42]||(l[42]=a=>k.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(Re,{label:"ÁéØÂ¢ÉÂèòÈáè",name:"env"},{default:t(()=>[n("div",go,[l[113]||(l[113]=n("div",{style:{"margin-bottom":"16px"}},[n("h3",{style:{margin:"0 0 8px 0","font-size":"15px"}},"ÁéØÂ¢ÉÂèòÈáè"),n("p",{style:{margin:"0",color:"#666","font-size":"13px"}},[r(" ÈÖçÁΩÆÊ≠§ AI ÊàêÂëòÂú®ÊâßË°å exec ÂëΩ‰ª§Êó∂ÂèØÁî®ÁöÑÁéØÂ¢ÉÂèòÈáèÔºå‰æãÂ¶Ç GITHUB_TOKEN„ÄÅGIT_AUTHOR_NAME Á≠â„ÄÇ"),n("br"),r(" Ëøô‰∫õÂèòÈáè‰ºöÊ≥®ÂÖ•Âà∞ bash Â∑•ÂÖ∑ÁöÑÊâßË°åÁéØÂ¢É‰∏≠Ôºå"),n("strong",null,"‰∏çÂèóÁ≥ªÁªüÈªòËÆ§ÁöÑ token ËøáÊª§ÂΩ±Âìç"),r("„ÄÇ ")])],-1)),n("div",_o,[e(H,{modelValue:ie.value,"onUpdate:modelValue":l[45]||(l[45]=a=>ie.value=a),placeholder:"KEYÔºàÂ¶Ç GITHUB_TOKENÔºâ",style:{width:"220px","font-family":"monospace"},size:"small",onKeyup:Qe(we,["enter"])},null,8,["modelValue"]),e(H,{modelValue:Ve.value,"onUpdate:modelValue":l[46]||(l[46]=a=>Ve.value=a),placeholder:"VALUE",style:{flex:"1","font-family":"monospace"},size:"small",type:"password","show-password":"",onKeyup:Qe(we,["enter"])},null,8,["modelValue"]),e(v,{size:"small",type:"primary",onClick:we,disabled:!ie.value.trim()},{default:t(()=>[...l[110]||(l[110]=[r(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled"])]),e(xl,{data:_e.value,size:"small",style:{width:"100%","margin-bottom":"16px"},"empty-text":"ÊöÇÊó†ÁéØÂ¢ÉÂèòÈáè"},{default:t(()=>[e(Y,{label:"KEY","min-width":"200"},{default:t(({row:a})=>[n("code",wo,p(a.key),1)]),_:1}),e(Y,{label:"VALUE","min-width":"200"},{default:t(({row:a})=>[e(H,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,type:"password","show-password":"",size:"small",style:{"font-family":"monospace"},placeholder:"ÔºàÊú™ËÆæÁΩÆÔºâ"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(Y,{label:"Êìç‰Ωú",width:"80",fixed:"right"},{default:t(({$index:a})=>[e(v,{size:"small",type:"danger",link:"",onClick:h=>Ze(a)},{default:t(()=>[...l[111]||(l[111]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(v,{type:"primary",size:"small",loading:je.value,onClick:el},{default:t(()=>[...l[112]||(l[112]=[r(" ‰øùÂ≠òÁéØÂ¢ÉÂèòÈáè ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Vo=tt(ko,[["__scopeId","data-v-26ffd21f"]]);export{Vo as default};
