import{u as F}from"./agents-DiQ2RmG6.js";import{s as L}from"./index-B6ZRKErS.js";import{d as N,h as j,c as x,b as a,a as t,w as e,i as v,j as C,g as O,r as o,o as _,t as i,k as b,f as d,n as R,F as U,l as E}from"./index-BpJ3CHTQ.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"dashboard-page"},H={class:"stat-icon",style:{background:"#ecf5ff",color:"#409eff"}},J={class:"stat-info"},K={class:"stat-value"},P={class:"stat-icon",style:{background:"#f0f9eb",color:"#67c23a"}},Q={class:"stat-info"},W={class:"stat-value"},X={class:"stat-icon",style:{background:"#fdf6ec",color:"#e6a23c"}},Y={class:"stat-info"},Z={class:"stat-value"},tt={class:"stat-icon",style:{background:"#fef0f0",color:"#f56c6c"}},et={class:"stat-info"},st={class:"stat-value"},at={style:{"font-weight":"600"}},lt={style:{display:"flex","justify-content":"space-between","align-items":"center"}},nt={style:{display:"flex","align-items":"center",gap:"8px"}},ot=N({__name:"DashboardView",setup(it){const m=F(),c=O(null);j(async()=>{m.fetchAll();try{const n=await L.get();c.value=n.data}catch{}});function A(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function $(n){return n==="running"?"运行中":n==="stopped"?"已停止":"空闲"}function k(n){return n?n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}k`:String(n):"0"}return(n,l)=>{const z=o("User"),f=o("el-icon"),u=o("el-card"),g=o("el-col"),I=o("ChatLineRound"),T=o("Message"),V=o("Odometer"),D=o("el-row"),M=o("DataAnalysis"),h=o("el-button"),r=o("el-table-column"),p=o("el-tag"),w=o("el-table"),S=o("el-text"),B=o("el-empty");return _(),x("div",G,[l[10]||(l[10]=a("h2",{style:{margin:"0 0 20px"}},"仪表盘",-1)),t(D,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[t(g,{span:6},{default:e(()=>[t(u,{shadow:"hover",class:"stat-card"},{default:e(()=>[a("div",H,[t(f,null,{default:e(()=>[t(z)]),_:1})]),a("div",J,[a("div",K,i(c.value?.agents.total??b(m).list.length),1),l[1]||(l[1]=a("div",{class:"stat-label"},"AI 成员",-1))])]),_:1})]),_:1}),t(g,{span:6},{default:e(()=>[t(u,{shadow:"hover",class:"stat-card"},{default:e(()=>[a("div",P,[t(f,null,{default:e(()=>[t(I)]),_:1})]),a("div",Q,[a("div",W,i(c.value?.sessions.total??0),1),l[2]||(l[2]=a("div",{class:"stat-label"},"对话总数",-1))])]),_:1})]),_:1}),t(g,{span:6},{default:e(()=>[t(u,{shadow:"hover",class:"stat-card"},{default:e(()=>[a("div",X,[t(f,null,{default:e(()=>[t(T)]),_:1})]),a("div",Y,[a("div",Z,i(c.value?.sessions.totalMessages??0),1),l[3]||(l[3]=a("div",{class:"stat-label"},"消息总数",-1))])]),_:1})]),_:1}),t(g,{span:6},{default:e(()=>[t(u,{shadow:"hover",class:"stat-card"},{default:e(()=>[a("div",tt,[t(f,null,{default:e(()=>[t(V)]),_:1})]),a("div",et,[a("div",st,i(k(c.value?.sessions.totalTokens??0)),1),l[4]||(l[4]=a("div",{class:"stat-label"},"Token 用量",-1))])]),_:1})]),_:1})]),_:1}),c.value?.topAgents?.length?(_(),v(u,{key:0,shadow:"hover",style:{"margin-bottom":"24px"}},{header:e(()=>[a("span",at,[t(f,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:e(()=>[t(M)]),_:1}),l[5]||(l[5]=d("成员用量排行",-1))])]),default:e(()=>[t(w,{data:c.value.topAgents,stripe:"",style:{width:"100%"}},{default:e(()=>[t(r,{label:"成员","min-width":"140"},{default:e(({row:s})=>[t(h,{type:"primary",link:"",onClick:y=>n.$router.push(`/agents/${s.id}`)},{default:e(()=>[d(i(s.name),1)]),_:2},1032,["onClick"])]),_:1}),t(r,{label:"对话数",width:"100",align:"center"},{default:e(({row:s})=>[t(p,{size:"small",type:"info"},{default:e(()=>[d(i(s.sessions),1)]),_:2},1024)]),_:1}),t(r,{label:"消息数",width:"100",align:"center"},{default:e(({row:s})=>[d(i(s.messages),1)]),_:1}),t(r,{label:"Token 用量",width:"130",align:"center"},{default:e(({row:s})=>[t(p,{size:"small",type:s.tokens>1e5?"danger":s.tokens>5e4?"warning":"success",effect:"plain"},{default:e(()=>[d(i(k(s.tokens)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})):C("",!0),t(u,{shadow:"hover"},{header:e(()=>[a("div",lt,[l[7]||(l[7]=a("span",{style:{"font-weight":"600"}},"成员状态",-1)),t(h,{type:"primary",size:"small",onClick:l[0]||(l[0]=s=>n.$router.push("/agents"))},{default:e(()=>[...l[6]||(l[6]=[d(" 管理成员 ",-1)])]),_:1})])]),default:e(()=>[t(w,{data:b(m).list,stripe:"",style:{width:"100%"}},{default:e(()=>[t(r,{label:"名称","min-width":"150"},{default:e(({row:s})=>[a("div",nt,[a("div",{class:"avatar-dot",style:R({background:s.avatarColor||"#409eff"})},i(s.name.charAt(0)),5),a("span",null,i(s.name),1)])]),_:1}),t(r,{label:"模型","min-width":"180"},{default:e(({row:s})=>[t(p,{size:"small",type:"info"},{default:e(()=>[d(i(s.modelId||s.model||"-"),1)]),_:2},1024)]),_:1}),t(r,{label:"通道","min-width":"140"},{default:e(({row:s})=>[s.channelIds?.length?(_(!0),x(U,{key:0},E(s.channelIds,y=>(_(),v(p,{key:y,size:"small",style:{"margin-right":"4px"}},{default:e(()=>[d(i(y),1)]),_:2},1024))),128)):(_(),v(S,{key:1,type:"info",size:"small"},{default:e(()=>[...l[8]||(l[8]=[d("—",-1)])]),_:1}))]),_:1}),t(r,{label:"状态",width:"100"},{default:e(({row:s})=>[t(p,{type:A(s.status),size:"small"},{default:e(()=>[d(i($(s.status)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"操作",width:"100"},{default:e(({row:s})=>[t(h,{type:"primary",size:"small",link:"",onClick:y=>n.$router.push(`/agents/${s.id}`)},{default:e(()=>[...l[9]||(l[9]=[d(" 对话 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),b(m).list.length===0?(_(),v(B,{key:0,description:"暂无 AI 成员"})):C("",!0)]),_:1})])}}}),_t=q(ot,[["__scopeId","data-v-a7b2d1b1"]]);export{_t as default};
