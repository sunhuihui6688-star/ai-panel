import{d as T,S as w,h as F,T as b,c as u,f as t,t as y,a,k as h,O as B,w as x,D as O,g as i,x as U,M as V,r,o as d,e as E,F as S,l as W,q as z,j as D}from"./index-rS0KrWAa.js";import{n as M}from"./index-C0TYH7GB.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"logs-page"},G={class:"logs-header"},H={style:{"font-size":"13px",color:"#909399","margin-top":"4px"}},J={style:{display:"flex",gap:"10px","align-items":"center"}},K={class:"log-text"},P={key:0,class:"log-empty"},Q=T({__name:"LogsView",setup(X){const p=i([]),n=i(""),f=i(!1),s=i(!0),g=i(null);let v=null;const c=U(()=>{if(!n.value)return p.value;const l=n.value.toLowerCase();return p.value.filter(e=>e.toLowerCase().includes(l))});function C(l){const e=l.toUpperCase();return e.includes("ERROR")||e.includes("[ERR]")||e.includes("FATAL")?"level-error":e.includes("WARN")||e.includes("[WARN]")||e.includes("WARNING")?"level-warn":e.includes("INFO")||e.includes("[INFO]")?"level-info":"level-default"}async function _(){f.value=!0;try{const l=await M.get(500);p.value=l.data.lines??[],s.value&&(await V(),m())}catch{}finally{f.value=!1}}function m(){const l=g.value;l&&(l.scrollTop=l.scrollHeight)}return w(s,l=>{l&&m()}),w(c,async()=>{s.value&&(await V(),m())}),F(()=>{_(),v=setInterval(_,5e3)}),b(()=>{v&&clearInterval(v)}),(l,e)=>{const k=r("el-input"),N=r("el-switch"),L=r("el-button"),R=r("el-empty"),A=r("el-card");return d(),u("div",q,[t("div",G,[t("div",null,[e[2]||(e[2]=t("h2",{style:{margin:"0"}},"ğŸ“‹ ç³»ç»Ÿæ—¥å¿—",-1)),t("div",H," å…± "+y(c.value.length)+" æ¡ Â· æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–° ",1)]),t("div",J,[a(k,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),placeholder:"å…³é”®è¯è¿‡æ»¤â€¦",clearable:"",style:{width:"220px"},"prefix-icon":h(B)},null,8,["modelValue","prefix-icon"]),a(N,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value=o),"active-text":"è‡ªåŠ¨æ»šåŠ¨"},null,8,["modelValue"]),a(L,{onClick:_,loading:f.value,icon:h(O)},{default:x(()=>[...e[3]||(e[3]=[E("åˆ·æ–°",-1)])]),_:1},8,["loading","icon"])])]),a(A,{shadow:"never",class:"log-card"},{default:x(()=>[t("div",{ref_key:"logContainer",ref:g,class:"log-container"},[(d(!0),u(S,null,W(c.value,(o,I)=>(d(),u("div",{key:I,class:z(["log-line",C(o)])},[t("span",K,y(o),1)],2))),128)),c.value.length===0?(d(),u("div",P,[a(R,{description:n.value?"æ— åŒ¹é…æ—¥å¿—":"æš‚æ— æ—¥å¿—å†…å®¹"},null,8,["description"])])):D("",!0)],512)]),_:1})])}}}),ee=j(Q,[["__scopeId","data-v-fb335451"]]);export{ee as default};
