import{p as f}from"./index-DBYZbccA.js";import{d as E,i as U,c as B,b as N,a as e,w as t,h as v,e as u,r as a,o as S,E as g}from"./index-M6Q8NvDq.js";const z={class:"settings-page"},M={style:{margin:"0 0 20px"}},A=E({__name:"SettingsView",setup(T){const d=u(8080),i=u(""),m=u("zh"),_=u("light"),r=u(!1);U(async()=>{try{const o=await f.get();d.value=o.data.gateway?.port||8080}catch{}});async function b(){r.value=!0;try{const o={gateway:{port:d.value}};i.value&&(o.auth={mode:"token",token:i.value}),await f.patch(o),g.success("设置已保存")}catch(o){g.error(o.response?.data?.error||"保存失败")}finally{r.value=!1}}return(o,l)=>{const w=a("Setting"),y=a("el-icon"),V=a("el-input-number"),s=a("el-form-item"),h=a("el-input"),p=a("el-option"),c=a("el-select"),x=a("el-button"),k=a("el-form"),C=a("el-card");return S(),B("div",z,[N("h2",M,[e(y,{style:{"vertical-align":"-2px","margin-right":"6px"}},{default:t(()=>[e(w)]),_:1}),l[4]||(l[4]=v("设置",-1))]),e(C,{shadow:"hover",style:{"max-width":"600px"}},{default:t(()=>[e(k,{"label-width":"120px"},{default:t(()=>[e(s,{label:"面板端口"},{default:t(()=>[e(V,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=n=>d.value=n),min:1024,max:65535},null,8,["modelValue"])]),_:1}),e(s,{label:"访问令牌"},{default:t(()=>[e(h,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=n=>i.value=n),type:"password","show-password":"",placeholder:"留空使用默认",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),e(s,{label:"语言"},{default:t(()=>[e(c,{modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=n=>m.value=n),style:{width:"200px"}},{default:t(()=>[e(p,{label:"中文",value:"zh"}),e(p,{label:"English",value:"en",disabled:""})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"主题"},{default:t(()=>[e(c,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=n=>_.value=n),style:{width:"200px"}},{default:t(()=>[e(p,{label:"浅色",value:"light"}),e(p,{label:"深色",value:"dark",disabled:""})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(x,{type:"primary",onClick:b,loading:r.value},{default:t(()=>[...l[5]||(l[5]=[v("保存设置",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])}}});export{A as default};
