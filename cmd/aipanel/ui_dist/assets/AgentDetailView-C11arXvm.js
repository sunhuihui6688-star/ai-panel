import{d as Ot,B as yl,h as Yt,E as m,i as b,w as a,C as qt,g as r,r as y,o as u,a as l,b as s,k as V,y as Ht,t as d,f as o,z as Le,m as gl,c as p,F as U,l as M,q as Rl,j as C,n as Ee,D as Jt,G as Pe,H as Kt,I as Gt,e as Qt,J as Xt,K as Zt,x as ea,L as la}from"./index-BDtXQ_Sq.js";import{b as _l,f as ge,g as _e,h as be,i as Re,j as ta,e as We,r as Wl,k as B,l as jl}from"./index-Do6KhBZp.js";import{A as aa}from"./AiChat-DCJiuERP.js";import{_ as na}from"./_plugin-vue_export-helper-DlAUqK2U.js";const sa={class:"header-left"},oa={class:"chat-layout"},ia={class:"session-sidebar"},ua={class:"session-sidebar-header"},da={class:"session-list"},ra=["onClick"],ma={class:"session-item-title"},fa={class:"session-item-meta"},pa={key:0,class:"session-empty"},va={class:"at-panel"},ca={key:0,class:"at-form"},ya={class:"chat-area"},ga={style:{display:"flex","align-items":"center",gap:"8px"}},_a={style:{"font-weight":"600"}},ba={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},wa={style:{display:"flex","align-items":"center",gap:"8px"}},ka={style:{"font-size":"13px"}},xa={style:{"font-size":"13px",color:"#606266"}},Ca={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},ha={key:1,class:"relations-list"},Va={class:"relation-info"},za={class:"relation-name"},Ta={class:"relation-tags"},$a={class:"relation-desc"},Ua={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Aa={style:{display:"flex",gap:"8px","margin-top":"4px"}},Fa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Sa={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},Da={style:{"font-size":"12px"}},Na={style:{"font-size":"12px",color:"#606266"}},Ia={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},Ma={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},Ba={style:{display:"flex","align-items":"center","justify-content":"space-between"}},La={style:{padding:"16px"}},Ea={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},Pa={key:0,style:{"text-align":"center",color:"#999",padding:"40px 0"}},Ra={style:{display:"flex","align-items":"flex-start",gap:"12px"}},Wa={style:{"font-size":"22px","line-height":"1",display:"flex","align-items":"center"}},ja={key:0},Oa={style:{flex:"1","min-width":"0"}},Ya={style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"4px"}},qa={style:{"font-weight":"600","font-size":"15px"}},Ha={style:{color:"#666","font-size":"13px","margin-bottom":"6px"}},Ja={style:{color:"#999","font-size":"12px"}},Ka={style:{display:"flex","align-items":"center",gap:"8px","flex-shrink":"0"}},Ga={style:{"margin-bottom":"16px",display:"flex","align-items":"center",gap:"8px"}},Qa={class:"conv-drawer-body"},Xa={key:0,style:{"text-align":"center","margin-bottom":"12px"}},Za={class:"conv-msg-list"},en={class:"conv-msg-meta"},ln={class:"conv-msg-role"},tn={key:0,class:"conv-msg-sender"},an={class:"conv-msg-time"},nn={class:"conv-msg-content"},sn={key:0,class:"conv-msg-empty"},on={style:{"margin-top":"8px",display:"flex",gap:"8px","align-items":"center"}},un={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},dn={class:"channel-card-header"},rn={class:"channel-card-left"},mn={class:"channel-card-name"},fn={key:0,class:"channel-bot-username"},pn={class:"channel-card-actions"},vn={key:0,class:"channel-card-body"},cn={class:"channel-info-row"},yn={class:"channel-info-value"},gn={class:"channel-info-row"},_n={class:"channel-info-value"},bn={key:1,class:"channel-card-body"},wn={class:"channel-info-row"},kn={class:"channel-info-value"},xn={style:{opacity:"0.6","font-size":"11px","margin-left":"3px"}},Cn={class:"pending-section"},hn=["onClick"],Vn={key:0,class:"pending-list"},zn={key:0,style:{"text-align":"center",padding:"12px"}},Tn={class:"pending-user-info"},$n={class:"pending-user-name"},Un={key:0,class:"pending-user-username"},An={class:"pending-user-id"},Fn={class:"pending-user-actions"},Sn={key:2,class:"pending-empty"},Dn={style:{width:"100%"}},Nn={style:{display:"flex",gap:"6px","align-items":"center"}},In={key:0,style:{"margin-top":"6px",display:"flex","align-items":"center",gap:"6px",color:"#909399","font-size":"13px"}},Mn={key:1,style:{"margin-top":"6px",color:"#67c23a","font-size":"13px"}},Bn={key:2,style:{"margin-top":"6px",color:"#e6a23c","font-size":"13px"}},Ln={key:3,style:{"margin-top":"6px",color:"#f56c6c","font-size":"13px"}},En={key:4,style:{"margin-top":"4px"}},Pn={class:"channel-url-preview"},Rn={class:"channel-url-text"},Wn={class:"channel-url-preview"},jn={class:"channel-url-text"},On=50,Yn=Ot({__name:"AgentDetailView",setup(qn){const je=qt(),v=je.params.id,Y=r(null),we=r("chat"),W=r(),ke=r([]),xe=r(!1),J=r();async function bl(){xe.value=!0;try{const n=await ta.list({agentId:v,limit:50});ke.value=n.data.sessions}catch{}finally{xe.value=!1}}function Ol(n){J.value=n.id,W.value?.resumeSession(n.id)}function Yl(){J.value=void 0,W.value?.startNewSession()}function ql(n){J.value=n,setTimeout(bl,500)}function wl(n){if(!n)return"";const e=Date.now()-n;return e<6e4?"ÂàöÂàö":e<36e5?`${Math.floor(e/6e4)}ÂàÜÂâç`:e<864e5?`${Math.floor(e/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(e/864e5)}Â§©Ââç`}const se=r(!1),oe=r(""),ie=r(""),Oe=r(!1),j=r([]);function Hl(){se.value=!se.value,se.value&&!j.value.length&&kl()}async function kl(){try{const n=await _l.list();j.value=n.data.filter(e=>e.id!==v)}catch{j.value=[]}}function Jl(n){const e=j.value.find(i=>i.id===n);e&&W.value?.fillInput(`@${e.name}: `)}async function Kl(){const n=oe.value,e=ie.value.trim();if(!n||!e)return;const g=j.value.find(q=>q.id===n)?.name??n;Oe.value=!0;const F={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${g}Ôºö
${e}`};W.value?.appendMessage(F);try{const w=(await _l.message(n,e,v)).data.response,P={role:"assistant",text:`‚Üê **${g}** ÂõûÂ§çÔºö

${w}`};W.value?.appendMessage(P),ie.value="",oe.value="",se.value=!1,m.success(`${g} Â∑≤ÂõûÂ§ç`)}catch(q){const w={role:"system",text:`[Â§±Ë¥•] ËΩ¨ÂèëÂ§±Ë¥•Ôºö${q.response?.data?.error??q.message??"ÁΩëÁªúÈîôËØØ"}`};W.value?.appendMessage(w),m.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{Oe.value=!1}}const Ce=r(""),he=r(""),D=r({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),Ye=r(!1),qe=r(!1);async function Gl(){try{const n=await We.getConfig(v);D.value=n.data,He()}catch{}}async function xl(){Ye.value=!0;try{const n=await We.setConfig(v,D.value);D.value=n.data,m.success(D.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ye.value=!1}}async function Ql(){qe.value=!0;try{await We.consolidate(v),m.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(He,1e4)}catch{m.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{qe.value=!1}}const Ve=r([]),ze=r(!1);async function He(){ze.value=!0;try{const n=await We.runLog(v);Ve.value=n.data||[]}catch{Ve.value=[]}finally{ze.value=!1}}const Te=r([]),K=r(""),G=r(""),Je=r(!1),Ke=r([]),ue=r(!1),$e=r(""),de=r(!1),Ue=r(""),Cl=r([]),Q=r(""),re=r(""),Ae=r(null),N=r([]),Ge=r(!1),T=r({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function Xl(){try{const n=await Wl.get(v);N.value=n.data.parsed||[]}catch{N.value=[]}}function Zl(n){const e=j.value.find(i=>i.id===n);T.value.agentName=e?e.name:n}async function et(){if(!T.value.agentId)return;if(N.value.find(e=>e.agentId===T.value.agentId)){m.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}N.value.push({...T.value}),T.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await hl()}async function lt(n){N.value.splice(n,1),await hl()}function tt(){if(N.value.length===0)return"";const n=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,e=N.value.map(i=>`| ${i.agentId} | ${i.agentName} | ${i.relationType} | ${i.strength} | ${i.desc||""} |`).join(`
`);return n+`
`+e}async function hl(){Ge.value=!0;try{await Wl.put(v,tt()),m.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ge.value=!1}}function Qe(n){const e=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let i=0;for(let g=0;g<n.length;g++)i=n.charCodeAt(g)+((i<<5)-i);return e[Math.abs(i)%e.length]??"#409EFF"}function Vl(n){return n==="‰∏äÁ∫ß"?"danger":n==="‰∏ãÁ∫ß"?"":n==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function zl(n){return n==="Ê†∏ÂøÉ"?"danger":n==="Â∏∏Áî®"?"warning":"info"}const Tl=r([]),me=r(!1),A=r({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function at(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function nt(n){return n==="running"?"ËøêË°å‰∏≠":n==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function $l(n){return n?n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB":"0 B"}function st(n){return new Date(n).toLocaleString()}function Ul(n){return n?new Date(n).toLocaleString():""}const E=r([]),Xe=r(!1),X=r(!1),L=r(""),Fe=r(""),Ze=r(!1),el=r(""),f=r({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""}),x=r({loading:!1,status:""});let ll=null;function tl(n){return/^\*+$/.test(n)}async function Al(){const n=f.value.botToken;if(!(!n||tl(n))){x.value={loading:!0,status:""};try{const i=(await B.checkToken(v,n)).data;i.duplicate?x.value={loading:!1,status:"duplicate",usedBy:i.usedBy,usedByCh:i.usedByCh}:i.valid?(x.value={loading:!1,status:"ok",botName:i.botName},!f.value.name&&i.botName&&(f.value.name=i.botName)):x.value={loading:!1,status:"error",error:i.error||"Token Êó†Êïà"}}catch{x.value={loading:!1,status:"error",error:"ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï"}}}}yl(()=>f.value.type,n=>{L.value||(Fe.value=al(n))}),yl(()=>f.value.botToken,n=>{x.value={loading:!1,status:""},ll&&clearTimeout(ll),!(!n||tl(n)||n.length<20||!n.includes(":"))&&(ll=setTimeout(Al,800))});function Z(n,e){return e?`${window.location.origin}/chat/${n}/${e}`:`${window.location.origin}/chat/${n}`}function Fl(n){navigator.clipboard.writeText(n).then(()=>m.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function ee(){Xe.value=!0;try{const n=await B.list(v);E.value=n.data||[]}catch{E.value=[]}finally{Xe.value=!1}}function al(n){return n+"-"+Date.now().toString(36)}function ot(){L.value="";const n=Y.value?.name||"";Fe.value=al("telegram"),f.value={type:"telegram",name:n,enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},x.value={loading:!1,status:""},X.value=!0}function it(n){L.value=n.id,f.value={type:n.type,name:n.name,enabled:n.enabled,botToken:n.config?.botToken||"",allowedFrom:n.config?.allowedFrom||"",webPassword:"",webWelcome:n.config?.welcomeMsg||"",webTitle:n.config?.title||""},x.value={loading:!1,status:""},X.value=!0}async function ut(){if(!f.value.name||!f.value.type){m.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}if(x.value.status==="duplicate"){m.error(`Bot Token Â∑≤Ë¢´ÊàêÂëò„Äå${x.value.usedBy}„Äç‰ΩøÁî®ÔºåËØ∑Êõ¥Êç¢`);return}Ze.value=!0;try{const n={};if(f.value.type==="telegram"?(f.value.botToken&&(n.botToken=f.value.botToken),f.value.allowedFrom&&(n.allowedFrom=f.value.allowedFrom)):f.value.type==="web"&&(f.value.webPassword&&(n.password=f.value.webPassword),f.value.webWelcome&&(n.welcomeMsg=f.value.webWelcome),f.value.webTitle&&(n.title=f.value.webTitle)),L.value){const e=E.value.map(i=>i.id!==L.value?i:{...i,name:f.value.name,type:f.value.type,enabled:f.value.enabled,config:{...i.config,...n}});await B.set(v,e)}else{const e={id:Fe.value||al(f.value.type),name:f.value.name,type:f.value.type,enabled:f.value.enabled,config:n,status:"untested"};await B.set(v,[...E.value,e])}m.success(f.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),X.value=!1,await ee()}catch(n){m.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Ze.value=!1}}async function dt(){try{await B.set(v,E.value)}catch(n){m.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•"),await ee()}}async function rt(n){const e=E.value.filter(i=>i.id!==n.id);try{await B.set(v,e),E.value=e,m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}async function mt(n){el.value=n.id;try{const e=await B.test(v,n.id);e.data.valid?m.success(e.data.botName?`ÊµãËØïÊàêÂäü (@${e.data.botName})`:"ÊµãËØïÊàêÂäü"):m.error(e.data.error||"ÊµãËØïÂ§±Ë¥•"),await ee()}catch{m.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{el.value=""}}const le=r({}),nl=r({}),fe=r(""),sl=r("");async function Se(n){nl.value[n]=!0;try{const e=await B.listPending(v,n);le.value[n]=e.data||[]}catch{le.value[n]=[]}finally{nl.value[n]=!1}}function ft(n){fe.value===n?fe.value="":(fe.value=n,Se(n))}async function pt(n,e){sl.value=`${n}-${e}`;try{await B.allowUser(v,n,e),m.success(`Áî®Êà∑ ${e} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Se(n),await ee()}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}finally{sl.value=""}}async function vt(n,e){try{await B.dismissUser(v,n,e),m.success("Â∑≤ÂøΩÁï•"),await Se(n)}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}}async function Sl(n,e){try{await Zt.confirm(`Á°ÆÂÆöÂ∞ÜÁî®Êà∑ ${e} ‰ªéÁôΩÂêçÂçï‰∏≠ÁßªÈô§ÔºüÁßªÈô§ÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®Ê≠§ Bot„ÄÇ`,"ÁßªÈô§ÁôΩÂêçÂçï",{confirmButtonText:"Á°ÆËÆ§ÁßªÈô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"})}catch{return}try{await B.removeAllowed(v,n,e),m.success(`Áî®Êà∑ ${e} Â∑≤‰ªéÁôΩÂêçÂçïÁßªÈô§`),await ee()}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}}Yt(async()=>{try{const i=await _l.get(v);Y.value=i.data}catch{m.error("Âä†ËΩΩ Agent Â§±Ë¥•")}ct(),Xl(),kl(),Gl(),wt(),De(),ee(),te(),await bl();const n=je.query.tab;n&&(we.value=n);const e=je.query.resumeSession;e&&(J.value=e,await new Promise(g=>setTimeout(g,100)),W.value?.resumeSession(e),ke.value.find(g=>g.id===e)||(J.value=e))});async function ct(){try{const[n,e]=await Promise.all([ge.read(v,"IDENTITY.md"),ge.read(v,"SOUL.md")]);Ce.value=n.data?.content||"",he.value=e.data?.content||""}catch{}pe()}async function ol(n,e){try{await ge.write(v,n,e),m.success(`${n} Â∑≤‰øùÂ≠ò`)}catch{m.error(`‰øùÂ≠ò ${n} Â§±Ë¥•`)}}async function pe(){try{const n=await _e.tree(v);Te.value=n.data||[]}catch{Te.value=[]}}async function yt(n){if(!n.isDir){K.value=n.path,Ke.value=n.path.split("/");try{const e=await _e.readFile(v,n.path);G.value=e.data?.content||""}catch{G.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function gt(){if(K.value){Je.value=!0;try{await _e.writeFile(v,K.value,G.value),m.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),pe()}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Je.value=!1}}}async function _t(){const n=$e.value.trim();if(!n){m.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await _e.writeFile(v,n,`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`),m.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),ue.value=!1,$e.value="",pe(),K.value=n,Ke.value=n.split("/"),G.value=`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`}catch{m.error("ÂàõÂª∫Â§±Ë¥•")}}async function bt(){const n=Ue.value.trim();if(!n){m.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await _e.dailyLog(v,n),m.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),de.value=!1,Ue.value="",pe()}catch{m.error("Ê∑ªÂä†Â§±Ë¥•")}}async function wt(){try{const n=await ge.read(v,"/");Array.isArray(n.data)&&(Cl.value=n.data.map(e=>({name:e.name,isDir:e.isDir,size:e.size,modTime:e.modTime,path:e.name})))}catch{}}async function kt(n){if(!n.isDir){Q.value=n.path||n.name,Ae.value=n;try{const e=await ge.read(v,Q.value);re.value=e.data?.content||""}catch{re.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function xt(){Q.value&&await ol(Q.value,re.value)}async function De(){try{const n=await be.list(v);Tl.value=n.data||[]}catch{}}async function Ct(){try{await be.create({name:A.value.name,enabled:A.value.enabled,agentId:v,schedule:{kind:"cron",expr:A.value.expr,tz:A.value.tz},payload:{kind:"agentTurn",message:A.value.message},delivery:{mode:"announce"}}),m.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),me.value=!1,De()}catch(n){m.error(n.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function ht(n){try{await be.update(n.id,n)}catch{m.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function Dl(n){try{await be.run(n.id),m.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(De,2e3)}catch{m.error("ËøêË°åÂ§±Ë¥•")}}async function Vt(n){try{await be.delete(n.id),m.success("Â∑≤Âà†Èô§"),De()}catch{m.error("Âà†Èô§Â§±Ë¥•")}}const Ne=r([]),ve=r(!1),il=r(!1),ul=r(!1),h=r({id:"",name:"",icon:"",category:"",description:"",promptContent:""});async function te(){ul.value=!0;try{const n=await Re.list(v);Ne.value=n.data||[]}catch{Ne.value=[]}finally{ul.value=!1}}function zt(){h.value={id:"",name:"",icon:"",category:"",description:"",promptContent:""},ve.value=!0}async function Tt(){if(!h.value.id||!h.value.name){m.warning("ID ÂíåÂêçÁß∞‰∏∫ÂøÖÂ°´È°π");return}il.value=!0;try{await Re.create(v,{meta:{id:h.value.id,name:h.value.name,icon:h.value.icon,category:h.value.category,description:h.value.description,version:"1.0.0",source:"local"},promptContent:h.value.promptContent||void 0}),m.success("ÊäÄËÉΩÂ∑≤ÂÆâË£Ö"),ve.value=!1,te()}catch(n){m.error(n?.response?.data?.error||"ÂÆâË£ÖÂ§±Ë¥•")}finally{il.value=!1}}async function $t(n,e){try{await Re.update(v,n.id,{enabled:e}),n.enabled=e,m.success(e?"Â∑≤ÂêØÁî®":"Â∑≤Á¶ÅÁî®")}catch{m.error("Êìç‰ΩúÂ§±Ë¥•"),te()}}async function Ut(n){try{await Re.remove(v,n),m.success("ÊäÄËÉΩÂ∑≤Âç∏ËΩΩ"),te()}catch{m.error("Âç∏ËΩΩÂ§±Ë¥•")}}const dl=r([]),Ie=r(!1),rl=r(!1),ml=r(""),O=r([]),ce=r(!1),fl=r(0),Me=r(0),At=ea(()=>O.value.length<fl.value);async function Nl(){Ie.value=!0;try{const n=await jl.list(v);dl.value=n.data}catch{m.error("Âä†ËΩΩÂØπËØùÊ∏†ÈÅìÂ§±Ë¥•")}finally{Ie.value=!1}}async function Ft(n){ml.value=n.channelId,O.value=[],fl.value=0,Me.value=0,rl.value=!0,await Il()}async function Il(){ce.value=!0;try{const e=(await jl.messages(v,ml.value,{limit:On,offset:Me.value})).data;fl.value=e.total,Me.value===0?O.value=e.messages:O.value=[...e.messages,...O.value],Me.value+=e.messages.length}catch{m.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•")}finally{ce.value=!1}}async function St(){await Il()}return yl(we,n=>{n==="convlogs"&&dl.value.length===0&&Nl(),n==="skills"&&te()}),(n,e)=>{const i=y("el-button"),g=y("el-tag"),F=y("el-text"),q=y("el-header"),w=y("el-option"),P=y("el-select"),k=y("el-input"),R=y("el-tab-pane"),I=y("el-card"),S=y("el-col"),H=y("el-row"),_=y("el-form-item"),ae=y("el-form"),Ml=y("el-badge"),$=y("el-table-column"),Be=y("el-table"),ne=y("el-switch"),Dt=y("el-input-number"),z=y("el-icon"),Bl=y("el-tree"),pl=y("el-empty"),Ll=y("el-breadcrumb-item"),Nt=y("el-breadcrumb"),ye=y("el-dialog"),It=y("Tools"),Mt=y("el-drawer"),Bt=y("el-link"),Lt=y("CircleCheck"),Et=y("Warning"),Pt=y("CircleClose"),El=y("InfoFilled"),Pl=y("Link"),Rt=y("el-tabs"),Wt=y("el-main"),jt=y("el-container"),vl=la("loading");return u(),b(jt,{class:"agent-detail"},{default:a(()=>[l(q,{class:"detail-header"},{default:a(()=>[s("div",sa,[l(i,{icon:V(Ht),onClick:e[0]||(e[0]=t=>n.$router.push("/agents")),circle:""},null,8,["icon"]),s("h2",null,d(Y.value?.name||"..."),1),l(g,{type:at(Y.value?.status)},{default:a(()=>[o(d(nt(Y.value?.status)),1)]),_:1},8,["type"])]),l(F,{type:"info"},{default:a(()=>[o(d(Y.value?.model),1)]),_:1})]),_:1}),l(Wt,null,{default:a(()=>[l(Rt,{modelValue:we.value,"onUpdate:modelValue":e[53]||(e[53]=t=>we.value=t),type:"border-card"},{default:a(()=>[l(R,{label:"ÂØπËØù",name:"chat"},{default:a(()=>[s("div",oa,[s("div",ia,[s("div",ua,[e[55]||(e[55]=s("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),l(i,{size:"small",type:"primary",plain:"",onClick:Yl,icon:V(Le)},{default:a(()=>[...e[54]||(e[54]=[o("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),gl((u(),p("div",da,[(u(!0),p(U,null,M(ke.value,t=>(u(),p("div",{key:t.id,class:Rl(["session-item",{active:J.value===t.id}]),onClick:c=>Ol(t)},[s("div",ma,d(t.title||"Êñ∞ÂØπËØù"),1),s("div",fa,[s("span",null,d(wl(t.lastAt)),1),l(g,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:a(()=>[o(d(t.messageCount)+" Êù° ",1)]),_:2},1024),t.tokenEstimate>6e4?(u(),b(g,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:a(()=>[o("~"+d(Math.round(t.tokenEstimate/1e3))+"k",1)]),_:2},1024)):C("",!0)])],10,ra))),128)),!xe.value&&!ke.value.length?(u(),p("div",pa," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):C("",!0)])),[[vl,xe.value]]),s("div",va,[l(i,{size:"small",plain:"",class:"at-toggle-btn",onClick:Hl},{default:a(()=>[...e[56]||(e[56]=[s("span",{class:"at-icon"},"@",-1),o(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),se.value?(u(),p("div",ca,[l(P,{modelValue:oe.value,"onUpdate:modelValue":e[1]||(e[1]=t=>oe.value=t),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:Jl},{default:a(()=>[(u(!0),p(U,null,M(j.value,t=>(u(),b(w,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(k,{modelValue:ie.value,"onUpdate:modelValue":e[2]||(e[2]=t=>ie.value=t),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),l(i,{type:"primary",size:"small",style:{width:"100%"},loading:Oe.value,disabled:!oe.value||!ie.value.trim(),onClick:Kl},{default:a(()=>[...e[57]||(e[57]=[o(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):C("",!0)])]),s("div",ya,[l(aa,{ref_key:"aiChatRef",ref:W,"agent-id":V(v),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${Y.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:ql},null,8,["agent-id","welcome-message"])])])]),_:1}),l(R,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:a(()=>[l(H,{gutter:20},{default:a(()=>[l(S,{span:12},{default:a(()=>[l(I,{header:"IDENTITY.md"},{default:a(()=>[l(k,{modelValue:Ce.value,"onUpdate:modelValue":e[3]||(e[3]=t=>Ce.value=t),type:"textarea",rows:15,onBlur:e[4]||(e[4]=t=>ol("IDENTITY.md",Ce.value))},null,8,["modelValue"])]),_:1})]),_:1}),l(S,{span:12},{default:a(()=>[l(I,{header:"SOUL.md"},{default:a(()=>[l(k,{modelValue:he.value,"onUpdate:modelValue":e[5]||(e[5]=t=>he.value=t),type:"textarea",rows:15,onBlur:e[6]||(e[6]=t=>ol("SOUL.md",he.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(R,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:a(()=>[l(H,{gutter:20},{default:a(()=>[l(S,{span:14},{default:a(()=>[l(I,{style:{"margin-bottom":"16px"}},{header:a(()=>[...e[58]||(e[58]=[s("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:a(()=>[l(ae,{model:T.value,"label-position":"top",size:"default"},{default:a(()=>[l(H,{gutter:12},{default:a(()=>[l(S,{span:10},{default:a(()=>[l(_,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:a(()=>[l(P,{modelValue:T.value.agentId,"onUpdate:modelValue":e[7]||(e[7]=t=>T.value.agentId=t),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:Zl},{default:a(()=>[(u(!0),p(U,null,M(j.value,t=>(u(),b(w,{key:t.id,label:t.name,value:t.id},{default:a(()=>[s("div",ga,[s("div",{style:Ee([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:Qe(t.id)}])},d(t.name.charAt(0)),5),s("span",null,d(t.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(S,{span:7},{default:a(()=>[l(_,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:a(()=>[l(P,{modelValue:T.value.relationType,"onUpdate:modelValue":e[8]||(e[8]=t=>T.value.relationType=t),style:{width:"100%"}},{default:a(()=>[l(w,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),l(w,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),l(w,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),l(w,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(S,{span:7},{default:a(()=>[l(_,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:a(()=>[l(P,{modelValue:T.value.strength,"onUpdate:modelValue":e[9]||(e[9]=t=>T.value.strength=t),style:{width:"100%"}},{default:a(()=>[l(w,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),l(w,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),l(w,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(H,{gutter:12},{default:a(()=>[l(S,{span:18},{default:a(()=>[l(_,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:a(()=>[l(k,{modelValue:T.value.desc,"onUpdate:modelValue":e[10]||(e[10]=t=>T.value.desc=t),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),l(S,{span:6},{default:a(()=>[l(_,{label:" "},{default:a(()=>[l(i,{type:"primary",style:{width:"100%"},disabled:!T.value.agentId||!T.value.relationType||!T.value.strength,loading:Ge.value,onClick:et},{default:a(()=>[...e[59]||(e[59]=[o(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(I,null,{header:a(()=>[s("span",_a,[e[60]||(e[60]=o("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),l(Ml,{value:N.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:a(()=>[N.value.length===0?(u(),p("div",ba," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(u(),b(Be,{key:1,data:N.value,size:"small",style:{width:"100%"}},{default:a(()=>[l($,{label:"ÊàêÂëò","min-width":"120"},{default:a(({row:t})=>[s("div",wa,[s("div",{style:Ee([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:Qe(t.agentId)}])},d(t.agentName.charAt(0)),5),s("span",ka,d(t.agentName),1)])]),_:1}),l($,{label:"Á±ªÂûã",width:"100"},{default:a(({row:t})=>[l(g,{type:Vl(t.relationType),size:"small"},{default:a(()=>[o(d(t.relationType),1)]),_:2},1032,["type"])]),_:1}),l($,{label:"Á®ãÂ∫¶",width:"80"},{default:a(({row:t})=>[l(g,{type:zl(t.strength),size:"small",effect:"plain"},{default:a(()=>[o(d(t.strength),1)]),_:2},1032,["type"])]),_:1}),l($,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:a(({row:t})=>[s("span",xa,d(t.desc||"‚Äî"),1)]),_:1}),l($,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:a(({$index:t})=>[l(i,{type:"danger",link:"",size:"small",onClick:c=>lt(t)},{default:a(()=>[...e[61]||(e[61]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),l(S,{span:10},{default:a(()=>[l(I,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:a(()=>[N.value.length===0?(u(),p("div",Ca," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(u(),p("div",ha,[(u(!0),p(U,null,M(N.value,t=>(u(),p("div",{key:t.agentId,class:"relation-card"},[s("div",{class:"relation-avatar",style:Ee({background:Qe(t.agentId)})},d(t.agentName.charAt(0).toUpperCase()),5),s("div",Va,[s("div",za,d(t.agentName),1),s("div",Ta,[l(g,{type:Vl(t.relationType),size:"small"},{default:a(()=>[o(d(t.relationType),1)]),_:2},1032,["type"]),l(g,{type:zl(t.strength),size:"small",effect:"plain"},{default:a(()=>[o(d(t.strength),1)]),_:2},1032,["type"])]),s("div",$a,d(t.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),l(R,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:a(()=>[l(I,{style:{"margin-bottom":"16px"},shadow:"never"},{header:a(()=>[s("div",Ua,[e[62]||(e[62]=s("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),l(ne,{modelValue:D.value.enabled,"onUpdate:modelValue":e[11]||(e[11]=t=>D.value.enabled=t),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:xl},null,8,["modelValue"])])]),default:a(()=>[l(ae,{model:D.value,"label-position":"top",size:"small",disabled:!D.value.enabled},{default:a(()=>[l(H,{gutter:16},{default:a(()=>[l(S,{span:6},{default:a(()=>[l(_,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:a(()=>[l(P,{modelValue:D.value.schedule,"onUpdate:modelValue":e[12]||(e[12]=t=>D.value.schedule=t),style:{width:"100%"}},{default:a(()=>[l(w,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),l(w,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),l(w,{label:"ÊØèÂ§©",value:"daily"}),l(w,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(S,{span:5},{default:a(()=>[l(_,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:a(()=>[l(Dt,{modelValue:D.value.keepTurns,"onUpdate:modelValue":e[13]||(e[13]=t=>D.value.keepTurns=t),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(S,{span:13},{default:a(()=>[l(_,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:a(()=>[l(k,{modelValue:D.value.focusHint,"onUpdate:modelValue":e[14]||(e[14]=t=>D.value.focusHint=t),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s("div",Aa,[l(i,{type:"primary",size:"small",loading:Ye.value,onClick:xl},{default:a(()=>[...e[63]||(e[63]=[o(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),l(i,{size:"small",loading:qe.value,onClick:Ql},{default:a(()=>[...e[64]||(e[64]=[o(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),l(F,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:a(()=>[o(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+d(D.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),l(I,{style:{"margin-bottom":"16px"},shadow:"never"},{header:a(()=>[s("div",Fa,[e[66]||(e[66]=s("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),l(i,{size:"small",text:"",onClick:He,loading:ze.value},{default:a(()=>[...e[65]||(e[65]=[o("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:a(()=>[Ve.value.length===0&&!ze.value?(u(),p("div",Sa," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(u(),b(Be,{key:1,data:Ve.value.slice(0,20),size:"small"},{default:a(()=>[l($,{label:"Êó∂Èó¥",width:"160"},{default:a(({row:t})=>[s("span",Da,d(Ul(t.timestamp)),1)]),_:1}),l($,{label:"Áä∂ÊÄÅ",width:"72"},{default:a(({row:t})=>[l(g,{type:t.status==="ok"?"success":"danger",size:"small"},{default:a(()=>[o(d(t.status),1)]),_:2},1032,["type"])]),_:1}),l($,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:a(({row:t})=>[s("span",Na,d(t.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),s("div",Ia,[l(i,{type:"primary",size:"small",onClick:e[15]||(e[15]=t=>ue.value=!0)},{default:a(()=>[l(z,null,{default:a(()=>[l(V(Le))]),_:1}),e[67]||(e[67]=o(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),l(i,{size:"small",onClick:e[16]||(e[16]=t=>de.value=!0)},{default:a(()=>[l(z,null,{default:a(()=>[l(V(Jt))]),_:1}),e[68]||(e[68]=o(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),l(i,{size:"small",onClick:pe},{default:a(()=>[l(z,null,{default:a(()=>[l(V(Pe))]),_:1}),e[69]||(e[69]=o(" Âà∑Êñ∞ ",-1))]),_:1})]),l(H,{gutter:16},{default:a(()=>[l(S,{span:7},{default:a(()=>[l(I,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:a(()=>[l(Bl,{data:Te.value,props:{label:"name",children:"children",isLeaf:t=>!t.isDir},onNodeClick:yt,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:a(({data:t})=>[s("span",Ma,[t.isDir?(u(),b(z,{key:0,style:{color:"#E6A23C"}},{default:a(()=>[l(V(Kt))]),_:1})):(u(),b(z,{key:1,style:{color:"#409EFF"}},{default:a(()=>[l(V(Gt))]),_:1})),s("span",null,d(t.name),1),!t.isDir&&t.size?(u(),b(F,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:a(()=>[o(d($l(t.size)),1)]),_:2},1024)):C("",!0)])]),_:1},8,["data","props"]),Te.value.length===0?(u(),b(pl,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):C("",!0)]),_:1})]),_:1}),l(S,{span:17},{default:a(()=>[l(I,{shadow:"hover"},{header:a(()=>[s("div",Ba,[l(Nt,{separator:"/"},{default:a(()=>[l(Ll,null,{default:a(()=>[...e[70]||(e[70]=[o("memory",-1)])]),_:1}),(u(!0),p(U,null,M(Ke.value,(t,c)=>(u(),b(Ll,{key:c},{default:a(()=>[o(d(t),1)]),_:2},1024))),128))]),_:1}),K.value?(u(),b(i,{key:0,type:"primary",size:"small",onClick:gt,loading:Je.value},{default:a(()=>[...e[71]||(e[71]=[o("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):C("",!0)])]),default:a(()=>[K.value?(u(),b(k,{key:0,modelValue:G.value,"onUpdate:modelValue":e[17]||(e[17]=t=>G.value=t),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(u(),b(pl,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),l(ye,{modelValue:ue.value,"onUpdate:modelValue":e[20]||(e[20]=t=>ue.value=t),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:a(()=>[l(i,{onClick:e[19]||(e[19]=t=>ue.value=!1)},{default:a(()=>[...e[73]||(e[73]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:_t},{default:a(()=>[...e[74]||(e[74]=[o("ÂàõÂª∫",-1)])]),_:1})]),default:a(()=>[l(ae,{"label-width":"80px"},{default:a(()=>[l(_,{label:"Ë∑ØÂæÑ"},{default:a(()=>[l(k,{modelValue:$e.value,"onUpdate:modelValue":e[18]||(e[18]=t=>$e.value=t),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),l(F,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:a(()=>[...e[72]||(e[72]=[o("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ye,{modelValue:de.value,"onUpdate:modelValue":e[23]||(e[23]=t=>de.value=t),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:a(()=>[l(i,{onClick:e[22]||(e[22]=t=>de.value=!1)},{default:a(()=>[...e[75]||(e[75]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:bt},{default:a(()=>[...e[76]||(e[76]=[o("Êèê‰∫§",-1)])]),_:1})]),default:a(()=>[l(k,{modelValue:Ue.value,"onUpdate:modelValue":e[21]||(e[21]=t=>Ue.value=t),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(R,{label:"ÊäÄËÉΩ",name:"skills"},{default:a(()=>[s("div",La,[s("div",Ea,[e[79]||(e[79]=s("span",{style:{"font-size":"16px","font-weight":"600"}},"Â∑≤ÂÆâË£ÖÊäÄËÉΩ",-1)),l(i,{size:"small",onClick:te,loading:ul.value},{default:a(()=>[l(z,null,{default:a(()=>[l(V(Pe))]),_:1}),e[77]||(e[77]=o(" Âà∑Êñ∞",-1))]),_:1},8,["loading"]),l(i,{type:"primary",size:"small",onClick:zt},{default:a(()=>[...e[78]||(e[78]=[o("ÂÆâË£ÖÊäÄËÉΩ",-1)])]),_:1})]),Ne.value.length===0?(u(),p("div",Pa," ÊöÇÊú™ÂÆâË£Ö‰ªª‰ΩïÊäÄËÉΩÔºåÁÇπÂáª„ÄåÂÆâË£ÖÊäÄËÉΩ„ÄçÂºÄÂßãÂêß ")):C("",!0),(u(!0),p(U,null,M(Ne.value,t=>(u(),b(I,{key:t.id,style:{"margin-bottom":"12px"},shadow:"hover"},{default:a(()=>[s("div",Ra,[s("span",Wa,[t.icon?(u(),p("span",ja,d(t.icon),1)):(u(),b(z,{key:1,style:{"font-size":"22px"}},{default:a(()=>[l(It)]),_:1}))]),s("div",Oa,[s("div",Ya,[s("span",qa,d(t.name),1),l(g,{size:"small",type:"info",effect:"plain"},{default:a(()=>[o("v"+d(t.version),1)]),_:2},1024),t.category?(u(),b(g,{key:0,size:"small",effect:"plain"},{default:a(()=>[o(d(t.category),1)]),_:2},1024)):C("",!0)]),s("div",Ha,d(t.description),1),s("div",Ja," Êù•Ê∫ê: "+d(t.source)+" ¬∑ "+d(t.installedAt?t.installedAt.slice(0,10):""),1)]),s("div",Ka,[l(ne,{"model-value":t.enabled,onChange:c=>$t(t,c),size:"small"},null,8,["model-value","onChange"]),l(i,{size:"small",type:"danger",plain:"",onClick:c=>Ut(t.id)},{default:a(()=>[...e[80]||(e[80]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128))]),l(ye,{modelValue:ve.value,"onUpdate:modelValue":e[31]||(e[31]=t=>ve.value=t),title:"ÂÆâË£ÖÊäÄËÉΩ",width:"520px"},{footer:a(()=>[l(i,{onClick:e[30]||(e[30]=t=>ve.value=!1)},{default:a(()=>[...e[81]||(e[81]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",loading:il.value,onClick:Tt},{default:a(()=>[...e[82]||(e[82]=[o("ÂÆâË£Ö",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(ae,{model:h.value,"label-width":"80px"},{default:a(()=>[l(_,{label:"ID"},{default:a(()=>[l(k,{modelValue:h.value.id,"onUpdate:modelValue":e[24]||(e[24]=t=>h.value.id=t),placeholder:"Â¶Ç translateÔºàËã±ÊñáÂ∞èÂÜôÔºâ"},null,8,["modelValue"])]),_:1}),l(_,{label:"ÂêçÁß∞"},{default:a(()=>[l(k,{modelValue:h.value.name,"onUpdate:modelValue":e[25]||(e[25]=t=>h.value.name=t),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1}),l(_,{label:"ÂõæÊ†á"},{default:a(()=>[l(k,{modelValue:h.value.icon,"onUpdate:modelValue":e[26]||(e[26]=t=>h.value.icon=t),placeholder:"ÂèØËæìÂÖ• emojiÔºåÂ¶Ç üåê"},null,8,["modelValue"])]),_:1}),l(_,{label:"ÂàÜÁ±ª"},{default:a(()=>[l(k,{modelValue:h.value.category,"onUpdate:modelValue":e[27]||(e[27]=t=>h.value.category=t),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1}),l(_,{label:"ÊèèËø∞"},{default:a(()=>[l(k,{modelValue:h.value.description,"onUpdate:modelValue":e[28]||(e[28]=t=>h.value.description=t),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËØ•ÊäÄËÉΩ"},null,8,["modelValue"])]),_:1}),l(_,{label:"Á≥ªÁªüÊåá‰ª§"},{default:a(()=>[l(k,{modelValue:h.value.promptContent,"onUpdate:modelValue":e[29]||(e[29]=t=>h.value.promptContent=t),type:"textarea",rows:5,placeholder:"ÔºàÂèØÈÄâÔºâÊ≥®ÂÖ•Âà∞Á≥ªÁªüÊèêÁ§∫ÁöÑ SKILL.md ÂÜÖÂÆπ"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),l(R,{label:"ÂéÜÂè≤ÂØπËØù",name:"convlogs"},{default:a(()=>[s("div",Ga,[e[83]||(e[83]=s("span",{style:{"font-weight":"600","font-size":"15px"}},"Ê∏†ÈÅìÂØπËØùËÆ∞ÂΩï",-1)),l(i,{size:"small",icon:V(Pe),circle:"",onClick:Nl,loading:Ie.value},null,8,["icon","loading"])]),gl((u(),b(Be,{data:dl.value,stripe:"","empty-text":"ÊöÇÊó†ÂØπËØùËÆ∞ÂΩï"},{default:a(()=>[l($,{label:"Ê∏†ÈÅì","min-width":"200"},{default:a(({row:t})=>[s("span",null,d(t.channelType==="telegram"?"Telegram":"Web")+" "+d(t.channelId),1)]),_:1}),l($,{label:"Ê∂àÊÅØÊï∞",width:"100"},{default:a(({row:t})=>[o(d(t.messageCount)+" Êù°",1)]),_:1}),l($,{label:"ÊúÄÂêéÊ¥ªË∑É",width:"180"},{default:a(({row:t})=>[o(d(t.lastAt?new Date(t.lastAt).toLocaleString("zh-CN"):"-"),1)]),_:1}),l($,{label:"Êìç‰Ωú",width:"100"},{default:a(({row:t})=>[l(i,{size:"small",type:"primary",plain:"",onClick:c=>Ft(t)},{default:a(()=>[...e[84]||(e[84]=[o("Êü•Áúã",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[vl,Ie.value]]),l(Mt,{modelValue:rl.value,"onUpdate:modelValue":e[32]||(e[32]=t=>rl.value=t),title:ml.value+" ÂØπËØùËÆ∞ÂΩï",direction:"rtl",size:"520px","destroy-on-close":!1},{default:a(()=>[s("div",Qa,[At.value?(u(),p("div",Xa,[l(i,{size:"small",plain:"",loading:ce.value,onClick:St},{default:a(()=>[...e[85]||(e[85]=[o("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):C("",!0),gl((u(),p("div",Za,[(u(!0),p(U,null,M(O.value,(t,c)=>(u(),p("div",{key:c,class:Rl(["conv-msg-item",t.role==="user"?"conv-msg-user":"conv-msg-assistant"])},[s("div",en,[s("span",ln,d(t.role==="user"?"Áî®Êà∑":"Âä©Êâã"),1),t.sender?(u(),p("span",tn,d(t.sender),1)):C("",!0),s("span",an,d(t.ts?new Date(t.ts).toLocaleString("zh-CN"):""),1)]),s("div",nn,d(t.content),1)],2))),128)),!ce.value&&O.value.length===0?(u(),p("div",sn," ÊöÇÊó†Ê∂àÊÅØËÆ∞ÂΩï ")):C("",!0)])),[[vl,ce.value&&O.value.length===0]])])]),_:1},8,["modelValue","title"])]),_:1}),l(R,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:a(()=>[l(H,{gutter:20},{default:a(()=>[l(S,{span:8},{default:a(()=>[l(I,{header:"Êñá‰ª∂ÂàóË°®"},{default:a(()=>[l(Bl,{data:Cl.value,props:{label:"name",children:"children"},onNodeClick:kt,"highlight-current":"","default-expand-all":""},null,8,["data"])]),_:1})]),_:1}),l(S,{span:16},{default:a(()=>[l(I,{header:Q.value||"ÈÄâÊã©Êñá‰ª∂Êü•Áúã"},{default:a(()=>[Q.value?(u(),p(U,{key:0},[l(k,{modelValue:re.value,"onUpdate:modelValue":e[33]||(e[33]=t=>re.value=t),type:"textarea",rows:20},null,8,["modelValue"]),s("div",on,[l(i,{type:"primary",onClick:xt},{default:a(()=>[...e[86]||(e[86]=[o("‰øùÂ≠ò",-1)])]),_:1}),Ae.value?(u(),b(F,{key:0,type:"info",size:"small"},{default:a(()=>[o(d($l(Ae.value.size))+" ¬∑ "+d(st(Ae.value.modTime)),1)]),_:1})):C("",!0)])],64)):C("",!0)]),_:1},8,["header"])]),_:1})]),_:1})]),_:1}),l(R,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:a(()=>[l(i,{type:"primary",onClick:e[34]||(e[34]=t=>me.value=!0),style:{"margin-bottom":"16px"}},{default:a(()=>[l(z,null,{default:a(()=>[l(V(Le))]),_:1}),e[87]||(e[87]=o(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),l(Be,{data:Tl.value,stripe:""},{default:a(()=>[l($,{prop:"name",label:"ÂêçÁß∞"}),l($,{label:"Ë∞ÉÂ∫¶"},{default:a(({row:t})=>[o(d(t.schedule?.expr)+" ("+d(t.schedule?.tz)+")",1)]),_:1}),l($,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:a(({row:t})=>[t.state?.lastRunAtMs?(u(),p(U,{key:0},[l(g,{type:t.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:a(()=>[o(d(t.state?.lastStatus),1)]),_:2},1032,["type"]),l(F,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:a(()=>[o(d(Ul(t.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(u(),b(F,{key:1,type:"info",size:"small"},{default:a(()=>[...e[88]||(e[88]=[o("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),l($,{label:"ÂêØÁî®",width:"80"},{default:a(({row:t})=>[l(ne,{modelValue:t.enabled,"onUpdate:modelValue":c=>t.enabled=c,onChange:c=>ht(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l($,{label:"Êìç‰Ωú",width:"220"},{default:a(({row:t})=>[t.payload?.message==="__MEMORY_CONSOLIDATE__"?(u(),p(U,{key:0},[l(g,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:a(()=>[...e[89]||(e[89]=[o("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),l(i,{size:"small",onClick:c=>Dl(t)},{default:a(()=>[...e[90]||(e[90]=[o("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(u(),p(U,{key:1},[l(i,{size:"small",onClick:c=>Dl(t)},{default:a(()=>[...e[91]||(e[91]=[o("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),l(i,{size:"small",type:"danger",onClick:c=>Vt(t)},{default:a(()=>[...e[92]||(e[92]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),l(ye,{modelValue:me.value,"onUpdate:modelValue":e[41]||(e[41]=t=>me.value=t),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:a(()=>[l(i,{onClick:e[40]||(e[40]=t=>me.value=!1)},{default:a(()=>[...e[93]||(e[93]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:Ct},{default:a(()=>[...e[94]||(e[94]=[o("ÂàõÂª∫",-1)])]),_:1})]),default:a(()=>[l(ae,{model:A.value,"label-width":"100px"},{default:a(()=>[l(_,{label:"ÂêçÁß∞"},{default:a(()=>[l(k,{modelValue:A.value.name,"onUpdate:modelValue":e[35]||(e[35]=t=>A.value.name=t)},null,8,["modelValue"])]),_:1}),l(_,{label:"Cron Ë°®ËææÂºè"},{default:a(()=>[l(k,{modelValue:A.value.expr,"onUpdate:modelValue":e[36]||(e[36]=t=>A.value.expr=t),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),l(_,{label:"Êó∂Âå∫"},{default:a(()=>[l(P,{modelValue:A.value.tz,"onUpdate:modelValue":e[37]||(e[37]=t=>A.value.tz=t)},{default:a(()=>[l(w,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),l(w,{label:"UTC",value:"UTC"}),l(w,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"Ê∂àÊÅØ"},{default:a(()=>[l(k,{modelValue:A.value.message,"onUpdate:modelValue":e[38]||(e[38]=t=>A.value.message=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),l(_,{label:"ÂêØÁî®"},{default:a(()=>[l(ne,{modelValue:A.value.enabled,"onUpdate:modelValue":e[39]||(e[39]=t=>A.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),l(R,{label:"Ê∏†ÈÅì",name:"channels"},{default:a(()=>[s("div",un,[l(F,{type:"info",size:"small"},{default:a(()=>[...e[95]||(e[95]=[o("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),l(i,{type:"primary",size:"small",onClick:ot},{default:a(()=>[l(z,null,{default:a(()=>[l(V(Le))]),_:1}),e[96]||(e[96]=o(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(u(!0),p(U,null,M(E.value,t=>(u(),p("div",{key:t.id,class:"channel-card"},[s("div",dn,[s("div",rn,[l(g,{size:"small",style:{"margin-right":"8px"}},{default:a(()=>[o(d(t.type),1)]),_:2},1024),s("span",mn,d(t.name),1),t.config?.botName?(u(),p("span",fn,"@"+d(t.config.botName),1)):C("",!0),l(g,{type:t.status==="ok"?"success":t.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:a(()=>[o(d(t.status==="ok"?"‚úì Ê≠£Â∏∏":t.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),s("div",pn,[l(ne,{modelValue:t.enabled,"onUpdate:modelValue":c=>t.enabled=c,size:"small",onChange:dt,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),l(i,{size:"small",onClick:c=>mt(t),loading:el.value===t.id},{default:a(()=>[...e[97]||(e[97]=[o("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),l(i,{size:"small",onClick:c=>it(t)},{default:a(()=>[...e[98]||(e[98]=[o("ÁºñËæë",-1)])]),_:1},8,["onClick"]),l(i,{size:"small",type:"danger",plain:"",onClick:c=>rt(t)},{default:a(()=>[...e[99]||(e[99]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),t.type==="web"?(u(),p("div",vn,[s("div",cn,[e[101]||(e[101]=s("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),s("span",yn,[l(Bt,{href:Z(V(v),t.id),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:a(()=>[o(d(Z(V(v),t.id)),1)]),_:2},1032,["href"]),l(i,{size:"small",link:"",style:{"margin-left":"8px"},onClick:c=>Fl(Z(V(v),t.id))},{default:a(()=>[...e[100]||(e[100]=[o("Â§çÂà∂",-1)])]),_:1},8,["onClick"])])]),s("div",gn,[e[102]||(e[102]=s("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),s("span",_n,[l(g,{size:"small",type:t.config?.password?"warning":"info",effect:"plain"},{default:a(()=>[o(d(t.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):C("",!0),t.type==="telegram"?(u(),p("div",bn,[s("div",wn,[e[104]||(e[104]=s("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),s("span",kn,[t.allowedFromUsers?.length?(u(!0),p(U,{key:0},M(t.allowedFromUsers,c=>(u(),b(g,{key:c.id,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:cl=>Sl(t.id,c.id)},{default:a(()=>[o(d(c.username?"@"+c.username:c.firstName||String(c.id))+" ",1),s("span",xn,"("+d(c.id)+")",1)]),_:2},1032,["onClose"]))),128)):t.config?.allowedFrom?(u(!0),p(U,{key:1},M(t.config.allowedFrom.split(","),c=>(u(),b(g,{key:c,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:cl=>Sl(t.id,Number(c.trim()))},{default:a(()=>[o(d(c.trim()),1)]),_:2},1032,["onClose"]))),128)):(u(),b(F,{key:2,type:"warning",size:"small"},{default:a(()=>[...e[103]||(e[103]=[o("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),s("div",Cn,[s("div",{class:"pending-section-header",onClick:c=>ft(t.id)},[e[106]||(e[106]=s("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),l(Ml,{value:(le.value[t.id]||[]).length,hidden:!(le.value[t.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),l(i,{size:"small",link:"",onClick:Qt(c=>Se(t.id),["stop"]),style:{"margin-left":"8px"}},{default:a(()=>[...e[105]||(e[105]=[o("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),l(z,{style:Ee([{"margin-left":"4px",transition:"transform 0.2s"},{transform:fe.value===t.id?"rotate(180deg)":""}])},{default:a(()=>[l(V(Xt))]),_:1},8,["style"])],8,hn),fe.value===t.id?(u(),p("div",Vn,[nl.value[t.id]?(u(),p("div",zn,[l(F,{type:"info",size:"small"},{default:a(()=>[...e[107]||(e[107]=[o("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(le.value[t.id]||[]).length?(u(!0),p(U,{key:1},M(le.value[t.id],c=>(u(),p("div",{key:c.id,class:"pending-user-row"},[s("div",Tn,[s("span",$n,d(c.firstName||"Êú™Áü•"),1),c.username?(u(),p("span",Un,"@"+d(c.username),1)):C("",!0),s("span",An,"ID: "+d(c.id),1),l(F,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:a(()=>[o(d(wl(c.lastSeen)),1)]),_:2},1024)]),s("div",Fn,[l(i,{size:"small",type:"success",plain:"",onClick:cl=>pt(t.id,c.id),loading:sl.value===`${t.id}-${c.id}`},{default:a(()=>[...e[108]||(e[108]=[o("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),l(i,{size:"small",type:"danger",plain:"",onClick:cl=>vt(t.id,c.id)},{default:a(()=>[...e[109]||(e[109]=[o("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(u(),p("div",Sn," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):C("",!0)])])):C("",!0)]))),128)),!Xe.value&&!E.value.length?(u(),b(pl,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):C("",!0),l(ye,{modelValue:X.value,"onUpdate:modelValue":e[52]||(e[52]=t=>X.value=t),title:L.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:a(()=>[l(i,{onClick:e[51]||(e[51]=t=>X.value=!1)},{default:a(()=>[...e[119]||(e[119]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:ut,loading:Ze.value},{default:a(()=>[...e[120]||(e[120]=[o("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(ae,{model:f.value,"label-width":"120px"},{default:a(()=>[l(_,{label:"Á±ªÂûã",required:""},{default:a(()=>[l(P,{modelValue:f.value.type,"onUpdate:modelValue":e[42]||(e[42]=t=>f.value.type=t),style:{width:"100%"}},{default:a(()=>[l(w,{label:"Telegram",value:"telegram"}),l(w,{label:"Web ËÅäÂ§©È°µ",value:"web"}),l(w,{label:"iMessage",value:"imessage"}),l(w,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"ÂêçÁß∞",required:""},{default:a(()=>[l(k,{modelValue:f.value.name,"onUpdate:modelValue":e[43]||(e[43]=t=>f.value.name=t),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),f.value.type==="telegram"?(u(),p(U,{key:0},[l(_,{label:"Bot Token",required:""},{default:a(()=>[s("div",Dn,[s("div",Nn,[l(k,{modelValue:f.value.botToken,"onUpdate:modelValue":e[44]||(e[44]=t=>f.value.botToken=t),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ",style:{flex:"1"},status:x.value.status==="error"?"error":x.value.status==="ok"?"success":""},null,8,["modelValue","status"]),l(i,{size:"default",loading:x.value.loading,type:x.value.status==="ok"?"success":x.value.status==="error"?"danger":"default",onClick:Al,disabled:!f.value.botToken||tl(f.value.botToken)},{default:a(()=>[...e[110]||(e[110]=[o("È™åËØÅ",-1)])]),_:1},8,["loading","type","disabled"])]),x.value.loading?(u(),p("div",In,[l(z,{class:"is-loading"},{default:a(()=>[l(V(Pe))]),_:1}),e[111]||(e[111]=o(" Ê≠£Âú®È™åËØÅ Token‚Ä¶ ",-1))])):x.value.status==="ok"?(u(),p("div",Mn,[l(z,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:a(()=>[l(Lt)]),_:1}),e[112]||(e[112]=o("Token ÊúâÊïàÔºåBot ÂêçÁß∞Ôºö",-1)),s("b",null,"@"+d(x.value.botName),1)])):x.value.status==="duplicate"?(u(),p("div",Bn,[l(z,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:a(()=>[l(Et)]),_:1}),e[113]||(e[113]=o("Ê≠§ Token Â∑≤Ë¢´ÊàêÂëò„Äå",-1)),s("b",null,d(x.value.usedBy),1),o("„ÄçÁöÑÊ∏†ÈÅì„Äå"+d(x.value.usedByCh)+"„Äç‰ΩøÁî® ",1)])):x.value.status==="error"?(u(),p("div",Ln,[l(z,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:a(()=>[l(Pt)]),_:1}),o(d(x.value.error),1)])):(u(),p("div",En,[l(F,{type:"info",size:"small"},{default:a(()=>[l(z,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:a(()=>[l(El)]),_:1}),e[114]||(e[114]=o("ËæìÂÖ•ÂÆåÊàêÂêéËá™Âä®È™åËØÅÔºå‰πüÂèØÁÇπÂè≥‰æß„ÄåÈ™åËØÅ„ÄçÊåâÈíÆÊâãÂä®Ëß¶Âèë",-1))]),_:1})]))])]),_:1}),l(_,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:a(()=>[l(k,{modelValue:f.value.allowedFrom,"onUpdate:modelValue":e[45]||(e[45]=t=>f.value.allowedFrom=t),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),l(F,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:a(()=>[l(z,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:a(()=>[l(El)]),_:1}),e[115]||(e[115]=o("ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1))]),_:1})]),_:1})],64)):C("",!0),f.value.type==="web"?(u(),p(U,{key:1},[L.value?(u(),b(_,{key:0,label:"ËÆøÈóÆÈìæÊé•"},{default:a(()=>[s("div",Pn,[l(z,{style:{"flex-shrink":"0",color:"#909399"}},{default:a(()=>[l(Pl)]),_:1}),s("span",Rn,d(Z(V(v),L.value)),1),l(i,{size:"small",link:"",onClick:e[46]||(e[46]=t=>Fl(Z(V(v),L.value)))},{default:a(()=>[...e[116]||(e[116]=[o("Â§çÂà∂",-1)])]),_:1})])]),_:1})):C("",!0),L.value?C("",!0):(u(),b(_,{key:1,label:"ËÆøÈóÆÈìæÊé•"},{default:a(()=>[s("div",Wn,[l(z,{style:{"flex-shrink":"0",color:"#909399"}},{default:a(()=>[l(Pl)]),_:1}),s("span",jn,d(Z(V(v),Fe.value)),1),l(g,{size:"small",type:"info",effect:"plain"},{default:a(()=>[...e[117]||(e[117]=[o("‰øùÂ≠òÂêéÁîüÊïà",-1)])]),_:1})]),l(F,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:a(()=>[...e[118]||(e[118]=[o(" ÊØè‰∏™ Web Ê∏†ÈÅìÊúâÁã¨Á´ãÈìæÊé•ÔºåÂèØÂêåÊó∂ÂºÄÊîæÂ§ö‰∏™ÂÖ•Âè£ ",-1)])]),_:1})]),_:1})),l(_,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:a(()=>[l(k,{modelValue:f.value.webPassword,"onUpdate:modelValue":e[47]||(e[47]=t=>f.value.webPassword=t),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),l(_,{label:"Ê¨¢ËøéËØ≠"},{default:a(()=>[l(k,{modelValue:f.value.webWelcome,"onUpdate:modelValue":e[48]||(e[48]=t=>f.value.webWelcome=t),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),l(_,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:a(()=>[l(k,{modelValue:f.value.webTitle,"onUpdate:modelValue":e[49]||(e[49]=t=>f.value.webTitle=t),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):C("",!0),l(_,{label:"ÂêØÁî®"},{default:a(()=>[l(ne,{modelValue:f.value.enabled,"onUpdate:modelValue":e[50]||(e[50]=t=>f.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Qn=na(Yn,[["__scopeId","data-v-fb65aced"]]);export{Qn as default};
