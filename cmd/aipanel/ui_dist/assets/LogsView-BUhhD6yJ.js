import{d as U,D as y,i as B,I as z,c as u,b as l,a as o,w as g,h as w,t as x,l as V,U as E,N as O,e as r,z as W,H as C,r as n,o as d,F as D,m as H,s as S,k as G}from"./index-BKdoBjUU.js";import{p as M}from"./index-B6SLQW8T.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"logs-page"},J={class:"logs-header"},K={style:{margin:"0"}},P={style:{"font-size":"13px",color:"#909399","margin-top":"4px"}},Q={style:{display:"flex",gap:"10px","align-items":"center"}},X={class:"log-text"},Y={key:0,class:"log-empty"},Z=U({__name:"LogsView",setup($){const p=r([]),a=r(""),_=r(!1),i=r(!0),h=r(null);let f=null;const c=W(()=>{if(!a.value)return p.value;const t=a.value.toLowerCase();return p.value.filter(e=>e.toLowerCase().includes(t))});function L(t){const e=t.toUpperCase();return e.includes("ERROR")||e.includes("[ERR]")||e.includes("FATAL")?"level-error":e.includes("WARN")||e.includes("[WARN]")||e.includes("WARNING")?"level-warn":e.includes("INFO")||e.includes("[INFO]")?"level-info":"level-default"}async function m(){_.value=!0;try{const t=await M.get(500);p.value=t.data.lines??[],i.value&&(await C(),v())}catch{}finally{_.value=!1}}function v(){const t=h.value;t&&(t.scrollTop=t.scrollHeight)}return y(i,t=>{t&&v()}),y(c,async()=>{i.value&&(await C(),v())}),B(()=>{m(),f=setInterval(m,5e3)}),z(()=>{f&&clearInterval(f)}),(t,e)=>{const N=n("List"),k=n("el-icon"),R=n("el-input"),I=n("el-switch"),A=n("el-button"),b=n("el-empty"),F=n("el-card");return d(),u("div",q,[l("div",J,[l("div",null,[l("h2",K,[o(k,{style:{"vertical-align":"-2px","margin-right":"6px"}},{default:g(()=>[o(N)]),_:1}),e[2]||(e[2]=w("系统日志",-1))]),l("div",P," 共 "+x(c.value.length)+" 条 · 每 5 秒自动刷新 ",1)]),l("div",Q,[o(R,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),placeholder:"关键词过滤…",clearable:"",style:{width:"220px"},"prefix-icon":V(E)},null,8,["modelValue","prefix-icon"]),o(I,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),"active-text":"自动滚动"},null,8,["modelValue"]),o(A,{onClick:m,loading:_.value,icon:V(O)},{default:g(()=>[...e[3]||(e[3]=[w("刷新",-1)])]),_:1},8,["loading","icon"])])]),o(F,{shadow:"never",class:"log-card"},{default:g(()=>[l("div",{ref_key:"logContainer",ref:h,class:"log-container"},[(d(!0),u(D,null,H(c.value,(s,T)=>(d(),u("div",{key:T,class:S(["log-line",L(s)])},[l("span",X,x(s),1)],2))),128)),c.value.length===0?(d(),u("div",Y,[o(b,{description:a.value?"无匹配日志":"暂无日志内容"},null,8,["description"])])):G("",!0)],512)]),_:1})])}}}),oe=j(Z,[["__scopeId","data-v-abf510f6"]]);export{oe as default};
