import{m as _}from"./index-D9iuGmy4.js";import{d as H,h as R,c as P,f as D,a,w as t,g as b,r as d,o as f,e as s,t as V,k,l as J,F as Q,j as W,q as X,m as Y,E as i,M as Z}from"./index-CT8hF4h0.js";const ee={class:"models-page"},le={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px"}},ae={style:{"font-size":"12px",color:"#909399"}},de=H({__name:"ModelsView",setup(te){const M=b([]),r=b(!1),c=b(""),w=b(!1),C=b(""),o=X({id:"",name:"",provider:"anthropic",model:"claude-sonnet-4-6",apiKey:"",isDefault:!1}),S={anthropic:[{label:"Claude Sonnet 4",value:"claude-sonnet-4-6"},{label:"Claude Opus 4",value:"claude-opus-4-0"},{label:"Claude Haiku 3.5",value:"claude-3-5-haiku-20241022"}],openai:[{label:"GPT-4o",value:"gpt-4o"},{label:"GPT-4o Mini",value:"gpt-4o-mini"},{label:"o1",value:"o1"}],deepseek:[{label:"DeepSeek V3",value:"deepseek-chat"},{label:"DeepSeek R1",value:"deepseek-reasoner"}]},z=Y(()=>S[o.provider]||[]);function U(){const n=z.value;n.length&&n[0]&&(o.model=n[0].value,o.name=n[0].label,o.id=o.provider+"-"+o.model.replace(/[^a-z0-9]/g,"-"))}R(y);async function y(){try{const n=await _.list();M.value=n.data}catch{}}function A(){c.value="",Object.assign(o,{id:"",name:"",provider:"anthropic",model:"claude-sonnet-4-6",apiKey:"",isDefault:!1}),U(),r.value=!0}function B(n){c.value=n.id,Object.assign(o,{...n}),r.value=!0}async function E(){if(!o.id||!o.provider||!o.model){i.warning("è¯·å¡«å†™å¿…è¦å­—æ®µ");return}w.value=!0;try{c.value?await _.update(c.value,{...o}):await _.create({...o,status:"untested"}),i.success("ä¿å­˜æˆåŠŸ"),r.value=!1,y()}catch(n){i.error(n.response?.data?.error||"ä¿å­˜å¤±è´¥")}finally{w.value=!1}}async function I(n){C.value=n.id;try{const l=await _.test(n.id);l.data.valid?i.success("è¿žæŽ¥æˆåŠŸï¼"):i.error("è¿žæŽ¥å¤±è´¥: "+(l.data.error||"")),y()}catch{i.error("æµ‹è¯•è¯·æ±‚å¤±è´¥")}finally{C.value=""}}async function O(n){try{await Z.confirm(`ç¡®å®šåˆ é™¤æ¨¡åž‹ "${n.name}"ï¼Ÿ`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await _.delete(n.id),i.success("å·²åˆ é™¤"),y()}catch{}}return(n,l)=>{const $=d("Plus"),j=d("el-icon"),p=d("el-button"),x=d("el-tag"),u=d("el-table-column"),q=d("el-text"),N=d("el-table"),T=d("el-card"),v=d("el-option"),h=d("el-select"),m=d("el-form-item"),g=d("el-input"),F=d("el-switch"),G=d("el-form"),L=d("el-dialog");return f(),P("div",ee,[D("div",le,[l[10]||(l[10]=D("h2",{style:{margin:"0"}},"ðŸ¤– æ¨¡åž‹é…ç½®",-1)),a(p,{type:"primary",onClick:A},{default:t(()=>[a(j,null,{default:t(()=>[a($)]),_:1}),l[9]||(l[9]=s(" æ·»åŠ æ¨¡åž‹ ",-1))]),_:1})]),a(T,{shadow:"hover"},{default:t(()=>[a(N,{data:M.value,stripe:""},{default:t(()=>[a(u,{label:"æä¾›å•†",width:"120"},{default:t(({row:e})=>[a(x,{size:"small"},{default:t(()=>[s(V(e.provider),1)]),_:2},1024)]),_:1}),a(u,{prop:"name",label:"åç§°","min-width":"160"}),a(u,{label:"æ¨¡åž‹","min-width":"180"},{default:t(({row:e})=>[a(q,{type:"info",size:"small"},{default:t(()=>[s(V(e.model),1)]),_:2},1024)]),_:1}),a(u,{label:"API Key","min-width":"180"},{default:t(({row:e})=>[D("code",ae,V(e.apiKey),1)]),_:1}),a(u,{label:"çŠ¶æ€",width:"100"},{default:t(({row:e})=>[a(x,{type:e.status==="ok"?"success":e.status==="error"?"danger":"info",size:"small"},{default:t(()=>[s(V(e.status==="ok"?"âœ“ æœ‰æ•ˆ":e.status==="error"?"âœ— æ— æ•ˆ":"? æœªæµ‹è¯•"),1)]),_:2},1032,["type"])]),_:1}),a(u,{label:"é»˜è®¤",width:"70"},{default:t(({row:e})=>[e.isDefault?(f(),k(x,{key:0,type:"warning",size:"small"},{default:t(()=>[...l[11]||(l[11]=[s("é»˜è®¤",-1)])]),_:1})):J("",!0)]),_:1}),a(u,{label:"æ“ä½œ",width:"180"},{default:t(({row:e})=>[a(p,{size:"small",onClick:K=>I(e),loading:C.value===e.id},{default:t(()=>[...l[12]||(l[12]=[s("æµ‹è¯•",-1)])]),_:1},8,["onClick","loading"]),a(p,{size:"small",onClick:K=>B(e)},{default:t(()=>[...l[13]||(l[13]=[s("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),a(p,{size:"small",type:"danger",onClick:K=>O(e)},{default:t(()=>[...l[14]||(l[14]=[s("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),a(L,{modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=e=>r.value=e),title:c.value?"ç¼–è¾‘æ¨¡åž‹":"æ·»åŠ æ¨¡åž‹",width:"520px"},{footer:t(()=>[a(p,{onClick:l[7]||(l[7]=e=>r.value=!1)},{default:t(()=>[...l[15]||(l[15]=[s("å–æ¶ˆ",-1)])]),_:1}),a(p,{type:"primary",onClick:E,loading:w.value},{default:t(()=>[...l[16]||(l[16]=[s("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:t(()=>[a(G,{model:o,"label-width":"100px"},{default:t(()=>[a(m,{label:"æä¾›å•†",required:""},{default:t(()=>[a(h,{modelValue:o.provider,"onUpdate:modelValue":l[0]||(l[0]=e=>o.provider=e),onChange:U,style:{width:"100%"}},{default:t(()=>[a(v,{label:"Anthropic",value:"anthropic"}),a(v,{label:"OpenAI",value:"openai"}),a(v,{label:"DeepSeek",value:"deepseek"}),a(v,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"æ¨¡åž‹",required:""},{default:t(()=>[o.provider!=="custom"?(f(),k(h,{key:0,modelValue:o.model,"onUpdate:modelValue":l[1]||(l[1]=e=>o.model=e),style:{width:"100%"}},{default:t(()=>[(f(!0),P(Q,null,W(z.value,e=>(f(),k(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(f(),k(g,{key:1,modelValue:o.model,"onUpdate:modelValue":l[2]||(l[2]=e=>o.model=e),placeholder:"æ¨¡åž‹åç§°"},null,8,["modelValue"]))]),_:1}),a(m,{label:"æ˜¾ç¤ºåç§°"},{default:t(()=>[a(g,{modelValue:o.name,"onUpdate:modelValue":l[3]||(l[3]=e=>o.name=e),placeholder:"å¦‚ Claude Sonnet 4"},null,8,["modelValue"])]),_:1}),a(m,{label:"ID"},{default:t(()=>[a(g,{modelValue:o.id,"onUpdate:modelValue":l[4]||(l[4]=e=>o.id=e),placeholder:"å”¯ä¸€æ ‡è¯†"},null,8,["modelValue"])]),_:1}),a(m,{label:"API Key",required:""},{default:t(()=>[a(g,{modelValue:o.apiKey,"onUpdate:modelValue":l[5]||(l[5]=e=>o.apiKey=e),type:"password","show-password":"",placeholder:"sk-..."},null,8,["modelValue"])]),_:1}),a(m,{label:"è®¾ä¸ºé»˜è®¤"},{default:t(()=>[a(F,{modelValue:o.isDefault,"onUpdate:modelValue":l[6]||(l[6]=e=>o.isDefault=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{de as default};
