import{h as Y,g,d as Z,i as ee,j as te,k as w,w as l,r as o,a as e,f as s,c as D,l as I,m as h,F as S,e as i,n as le,E as x,o as m,t as c,_ as ne}from"./index-DuuYJQLL.js";import{b as U}from"./index-BoGt_95K.js";const oe=Y("agents",()=>{const b=g([]),u=g(!1);async function r(){u.value=!0;try{const a=await U.list();b.value=a.data}catch(a){console.error("Failed to fetch agents",a)}finally{u.value=!1}}async function _(a,f,V){const p=await U.create({id:a,name:f,model:V});return b.value.push(p.data),p.data}return{list:b,loading:u,fetchAll:r,createAgent:_}}),ae={class:"sidebar-header"},se={class:"sidebar-footer"},ue={class:"top-bar"},de={class:"agent-card-header"},ie={class:"agent-card-stats"},re={class:"stat"},ce={class:"stat-value",style:{"font-size":"14px"}},pe={class:"stat"},me={class:"stat-value"},_e=Z({__name:"DashboardView",setup(b){const u=oe(),r=g(!1),_=g(!1),a=g({id:"",name:"",model:"anthropic/claude-sonnet-4-6"});let f=null;ee(()=>{u.fetchAll(),f=setInterval(()=>u.fetchAll(),3e4)}),te(()=>{f&&clearInterval(f)});function V(d){return d==="running"?"success":d==="stopped"?"danger":"info"}function p(d){return d==="running"?"运行中":d==="stopped"?"已停止":"空闲"}async function z(){if(!a.value.id||!a.value.name){x.warning("请填写 ID 和名称");return}_.value=!0;try{await u.createAgent(a.value.id,a.value.name,a.value.model),x.success("创建成功"),r.value=!1,a.value={id:"",name:"",model:"anthropic/claude-sonnet-4-6"}}catch(d){x.error(d.response?.data?.error||"创建失败")}finally{_.value=!1}}return(d,t)=>{const B=o("Monitor"),v=o("el-icon"),M=o("User"),A=o("el-tag"),N=o("el-menu-item"),T=o("el-menu"),E=o("Plus"),y=o("el-button"),F=o("el-aside"),P=o("Setting"),L=o("el-text"),R=o("ChatDotRound"),j=o("el-card"),G=o("el-col"),O=o("el-row"),q=o("el-empty"),H=o("el-main"),$=o("el-input"),C=o("el-form-item"),k=o("el-option"),J=o("el-select"),K=o("el-form"),Q=o("el-dialog"),W=o("el-container");return m(),w(W,{class:"dashboard"},{default:l(()=>[e(F,{width:"240px",class:"sidebar"},{default:l(()=>[s("div",ae,[e(v,{size:20},{default:l(()=>[e(B)]),_:1}),t[7]||(t[7]=s("span",{class:"title"},"AI 员工",-1))]),e(T,{"default-active":"",class:"sidebar-menu"},{default:l(()=>[(m(!0),D(S,null,I(h(u).list,n=>(m(),w(N,{key:n.id,index:n.id,onClick:X=>d.$router.push(`/agents/${n.id}`)},{default:l(()=>[e(v,null,{default:l(()=>[e(M)]),_:1}),s("span",null,c(n.name),1),e(A,{type:V(n.status),size:"small",style:{"margin-left":"auto"}},{default:l(()=>[i(c(p(n.status)),1)]),_:2},1032,["type"])]),_:2},1032,["index","onClick"]))),128))]),_:1}),s("div",se,[e(y,{type:"primary",onClick:t[0]||(t[0]=n=>r.value=!0),style:{width:"100%"}},{default:l(()=>[e(v,null,{default:l(()=>[e(E)]),_:1}),t[8]||(t[8]=i(" 新建员工 ",-1))]),_:1})])]),_:1}),e(H,{class:"main-area"},{default:l(()=>[s("div",ue,[t[10]||(t[10]=s("h2",null,"仪表盘",-1)),e(y,{onClick:t[1]||(t[1]=n=>d.$router.push("/config"))},{default:l(()=>[e(v,null,{default:l(()=>[e(P)]),_:1}),t[9]||(t[9]=i(" 配置中心 ",-1))]),_:1})]),e(O,{gutter:20},{default:l(()=>[(m(!0),D(S,null,I(h(u).list,n=>(m(),w(G,{span:8,key:n.id},{default:l(()=>[e(j,{class:"agent-card",shadow:"hover",onClick:X=>d.$router.push(`/agents/${n.id}`)},{default:l(()=>[s("div",de,[s("div",null,[s("h3",null,c(n.name),1),e(L,{type:"info",size:"small"},{default:l(()=>[i(c(n.model),1)]),_:2},1024)]),e(A,{type:V(n.status)},{default:l(()=>[i(c(p(n.status)),1)]),_:2},1032,["type"])]),s("div",ie,[s("div",re,[t[11]||(t[11]=s("span",{class:"stat-label"},"ID",-1)),s("span",ce,c(n.id),1)]),s("div",pe,[t[12]||(t[12]=s("span",{class:"stat-label"},"状态",-1)),s("span",me,c(p(n.status)),1)])]),e(y,{type:"primary",size:"small",style:{width:"100%","margin-top":"12px"}},{default:l(()=>[e(v,null,{default:l(()=>[e(R)]),_:1}),t[13]||(t[13]=i(" 对话 ",-1))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),!h(u).loading&&h(u).list.length===0?(m(),w(q,{key:0,description:"暂无 AI 员工，点击「新建员工」开始"})):le("",!0)]),_:1}),e(Q,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=n=>r.value=n),title:"新建 AI 员工",width:"480px"},{footer:l(()=>[e(y,{onClick:t[5]||(t[5]=n=>r.value=!1)},{default:l(()=>[...t[14]||(t[14]=[i("取消",-1)])]),_:1}),e(y,{type:"primary",onClick:z,loading:_.value},{default:l(()=>[...t[15]||(t[15]=[i("创建",-1)])]),_:1},8,["loading"])]),default:l(()=>[e(K,{model:a.value,"label-width":"80px"},{default:l(()=>[e(C,{label:"ID"},{default:l(()=>[e($,{modelValue:a.value.id,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.id=n),placeholder:"英文标识，如 analyst"},null,8,["modelValue"])]),_:1}),e(C,{label:"名称"},{default:l(()=>[e($,{modelValue:a.value.name,"onUpdate:modelValue":t[3]||(t[3]=n=>a.value.name=n),placeholder:"如：数据分析师"},null,8,["modelValue"])]),_:1}),e(C,{label:"模型"},{default:l(()=>[e(J,{modelValue:a.value.model,"onUpdate:modelValue":t[4]||(t[4]=n=>a.value.model=n),style:{width:"100%"}},{default:l(()=>[e(k,{label:"Claude Sonnet 4",value:"anthropic/claude-sonnet-4-6"}),e(k,{label:"Claude Opus 4",value:"anthropic/claude-opus-4-0"}),e(k,{label:"GPT-4o",value:"openai/gpt-4o"}),e(k,{label:"DeepSeek V3",value:"deepseek/deepseek-chat"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}}),ye=ne(_e,[["__scopeId","data-v-4b8e8df6"]]);export{ye as default};
