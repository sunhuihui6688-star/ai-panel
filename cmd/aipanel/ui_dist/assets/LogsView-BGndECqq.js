import{d as T,B as w,h as B,T as F,c as u,f as t,t as y,a,k as h,P as b,w as x,G as U,g as i,x as E,N as V,r,o as d,e as O,F as W,l as z,q as G,j as S}from"./index-UFzGNFqv.js";import{o as j}from"./index-DVBr8Fmz.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"logs-page"},H={class:"logs-header"},M={style:{"font-size":"13px",color:"#909399","margin-top":"4px"}},P={style:{display:"flex",gap:"10px","align-items":"center"}},J={class:"log-text"},K={key:0,class:"log-empty"},Q=T({__name:"LogsView",setup(X){const p=i([]),n=i(""),f=i(!1),s=i(!0),g=i(null);let v=null;const c=E(()=>{if(!n.value)return p.value;const l=n.value.toLowerCase();return p.value.filter(e=>e.toLowerCase().includes(l))});function C(l){const e=l.toUpperCase();return e.includes("ERROR")||e.includes("[ERR]")||e.includes("FATAL")?"level-error":e.includes("WARN")||e.includes("[WARN]")||e.includes("WARNING")?"level-warn":e.includes("INFO")||e.includes("[INFO]")?"level-info":"level-default"}async function _(){f.value=!0;try{const l=await j.get(500);p.value=l.data.lines??[],s.value&&(await V(),m())}catch{}finally{f.value=!1}}function m(){const l=g.value;l&&(l.scrollTop=l.scrollHeight)}return w(s,l=>{l&&m()}),w(c,async()=>{s.value&&(await V(),m())}),B(()=>{_(),v=setInterval(_,5e3)}),F(()=>{v&&clearInterval(v)}),(l,e)=>{const N=r("el-input"),k=r("el-switch"),L=r("el-button"),R=r("el-empty"),A=r("el-card");return d(),u("div",D,[t("div",H,[t("div",null,[e[2]||(e[2]=t("h2",{style:{margin:"0"}},"ğŸ“‹ ç³»ç»Ÿæ—¥å¿—",-1)),t("div",M," å…± "+y(c.value.length)+" æ¡ Â· æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–° ",1)]),t("div",P,[a(N,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),placeholder:"å…³é”®è¯è¿‡æ»¤â€¦",clearable:"",style:{width:"220px"},"prefix-icon":h(b)},null,8,["modelValue","prefix-icon"]),a(k,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value=o),"active-text":"è‡ªåŠ¨æ»šåŠ¨"},null,8,["modelValue"]),a(L,{onClick:_,loading:f.value,icon:h(U)},{default:x(()=>[...e[3]||(e[3]=[O("åˆ·æ–°",-1)])]),_:1},8,["loading","icon"])])]),a(A,{shadow:"never",class:"log-card"},{default:x(()=>[t("div",{ref_key:"logContainer",ref:g,class:"log-container"},[(d(!0),u(W,null,z(c.value,(o,I)=>(d(),u("div",{key:I,class:G(["log-line",C(o)])},[t("span",J,y(o),1)],2))),128)),c.value.length===0?(d(),u("div",K,[a(R,{description:n.value?"æ— åŒ¹é…æ—¥å¿—":"æš‚æ— æ—¥å¿—å†…å®¹"},null,8,["description"])])):S("",!0)],512)]),_:1})])}}}),ee=q(Q,[["__scopeId","data-v-fb335451"]]);export{ee as default};
