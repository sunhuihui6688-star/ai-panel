import{h as X,g as y,d as Y,i as Z,j as w,w as l,r as o,a as e,f as s,c as D,k as S,l as C,F as I,e as i,m as ee,E as x,o as p,t as c,_ as te}from"./index-B-U8TcRI.js";import{b as U}from"./index-BEdvr7UB.js";const le=X("agents",()=>{const g=y([]),d=y(!1);async function r(){d.value=!0;try{const a=await U.list();g.value=a.data}catch(a){console.error("Failed to fetch agents",a)}finally{d.value=!1}}async function m(a,b,_){const V=await U.create({id:a,name:b,model:_});return g.value.push(V.data),V.data}return{list:g,loading:d,fetchAll:r,createAgent:m}}),ne={class:"sidebar-header"},oe={class:"sidebar-footer"},ae={class:"top-bar"},se={class:"agent-card-header"},ue={class:"agent-card-stats"},de={class:"stat"},ie={class:"stat-value"},re=Y({__name:"DashboardView",setup(g){const d=le(),r=y(!1),m=y(!1),a=y({id:"",name:"",model:"anthropic/claude-sonnet-4-6"});Z(()=>d.fetchAll());function b(u){return u==="running"?"success":u==="stopped"?"danger":"info"}function _(u){return u==="running"?"运行中":u==="stopped"?"已停止":"空闲"}async function V(){if(!a.value.id||!a.value.name){x.warning("请填写 ID 和名称");return}m.value=!0;try{await d.createAgent(a.value.id,a.value.name,a.value.model),x.success("创建成功"),r.value=!1,a.value={id:"",name:"",model:"anthropic/claude-sonnet-4-6"}}catch(u){x.error(u.response?.data?.error||"创建失败")}finally{m.value=!1}}return(u,t)=>{const z=o("Monitor"),f=o("el-icon"),B=o("User"),$=o("el-tag"),M=o("el-menu-item"),N=o("el-menu"),E=o("Plus"),v=o("el-button"),F=o("el-aside"),P=o("Setting"),T=o("el-text"),L=o("ChatDotRound"),R=o("el-card"),j=o("el-col"),G=o("el-row"),O=o("el-empty"),q=o("el-main"),A=o("el-input"),h=o("el-form-item"),k=o("el-option"),H=o("el-select"),J=o("el-form"),K=o("el-dialog"),Q=o("el-container");return p(),w(Q,{class:"dashboard"},{default:l(()=>[e(F,{width:"240px",class:"sidebar"},{default:l(()=>[s("div",ne,[e(f,{size:20},{default:l(()=>[e(z)]),_:1}),t[7]||(t[7]=s("span",{class:"title"},"AI 员工",-1))]),e(N,{"default-active":"",class:"sidebar-menu"},{default:l(()=>[(p(!0),D(I,null,S(C(d).list,n=>(p(),w(M,{key:n.id,index:n.id,onClick:W=>u.$router.push(`/agents/${n.id}`)},{default:l(()=>[e(f,null,{default:l(()=>[e(B)]),_:1}),s("span",null,c(n.name),1),e($,{type:b(n.status),size:"small",style:{"margin-left":"auto"}},{default:l(()=>[i(c(_(n.status)),1)]),_:2},1032,["type"])]),_:2},1032,["index","onClick"]))),128))]),_:1}),s("div",oe,[e(v,{type:"primary",onClick:t[0]||(t[0]=n=>r.value=!0),style:{width:"100%"}},{default:l(()=>[e(f,null,{default:l(()=>[e(E)]),_:1}),t[8]||(t[8]=i(" 新建员工 ",-1))]),_:1})])]),_:1}),e(q,{class:"main-area"},{default:l(()=>[s("div",ae,[t[10]||(t[10]=s("h2",null,"仪表盘",-1)),e(v,{onClick:t[1]||(t[1]=n=>u.$router.push("/config"))},{default:l(()=>[e(f,null,{default:l(()=>[e(P)]),_:1}),t[9]||(t[9]=i(" 配置中心 ",-1))]),_:1})]),e(G,{gutter:20},{default:l(()=>[(p(!0),D(I,null,S(C(d).list,n=>(p(),w(j,{span:8,key:n.id},{default:l(()=>[e(R,{class:"agent-card",shadow:"hover",onClick:W=>u.$router.push(`/agents/${n.id}`)},{default:l(()=>[s("div",se,[s("div",null,[s("h3",null,c(n.name),1),e(T,{type:"info",size:"small"},{default:l(()=>[i(c(n.model),1)]),_:2},1024)]),e($,{type:b(n.status)},{default:l(()=>[i(c(_(n.status)),1)]),_:2},1032,["type"])]),s("div",ue,[t[12]||(t[12]=s("div",{class:"stat"},[s("span",{class:"stat-label"},"今日消息"),s("span",{class:"stat-value"},"0")],-1)),s("div",de,[t[11]||(t[11]=s("span",{class:"stat-label"},"状态",-1)),s("span",ie,c(_(n.status)),1)])]),e(v,{type:"primary",size:"small",style:{width:"100%","margin-top":"12px"}},{default:l(()=>[e(f,null,{default:l(()=>[e(L)]),_:1}),t[13]||(t[13]=i(" 对话 ",-1))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),!C(d).loading&&C(d).list.length===0?(p(),w(O,{key:0,description:"暂无 AI 员工，点击「新建员工」开始"})):ee("",!0)]),_:1}),e(K,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=n=>r.value=n),title:"新建 AI 员工",width:"480px"},{footer:l(()=>[e(v,{onClick:t[5]||(t[5]=n=>r.value=!1)},{default:l(()=>[...t[14]||(t[14]=[i("取消",-1)])]),_:1}),e(v,{type:"primary",onClick:V,loading:m.value},{default:l(()=>[...t[15]||(t[15]=[i("创建",-1)])]),_:1},8,["loading"])]),default:l(()=>[e(J,{model:a.value,"label-width":"80px"},{default:l(()=>[e(h,{label:"ID"},{default:l(()=>[e(A,{modelValue:a.value.id,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.id=n),placeholder:"英文标识，如 analyst"},null,8,["modelValue"])]),_:1}),e(h,{label:"名称"},{default:l(()=>[e(A,{modelValue:a.value.name,"onUpdate:modelValue":t[3]||(t[3]=n=>a.value.name=n),placeholder:"如：数据分析师"},null,8,["modelValue"])]),_:1}),e(h,{label:"模型"},{default:l(()=>[e(H,{modelValue:a.value.model,"onUpdate:modelValue":t[4]||(t[4]=n=>a.value.model=n),style:{width:"100%"}},{default:l(()=>[e(k,{label:"Claude Sonnet 4",value:"anthropic/claude-sonnet-4-6"}),e(k,{label:"Claude Opus 4",value:"anthropic/claude-opus-4-0"}),e(k,{label:"GPT-4o",value:"openai/gpt-4o"}),e(k,{label:"DeepSeek V3",value:"deepseek/deepseek-chat"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}}),me=te(re,[["__scopeId","data-v-3a1321fb"]]);export{me as default};
