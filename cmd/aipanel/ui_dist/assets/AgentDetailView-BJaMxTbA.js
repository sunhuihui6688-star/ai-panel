import{d as et,D as Ll,i as lt,o,c as v,b as n,a as e,w as t,k as $,F as W,m as ie,s as ge,t as p,j as C,h as u,f as Je,n as ke,p as je,G as Il,v as Zt,l as P,e as d,z as pl,E as y,H as fl,r as b,I as ea,J as la,g as Ge,T as mt,K as ta,x as Sl,L as aa,A as na,B as Nl,M as sa,N as Zl,O as oa,P as ia,Q as ua,R as da}from"./index-0gFKGKul.js";import{h as $l,f as G,i as wt,b as Vl,m as ra,j as zl,k as Tl,g as Bl,r as yt,e as Ie,l as gt}from"./index-BclxA8EE.js";import{A as tt}from"./AiChat-D6X86uRz.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ca={class:"skill-studio"},va={class:"sidebar-top"},fa={class:"sidebar-acts"},pa={class:"skill-list"},ma={key:0,class:"list-empty"},ya=["onClick"],ga={class:"sk-icon"},_a={key:0},wa={class:"sk-info"},ba={class:"sk-name"},ka={class:"sk-id"},ha={class:"sk-right"},xa={key:0,class:"sk-streaming-dot",title:"AI ÁîüÊàê‰∏≠‚Ä¶"},Ca={class:"studio-editor"},$a={key:0,class:"editor-empty"},Va={class:"editor-toolbar"},za={class:"editor-breadcrumb"},Ta={class:"crumb-name"},Sa={class:"toolbar-acts"},La={class:"editor-body"},Ia={class:"tree-title"},Ma={class:"tree-item tree-dir"},Aa=["onClick"],Ua={key:0,class:"tree-empty"},Da={key:0,class:"file-editor"},Fa={class:"file-editor-head"},Na={style:{display:"flex","align-items":"center",gap:"10px"}},Ba={style:{"font-size":"12px",color:"#909399"}},Ea={class:"json-preview"},Ra={key:1,class:"file-editor"},Pa={class:"file-editor-head"},Ka={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},ja={style:{"font-size":"11px",color:"#c0c4cc"}},Wa={key:2,class:"file-editor"},Ha={class:"file-editor-head"},Oa={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Ya={style:{"font-size":"11px",color:"#c0c4cc"}},Xa=["placeholder"],qa={class:"chat-panel-head"},Ja={key:0,style:{"margin-left":"auto","font-size":"11px",color:"#c0c4cc"}},Ga={key:0,style:{"margin-left":"6px",color:"#e6a23c"}},Qa={class:"chat-wrap"},Za=et({__name:"SkillStudio",props:{agentId:{}},setup(ml){const he=ml,g=he.agentId,K=d(200),Me=d(140),_e=d(340),Q=d("");function we(w,r){const A=w.clientX,V=r==="side"?K.value:r==="tree"?Me.value:_e.value;Q.value=r;const B=D=>{const Z=D.clientX-A;r==="side"?K.value=Math.max(140,Math.min(340,V+Z)):r==="tree"?Me.value=Math.max(100,Math.min(280,V+Z)):_e.value=Math.max(240,Math.min(560,V-Z))},te=()=>{Q.value="",window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",te),document.body.style.cursor="",document.body.style.userSelect=""};window.addEventListener("mousemove",B),window.addEventListener("mouseup",te),document.body.style.cssText+="cursor:col-resize;user-select:none;"}const ne=d([]),ue=d(!1),_=d(null),T=d("meta"),L=d({name:"",icon:"",category:"",description:"",version:"1.0.0",enabled:!0}),J=d(""),Ae=d(!1),x=d(!1),H=d(!1),Y=d(!1),re=d(!1),ee=d([]),de=d(!1),ce=d(""),ve=d(!1),xe=d(!1),U={};function Ue(w,r){r?U[w]=r:delete U[w]}function fe(w){return w?U[w]:null}const se=d(new Set);function Re(w,r){const A=new Set(se.value);r?A.add(w):A.delete(w),se.value=A}const le=d(new Set);Ll(_,async w=>{w&&(le.value.has(w.id)||(le.value.add(w.id),await fl(),await fe(w.id)?.resumeSession?.(`skill-studio-${w.id}`)))},{flush:"post"});const Ce=pl(()=>{if(!_.value)return"‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÂ∏ÆÂä©Áî®Êà∑ËÆæËÆ°Âíå‰ºòÂåñ AI ÊäÄËÉΩÁöÑÁ≥ªÁªüÊèêÁ§∫ËØç„ÄÇ";const w=JSON.stringify({id:_.value.id,name:_.value.name,icon:_.value.icon||"",category:_.value.category||"",description:_.value.description||"",version:_.value.version||"1.0.0",enabled:_.value.enabled,source:"local",installedAt:""},null,2);return`‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÊ≠£Âú®Â∏ÆÂä©Áî®Êà∑ÈÖçÁΩÆÊäÄËÉΩÔºàID: ${_.value.id}Ôºâ„ÄÇ

## ‚ö†Ô∏è Êñá‰ª∂Ë∑ØÂæÑËßÑÂàôÔºàÂøÖÈ°ªÈÅµÂÆàÔºâ
ÊâÄÊúâÊñá‰ª∂ÂøÖÈ°ªÂú® skills/${_.value.id}/ ÁõÆÂΩï‰∏ãÔºö
- ‚úÖ skills/${_.value.id}/SKILL.md
- ‚úÖ skills/${_.value.id}/skill.json
- ‚úÖ skills/${_.value.id}/tools/helper.py
- ‚ùå ‰ªª‰ΩïÂÖ∂‰ªñË∑ØÂæÑ

## ‚ö†Ô∏è ÂàõÂª∫ÊàñÊõ¥Êñ∞ÊäÄËÉΩÊó∂ÔºåÂøÖÈ°ªÂêåÊó∂ÂÜô‰∏§‰∏™Êñá‰ª∂

### 1. skills/${_.value.id}/skill.jsonÔºàÊäÄËÉΩÂÖÉÊï∞ÊçÆÔºâ
Ê†ºÂºèÂ¶Ç‰∏ãÔºå‰øÆÊîπ name/icon/category/description Â≠óÊÆµÔºö
\`\`\`json
${w}
\`\`\`

### 2. skills/${_.value.id}/SKILL.mdÔºàÁ≥ªÁªüÊèêÁ§∫ËØçÔºâ
ÂΩìÂâçÂÜÖÂÆπÔºö
\`\`\`markdown
${J.value||"ÔºàÁ©∫Ôºâ"}
\`\`\`

## ‰Ω†ÂèØ‰ª•Â∏ÆÂä©Ôºö
- ÂàõÂª∫/‰ºòÂåñÊäÄËÉΩÔºöÂêåÊó∂ÂÜô skill.jsonÔºàÂêçÁß∞„ÄÅÂàÜÁ±ª„ÄÅÊèèËø∞ÔºâÂíå SKILL.mdÔºàÊèêÁ§∫ËØçÔºâ
- Âú®ÊäÄËÉΩÁõÆÂΩï‰∏ãÂàõÂª∫Â∑•ÂÖ∑Êñá‰ª∂ÔºàPython Á≠âÔºâ
- ÊµãËØïÊäÄËÉΩÊïàÊûúÔºàÁõ¥Êé•ÂØπËØùÂç≥ÂèØÊµãËØïÔºâ`}),$e=pl(()=>_.value?re.value?`Êñ∞ÊäÄËÉΩÂ∑≤ÂàõÂª∫ÔºàID: ${_.value.id}Ôºâ„ÄÇÂëäËØâÊàë‰Ω†ÊÉ≥Ë¶Å‰ªÄ‰πàÂäüËÉΩÔºåÊàëÊù•Â∏Æ‰Ω†ÁîüÊàêÂÆåÊï¥ÁöÑ SKILL.md ÂÜÖÂÆπÔºåÁîüÊàêÂêéÁõ¥Êé•ÁÇπ‰øùÂ≠òÂç≥ÂèØ„ÄÇ`:`ÂΩìÂâçÁºñËæë„Äå${_.value.name}„Äç„ÄÇ‰Ω†ÂèØ‰ª•ËÆ©Êàë‰ºòÂåñ SKILL.md„ÄÅÊµãËØïÊïàÊûúÔºåÊàñËÄÖÁõ¥Êé•ÂØπËØù‰ΩìÈ™åÂΩìÂâçÊäÄËÉΩ„ÄÇ`:"ÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂêéÔºåÊàëÂèØ‰ª•Â∏Æ‰Ω†‰ºòÂåñÈÖçÁΩÆ„ÄÅÂÜô SKILL.md„ÄÅÊµãËØïÊïàÊûú„ÄÇ"),Qe=pl(()=>_.value?re.value?[]:[`Â∏ÆÊàë‰ºòÂåñ„Äå${_.value.name}„ÄçÁöÑ SKILL.md`,"Ëøô‰∏™ÊäÄËÉΩÊÄé‰πàÂÜôÊïàÊûúÊõ¥Â•ΩÔºü","Áî®‰∏≠ÊñáÂõûÁ≠î‰∏ÄÈÅìÂéÜÂè≤È¢òÔºåÊµãËØïÂΩìÂâçÊäÄËÉΩÊïàÊûú"]:["Â∏ÆÊàëËÆæËÆ°‰∏Ä‰∏™‰ª£Á†ÅÂÆ°Êü•ÊäÄËÉΩ","Â∏ÆÊàëÂÜô‰∏Ä‰∏™ÁøªËØëÂä©ÊâãÁöÑ SKILL.md"]);async function Ve(){ue.value=!0;try{const w=await $l.list(g);if(ne.value=w.data||[],_.value){const r=ne.value.find(A=>A.id===_.value.id);r&&(_.value=r,Pe(r))}}catch{}finally{ue.value=!1}}function Pe(w){L.value={name:w.name,icon:w.icon||"",category:w.category||"",description:w.description||"",version:w.version||"1.0.0",enabled:w.enabled}}async function Ze(w){_.value?.id!==w.id&&(_.value=w,Pe(w),T.value="meta",x.value=!1,J.value="",re.value=!1,ze(),pe())}async function We(){_.value&&T.value!=="prompt"&&(T.value="prompt",J.value||await pe())}async function M(w,r,A){const V=await G.read(g,w),B=Array.isArray(V.data)?V.data:[],te=[];for(const D of B){if(A===0&&D.name==="skill.json")continue;const Z=r?`${r}/${D.name}`:D.name;if(te.push({name:D.name,path:Z,isDir:D.isDir,depth:A}),D.isDir){const E=await M(`skills/${_.value.id}/${Z}`,Z,A+1);te.push(...E)}}return te}async function ze(){if(_.value){de.value=!0;try{ee.value=await M(`skills/${_.value.id}/`,"",0)}catch{ee.value=[{name:"SKILL.md",path:"SKILL.md",isDir:!1,depth:0}]}finally{de.value=!1}}}async function el(w,r){if(!r){if(w==="SKILL.md"){await We();return}T.value=w,ve.value=!1,await ll()}}async function ll(){if(!(!_.value||!T.value||T.value==="meta"||T.value==="prompt")){xe.value=!0;try{const w=await G.read(g,`skills/${_.value.id}/${T.value}`);ce.value=w.data?.content||"",ve.value=!1}catch{ce.value=""}finally{xe.value=!1}}}async function tl(w){if(_.value)try{await G.delete(g,`skills/${_.value.id}/${w}`),T.value===w&&(T.value="prompt"),await ze(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function al(){if(_.value){H.value=!0;try{T.value==="meta"||T.value==="prompt"?(await $l.update(he.agentId,_.value.id,{name:L.value.name,icon:L.value.icon,category:L.value.category,description:L.value.description,enabled:L.value.enabled}),(T.value==="prompt"||J.value)&&(await G.write(g,`skills/${_.value.id}/SKILL.md`,J.value),x.value=!1),await Ve()):(await G.write(g,`skills/${_.value.id}/${T.value}`,ce.value),ve.value=!1),y.success("‰øùÂ≠òÊàêÂäü")}catch(w){y.error(w.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{H.value=!1}}}async function De(w,r){try{await $l.update(he.agentId,w.id,{enabled:r}),await Ve()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function He(){if(_.value)try{await $l.remove(he.agentId,_.value.id),y.success("Â∑≤Âà†Èô§"),_.value=null,await Ve()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ke(){if(Y.value)return;Y.value=!0;const w="skill_"+Date.now().toString(36);try{await $l.create(he.agentId,{meta:{id:w,name:"Êñ∞ÊäÄËÉΩ",icon:"",category:"",description:"",version:"1.0.0",enabled:!1,source:"local",installedAt:""},promptContent:""}),await Ve();const r=ne.value.find(A=>A.id===w);r&&(await Ze(r),T.value="prompt",J.value="",re.value=!0,await fl(),le.value.has(w)||(le.value.add(w),await fe(w)?.resumeSession?.(`skill-studio-${w}`)))}catch(r){y.error(r.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}finally{Y.value=!1}}async function Oe(w,r){w===_.value?.id&&(re.value=!1),await Ve(),w===_.value?.id&&(await Promise.all([ze(),pe()]),T.value!=="meta"&&T.value!=="prompt"&&await ll())}async function pe(){if(_.value){Ae.value=!0;try{const w=await G.read(g,`skills/${_.value.id}/SKILL.md`);J.value=w.data?.content||"",x.value=!1}catch{J.value=""}finally{Ae.value=!1}}}async function Te(){if(!_.value)return;J.value||await We();const w=`ËØ∑Áî®„Äå${_.value.name}„ÄçÊäÄËÉΩÊïàÊûúÂõûÂ§çÔºö‰Ω†Â•ΩÔºåËØ∑‰ªãÁªç‰∏Ä‰∏ã‰Ω†ÁöÑÂäüËÉΩ„ÄÇ`;fe(_.value?.id)?.fillInput?.(w),y.info("ÊµãËØïÊ∂àÊÅØÂ∑≤Â°´ÂÖ•Âè≥‰æßËÅäÂ§©Ê°ÜÔºåÁÇπÂáªÂèëÈÄÅÂç≥ÂèØÊµãËØï")}return lt(Ve),(w,r)=>{const A=b("Refresh"),V=b("el-icon"),B=b("el-button"),te=b("Plus"),D=b("Tools"),Z=b("el-tag"),E=b("el-switch"),yl=b("Setting"),ol=b("FolderOpened"),gl=b("VideoPlay"),_l=b("DocumentChecked"),nl=b("Delete"),Ye=b("el-popconfirm"),Xe=b("Folder"),Fe=b("Document"),Se=b("el-input"),be=b("el-form-item"),c=b("el-col"),i=b("el-row"),I=b("el-collapse-item"),ae=b("el-collapse"),wl=b("el-form"),il=b("ChatLineRound");return o(),v("div",ca,[n("div",{class:"studio-sidebar",style:ke({width:K.value+"px"})},[n("div",va,[r[16]||(r[16]=n("span",{class:"sidebar-title"},"ÊäÄËÉΩÂ∫ì",-1)),n("div",fa,[e(B,{size:"small",loading:ue.value,circle:"",onClick:Ve},{default:t(()=>[e(V,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"]),e(B,{size:"small",type:"primary",circle:"",loading:Y.value,onClick:Ke},{default:t(()=>[e(V,null,{default:t(()=>[e(te)]),_:1})]),_:1},8,["loading"])])]),n("div",pa,[!ue.value&&ne.value.length===0?(o(),v("div",ma,"ÊöÇÊó†ÊäÄËÉΩ")):$("",!0),(o(!0),v(W,null,ie(ne.value,m=>(o(),v("div",{key:m.id,class:ge(["skill-item",{active:_.value?.id===m.id}]),onClick:me=>Ze(m)},[n("span",ga,[m.icon?(o(),v("span",_a,p(m.icon),1)):(o(),C(V,{key:1},{default:t(()=>[e(D)]),_:1}))]),n("div",wa,[n("div",ba,p(m.name),1),n("div",ka,p(m.id),1)]),n("div",ha,[se.value.has(m.id)?(o(),v("span",xa)):m.category?(o(),C(Z,{key:1,size:"small",effect:"plain",style:{"margin-right":"6px","font-size":"11px"}},{default:t(()=>[u(p(m.category),1)]),_:2},1024)):$("",!0),e(E,{"model-value":m.enabled,size:"small",onChange:me=>De(m,me),onClick:r[0]||(r[0]=Je(()=>{},["stop"]))},null,8,["model-value","onChange"])])],10,ya))),128))])],4),n("div",{class:ge(["ss-handle",{dragging:Q.value==="side"}]),onMousedown:r[1]||(r[1]=m=>we(m,"side"))},[...r[17]||(r[17]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),n("div",Ca,[_.value?(o(),v(W,{key:1},[n("div",Va,[n("div",za,[e(V,{style:{color:"#909399"}},{default:t(()=>[e(ol)]),_:1}),r[20]||(r[20]=n("span",{class:"crumb-sep"},"skills /",-1)),n("span",Ta,p(_.value.id),1)]),n("div",Sa,[e(B,{size:"small",onClick:Te},{default:t(()=>[e(V,null,{default:t(()=>[e(gl)]),_:1}),r[21]||(r[21]=u(" ÊµãËØï ",-1))]),_:1}),e(B,{size:"small",type:"primary",loading:H.value,onClick:al},{default:t(()=>[e(V,null,{default:t(()=>[e(_l)]),_:1}),r[22]||(r[22]=u(" ‰øùÂ≠ò ",-1))]),_:1},8,["loading"]),e(Ye,{title:"Á°ÆËÆ§Âà†Èô§ËØ•ÊäÄËÉΩÔºü",onConfirm:He},{reference:t(()=>[e(B,{size:"small",type:"danger",plain:""},{default:t(()=>[e(V,null,{default:t(()=>[e(nl)]),_:1})]),_:1})]),_:1})])]),n("div",La,[n("div",{class:"file-tree",style:ke({width:Me.value+"px"})},[n("div",Ia,[r[23]||(r[23]=u(" ÁõÆÂΩï ",-1)),e(B,{link:"",size:"small",loading:de.value,onClick:ze,style:{"margin-left":"auto",padding:"0"}},{default:t(()=>[e(V,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"])]),n("div",Ma,[e(V,null,{default:t(()=>[e(Xe)]),_:1}),n("span",null,p(_.value.id)+"/",1)]),n("div",{class:ge(["tree-item",{"tree-active":T.value==="meta"}]),onClick:r[2]||(r[2]=m=>T.value="meta")},[e(V,null,{default:t(()=>[e(Fe)]),_:1}),r[24]||(r[24]=n("span",null,"skill.json",-1))],2),(o(!0),v(W,null,ie(ee.value,m=>(o(),v("div",{key:m.path,class:ge(["tree-item",{"tree-active":T.value===(m.path==="SKILL.md"?"prompt":m.path),"tree-dir-row":m.isDir}]),style:ke({paddingLeft:`${12+m.depth*12}px`}),onClick:me=>el(m.path,m.isDir)},[m.isDir?(o(),C(V,{key:0,style:{color:"#e6a23c"}},{default:t(()=>[e(Xe)]),_:1})):(o(),C(V,{key:1},{default:t(()=>[e(Fe)]),_:1})),n("span",null,p(m.name),1),m.path==="SKILL.md"&&_.value.enabled?(o(),C(Z,{key:2,size:"small",type:"success",effect:"plain",style:{"margin-left":"4px","font-size":"10px"}},{default:t(()=>[...r[25]||(r[25]=[u("Ê≥®ÂÖ•‰∏≠",-1)])]),_:1})):$("",!0)],14,Aa))),128)),!de.value&&ee.value.length===0?(o(),v("div",Ua,"Á©∫ÁõÆÂΩï")):$("",!0)],4),n("div",{class:ge(["ss-handle",{dragging:Q.value==="tree"}]),onMousedown:r[3]||(r[3]=m=>we(m,"tree"))},[...r[26]||(r[26]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),T.value==="meta"?(o(),v("div",Da,[n("div",Fa,[e(V,null,{default:t(()=>[e(Fe)]),_:1}),r[27]||(r[27]=u(" skill.json ",-1)),r[28]||(r[28]=n("span",{class:"file-hint"},"ÊäÄËÉΩÂÖÉ‰ø°ÊÅØÔºåÂΩ±ÂìçÂàóË°®Â±ïÁ§∫Âíå runner Ë°å‰∏∫",-1))]),e(wl,{model:L.value,"label-width":"72px",size:"small",style:{padding:"16px 20px"}},{default:t(()=>[e(be,{label:"ÊäÄËÉΩ ID"},{default:t(()=>[e(Se,{value:_.value.id,disabled:""},null,8,["value"])]),_:1}),e(i,{gutter:12},{default:t(()=>[e(c,{span:14},{default:t(()=>[e(be,{label:"ÂêçÁß∞"},{default:t(()=>[e(Se,{modelValue:L.value.name,"onUpdate:modelValue":r[4]||(r[4]=m=>L.value.name=m),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:10},{default:t(()=>[e(be,{label:"ÂõæÊ†á"},{default:t(()=>[e(Se,{modelValue:L.value.icon,"onUpdate:modelValue":r[5]||(r[5]=m=>L.value.icon=m),placeholder:"emoji"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:12},{default:t(()=>[e(c,{span:14},{default:t(()=>[e(be,{label:"ÂàÜÁ±ª"},{default:t(()=>[e(Se,{modelValue:L.value.category,"onUpdate:modelValue":r[6]||(r[6]=m=>L.value.category=m),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:10},{default:t(()=>[e(be,{label:"ÁâàÊú¨"},{default:t(()=>[e(Se,{modelValue:L.value.version,"onUpdate:modelValue":r[7]||(r[7]=m=>L.value.version=m),placeholder:"1.0.0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(be,{label:"ÊèèËø∞"},{default:t(()=>[e(Se,{modelValue:L.value.description,"onUpdate:modelValue":r[8]||(r[8]=m=>L.value.description=m),type:"textarea",rows:2,placeholder:"ÁÆÄË¶ÅÊèèËø∞ÊäÄËÉΩÂäüËÉΩ"},null,8,["modelValue"])]),_:1}),e(be,{label:"Áä∂ÊÄÅ"},{default:t(()=>[n("div",Na,[e(E,{modelValue:L.value.enabled,"onUpdate:modelValue":r[9]||(r[9]=m=>L.value.enabled=m)},null,8,["modelValue"]),n("span",Ba,p(L.value.enabled?"Â∑≤ÂêØÁî®ÔºåSKILL.md Â∞ÜÊ≥®ÂÖ•Á≥ªÁªüÊèêÁ§∫":"Â∑≤Á¶ÅÁî®"),1)])]),_:1}),e(ae,{style:{"margin-top":"8px"}},{default:t(()=>[e(I,{title:"Êü•Áúã skill.json ÂéüÊñá"},{default:t(()=>[n("pre",Ea,p(JSON.stringify({id:_.value.id,...L.value},null,2)),1)]),_:1})]),_:1})]),_:1},8,["model"])])):T.value==="prompt"?(o(),v("div",Ra,[n("div",Pa,[e(V,null,{default:t(()=>[e(Fe)]),_:1}),r[30]||(r[30]=u(" SKILL.md ",-1)),r[31]||(r[31]=n("span",{class:"file-hint"},"Ê≥®ÂÖ•Âà∞ AI System Prompt ÁöÑÊåá‰ª§ÂÜÖÂÆπ",-1)),n("div",Ka,[x.value?(o(),C(Z,{key:0,type:"warning",size:"small"},{default:t(()=>[...r[29]||(r[29]=[u("Êú™‰øùÂ≠ò",-1)])]),_:1})):$("",!0),n("span",ja,p(J.value.length)+" Â≠óÁ¨¶",1),e(B,{size:"small",circle:"",loading:Ae.value,onClick:pe,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e(V,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"])])]),je(n("textarea",{"onUpdate:modelValue":r[10]||(r[10]=m=>J.value=m),class:"code-textarea",spellcheck:"false",placeholder:`# ÊäÄËÉΩÂêçÁß∞

## ÂäüËÉΩËØ¥Êòé
ÊèèËø∞ËØ•ÊäÄËÉΩÁöÑÁî®ÈÄî‚Ä¶

## Ë°å‰∏∫ËßÑËåÉ
- ËßÑËåÉ 1
- ËßÑËåÉ 2`,onInput:r[11]||(r[11]=m=>x.value=!0)},null,544),[[Il,J.value]])])):(o(),v("div",Wa,[n("div",Ha,[e(V,null,{default:t(()=>[e(Fe)]),_:1}),u(" "+p(T.value)+" ",1),n("div",Oa,[ve.value?(o(),C(Z,{key:0,type:"warning",size:"small"},{default:t(()=>[...r[32]||(r[32]=[u("Êú™‰øùÂ≠ò",-1)])]),_:1})):$("",!0),n("span",Ya,p(ce.value.length)+" Â≠óÁ¨¶",1),e(B,{size:"small",circle:"",loading:xe.value,onClick:ll,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e(V,null,{default:t(()=>[e(A)]),_:1})]),_:1},8,["loading"]),e(Ye,{title:"Á°ÆËÆ§Âà†Èô§ËØ•Êñá‰ª∂Ôºü",onConfirm:r[12]||(r[12]=m=>tl(T.value))},{reference:t(()=>[e(B,{size:"small",circle:"",type:"danger",plain:""},{default:t(()=>[e(V,null,{default:t(()=>[e(nl)]),_:1})]),_:1})]),_:1})])]),je(n("textarea",{"onUpdate:modelValue":r[13]||(r[13]=m=>ce.value=m),class:"code-textarea",spellcheck:"false",placeholder:`ÁºñËæë ${T.value} ‚Ä¶`,onInput:r[14]||(r[14]=m=>ve.value=!0)},null,40,Xa),[[Il,ce.value]])]))])],64)):(o(),v("div",$a,[e(V,{size:"48",color:"#c0c4cc"},{default:t(()=>[e(yl)]),_:1}),r[19]||(r[19]=n("p",null,"‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂºÄÂßãÁºñËæë",-1)),e(B,{type:"primary",onClick:Ke},{default:t(()=>[e(V,null,{default:t(()=>[e(te)]),_:1}),r[18]||(r[18]=u(" Êñ∞Âª∫ÊäÄËÉΩ",-1))]),_:1})]))]),n("div",{class:ge(["ss-handle",{dragging:Q.value==="chat"}]),onMousedown:r[15]||(r[15]=m=>we(m,"chat"))},[...r[33]||(r[33]=[n("div",{class:"ss-handle-bar"},null,-1)])],34),n("div",{class:"studio-chat",style:ke({width:_e.value+"px"})},[n("div",qa,[e(V,null,{default:t(()=>[e(il)]),_:1}),r[34]||(r[34]=u(" AI Âçè‰ΩúÈÖçÁΩÆ ",-1)),_.value?(o(),v("span",Ja,[u(" ÂΩìÂâç: "+p(_.value.name)+" ",1),se.value.size>1?(o(),v("span",Ga," ("+p(se.value.size)+" ‰∏™Âπ∂Ë°åÁîüÊàê‰∏≠) ",1)):$("",!0)])):$("",!0)]),n("div",Qa,[(o(!0),v(W,null,ie(ne.value,m=>je((o(),C(tt,{key:m.id,ref_for:!0,ref:me=>Ue(m.id,me),"agent-id":P(g),context:_.value?.id===m.id?Ce.value:"",scenario:"skill-studio","skill-id":m.id,"welcome-message":_.value?.id===m.id?$e.value:"",examples:_.value?.id===m.id?Qe.value:[],compact:"",onResponse:me=>Oe(m.id),onStreamingChange:me=>Re(m.id,me)},null,8,["agent-id","context","skill-id","welcome-message","examples","onResponse","onStreamingChange"])),[[Zt,_.value?.id===m.id]])),128))])],4)])}}}),en=at(Za,[["__scopeId","data-v-bbfc3342"]]),ln={class:"wc-layout"},tn={class:"wc-panel-header"},an={class:"wc-header-actions"},nn={class:"wc-panel-body file-tree-body"},sn={key:0,class:"wc-loading"},on={key:1,class:"wc-empty"},un={class:"tree-icon-wrap"},dn={key:0,class:"icon-folder-open",viewBox:"0 0 16 16"},rn={key:1,class:"icon-folder",viewBox:"0 0 16 16"},cn=["onKeyup","onBlur"],vn={key:1,class:"tree-node-name"},fn=["onClick"],pn=["onClick"],mn={class:"wc-panel-header"},yn={key:0,class:"wc-panel-title file-path-title"},gn={class:"file-ext-badge"},_n=["title"],wn={key:1,class:"wc-panel-title muted"},bn={class:"wc-header-actions"},kn={class:"wc-panel-body editor-body"},hn={key:0,class:"wc-empty-editor"},xn={key:1,class:"wc-binary-notice"},Cn={class:"editor-wrap"},$n=["onKeydown"],Vn={class:"editor-statusbar"},zn={class:"stat-chip"},Tn={key:0},Sn={key:1,class:"status-dirty"},Ln={key:2,class:"status-saved"},In={class:"wc-panel wc-panel-right"},Mn={class:"session-bar"},An={class:"session-bar-left"},Un={class:"session-opt"},Dn={class:"session-opt-title"},Fn={class:"session-opt-time"},Nn={class:"chat-area"},Bn={class:"wc-modal"},En={class:"wc-modal-footer"},_t=140,Rn=380,Pn=900,Kn=et({__name:"WorkspaceChatLayout",props:{agentId:{}},emits:["session-change"],setup(ml,{emit:he}){const g=ml,K=he,Me={label:"name",children:"children",isLeaf:c=>!c.isDir},_e=d(200),Q=d(460),we=d(),ne=d(),ue=d(),_=d(),T=d(),L=d(),J=d([]),Ae=d(!1),x=d(""),H=d(""),Y=d(!1),re=d(!1),ee=d(null),de=d(!1),ce=d(""),ve=d(""),xe=d(""),U=d({visible:!1,x:0,y:0,node:null}),Ue=d([]),fe=d();let se=0,Re=0,le=null;const Ce=d(!1),$e=d(!1);function Qe(c){Pe(c,"left")}function Ve(c){Pe(c,"right")}function Pe(c,i){se=c.clientX,Re=i==="left"?_e.value:Q.value,le=i,i==="left"?Ce.value=!0:$e.value=!0,window.addEventListener("mousemove",Ze),window.addEventListener("mouseup",We),document.body.style.cssText+="cursor:col-resize;user-select:none;"}function Ze(c){const i=c.clientX-se;le==="left"?_e.value=Math.max(_t,Math.min(Rn,Re+i)):le==="right"&&(Q.value=Math.max(_t,Math.min(Pn,Re+i)))}function We(){Ce.value=!1,$e.value=!1,le=null,window.removeEventListener("mousemove",Ze),window.removeEventListener("mouseup",We),document.body.style.cursor="",document.body.style.userSelect=""}async function M(){Ae.value=!0;try{const c=await G.readTree(g.agentId);J.value=ze(c.data)}catch{J.value=[]}finally{Ae.value=!1}}function ze(c){return(Array.isArray(c)?c:c?.children??[]).map(I=>({name:I.name,path:I.path??I.name,isDir:!!(I.isDir??I.type==="dir"),size:I.size,children:I.children?.length?ze(I.children):void 0})).sort((I,ae)=>+ae.isDir-+I.isDir||I.name.localeCompare(ae.name))}function el(c){U.value.visible=!1,c.isDir||tl(c.path)}function ll(c,i){c.preventDefault(),U.value={visible:!0,x:c.clientX,y:c.clientY,node:i}}async function tl(c){Y.value&&x.value&&!await Sl.confirm("ÊúâÊú™‰øùÂ≠òÊõ¥ÊîπÔºåÁªßÁª≠ÂàáÊç¢Ôºü","ÊèêÁ§∫",{confirmButtonText:"ÁªßÁª≠",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)||(x.value=c,Y.value=!1,fl(()=>we.value?.setCurrentKey(c)),await al())}async function al(){if(x.value)try{const i=(await G.read(g.agentId,x.value)).data;re.value=i.binary??i.encoding==="base64",re.value||(H.value=i.content??"",ee.value=i.size!=null?{size:i.size,modTime:i.modTime}:null),Y.value=!1}catch{H.value=""}}async function De(){if(!(!x.value||re.value))try{await G.write(g.agentId,x.value,H.value),Y.value=!1,y.success("Â∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}}async function He(){if(!(!x.value||!await Sl.confirm(`Âà†Èô§ ${x.value}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await G.delete(g.agentId,x.value),x.value="",H.value="",Y.value=!1,await M(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ke(){const c=ce.value.trim();if(c)try{await G.write(g.agentId,c,""),de.value=!1,ce.value="",await M(),await tl(c)}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function Oe(c){if(await Sl.confirm(`Âà†Èô§ ${c.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1))try{await G.delete(g.agentId,c.path),x.value===c.path&&(x.value="",H.value=""),await M(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function pe(c){ve.value=c.path,xe.value=c.name,fl(()=>T.value?.focus())}async function Te(c){if(!ve.value||xe.value===c.name){ve.value="";return}const I=(c.path.includes("/")?c.path.substring(0,c.path.lastIndexOf("/")+1):"")+xe.value;try{const ae=await G.read(g.agentId,c.path);await G.write(g.agentId,I,ae.data?.content??""),await G.delete(g.agentId,c.path),x.value===c.path&&(x.value=I),await M(),y.success("Â∑≤ÈáçÂëΩÂêç")}catch{y.error("ÈáçÂëΩÂêçÂ§±Ë¥•")}ve.value=""}function w(){U.value.visible=!1,de.value=!0}function r(){U.value.visible=!1,de.value=!0}function A(){const c=U.value.node;U.value.visible=!1,c&&pe(c)}async function V(){const c=U.value.node;if(U.value.visible=!1,!(!c||!await Sl.confirm(`Âà†Èô§ ${c.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await G.delete(g.agentId,c.path),x.value===c.path&&(x.value="",H.value=""),await M(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function B(){U.value.visible&&(U.value.visible=!1)}async function te(){try{const c=await wt.list({agentId:g.agentId,limit:50});Ue.value=(c.data?.sessions||[]).sort((i,I)=>I.lastAt-i.lastAt)}catch{Ue.value=[]}}function D(c){fe.value=c||void 0,c?L.value?.resumeSession(c):L.value?.startNewSession()}function Z(){fe.value=void 0,L.value?.startNewSession()}function E(c){fe.value=c,K("session-change",c),te()}async function yl(){await M(),x.value&&(await new Promise(c=>setTimeout(c,300)),await al())}const ol=pl(()=>(H.value.match(/\n/g)??[]).length+1),gl=pl(()=>x.value?`Áî®Êà∑ÂΩìÂâçÊâìÂºÄÁöÑÊñá‰ª∂: ${x.value}`:void 0);function _l(c){const i=ne.value,I=i.selectionStart;H.value=i.value.slice(0,I)+"  "+i.value.slice(i.selectionEnd),fl(()=>{i.selectionStart=i.selectionEnd=I+2})}function nl(){ue.value&&ne.value&&(ue.value.scrollTop=ne.value.scrollTop)}Ll(de,async c=>{c&&(await fl(),_.value?.focus())});function Ye(c){const i=c.split(".").pop()?.toLowerCase();return i?`.${i}`:"txt"}function Xe(c){return c?c<1024?`${c}B`:c<1048576?`${(c/1024).toFixed(0)}K`:`${(c/1048576).toFixed(1)}M`:""}function Fe(c){return Xe(c)??""}function Se(c){const i=c.split(".").pop()?.toLowerCase()??"";return{ts:"fc-blue",tsx:"fc-blue",js:"fc-yellow",jsx:"fc-yellow",vue:"fc-green",py:"fc-blue",go:"fc-teal",rs:"fc-orange",md:"fc-gray",json:"fc-yellow",yaml:"fc-red",yml:"fc-red",toml:"fc-gray",html:"fc-orange",css:"fc-blue",scss:"fc-pink",sh:"fc-green",bash:"fc-green",sql:"fc-orange",png:"fc-purple",jpg:"fc-purple",jpeg:"fc-purple",gif:"fc-purple",svg:"fc-purple",webp:"fc-purple",env:"fc-yellow",gitignore:"fc-gray",dockerfile:"fc-teal"}[i]??"fc-default"}function be(c){if(!c)return"";const i=new Date(c),ae=Date.now()-c;return ae<6e4?"ÂàöÂàö":ae<36e5?`${Math.floor(ae/6e4)}ÂàÜÈíüÂâç`:ae<864e5?`${Math.floor(ae/36e5)}Â∞èÊó∂Ââç`:i.toLocaleDateString()}return lt(()=>{M(),te(),document.addEventListener("click",B)}),ea(()=>{We(),document.removeEventListener("click",B)}),(c,i)=>{const I=b("el-tooltip"),ae=b("el-icon"),wl=b("el-tree"),il=b("el-tag"),m=b("el-option"),me=b("el-select");return o(),v("div",ln,[n("div",{class:"wc-panel wc-panel-left",style:ke({width:_e.value+"px"})},[n("div",tn,[i[12]||(i[12]=n("span",{class:"wc-panel-title"},"üìÅ Â∑•‰ΩúÂå∫Êñá‰ª∂",-1)),n("div",an,[e(I,{content:"Êñ∞Âª∫Êñá‰ª∂",placement:"top","show-after":500},{default:t(()=>[n("button",{class:"wc-icon-btn",onClick:i[0]||(i[0]=S=>de.value=!0)},"Ôºã")]),_:1}),e(I,{content:"Âà∑Êñ∞",placement:"top","show-after":500},{default:t(()=>[n("button",{class:"wc-icon-btn",onClick:M},"‚Ü∫")]),_:1})])]),n("div",nn,[Ae.value?(o(),v("div",sn,[e(ae,{class:"rotating"},{default:t(()=>[e(P(la))]),_:1}),i[13]||(i[13]=u(" Âä†ËΩΩ‰∏≠‚Ä¶ ",-1))])):J.value.length?(o(),C(wl,{key:2,ref_key:"treeRef",ref:we,data:J.value,props:Me,"highlight-current":!0,"expand-on-click-node":!0,"default-expand-all":!1,"node-key":"path",class:"wc-file-tree",onNodeClick:el,onNodeContextmenu:ll},{default:t(({node:S,data:O})=>[n("span",{class:ge(["tree-node",{active:O.path===x.value}])},[n("span",un,[O.isDir&&S.expanded?(o(),v("svg",dn,[...i[14]||(i[14]=[n("path",{d:"M1.5 3A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H7.914a.5.5 0 0 1-.354-.146L6.146 2.94A1.5 1.5 0 0 0 5.086 2.5H1.5z"},null,-1)])])):O.isDir?(o(),v("svg",rn,[...i[15]||(i[15]=[n("path",{d:"M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31z"},null,-1)])])):(o(),v("svg",{key:2,class:ge(["icon-file",Se(O.name)]),viewBox:"0 0 16 16"},[...i[16]||(i[16]=[n("path",{"fill-rule":"evenodd",d:"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3z"},null,-1)])],2))]),ve.value===O.path?je((o(),v("input",{key:0,"onUpdate:modelValue":i[1]||(i[1]=Le=>xe.value=Le),class:"tree-rename-input",onKeyup:[Ge(Le=>Te(O),["enter"]),i[2]||(i[2]=Ge(Le=>ve.value="",["escape"]))],onBlur:Le=>Te(O),onClick:i[3]||(i[3]=Je(()=>{},["stop"])),ref_key:"renameInputRef",ref:T},null,40,cn)),[[Il,xe.value]]):(o(),v("span",vn,p(O.name),1)),n("span",{class:"tree-node-actions",onClick:i[4]||(i[4]=Je(()=>{},["stop"]))},[n("button",{class:"tree-act-btn",title:"ÈáçÂëΩÂêç",onClick:Le=>pe(O)},[...i[17]||(i[17]=[n("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[n("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"})],-1)])],8,fn),n("button",{class:"tree-act-btn danger",title:"Âà†Èô§",onClick:Le=>Oe(O)},[...i[18]||(i[18]=[n("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[n("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),n("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1)])],8,pn)])],2)]),_:1},8,["data"])):(o(),v("div",on,"Â∑•‰ΩúÂå∫‰∏∫Á©∫"))]),(o(),C(mt,{to:"body"},[U.value.visible?(o(),v("div",{key:0,class:"ctx-menu",style:ke({left:U.value.x+"px",top:U.value.y+"px"}),onMouseleave:i[5]||(i[5]=S=>U.value.visible=!1)},[n("div",{class:"ctx-item",onClick:w},"üìÑ Êñ∞Âª∫Êñá‰ª∂"),n("div",{class:"ctx-item",onClick:r},"üìÅ Êñ∞Âª∫Êñá‰ª∂Â§π"),U.value.node&&!U.value.node.isDir?(o(),v("div",{key:0,class:"ctx-item",onClick:A},"‚úé ÈáçÂëΩÂêç")):$("",!0),i[19]||(i[19]=n("div",{class:"ctx-divider"},null,-1)),n("div",{class:"ctx-item danger",onClick:V},"‚úï Âà†Èô§")],36)):$("",!0)]))],4),n("div",{class:ge(["wc-handle",{dragging:Ce.value}]),onMousedown:Qe},[...i[20]||(i[20]=[n("div",{class:"wc-handle-bar"},null,-1)])],34),n("div",{class:"wc-panel wc-panel-mid",style:ke({width:Q.value+"px"})},[n("div",mn,[x.value?(o(),v("span",yn,[n("span",gn,p(Ye(x.value)),1),n("span",{class:"file-path-text",title:x.value},p(x.value),9,_n)])):(o(),v("span",wn,"ÈÄâÊã©Êñá‰ª∂Êü•Áúã")),n("div",bn,[Y.value?(o(),C(il,{key:0,size:"small",type:"warning",style:{"margin-right":"4px"}},{default:t(()=>[...i[21]||(i[21]=[u("Êú™‰øùÂ≠ò",-1)])]),_:1})):$("",!0),x.value&&Y.value?(o(),v("button",{key:1,class:"wc-save-btn",onClick:De},"‰øùÂ≠ò")):$("",!0),x.value?(o(),v("button",{key:2,class:"wc-icon-btn",title:"Âà∑Êñ∞",onClick:al},"‚Ü∫")):$("",!0),x.value?(o(),v("button",{key:3,class:"wc-icon-btn danger",title:"Âà†Èô§Êñá‰ª∂",onClick:He},"‚úï")):$("",!0)])]),n("div",kn,[x.value?re.value?(o(),v("div",xn,"‚õî ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÊó†Ê≥ïÁºñËæë")):(o(),v(W,{key:2},[n("div",Cn,[n("div",{class:"line-numbers",ref_key:"lineNumRef",ref:ue},[(o(!0),v(W,null,ie(ol.value,S=>(o(),v("div",{key:S,class:"line-num"},p(S),1))),128))],512),je(n("textarea",{ref_key:"editorRef",ref:ne,"onUpdate:modelValue":i[6]||(i[6]=S=>H.value=S),class:"code-editor",spellcheck:"false",autocorrect:"off",autocapitalize:"off",onInput:i[7]||(i[7]=S=>{Y.value=!0,nl()}),onScroll:nl,onKeydown:[Ge(Je(_l,["prevent"]),["tab"]),Ge(Je(De,["ctrl","prevent"]),["s"]),Ge(Je(De,["meta","prevent"]),["s"])]},null,40,$n),[[Il,H.value]])]),n("div",Vn,[n("span",zn,p(Ye(x.value)),1),n("span",null,p(ol.value)+" Ë°å",1),n("span",null,p(H.value.length)+" Â≠óÁ¨¶",1),ee.value?(o(),v("span",Tn,p(Fe(ee.value.size)),1)):$("",!0),i[23]||(i[23]=n("span",{class:"stat-flex"},null,-1)),Y.value?(o(),v("span",Sn,"‚óè Êú™‰øùÂ≠ò")):(o(),v("span",Ln,"‚úì Â∑≤‰øùÂ≠ò"))])],64)):(o(),v("div",hn,[...i[22]||(i[22]=[n("div",{class:"wc-empty-icon"},"‚úèÔ∏è",-1),n("div",null,"‰ªéÂ∑¶‰æßÈÄâÊã©Êñá‰ª∂",-1),n("div",{class:"wc-empty-hint"},"ÊîØÊåÅÊãñÊãΩÊñá‰ª∂Âà∞Âè≥‰æßËÅäÂ§©Ê°Ü",-1)])]))])],4),n("div",{class:ge(["wc-handle",{dragging:$e.value}]),onMousedown:Ve},[...i[24]||(i[24]=[n("div",{class:"wc-handle-bar"},null,-1)])],34),n("div",In,[n("div",Mn,[n("div",An,[e(ae,{style:{color:"#64748b","font-size":"13px"}},{default:t(()=>[e(P(ta))]),_:1}),e(me,{modelValue:fe.value,"onUpdate:modelValue":i[8]||(i[8]=S=>fe.value=S),placeholder:"Êñ∞ÂØπËØù",size:"small",clearable:"",class:"session-select",onChange:D},{default:t(()=>[(o(!0),v(W,null,ie(Ue.value,S=>(o(),C(m,{key:S.id,value:S.id,label:S.title||"ÂØπËØù "+S.id.slice(0,8)},{default:t(()=>[n("div",Un,[n("span",Dn,p(S.title||"Êó†Ê†áÈ¢ò"),1),n("span",Fn,p(be(S.lastAt)),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),n("button",{class:"session-new-btn",title:"Êñ∞Âª∫ÂØπËØù",onClick:Z},"Ôºã Êñ∞ÂØπËØù")]),n("div",Nn,[e(tt,{"agent-id":ml.agentId,"session-id":fe.value||void 0,context:gl.value,height:"100%",ref_key:"chatRef",ref:L,onResponse:yl,onSessionChange:E},null,8,["agent-id","session-id","context"])])]),(o(),C(mt,{to:"body"},[de.value?(o(),v("div",{key:0,class:"wc-modal-mask",onClick:i[11]||(i[11]=Je(S=>de.value=!1,["self"]))},[n("div",Bn,[i[25]||(i[25]=n("div",{class:"wc-modal-title"},"Êñ∞Âª∫Êñá‰ª∂",-1)),je(n("input",{"onUpdate:modelValue":i[9]||(i[9]=S=>ce.value=S),class:"wc-modal-input",placeholder:"Â¶Ç notes.md Êàñ scripts/run.sh",onKeyup:Ge(Ke,["enter"]),ref_key:"newFileInput",ref:_},null,544),[[Il,ce.value]]),n("div",En,[n("button",{class:"wc-btn",onClick:i[10]||(i[10]=S=>de.value=!1)},"ÂèñÊ∂à"),n("button",{class:"wc-btn primary",onClick:Ke},"ÂàõÂª∫")])])])):$("",!0)]))])}}}),jn=at(Kn,[["__scopeId","data-v-945cea34"]]),Wn={class:"header-left"},Hn={class:"detail-title-block"},On={class:"detail-title"},Yn={class:"chat-layout"},Xn={width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",style:{"flex-shrink":"0"}},qn={class:"session-count-badge"},Jn={class:"session-sidebar-header"},Gn={class:"session-list"},Qn=["onClick"],Zn={class:"session-item-title"},es={class:"session-item-meta"},ls={key:0,class:"session-empty"},ts={class:"at-panel"},as={key:0,class:"at-form"},ns={class:"chat-area"},ss={style:{display:"flex","justify-content":"space-between",width:"100%"}},os={style:{color:"#999","font-size":"12px"}},is={style:{display:"flex","align-items":"center",gap:"8px"}},us={style:{"font-weight":"600"}},ds={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},rs={style:{display:"flex","align-items":"center",gap:"8px"}},cs={style:{"font-size":"13px"}},vs={style:{"font-size":"13px",color:"#606266"}},fs={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},ps={key:1,class:"relations-list"},ms={class:"relation-info"},ys={class:"relation-name"},gs={class:"relation-tags"},_s={class:"relation-desc"},ws={style:{display:"flex","align-items":"center","justify-content":"space-between"}},bs={style:{display:"flex",gap:"8px","margin-top":"4px"}},ks={style:{display:"flex","align-items":"center","justify-content":"space-between"}},hs={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},xs={style:{"font-size":"12px"}},Cs={style:{"font-size":"12px",color:"#606266"}},$s={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},Vs={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},zs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ts={style:{"margin-bottom":"16px",display:"flex","align-items":"center",gap:"8px"}},Ss={class:"conv-drawer-body"},Ls={key:0,style:{"text-align":"center","margin-bottom":"12px"}},Is={class:"conv-msg-list"},Ms={class:"conv-msg-meta"},As={class:"conv-msg-role"},Us={key:0,class:"conv-msg-sender"},Ds={class:"conv-msg-time"},Fs={class:"conv-msg-content"},Ns={key:0,class:"conv-msg-empty"},Bs={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Es={class:"channel-card-header"},Rs={class:"channel-card-left"},Ps={class:"channel-card-name"},Ks={key:0,class:"channel-bot-username"},js={class:"channel-card-actions"},Ws={key:0,class:"channel-card-body"},Hs={class:"channel-info-row"},Os={class:"channel-info-value"},Ys={class:"channel-info-row"},Xs={class:"channel-info-value"},qs={key:1,class:"channel-card-body"},Js={class:"channel-info-row"},Gs={class:"channel-info-value"},Qs={style:{opacity:"0.6","font-size":"11px","margin-left":"3px"}},Zs={class:"pending-section"},eo=["onClick"],lo={key:0,class:"pending-list"},to={key:0,style:{"text-align":"center",padding:"12px"}},ao={class:"pending-user-info"},no={class:"pending-user-name"},so={key:0,class:"pending-user-username"},oo={class:"pending-user-id"},io={class:"pending-user-actions"},uo={key:2,class:"pending-empty"},ro={style:{width:"100%"}},co={style:{display:"flex",gap:"6px","align-items":"center"}},vo={key:0,style:{"margin-top":"6px",display:"flex","align-items":"center",gap:"6px",color:"#909399","font-size":"13px"}},fo={key:1,style:{"margin-top":"6px",color:"#67c23a","font-size":"13px"}},po={key:2,style:{"margin-top":"6px",color:"#e6a23c","font-size":"13px"}},mo={key:3,style:{"margin-top":"6px",color:"#f56c6c","font-size":"13px"}},yo={key:4,style:{"margin-top":"4px"}},go={class:"channel-url-preview"},_o={class:"channel-url-text"},wo={class:"channel-url-preview"},bo={class:"channel-url-text"},ko={style:{padding:"20px","max-width":"800px"}},ho={class:"env-add-row",style:{display:"flex",gap:"8px","margin-bottom":"16px","align-items":"flex-start"}},xo={style:{"font-size":"13px"}},Co=50,$o=et({__name:"AgentDetailView",setup(ml){const he=aa(),g=he.params.id,K=d(null),Me=d("chat"),_e=d(!1),Q=d(),we=d([]),ne=d(!1),ue=d();async function _(){ne.value=!0;try{const s=await wt.list({agentId:g,limit:50});we.value=s.data.sessions}catch{}finally{ne.value=!1}}function T(s){ue.value=s.id,Q.value?.resumeSession(s.id)}function L(){ue.value=void 0,Q.value?.startNewSession()}function J(s){ue.value=s,localStorage.setItem(`zyhive_session_${g}`,s),setTimeout(_,500)}function Ae(s){if(!s)return"";const l=Date.now()-s;return l<6e4?"ÂàöÂàö":l<36e5?`${Math.floor(l/6e4)}ÂàÜÂâç`:l<864e5?`${Math.floor(l/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(l/864e5)}Â§©Ââç`}const x=d(!1),H=d(""),Y=d(""),re=d(!1),ee=d([]);function de(){x.value=!x.value,x.value&&!ee.value.length&&ce()}async function ce(){try{const s=await Vl.list();ee.value=s.data.filter(l=>l.id!==g)}catch{ee.value=[]}}function ve(s){const l=ee.value.find(f=>f.id===s);l&&Q.value?.fillInput(`@${l.name}: `)}async function xe(){const s=H.value,l=Y.value.trim();if(!s||!l)return;const z=ee.value.find(sl=>sl.id===s)?.name??s;re.value=!0;const R={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${z}Ôºö
${l}`};Q.value?.appendMessage(R);try{const F=(await Vl.message(s,l,g)).data.response,Ne={role:"assistant",text:`‚Üê **${z}** ÂõûÂ§çÔºö

${F}`};Q.value?.appendMessage(Ne),Y.value="",H.value="",x.value=!1,y.success(`${z} Â∑≤ÂõûÂ§ç`)}catch(sl){const F={role:"system",text:`[Â§±Ë¥•] ËΩ¨ÂèëÂ§±Ë¥•Ôºö${sl.response?.data?.error??sl.message??"ÁΩëÁªúÈîôËØØ"}`};Q.value?.appendMessage(F),y.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{re.value=!1}}const U=d(""),Ue=d(""),fe=d([]),se=d(""),Re=d(!1),le=d([]),Ce=d(""),$e=d(""),Qe=d(!1);function Ve(){const s=K.value?.env||{};le.value=Object.entries(s).map(([l,f])=>({key:l,value:f}))}function Pe(){const s=Ce.value.trim();if(!s)return;const l=le.value.findIndex(f=>f.key===s);l>=0?le.value[l].value=$e.value:le.value.push({key:s,value:$e.value}),Ce.value="",$e.value=""}function Ze(s){le.value.splice(s,1)}async function We(){Qe.value=!0;try{const s={};for(const{key:f,value:z}of le.value)f.trim()&&(s[f.trim()]=z);const l=await Vl.update(g,{env:s});K.value=l.data,y.success("ÁéØÂ¢ÉÂèòÈáèÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Qe.value=!1}}const M=d({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),ze=d(!1),el=d(!1);async function ll(){try{const s=await Bl.getConfig(g);M.value=s.data,Ke()}catch{}}async function tl(){ze.value=!0;try{const s=await Bl.setConfig(g,M.value);M.value=s.data,y.success(M.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ze.value=!1}}async function al(){el.value=!0;try{await Bl.consolidate(g),y.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(Ke,1e4)}catch{y.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{el.value=!1}}const De=d([]),He=d(!1);async function Ke(){He.value=!0;try{const s=await Bl.runLog(g);De.value=s.data||[]}catch{De.value=[]}finally{He.value=!1}}const Oe=d([]),pe=d(""),Te=d(""),w=d(!1),r=d([]),A=d(!1),V=d(""),B=d(!1),te=d(""),D=d([]),Z=d(!1),E=d({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function yl(){try{const s=await yt.get(g);D.value=s.data.parsed||[]}catch{D.value=[]}}function ol(s){const l=ee.value.find(f=>f.id===s);E.value.agentName=l?l.name:s}async function gl(){if(!E.value.agentId)return;if(D.value.find(l=>l.agentId===E.value.agentId)){y.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}D.value.push({...E.value}),E.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await Ye()}async function _l(s){D.value.splice(s,1),await Ye()}function nl(){if(D.value.length===0)return"";const s=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,l=D.value.map(f=>`| ${f.agentId} | ${f.agentName} | ${f.relationType} | ${f.strength} | ${f.desc||""} |`).join(`
`);return s+`
`+l}async function Ye(){Z.value=!0;try{await yt.put(g,nl()),y.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Z.value=!1}}function Xe(s){const l=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let f=0;for(let z=0;z<s.length;z++)f=s.charCodeAt(z)+((f<<5)-f);return l[Math.abs(f)%l.length]??"#409EFF"}function Fe(s){return s==="‰∏äÁ∫ß"?"danger":s==="‰∏ãÁ∫ß"?"":s==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function Se(s){return s==="Ê†∏ÂøÉ"?"danger":s==="Â∏∏Áî®"?"warning":"info"}const be=d([]),c=d(!1),i=d({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function I(s){return s==="running"?"success":s==="stopped"?"danger":"info"}function ae(s){return s==="running"?"ËøêË°å‰∏≠":s==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function wl(s){return s?s<1024?s+" B":s<1048576?(s/1024).toFixed(1)+" KB":(s/1048576).toFixed(1)+" MB":"0 B"}function il(s){return s?new Date(s).toLocaleString():""}const m=d([]),me=d(!1),S=d(!1),O=d(""),Le=d(""),El=d(!1),Rl=d(""),k=d({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""}),j=d({loading:!1,status:""});let Pl=null;function Kl(s){return/^\*+$/.test(s)}async function nt(){const s=k.value.botToken;if(!(!s||Kl(s))){j.value={loading:!0,status:""};try{const f=(await Ie.checkToken(g,s)).data;f.duplicate?j.value={loading:!1,status:"duplicate",usedBy:f.usedBy,usedByCh:f.usedByCh}:f.valid?(j.value={loading:!1,status:"ok",botName:f.botName},!k.value.name&&f.botName&&(k.value.name=f.botName)):j.value={loading:!1,status:"error",error:f.error||"Token Êó†Êïà"}}catch{j.value={loading:!1,status:"error",error:"ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï"}}}}Ll(()=>k.value.type,s=>{O.value||(Le.value=jl(s))}),Ll(()=>k.value.botToken,s=>{j.value={loading:!1,status:""},Pl&&clearTimeout(Pl),!(!s||Kl(s)||s.length<20||!s.includes(":"))&&(Pl=setTimeout(nt,800))});function ul(s,l){return l?`${window.location.origin}/chat/${s}/${l}`:`${window.location.origin}/chat/${s}`}function st(s){navigator.clipboard.writeText(s).then(()=>y.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function dl(){me.value=!0;try{const s=await Ie.list(g);m.value=s.data||[]}catch{m.value=[]}finally{me.value=!1}}function jl(s){return s+"-"+Date.now().toString(36)}function bt(){O.value="";const s=K.value?.name||"";Le.value=jl("telegram"),k.value={type:"telegram",name:s,enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},j.value={loading:!1,status:""},S.value=!0}function kt(s){O.value=s.id,k.value={type:s.type,name:s.name,enabled:s.enabled,botToken:s.config?.botToken||"",allowedFrom:s.config?.allowedFrom||"",webPassword:"",webWelcome:s.config?.welcomeMsg||"",webTitle:s.config?.title||""},j.value={loading:!1,status:""},S.value=!0}async function ht(){if(!k.value.name||!k.value.type){y.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}if(j.value.status==="duplicate"){y.error(`Bot Token Â∑≤Ë¢´ÊàêÂëò„Äå${j.value.usedBy}„Äç‰ΩøÁî®ÔºåËØ∑Êõ¥Êç¢`);return}El.value=!0;try{const s={};if(k.value.type==="telegram"?(k.value.botToken&&(s.botToken=k.value.botToken),k.value.allowedFrom&&(s.allowedFrom=k.value.allowedFrom)):k.value.type==="web"&&(k.value.webPassword&&(s.password=k.value.webPassword),k.value.webWelcome&&(s.welcomeMsg=k.value.webWelcome),k.value.webTitle&&(s.title=k.value.webTitle)),O.value){const l=m.value.map(f=>f.id!==O.value?f:{...f,name:k.value.name,type:k.value.type,enabled:k.value.enabled,config:{...f.config,...s}});await Ie.set(g,l)}else{const l={id:Le.value||jl(k.value.type),name:k.value.name,type:k.value.type,enabled:k.value.enabled,config:s,status:"untested"};await Ie.set(g,[...m.value,l])}y.success(k.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),S.value=!1,await dl()}catch(s){y.error(s.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{El.value=!1}}async function xt(){try{await Ie.set(g,m.value)}catch(s){y.error(s.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•"),await dl()}}async function Ct(s){const l=m.value.filter(f=>f.id!==s.id);try{await Ie.set(g,l),m.value=l,y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function $t(s){Rl.value=s.id;try{const l=await Ie.test(g,s.id);l.data.valid?y.success(l.data.botName?`ÊµãËØïÊàêÂäü (@${l.data.botName})`:"ÊµãËØïÊàêÂäü"):y.error(l.data.error||"ÊµãËØïÂ§±Ë¥•"),await dl()}catch{y.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{Rl.value=""}}const rl=d({}),Wl=d({}),bl=d(""),Hl=d("");async function Ml(s){Wl.value[s]=!0;try{const l=await Ie.listPending(g,s);rl.value[s]=l.data||[]}catch{rl.value[s]=[]}finally{Wl.value[s]=!1}}function Vt(s){bl.value===s?bl.value="":(bl.value=s,Ml(s))}async function zt(s,l){Hl.value=`${s}-${l}`;try{await Ie.allowUser(g,s,l),y.success(`Áî®Êà∑ ${l} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Ml(s),await dl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}finally{Hl.value=""}}async function Tt(s,l){try{await Ie.dismissUser(g,s,l),y.success("Â∑≤ÂøΩÁï•"),await Ml(s)}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function ot(s,l){try{await Sl.confirm(`Á°ÆÂÆöÂ∞ÜÁî®Êà∑ ${l} ‰ªéÁôΩÂêçÂçï‰∏≠ÁßªÈô§ÔºüÁßªÈô§ÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®Ê≠§ Bot„ÄÇ`,"ÁßªÈô§ÁôΩÂêçÂçï",{confirmButtonText:"Á°ÆËÆ§ÁßªÈô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"})}catch{return}try{await Ie.removeAllowed(g,s,l),y.success(`Áî®Êà∑ ${l} Â∑≤‰ªéÁôΩÂêçÂçïÁßªÈô§`),await dl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}lt(async()=>{try{const R=await Vl.get(g);K.value=R.data}catch{y.error("Âä†ËΩΩ Agent Â§±Ë¥•")}St(),Lt(),yl(),ce(),ll(),Al(),dl(),Ve(),await _();const s=he.query.tab;s&&(Me.value=s);const l=he.query.resumeSession,f=l?null:localStorage.getItem(`zyhive_session_${g}`),z=l||f||null;z&&(ue.value=z,await new Promise(R=>setTimeout(R,100)),Q.value?.resumeSession(z),we.value.find(R=>R.id===z)||(ue.value=z))});async function St(){try{const[s,l]=await Promise.all([G.read(g,"IDENTITY.md"),G.read(g,"SOUL.md")]);U.value=s.data?.content||"",Ue.value=l.data?.content||""}catch{}kl()}async function it(s,l){try{await G.write(g,s,l),y.success(`${s} Â∑≤‰øùÂ≠ò`)}catch{y.error(`‰øùÂ≠ò ${s} Â§±Ë¥•`)}}async function Lt(){try{const s=await ra.list();if(fe.value=s.data||[],K.value?.modelId)se.value=K.value.modelId;else{const l=fe.value.find(f=>f.provider+"/"+f.model===K.value?.model||f.id===K.value?.model);se.value=l?.id||""}}catch{}}async function It(){if(se.value){Re.value=!0;try{const s=await Vl.update(g,{modelId:se.value});K.value=s.data,y.success("Ê®°ÂûãÂ∑≤Êõ¥Êñ∞")}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}finally{Re.value=!1}}}async function kl(){try{const s=await zl.tree(g);Oe.value=s.data||[]}catch{Oe.value=[]}}async function Mt(s){if(!s.isDir){pe.value=s.path,r.value=s.path.split("/");try{const l=await zl.readFile(g,s.path);Te.value=l.data?.content||""}catch{Te.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function At(){if(pe.value){w.value=!0;try{await zl.writeFile(g,pe.value,Te.value),y.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),kl()}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{w.value=!1}}}async function Ut(){const s=V.value.trim();if(!s){y.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await zl.writeFile(g,s,`# ${s.split("/").pop()?.replace(".md","")||"New File"}

`),y.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),A.value=!1,V.value="",kl(),pe.value=s,r.value=s.split("/"),Te.value=`# ${s.split("/").pop()?.replace(".md","")||"New File"}

`}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function Dt(){const s=te.value.trim();if(!s){y.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await zl.dailyLog(g,s),y.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),B.value=!1,te.value="",kl()}catch{y.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Al(){try{const s=await Tl.list(g);be.value=s.data||[]}catch{}}async function Ft(){try{await Tl.create({name:i.value.name,enabled:i.value.enabled,agentId:g,schedule:{kind:"cron",expr:i.value.expr,tz:i.value.tz},payload:{kind:"agentTurn",message:i.value.message},delivery:{mode:"announce"}}),y.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),c.value=!1,Al()}catch(s){y.error(s.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Nt(s){try{await Tl.update(s.id,s)}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function ut(s){try{await Tl.run(s.id),y.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(Al,2e3)}catch{y.error("ËøêË°åÂ§±Ë¥•")}}async function Bt(s){try{await Tl.delete(s.id),y.success("Â∑≤Âà†Èô§"),Al()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}const Ul=d(!1),Ol=d([]),Yl=d(!1),Xl=d(""),qe=d([]),ql=d(0),Dl=d(0),Et=pl(()=>qe.value.length<ql.value),hl=d(!1);async function dt(){Ul.value=!0;try{const s=await gt.list(g);Ol.value=s.data}catch{y.error("Âä†ËΩΩÂØπËØùÊ∏†ÈÅìÂ§±Ë¥•")}finally{Ul.value=!1}}async function Rt(s){Xl.value=s.channelId,qe.value=[],ql.value=0,Dl.value=0,Yl.value=!0,await rt()}async function rt(){hl.value=!0;try{const l=(await gt.messages(g,Xl.value,{limit:Co,offset:Dl.value})).data;ql.value=l.total,Dl.value===0?qe.value=l.messages:qe.value=[...l.messages,...qe.value],Dl.value+=l.messages.length}catch{y.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•")}finally{hl.value=!1}}async function Pt(){await rt()}return Ll(Me,s=>{s==="convlogs"&&Ol.value.length===0&&dt()}),(s,l)=>{const f=b("el-button"),z=b("el-text"),R=b("el-tag"),sl=b("el-header"),F=b("el-option"),Ne=b("el-select"),X=b("el-input"),Be=b("el-tab-pane"),N=b("el-form-item"),cl=b("el-form"),Ee=b("el-card"),ye=b("el-col"),vl=b("el-row"),ct=b("el-badge"),q=b("el-table-column"),xl=b("el-table"),Cl=b("el-switch"),Kt=b("el-input-number"),oe=b("el-icon"),jt=b("el-tree"),Jl=b("el-empty"),vt=b("el-breadcrumb-item"),Wt=b("el-breadcrumb"),Fl=b("el-dialog"),Ht=b("el-drawer"),Ot=b("el-link"),Yt=b("CircleCheck"),Xt=b("Warning"),qt=b("CircleClose"),ft=b("InfoFilled"),pt=b("Link"),Jt=b("el-tabs"),Gt=b("el-main"),Qt=b("el-container"),Gl=da("loading");return o(),C(Qt,{class:"agent-detail"},{default:t(()=>[e(sl,{class:"detail-header"},{default:t(()=>[n("div",Wn,[e(f,{icon:P(na),onClick:l[0]||(l[0]=a=>s.$router.push("/agents")),circle:"",size:"small"},null,8,["icon"]),n("div",Hn,[n("h2",On,p(K.value?.name||"..."),1),e(z,{type:"info",class:"detail-model-mobile"},{default:t(()=>[u(p(K.value?.model),1)]),_:1})]),e(R,{type:I(K.value?.status),size:"small"},{default:t(()=>[u(p(ae(K.value?.status)),1)]),_:1},8,["type"])]),e(z,{type:"info",class:"detail-model-desktop"},{default:t(()=>[u(p(K.value?.model),1)]),_:1})]),_:1}),e(Gt,null,{default:t(()=>[e(Jt,{modelValue:Me.value,"onUpdate:modelValue":l[48]||(l[48]=a=>Me.value=a),type:"border-card"},{default:t(()=>[e(Be,{label:"ÂØπËØù",name:"chat"},{default:t(()=>[n("div",Yn,[n("button",{class:"mobile-session-toggle",onClick:l[1]||(l[1]=a=>_e.value=!_e.value)},[(o(),v("svg",Xn,[...l[49]||(l[49]=[n("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},null,-1)])])),l[51]||(l[51]=u(" ÂéÜÂè≤ÂØπËØù ",-1)),n("span",qn,p(we.value.length),1),(o(),v("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",style:ke([{"margin-left":"auto"},{transform:_e.value?"rotate(180deg)":""}])},[...l[50]||(l[50]=[n("path",{d:"M7 10l5 5 5-5z"},null,-1)])],4))]),n("div",{class:ge(["session-sidebar",{"mobile-session-open":_e.value}])},[n("div",Jn,[l[53]||(l[53]=n("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),e(f,{size:"small",type:"primary",plain:"",onClick:L,icon:P(Nl)},{default:t(()=>[...l[52]||(l[52]=[u("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),je((o(),v("div",Gn,[(o(!0),v(W,null,ie(we.value,a=>(o(),v("div",{key:a.id,class:ge(["session-item",{active:ue.value===a.id}]),onClick:h=>T(a)},[n("div",Zn,p(a.title||"Êñ∞ÂØπËØù"),1),n("div",es,[n("span",null,p(Ae(a.lastAt)),1),e(R,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[u(p(a.messageCount)+" Êù° ",1)]),_:2},1024),a.tokenEstimate>6e4?(o(),C(R,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[u("~"+p(Math.round(a.tokenEstimate/1e3))+"k",1)]),_:2},1024)):$("",!0)])],10,Qn))),128)),!ne.value&&!we.value.length?(o(),v("div",ls," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):$("",!0)])),[[Gl,ne.value]]),n("div",ts,[e(f,{size:"small",plain:"",class:"at-toggle-btn",onClick:de},{default:t(()=>[...l[54]||(l[54]=[n("span",{class:"at-icon"},"@",-1),u(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),x.value?(o(),v("div",as,[e(Ne,{modelValue:H.value,"onUpdate:modelValue":l[2]||(l[2]=a=>H.value=a),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:ve},{default:t(()=>[(o(!0),v(W,null,ie(ee.value,a=>(o(),C(F,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(X,{modelValue:Y.value,"onUpdate:modelValue":l[3]||(l[3]=a=>Y.value=a),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),e(f,{type:"primary",size:"small",style:{width:"100%"},loading:re.value,disabled:!H.value||!Y.value.trim(),onClick:xe},{default:t(()=>[...l[55]||(l[55]=[u(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):$("",!0)])],2),n("div",ns,[e(tt,{ref_key:"aiChatRef",ref:Q,"agent-id":P(g),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${K.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:J},null,8,["agent-id","welcome-message"])])])]),_:1}),e(Be,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:t(()=>[e(jn,{"agent-id":P(g),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Be,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:t(()=>[e(Ee,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[56]||(l[56]=[n("span",{style:{"font-weight":"600"}},"Âü∫Êú¨ËÆæÁΩÆ",-1)])]),default:t(()=>[e(cl,{"label-width":"80px",size:"default"},{default:t(()=>[e(N,{label:"‰ΩøÁî®Ê®°Âûã"},{default:t(()=>[e(Ne,{modelValue:se.value,"onUpdate:modelValue":l[4]||(l[4]=a=>se.value=a),placeholder:"ÈÄâÊã©Ê®°Âûã",style:{width:"280px","margin-right":"10px"}},{default:t(()=>[(o(!0),v(W,null,ie(fe.value,a=>(o(),C(F,{key:a.id,label:a.name||a.model,value:a.id},{default:t(()=>[n("div",ss,[n("span",null,p(a.name||a.model),1),n("span",os,p(a.provider),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(f,{type:"primary",loading:Re.value,onClick:It,disabled:!se.value},{default:t(()=>[...l[57]||(l[57]=[u("‰øùÂ≠ò",-1)])]),_:1},8,["loading","disabled"]),K.value?.model?(o(),C(z,{key:0,type:"info",style:{"margin-left":"12px","font-size":"12px"}},{default:t(()=>[u(" ÂΩìÂâçÔºö"+p(K.value.model),1)]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1}),e(vl,{gutter:20},{default:t(()=>[e(ye,{xs:24,sm:12},{default:t(()=>[e(Ee,{header:"IDENTITY.md",style:{"margin-bottom":"16px"}},{default:t(()=>[e(X,{modelValue:U.value,"onUpdate:modelValue":l[5]||(l[5]=a=>U.value=a),type:"textarea",rows:15,onBlur:l[6]||(l[6]=a=>it("IDENTITY.md",U.value))},null,8,["modelValue"])]),_:1})]),_:1}),e(ye,{xs:24,sm:12},{default:t(()=>[e(Ee,{header:"SOUL.md"},{default:t(()=>[e(X,{modelValue:Ue.value,"onUpdate:modelValue":l[7]||(l[7]=a=>Ue.value=a),type:"textarea",rows:15,onBlur:l[8]||(l[8]=a=>it("SOUL.md",Ue.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Be,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:t(()=>[e(vl,{gutter:20},{default:t(()=>[e(ye,{span:14},{default:t(()=>[e(Ee,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[58]||(l[58]=[n("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:t(()=>[e(cl,{model:E.value,"label-position":"top",size:"default"},{default:t(()=>[e(vl,{gutter:12},{default:t(()=>[e(ye,{span:10},{default:t(()=>[e(N,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:t(()=>[e(Ne,{modelValue:E.value.agentId,"onUpdate:modelValue":l[9]||(l[9]=a=>E.value.agentId=a),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:ol},{default:t(()=>[(o(!0),v(W,null,ie(ee.value,a=>(o(),C(F,{key:a.id,label:a.name,value:a.id},{default:t(()=>[n("div",is,[n("div",{style:ke([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:Xe(a.id)}])},p(a.name.charAt(0)),5),n("span",null,p(a.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ye,{span:7},{default:t(()=>[e(N,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:t(()=>[e(Ne,{modelValue:E.value.relationType,"onUpdate:modelValue":l[10]||(l[10]=a=>E.value.relationType=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),e(F,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),e(F,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),e(F,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ye,{span:7},{default:t(()=>[e(N,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:t(()=>[e(Ne,{modelValue:E.value.strength,"onUpdate:modelValue":l[11]||(l[11]=a=>E.value.strength=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),e(F,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),e(F,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(vl,{gutter:12},{default:t(()=>[e(ye,{span:18},{default:t(()=>[e(N,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:t(()=>[e(X,{modelValue:E.value.desc,"onUpdate:modelValue":l[12]||(l[12]=a=>E.value.desc=a),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),e(ye,{span:6},{default:t(()=>[e(N,{label:" "},{default:t(()=>[e(f,{type:"primary",style:{width:"100%"},disabled:!E.value.agentId||!E.value.relationType||!E.value.strength,loading:Z.value,onClick:gl},{default:t(()=>[...l[59]||(l[59]=[u(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Ee,null,{header:t(()=>[n("span",us,[l[60]||(l[60]=u("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),e(ct,{value:D.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:t(()=>[D.value.length===0?(o(),v("div",ds," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(o(),C(xl,{key:1,data:D.value,size:"small",style:{width:"100%"}},{default:t(()=>[e(q,{label:"ÊàêÂëò","min-width":"120"},{default:t(({row:a})=>[n("div",rs,[n("div",{style:ke([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:Xe(a.agentId)}])},p(a.agentName.charAt(0)),5),n("span",cs,p(a.agentName),1)])]),_:1}),e(q,{label:"Á±ªÂûã",width:"100"},{default:t(({row:a})=>[e(R,{type:Fe(a.relationType),size:"small"},{default:t(()=>[u(p(a.relationType),1)]),_:2},1032,["type"])]),_:1}),e(q,{label:"Á®ãÂ∫¶",width:"80"},{default:t(({row:a})=>[e(R,{type:Se(a.strength),size:"small",effect:"plain"},{default:t(()=>[u(p(a.strength),1)]),_:2},1032,["type"])]),_:1}),e(q,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:t(({row:a})=>[n("span",vs,p(a.desc||"‚Äî"),1)]),_:1}),e(q,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:t(({$index:a})=>[e(f,{type:"danger",link:"",size:"small",onClick:h=>_l(a)},{default:t(()=>[...l[61]||(l[61]=[u("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),e(ye,{span:10},{default:t(()=>[e(Ee,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:t(()=>[D.value.length===0?(o(),v("div",fs," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(o(),v("div",ps,[(o(!0),v(W,null,ie(D.value,a=>(o(),v("div",{key:a.agentId,class:"relation-card"},[n("div",{class:"relation-avatar",style:ke({background:Xe(a.agentId)})},p(a.agentName.charAt(0).toUpperCase()),5),n("div",ms,[n("div",ys,p(a.agentName),1),n("div",gs,[e(R,{type:Fe(a.relationType),size:"small"},{default:t(()=>[u(p(a.relationType),1)]),_:2},1032,["type"]),e(R,{type:Se(a.strength),size:"small",effect:"plain"},{default:t(()=>[u(p(a.strength),1)]),_:2},1032,["type"])]),n("div",_s,p(a.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(Be,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:t(()=>[e(Ee,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[n("div",ws,[l[62]||(l[62]=n("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),e(Cl,{modelValue:M.value.enabled,"onUpdate:modelValue":l[13]||(l[13]=a=>M.value.enabled=a),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:tl},null,8,["modelValue"])])]),default:t(()=>[e(cl,{model:M.value,"label-position":"top",size:"small",disabled:!M.value.enabled},{default:t(()=>[e(vl,{gutter:16},{default:t(()=>[e(ye,{span:6},{default:t(()=>[e(N,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:t(()=>[e(Ne,{modelValue:M.value.schedule,"onUpdate:modelValue":l[14]||(l[14]=a=>M.value.schedule=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),e(F,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),e(F,{label:"ÊØèÂ§©",value:"daily"}),e(F,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ye,{span:5},{default:t(()=>[e(N,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:t(()=>[e(Kt,{modelValue:M.value.keepTurns,"onUpdate:modelValue":l[15]||(l[15]=a=>M.value.keepTurns=a),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(ye,{span:13},{default:t(()=>[e(N,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:t(()=>[e(X,{modelValue:M.value.focusHint,"onUpdate:modelValue":l[16]||(l[16]=a=>M.value.focusHint=a),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n("div",bs,[e(f,{type:"primary",size:"small",loading:ze.value,onClick:tl},{default:t(()=>[...l[63]||(l[63]=[u(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),e(f,{size:"small",loading:el.value,onClick:al},{default:t(()=>[...l[64]||(l[64]=[u(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),e(z,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:t(()=>[u(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+p(M.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),e(Ee,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[n("div",ks,[l[66]||(l[66]=n("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),e(f,{size:"small",text:"",onClick:Ke,loading:He.value},{default:t(()=>[...l[65]||(l[65]=[u("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:t(()=>[De.value.length===0&&!He.value?(o(),v("div",hs," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(o(),C(xl,{key:1,data:De.value.slice(0,20),size:"small"},{default:t(()=>[e(q,{label:"Êó∂Èó¥",width:"160"},{default:t(({row:a})=>[n("span",xs,p(il(a.timestamp)),1)]),_:1}),e(q,{label:"Áä∂ÊÄÅ",width:"72"},{default:t(({row:a})=>[e(R,{type:a.status==="ok"?"success":"danger",size:"small"},{default:t(()=>[u(p(a.status),1)]),_:2},1032,["type"])]),_:1}),e(q,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[n("span",Cs,p(a.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),n("div",$s,[e(f,{type:"primary",size:"small",onClick:l[17]||(l[17]=a=>A.value=!0)},{default:t(()=>[e(oe,null,{default:t(()=>[e(P(Nl))]),_:1}),l[67]||(l[67]=u(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),e(f,{size:"small",onClick:l[18]||(l[18]=a=>B.value=!0)},{default:t(()=>[e(oe,null,{default:t(()=>[e(P(sa))]),_:1}),l[68]||(l[68]=u(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),e(f,{size:"small",onClick:kl},{default:t(()=>[e(oe,null,{default:t(()=>[e(P(Zl))]),_:1}),l[69]||(l[69]=u(" Âà∑Êñ∞ ",-1))]),_:1})]),e(vl,{gutter:16},{default:t(()=>[e(ye,{span:7},{default:t(()=>[e(Ee,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:t(()=>[e(jt,{data:Oe.value,props:{label:"name",children:"children",isLeaf:a=>!a.isDir},onNodeClick:Mt,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:t(({data:a})=>[n("span",Vs,[a.isDir?(o(),C(oe,{key:0,style:{color:"#E6A23C"}},{default:t(()=>[e(P(oa))]),_:1})):(o(),C(oe,{key:1,style:{color:"#409EFF"}},{default:t(()=>[e(P(ia))]),_:1})),n("span",null,p(a.name),1),!a.isDir&&a.size?(o(),C(z,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:t(()=>[u(p(wl(a.size)),1)]),_:2},1024)):$("",!0)])]),_:1},8,["data","props"]),Oe.value.length===0?(o(),C(Jl,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):$("",!0)]),_:1})]),_:1}),e(ye,{span:17},{default:t(()=>[e(Ee,{shadow:"hover"},{header:t(()=>[n("div",zs,[e(Wt,{separator:"/"},{default:t(()=>[e(vt,null,{default:t(()=>[...l[70]||(l[70]=[u("memory",-1)])]),_:1}),(o(!0),v(W,null,ie(r.value,(a,h)=>(o(),C(vt,{key:h},{default:t(()=>[u(p(a),1)]),_:2},1024))),128))]),_:1}),pe.value?(o(),C(f,{key:0,type:"primary",size:"small",onClick:At,loading:w.value},{default:t(()=>[...l[71]||(l[71]=[u("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):$("",!0)])]),default:t(()=>[pe.value?(o(),C(X,{key:0,modelValue:Te.value,"onUpdate:modelValue":l[19]||(l[19]=a=>Te.value=a),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(o(),C(Jl,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),e(Fl,{modelValue:A.value,"onUpdate:modelValue":l[22]||(l[22]=a=>A.value=a),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:t(()=>[e(f,{onClick:l[21]||(l[21]=a=>A.value=!1)},{default:t(()=>[...l[73]||(l[73]=[u("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Ut},{default:t(()=>[...l[74]||(l[74]=[u("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(cl,{"label-width":"80px"},{default:t(()=>[e(N,{label:"Ë∑ØÂæÑ"},{default:t(()=>[e(X,{modelValue:V.value,"onUpdate:modelValue":l[20]||(l[20]=a=>V.value=a),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),e(z,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:t(()=>[...l[72]||(l[72]=[u("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Fl,{modelValue:B.value,"onUpdate:modelValue":l[25]||(l[25]=a=>B.value=a),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:t(()=>[e(f,{onClick:l[24]||(l[24]=a=>B.value=!1)},{default:t(()=>[...l[75]||(l[75]=[u("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Dt},{default:t(()=>[...l[76]||(l[76]=[u("Êèê‰∫§",-1)])]),_:1})]),default:t(()=>[e(X,{modelValue:te.value,"onUpdate:modelValue":l[23]||(l[23]=a=>te.value=a),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(Be,{label:"ÊäÄËÉΩ",name:"skills"},{default:t(()=>[e(en,{"agent-id":P(g),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Be,{label:"ÂéÜÂè≤ÂØπËØù",name:"convlogs"},{default:t(()=>[n("div",Ts,[l[77]||(l[77]=n("span",{style:{"font-weight":"600","font-size":"15px"}},"Ê∏†ÈÅìÂØπËØùËÆ∞ÂΩï",-1)),e(f,{size:"small",icon:P(Zl),circle:"",onClick:dt,loading:Ul.value},null,8,["icon","loading"])]),je((o(),C(xl,{data:Ol.value,stripe:"","empty-text":"ÊöÇÊó†ÂØπËØùËÆ∞ÂΩï"},{default:t(()=>[e(q,{label:"Ê∏†ÈÅì","min-width":"200"},{default:t(({row:a})=>[n("span",null,p(a.channelType==="telegram"?"Telegram":"Web")+" "+p(a.channelId),1)]),_:1}),e(q,{label:"Ê∂àÊÅØÊï∞",width:"100"},{default:t(({row:a})=>[u(p(a.messageCount)+" Êù°",1)]),_:1}),e(q,{label:"ÊúÄÂêéÊ¥ªË∑É",width:"180"},{default:t(({row:a})=>[u(p(a.lastAt?new Date(a.lastAt).toLocaleString("zh-CN"):"-"),1)]),_:1}),e(q,{label:"Êìç‰Ωú",width:"100"},{default:t(({row:a})=>[e(f,{size:"small",type:"primary",plain:"",onClick:h=>Rt(a)},{default:t(()=>[...l[78]||(l[78]=[u("Êü•Áúã",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Gl,Ul.value]]),e(Ht,{modelValue:Yl.value,"onUpdate:modelValue":l[26]||(l[26]=a=>Yl.value=a),title:Xl.value+" ÂØπËØùËÆ∞ÂΩï",direction:"rtl",size:"520px","destroy-on-close":!1},{default:t(()=>[n("div",Ss,[Et.value?(o(),v("div",Ls,[e(f,{size:"small",plain:"",loading:hl.value,onClick:Pt},{default:t(()=>[...l[79]||(l[79]=[u("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):$("",!0),je((o(),v("div",Is,[(o(!0),v(W,null,ie(qe.value,(a,h)=>(o(),v("div",{key:h,class:ge(["conv-msg-item",a.role==="user"?"conv-msg-user":"conv-msg-assistant"])},[n("div",Ms,[n("span",As,p(a.role==="user"?"Áî®Êà∑":"Âä©Êâã"),1),a.sender?(o(),v("span",Us,p(a.sender),1)):$("",!0),n("span",Ds,p(a.ts?new Date(a.ts).toLocaleString("zh-CN"):""),1)]),n("div",Fs,p(a.content),1)],2))),128)),!hl.value&&qe.value.length===0?(o(),v("div",Ns," ÊöÇÊó†Ê∂àÊÅØËÆ∞ÂΩï ")):$("",!0)])),[[Gl,hl.value&&qe.value.length===0]])])]),_:1},8,["modelValue","title"])]),_:1}),e(Be,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:t(()=>[e(f,{type:"primary",onClick:l[27]||(l[27]=a=>c.value=!0),style:{"margin-bottom":"16px"}},{default:t(()=>[e(oe,null,{default:t(()=>[e(P(Nl))]),_:1}),l[80]||(l[80]=u(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),e(xl,{data:be.value,stripe:""},{default:t(()=>[e(q,{prop:"name",label:"ÂêçÁß∞"}),e(q,{label:"Ë∞ÉÂ∫¶"},{default:t(({row:a})=>[u(p(a.schedule?.expr)+" ("+p(a.schedule?.tz)+")",1)]),_:1}),e(q,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:t(({row:a})=>[a.state?.lastRunAtMs?(o(),v(W,{key:0},[e(R,{type:a.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:t(()=>[u(p(a.state?.lastStatus),1)]),_:2},1032,["type"]),e(z,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:t(()=>[u(p(il(a.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(o(),C(z,{key:1,type:"info",size:"small"},{default:t(()=>[...l[81]||(l[81]=[u("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),e(q,{label:"ÂêØÁî®",width:"80"},{default:t(({row:a})=>[e(Cl,{modelValue:a.enabled,"onUpdate:modelValue":h=>a.enabled=h,onChange:h=>Nt(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(q,{label:"Êìç‰Ωú",width:"220"},{default:t(({row:a})=>[a.payload?.message==="__MEMORY_CONSOLIDATE__"?(o(),v(W,{key:0},[e(R,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:t(()=>[...l[82]||(l[82]=[u("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),e(f,{size:"small",onClick:h=>ut(a)},{default:t(()=>[...l[83]||(l[83]=[u("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(o(),v(W,{key:1},[e(f,{size:"small",onClick:h=>ut(a)},{default:t(()=>[...l[84]||(l[84]=[u("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",type:"danger",onClick:h=>Bt(a)},{default:t(()=>[...l[85]||(l[85]=[u("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),e(Fl,{modelValue:c.value,"onUpdate:modelValue":l[34]||(l[34]=a=>c.value=a),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:t(()=>[e(f,{onClick:l[33]||(l[33]=a=>c.value=!1)},{default:t(()=>[...l[86]||(l[86]=[u("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:Ft},{default:t(()=>[...l[87]||(l[87]=[u("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(cl,{model:i.value,"label-width":"100px"},{default:t(()=>[e(N,{label:"ÂêçÁß∞"},{default:t(()=>[e(X,{modelValue:i.value.name,"onUpdate:modelValue":l[28]||(l[28]=a=>i.value.name=a)},null,8,["modelValue"])]),_:1}),e(N,{label:"Cron Ë°®ËææÂºè"},{default:t(()=>[e(X,{modelValue:i.value.expr,"onUpdate:modelValue":l[29]||(l[29]=a=>i.value.expr=a),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),e(N,{label:"Êó∂Âå∫"},{default:t(()=>[e(Ne,{modelValue:i.value.tz,"onUpdate:modelValue":l[30]||(l[30]=a=>i.value.tz=a)},{default:t(()=>[e(F,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(F,{label:"UTC",value:"UTC"}),e(F,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),e(N,{label:"Ê∂àÊÅØ"},{default:t(()=>[e(X,{modelValue:i.value.message,"onUpdate:modelValue":l[31]||(l[31]=a=>i.value.message=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(N,{label:"ÂêØÁî®"},{default:t(()=>[e(Cl,{modelValue:i.value.enabled,"onUpdate:modelValue":l[32]||(l[32]=a=>i.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),e(Be,{label:"Ê∏†ÈÅì",name:"channels"},{default:t(()=>[n("div",Bs,[e(z,{type:"info",size:"small"},{default:t(()=>[...l[88]||(l[88]=[u("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),e(f,{type:"primary",size:"small",onClick:bt},{default:t(()=>[e(oe,null,{default:t(()=>[e(P(Nl))]),_:1}),l[89]||(l[89]=u(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(o(!0),v(W,null,ie(m.value,a=>(o(),v("div",{key:a.id,class:"channel-card"},[n("div",Es,[n("div",Rs,[e(R,{size:"small",style:{"margin-right":"8px"}},{default:t(()=>[u(p(a.type),1)]),_:2},1024),n("span",Ps,p(a.name),1),a.config?.botName?(o(),v("span",Ks,"@"+p(a.config.botName),1)):$("",!0),e(R,{type:a.status==="ok"?"success":a.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:t(()=>[u(p(a.status==="ok"?"‚úì Ê≠£Â∏∏":a.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),n("div",js,[e(Cl,{modelValue:a.enabled,"onUpdate:modelValue":h=>a.enabled=h,size:"small",onChange:xt,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),e(f,{size:"small",onClick:h=>$t(a),loading:Rl.value===a.id},{default:t(()=>[...l[90]||(l[90]=[u("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),e(f,{size:"small",onClick:h=>kt(a)},{default:t(()=>[...l[91]||(l[91]=[u("ÁºñËæë",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",type:"danger",plain:"",onClick:h=>Ct(a)},{default:t(()=>[...l[92]||(l[92]=[u("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),a.type==="web"?(o(),v("div",Ws,[n("div",Hs,[l[94]||(l[94]=n("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),n("span",Os,[e(Ot,{href:ul(P(g),a.id),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:t(()=>[u(p(ul(P(g),a.id)),1)]),_:2},1032,["href"]),e(f,{size:"small",link:"",style:{"margin-left":"8px"},onClick:h=>st(ul(P(g),a.id))},{default:t(()=>[...l[93]||(l[93]=[u("Â§çÂà∂",-1)])]),_:1},8,["onClick"])])]),n("div",Ys,[l[95]||(l[95]=n("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),n("span",Xs,[e(R,{size:"small",type:a.config?.password?"warning":"info",effect:"plain"},{default:t(()=>[u(p(a.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):$("",!0),a.type==="telegram"?(o(),v("div",qs,[n("div",Js,[l[97]||(l[97]=n("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),n("span",Gs,[a.allowedFromUsers?.length?(o(!0),v(W,{key:0},ie(a.allowedFromUsers,h=>(o(),C(R,{key:h.id,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Ql=>ot(a.id,h.id)},{default:t(()=>[u(p(h.username?"@"+h.username:h.firstName||String(h.id))+" ",1),n("span",Qs,"("+p(h.id)+")",1)]),_:2},1032,["onClose"]))),128)):a.config?.allowedFrom?(o(!0),v(W,{key:1},ie(a.config.allowedFrom.split(","),h=>(o(),C(R,{key:h,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Ql=>ot(a.id,Number(h.trim()))},{default:t(()=>[u(p(h.trim()),1)]),_:2},1032,["onClose"]))),128)):(o(),C(z,{key:2,type:"warning",size:"small"},{default:t(()=>[...l[96]||(l[96]=[u("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),n("div",Zs,[n("div",{class:"pending-section-header",onClick:h=>Vt(a.id)},[l[99]||(l[99]=n("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),e(ct,{value:(rl.value[a.id]||[]).length,hidden:!(rl.value[a.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),e(f,{size:"small",link:"",onClick:Je(h=>Ml(a.id),["stop"]),style:{"margin-left":"8px"}},{default:t(()=>[...l[98]||(l[98]=[u("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),e(oe,{style:ke([{"margin-left":"4px",transition:"transform 0.2s"},{transform:bl.value===a.id?"rotate(180deg)":""}])},{default:t(()=>[e(P(ua))]),_:1},8,["style"])],8,eo),bl.value===a.id?(o(),v("div",lo,[Wl.value[a.id]?(o(),v("div",to,[e(z,{type:"info",size:"small"},{default:t(()=>[...l[100]||(l[100]=[u("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(rl.value[a.id]||[]).length?(o(!0),v(W,{key:1},ie(rl.value[a.id],h=>(o(),v("div",{key:h.id,class:"pending-user-row"},[n("div",ao,[n("span",no,p(h.firstName||"Êú™Áü•"),1),h.username?(o(),v("span",so,"@"+p(h.username),1)):$("",!0),n("span",oo,"ID: "+p(h.id),1),e(z,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[u(p(Ae(h.lastSeen)),1)]),_:2},1024)]),n("div",io,[e(f,{size:"small",type:"success",plain:"",onClick:Ql=>zt(a.id,h.id),loading:Hl.value===`${a.id}-${h.id}`},{default:t(()=>[...l[101]||(l[101]=[u("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),e(f,{size:"small",type:"danger",plain:"",onClick:Ql=>Tt(a.id,h.id)},{default:t(()=>[...l[102]||(l[102]=[u("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(o(),v("div",uo," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):$("",!0)])])):$("",!0)]))),128)),!me.value&&!m.value.length?(o(),C(Jl,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):$("",!0),e(Fl,{modelValue:S.value,"onUpdate:modelValue":l[45]||(l[45]=a=>S.value=a),title:O.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:t(()=>[e(f,{onClick:l[44]||(l[44]=a=>S.value=!1)},{default:t(()=>[...l[112]||(l[112]=[u("ÂèñÊ∂à",-1)])]),_:1}),e(f,{type:"primary",onClick:ht,loading:El.value},{default:t(()=>[...l[113]||(l[113]=[u("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(cl,{model:k.value,"label-width":"120px"},{default:t(()=>[e(N,{label:"Á±ªÂûã",required:""},{default:t(()=>[e(Ne,{modelValue:k.value.type,"onUpdate:modelValue":l[35]||(l[35]=a=>k.value.type=a),style:{width:"100%"}},{default:t(()=>[e(F,{label:"Telegram",value:"telegram"}),e(F,{label:"Web ËÅäÂ§©È°µ",value:"web"}),e(F,{label:"iMessage",value:"imessage"}),e(F,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),e(N,{label:"ÂêçÁß∞",required:""},{default:t(()=>[e(X,{modelValue:k.value.name,"onUpdate:modelValue":l[36]||(l[36]=a=>k.value.name=a),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),k.value.type==="telegram"?(o(),v(W,{key:0},[e(N,{label:"Bot Token",required:""},{default:t(()=>[n("div",ro,[n("div",co,[e(X,{modelValue:k.value.botToken,"onUpdate:modelValue":l[37]||(l[37]=a=>k.value.botToken=a),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ",style:{flex:"1"},status:j.value.status==="error"?"error":j.value.status==="ok"?"success":""},null,8,["modelValue","status"]),e(f,{size:"default",loading:j.value.loading,type:j.value.status==="ok"?"success":j.value.status==="error"?"danger":"default",onClick:nt,disabled:!k.value.botToken||Kl(k.value.botToken)},{default:t(()=>[...l[103]||(l[103]=[u("È™åËØÅ",-1)])]),_:1},8,["loading","type","disabled"])]),j.value.loading?(o(),v("div",vo,[e(oe,{class:"is-loading"},{default:t(()=>[e(P(Zl))]),_:1}),l[104]||(l[104]=u(" Ê≠£Âú®È™åËØÅ Token‚Ä¶ ",-1))])):j.value.status==="ok"?(o(),v("div",fo,[e(oe,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Yt)]),_:1}),l[105]||(l[105]=u("Token ÊúâÊïàÔºåBot ÂêçÁß∞Ôºö",-1)),n("b",null,"@"+p(j.value.botName),1)])):j.value.status==="duplicate"?(o(),v("div",po,[e(oe,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Xt)]),_:1}),l[106]||(l[106]=u("Ê≠§ Token Â∑≤Ë¢´ÊàêÂëò„Äå",-1)),n("b",null,p(j.value.usedBy),1),u("„ÄçÁöÑÊ∏†ÈÅì„Äå"+p(j.value.usedByCh)+"„Äç‰ΩøÁî® ",1)])):j.value.status==="error"?(o(),v("div",mo,[e(oe,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(qt)]),_:1}),u(p(j.value.error),1)])):(o(),v("div",yo,[e(z,{type:"info",size:"small"},{default:t(()=>[e(oe,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(ft)]),_:1}),l[107]||(l[107]=u("ËæìÂÖ•ÂÆåÊàêÂêéËá™Âä®È™åËØÅÔºå‰πüÂèØÁÇπÂè≥‰æß„ÄåÈ™åËØÅ„ÄçÊåâÈíÆÊâãÂä®Ëß¶Âèë",-1))]),_:1})]))])]),_:1}),e(N,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:t(()=>[e(X,{modelValue:k.value.allowedFrom,"onUpdate:modelValue":l[38]||(l[38]=a=>k.value.allowedFrom=a),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),e(z,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[e(oe,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(ft)]),_:1}),l[108]||(l[108]=u("ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1))]),_:1})]),_:1})],64)):$("",!0),k.value.type==="web"?(o(),v(W,{key:1},[O.value?(o(),C(N,{key:0,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[n("div",go,[e(oe,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(pt)]),_:1}),n("span",_o,p(ul(P(g),O.value)),1),e(f,{size:"small",link:"",onClick:l[39]||(l[39]=a=>st(ul(P(g),O.value)))},{default:t(()=>[...l[109]||(l[109]=[u("Â§çÂà∂",-1)])]),_:1})])]),_:1})):$("",!0),O.value?$("",!0):(o(),C(N,{key:1,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[n("div",wo,[e(oe,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(pt)]),_:1}),n("span",bo,p(ul(P(g),Le.value)),1),e(R,{size:"small",type:"info",effect:"plain"},{default:t(()=>[...l[110]||(l[110]=[u("‰øùÂ≠òÂêéÁîüÊïà",-1)])]),_:1})]),e(z,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...l[111]||(l[111]=[u(" ÊØè‰∏™ Web Ê∏†ÈÅìÊúâÁã¨Á´ãÈìæÊé•ÔºåÂèØÂêåÊó∂ÂºÄÊîæÂ§ö‰∏™ÂÖ•Âè£ ",-1)])]),_:1})]),_:1})),e(N,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:t(()=>[e(X,{modelValue:k.value.webPassword,"onUpdate:modelValue":l[40]||(l[40]=a=>k.value.webPassword=a),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),e(N,{label:"Ê¨¢ËøéËØ≠"},{default:t(()=>[e(X,{modelValue:k.value.webWelcome,"onUpdate:modelValue":l[41]||(l[41]=a=>k.value.webWelcome=a),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),e(N,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:t(()=>[e(X,{modelValue:k.value.webTitle,"onUpdate:modelValue":l[42]||(l[42]=a=>k.value.webTitle=a),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):$("",!0),e(N,{label:"ÂêØÁî®"},{default:t(()=>[e(Cl,{modelValue:k.value.enabled,"onUpdate:modelValue":l[43]||(l[43]=a=>k.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(Be,{label:"ÁéØÂ¢ÉÂèòÈáè",name:"env"},{default:t(()=>[n("div",ko,[l[117]||(l[117]=n("div",{style:{"margin-bottom":"16px"}},[n("h3",{style:{margin:"0 0 8px 0","font-size":"15px"}},[u("ÁéØÂ¢ÉÂèòÈáè "),n("span",{style:{"font-size":"12px",color:"#888","font-weight":"400"}},"Ôºà‰ªÖÊ≠§ÊàêÂëòÂèØËßÅÔºâ")]),n("p",{style:{margin:"0 0 6px",color:"#666","font-size":"13px"}},[u(" ÈÖçÁΩÆÊ≠§ AI ÊàêÂëò"),n("strong",null,"ÁßÅÊúâ"),u("ÁöÑÁéØÂ¢ÉÂèòÈáèÔºàÂ¶Ç‰∏ìÂ±ûÁöÑ GitHub Token„ÄÅÂæÆ‰ø° AppSecret Á≠âÔºâ„ÄÇ"),n("br"),u(" ÂèòÈáè‰ºöÊ≥®ÂÖ•Âà∞ bash Â∑•ÂÖ∑ÁöÑÊâßË°åÁéØÂ¢É‰∏≠Ôºå"),n("strong",null,"‰∏çÂèóÁ≥ªÁªüÈªòËÆ§ËøáÊª§ÂΩ±Âìç"),u("Ôºå‰∏î"),n("strong",null,"‰ªÖÂØπÊú¨ÊàêÂëòÂèØËßÅ"),u("„ÄÇ ")]),n("p",{style:{margin:"0",color:"#94a3b8","font-size":"12px",background:"#1e293b",padding:"6px 10px","border-radius":"6px",display:"inline-block"}},[u(" üí° AI ÊàêÂëòÂèØ‰ª•ÈÄöËøá "),n("code",{style:{color:"#38bdf8"}},"self_set_env"),u(" Â∑•ÂÖ∑Ëá™Ë°åÊ∑ªÂä†ÁéØÂ¢ÉÂèòÈáèÔºåÊó†ÈúÄÊâãÂä®Âú®Ê≠§È°µÈù¢Êìç‰Ωú„ÄÇ"),n("br"),u(" ÂÖ®Â±ÄÂÖ±‰∫´ÁöÑ API KeyÔºàÂ¶Ç Brave SearchÔºâËØ∑Âú®Â∑¶‰æß„Äå"),n("strong",null,"ËÉΩÂäõ"),u("„ÄçÊùøÂùóÈÖçÁΩÆ„ÄÇ ")])],-1)),n("div",ho,[e(X,{modelValue:Ce.value,"onUpdate:modelValue":l[46]||(l[46]=a=>Ce.value=a),placeholder:"KEYÔºàÂ¶Ç GITHUB_TOKENÔºâ",style:{width:"220px","font-family":"monospace"},size:"small",onKeyup:Ge(Pe,["enter"])},null,8,["modelValue"]),e(X,{modelValue:$e.value,"onUpdate:modelValue":l[47]||(l[47]=a=>$e.value=a),placeholder:"VALUE",style:{flex:"1","font-family":"monospace"},size:"small",type:"password","show-password":"",onKeyup:Ge(Pe,["enter"])},null,8,["modelValue"]),e(f,{size:"small",type:"primary",onClick:Pe,disabled:!Ce.value.trim()},{default:t(()=>[...l[114]||(l[114]=[u(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled"])]),e(xl,{data:le.value,size:"small",style:{width:"100%","margin-bottom":"16px"},"empty-text":"ÊöÇÊó†ÁéØÂ¢ÉÂèòÈáè"},{default:t(()=>[e(q,{label:"KEY","min-width":"200"},{default:t(({row:a})=>[n("code",xo,p(a.key),1)]),_:1}),e(q,{label:"VALUE","min-width":"200"},{default:t(({row:a})=>[e(X,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,type:"password","show-password":"",size:"small",style:{"font-family":"monospace"},placeholder:"ÔºàÊú™ËÆæÁΩÆÔºâ"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(q,{label:"Êìç‰Ωú",width:"80",fixed:"right"},{default:t(({$index:a})=>[e(f,{size:"small",type:"danger",link:"",onClick:h=>Ze(a)},{default:t(()=>[...l[115]||(l[115]=[u("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(f,{type:"primary",size:"small",loading:Qe.value,onClick:We},{default:t(()=>[...l[116]||(l[116]=[u(" ‰øùÂ≠òÁéØÂ¢ÉÂèòÈáè ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Lo=at($o,[["__scopeId","data-v-19eb6e41"]]);export{Lo as default};
