import{d as k}from"./index-sb85_xT4.js";import{d as F,h as I,c as C,b as r,a as l,w as o,f as s,i as S,j as q,g as w,r as n,o as c,F as A,l as P,t as _,p as R,E as f,M as O}from"./index-DR71teA1.js";const T={class:"skills-page"},G={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px"}},H={style:{margin:"0"}},J={style:{display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"8px"}},K={style:{"font-weight":"600","font-size":"16px"}},Y=F({__name:"SkillsView",setup(Q){const y=w([]),d=w(!1),g=w(!1),a=R({id:"",name:"",description:"",path:""});I(v);async function v(){try{const i=await k.list();y.value=i.data}catch{}}async function U(){if(!a.id||!a.name){f.warning("请填写 ID 和名称");return}g.value=!0;try{await k.install({...a}),f.success("安装成功"),d.value=!1,Object.assign(a,{id:"",name:"",description:"",path:""}),v()}catch(i){f.error(i.response?.data?.error||"安装失败")}finally{g.value=!1}}async function h(i){try{await O.confirm(`确定卸载 "${i.name}"？`,"确认卸载",{type:"warning"}),await k.delete(i.id),f.success("已卸载"),v()}catch{}}return(i,e)=>{const z=n("Aim"),x=n("el-icon"),B=n("Plus"),m=n("el-button"),V=n("el-text"),j=n("el-switch"),E=n("el-card"),L=n("el-col"),M=n("el-row"),N=n("el-empty"),u=n("el-input"),p=n("el-form-item"),$=n("el-form"),D=n("el-dialog");return c(),C("div",T,[r("div",G,[r("h2",H,[l(x,{style:{"vertical-align":"-2px","margin-right":"6px"}},{default:o(()=>[l(z)]),_:1}),e[7]||(e[7]=s("Skills",-1))]),l(m,{type:"primary",onClick:e[0]||(e[0]=t=>d.value=!0)},{default:o(()=>[l(x,null,{default:o(()=>[l(B)]),_:1}),e[8]||(e[8]=s(" 安装 Skill ",-1))]),_:1})]),l(M,{gutter:16},{default:o(()=>[(c(!0),C(A,null,P(y.value,t=>(c(),S(L,{span:8,key:t.id},{default:o(()=>[l(E,{shadow:"hover",style:{"margin-bottom":"16px"}},{default:o(()=>[r("div",J,[r("div",null,[r("div",K,_(t.name),1),l(V,{type:"info",size:"small"},{default:o(()=>[s("v"+_(t.version),1)]),_:2},1024)]),l(j,{modelValue:t.enabled,"onUpdate:modelValue":b=>t.enabled=b,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),l(V,{type:"info",size:"small",style:{display:"block","margin-bottom":"12px"}},{default:o(()=>[s(_(t.description||"无描述"),1)]),_:2},1024),l(V,{type:"info",size:"small",style:{display:"block","margin-bottom":"12px"}},{default:o(()=>[s(" 路径: "+_(t.path||"-"),1)]),_:2},1024),l(m,{size:"small",type:"danger",onClick:b=>h(t)},{default:o(()=>[...e[9]||(e[9]=[s("卸载",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),y.value.length===0?(c(),S(N,{key:0,description:"暂无已安装 Skills"})):q("",!0),l(D,{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=t=>d.value=t),title:"安装 Skill",width:"520px"},{footer:o(()=>[l(m,{onClick:e[5]||(e[5]=t=>d.value=!1)},{default:o(()=>[...e[10]||(e[10]=[s("取消",-1)])]),_:1}),l(m,{type:"primary",onClick:U,loading:g.value},{default:o(()=>[...e[11]||(e[11]=[s("安装",-1)])]),_:1},8,["loading"])]),default:o(()=>[l($,{model:a,"label-width":"80px"},{default:o(()=>[l(p,{label:"ID",required:""},{default:o(()=>[l(u,{modelValue:a.id,"onUpdate:modelValue":e[1]||(e[1]=t=>a.id=t),placeholder:"skill-id"},null,8,["modelValue"])]),_:1}),l(p,{label:"名称",required:""},{default:o(()=>[l(u,{modelValue:a.name,"onUpdate:modelValue":e[2]||(e[2]=t=>a.name=t),placeholder:"Skill 名称"},null,8,["modelValue"])]),_:1}),l(p,{label:"描述"},{default:o(()=>[l(u,{modelValue:a.description,"onUpdate:modelValue":e[3]||(e[3]=t=>a.description=t),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),l(p,{label:"路径/URL"},{default:o(()=>[l(u,{modelValue:a.path,"onUpdate:modelValue":e[4]||(e[4]=t=>a.path=t),placeholder:"本地路径或远程 URL"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Y as default};
