import{d as pe,h as ve,c as r,f as a,a as n,w as o,s as V,e as d,F as y,j as g,p as R,v as J,q as K,g as k,m as T,r as u,o as i,i as z,y as ce,l as L,k as f,z as _e,u as ye,n as G,t as b,A as ge,b as ke,E as C}from"./index-Cp9TmmPw.js";import{m as be,c as Ie,t as we,s as Ce,b as H,f as Q}from"./index-BF1X9mkB.js";import{A as W}from"./AiChat-hpLYQiBZ.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ae={class:"create-layout"},$e={class:"create-left"},xe={class:"create-header"},Te={class:"form-section"},Le={class:"color-row"},Se=["onClick"],Ue={class:"form-section"},De={class:"section-title"},Ne={key:0,class:"ai-badge"},Ee={class:"form-section"},Oe={class:"form-section"},ze={key:0,class:"empty-hint"},Fe={class:"form-section"},Ye={key:0,class:"empty-hint"},Me={class:"form-section"},je={key:0,class:"empty-hint"},Be={class:"create-footer"},Pe={class:"create-right"},he={class:"agent-tabs-bar"},qe={class:"agent-tabs-scroll"},Re=["onClick"],Je={class:"agent-tab add-tab"},Ke=pe({__name:"AgentCreateView",setup(Ge){const X=ye(),l=K({name:"",id:"",description:"",avatarColor:"#409eff",identity:"",soul:"",modelId:"",channelIds:[],toolIds:[],skillIds:[]}),c=K(new Set),F={},S=k(!1),Z=["#409eff","#67c23a","#e6a23c","#f56c6c","#909399","#9b59b6","#1abc9c","#e74c3c"];function Y(){l.id=l.name.toLowerCase().replace(/[^a-z0-9\u4e00-\u9fff\s-]/g,"").trim().replace(/[\s\u4e00-\u9fff]+/g,"-").replace(/-+/g,"-").slice(0,32)}function M(s){const e=s;l[e]=F[s]||"",c.delete(s)}function ee(s){const e={name:"name",NAME:"name",id:"id",ID:"id",description:"description",DESCRIPTION:"description",desc:"description",identity:"identity",IDENTITY:"identity",soul:"soul",SOUL:"soul"};let _=0;for(const[m,p]of Object.entries(s)){const v=e[m];v&&p&&(F[m.toLowerCase()]=l[v],l[v]=p,c.add(m.toLowerCase()),m.toLowerCase()==="name"&&Y(),_++)}_>0?C.success(`å·²å¡«å…¥ ${_} ä¸ªå­—æ®µåˆ°å·¦ä¾§è¡¨å• âœ“`):C.warning("æœªè¯†åˆ«åˆ°å¯å¡«å…¥çš„å­—æ®µï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}async function te(){if(!l.name.trim()){C.warning("è¯·å¡«å†™åç§°");return}if(!l.id.trim()){C.warning("è¯·å¡«å†™ ID");return}S.value=!0;try{await H.create({...l,model:l.modelId||""});const s=[];l.identity.trim()&&s.push(Q.write(l.id,"IDENTITY.md",l.identity)),l.soul.trim()&&s.push(Q.write(l.id,"SOUL.md",l.soul)),s.length&&await Promise.all(s),C.success("Agent åˆ›å»ºæˆåŠŸï¼"),X.push(`/agents/${l.id}`)}catch(s){C.error(s.response?.data?.error||"åˆ›å»ºå¤±è´¥")}finally{S.value=!1}}const A=k([]),U=k([]),D=k([]),N=k([]),$=k([]),I=k("__assist__"),w=k([]),j=T(()=>$.value.filter(s=>w.value.includes(s.id))),B=T(()=>$.value.filter(s=>!w.value.includes(s.id))),le=T(()=>$.value[0]?.id||"main"),se=T(()=>["ä½ æ˜¯ä¸€ä¸ª AI é…ç½®åŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·è®¾è®¡å’Œç”Ÿæˆ AI Agent çš„é…ç½®æ–‡ä»¶ï¼ˆIDENTITY å’Œ SOULï¼‰ã€‚","ç”¨æˆ·æ­£åœ¨æ–°å»ºä¸€ä¸ª Agentï¼Œå½“å‰è¡¨å•çŠ¶æ€å¦‚ä¸‹ï¼ˆæœªå¡«å­—æ®µä¸ºç©ºï¼‰ï¼š",`- åç§°: ${l.name||"ï¼ˆæœªå¡«ï¼‰"}`,`- ID: ${l.id||"ï¼ˆæœªå¡«ï¼‰"}`,`- æè¿°: ${l.description||"ï¼ˆæœªå¡«ï¼‰"}`,l.identity?`- IDENTITYï¼ˆå·²å¡«ï¼‰: ${l.identity.slice(0,100)}...`:"- IDENTITY: ï¼ˆæœªå¡«ï¼‰",l.soul?`- SOULï¼ˆå·²å¡«ï¼‰: ${l.soul.slice(0,100)}...`:"- SOUL: ï¼ˆæœªå¡«ï¼‰","","å½“ä½ ä¸ºç”¨æˆ·ç”Ÿæˆé…ç½®æ—¶ï¼Œè¯·åœ¨å›ç­”æœ«å°¾é™„ä¸Šå¦‚ä¸‹æ ¼å¼çš„ JSON å—ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸€é”®åº”ç”¨ï¼š","```json",'{"name":"...","description":"...","identity":"...","soul":"..."}',"```","å¦‚æœæŸä¸ªå­—æ®µä¸éœ€è¦æ›´æ”¹ï¼Œå°±çœç•¥å®ƒã€‚"].join(`
`));function x(s){I.value=s}function oe(s){w.value.includes(s)||w.value.push(s),x(s)}function ne(s){w.value=w.value.filter(e=>e!==s),I.value===s&&x("__assist__")}return ve(async()=>{const[s,e,_,m,p]=await Promise.allSettled([be.list(),Ie.list(),we.list(),Ce.list(),H.list()]);s.status==="fulfilled"&&(A.value=s.value.data),e.status==="fulfilled"&&(U.value=e.value.data),_.status==="fulfilled"&&(D.value=_.value.data),m.status==="fulfilled"&&(N.value=m.value.data),p.status==="fulfilled"&&($.value=p.value.data),A.value.length>0&&(l.modelId=A.value[0]?.id??"")}),(s,e)=>{const _=u("el-icon"),m=u("el-button"),p=u("el-input"),v=u("el-form-item"),ae=u("el-option"),ie=u("el-select"),P=u("el-link"),de=u("el-tag"),E=u("el-checkbox"),O=u("el-checkbox-group"),ue=u("el-text"),re=u("el-form"),h=u("el-dropdown-item"),me=u("el-dropdown-menu"),fe=u("el-dropdown");return i(),r("div",Ae,[a("div",$e,[a("div",xe,[n(m,{text:"",onClick:e[0]||(e[0]=t=>s.$router.push("/agents")),class:"back-btn"},{default:o(()=>[n(_,null,{default:o(()=>[n(z(ce))]),_:1}),e[18]||(e[18]=d(" è¿”å› ",-1))]),_:1}),e[19]||(e[19]=a("h2",{style:{margin:"0"}},"æ–°å»º AI å‘˜å·¥",-1))]),n(re,{model:l,"label-position":"top",class:"create-form"},{default:o(()=>[a("div",Te,[e[20]||(e[20]=a("div",{class:"section-title"},"åŸºæœ¬ä¿¡æ¯",-1)),n(v,{label:"åç§°",required:""},{default:o(()=>[n(p,{modelValue:l.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.name=t),placeholder:"å¦‚ï¼šç”µå•†å®¢æœåŠ©æ‰‹",onInput:Y},null,8,["modelValue"])]),_:1}),n(v,{label:"ID"},{default:o(()=>[n(p,{modelValue:l.id,"onUpdate:modelValue":e[2]||(e[2]=t=>l.id=t),placeholder:"è‹±æ–‡æ ‡è¯†ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰"},null,8,["modelValue"])]),_:1}),n(v,{label:"æè¿°"},{default:o(()=>[n(p,{modelValue:l.description,"onUpdate:modelValue":e[3]||(e[3]=t=>l.description=t),type:"textarea",rows:2,placeholder:"ç®€çŸ­æè¿°è¿™ä¸ª Agent çš„èŒè´£"},null,8,["modelValue"])]),_:1}),n(v,{label:"å¤´åƒé¢œè‰²"},{default:o(()=>[a("div",Le,[(i(),r(y,null,g(Z,t=>a("div",{key:t,class:V(["color-swatch",{active:l.avatarColor===t}]),style:G({background:t}),onClick:q=>l.avatarColor=t},null,14,Se)),64))])]),_:1})]),a("div",Ue,[a("div",De,[e[21]||(e[21]=d(" èº«ä»½ & çµé­‚ ",-1)),c.has("identity")||c.has("soul")?(i(),r("span",Ne,"AI ç”Ÿæˆ")):L("",!0)]),n(v,null,{label:o(()=>[e[23]||(e[23]=a("span",null,[d("IDENTITY "),a("span",{class:"field-hint"},"â€” è§’è‰²å®šä¹‰")],-1)),c.has("identity")?(i(),f(m,{key:0,text:"",size:"small",onClick:e[4]||(e[4]=t=>M("identity")),class:"revert-btn"},{default:o(()=>[...e[22]||(e[22]=[d("â†º æ’¤é”€",-1)])]),_:1})):L("",!0)]),default:o(()=>[n(p,{modelValue:l.identity,"onUpdate:modelValue":e[5]||(e[5]=t=>l.identity=t),type:"textarea",rows:5,class:V({"ai-filled":c.has("identity")}),placeholder:"ä½ æ˜¯ä¸€ä¸ª...ï¼ˆæè¿° Agent çš„è§’è‰²å’Œèƒ½åŠ›ï¼‰",onInput:e[6]||(e[6]=t=>c.delete("identity"))},null,8,["modelValue","class"])]),_:1}),n(v,null,{label:o(()=>[e[25]||(e[25]=a("span",null,[d("SOUL "),a("span",{class:"field-hint"},"â€” è¡Œä¸ºé£æ ¼")],-1)),c.has("soul")?(i(),f(m,{key:0,text:"",size:"small",onClick:e[7]||(e[7]=t=>M("soul")),class:"revert-btn"},{default:o(()=>[...e[24]||(e[24]=[d("â†º æ’¤é”€",-1)])]),_:1})):L("",!0)]),default:o(()=>[n(p,{modelValue:l.soul,"onUpdate:modelValue":e[8]||(e[8]=t=>l.soul=t),type:"textarea",rows:5,class:V({"ai-filled":c.has("soul")}),placeholder:"è¯­æ°”äº²åˆ‡ï¼Œå›ç­”ç®€æ´...ï¼ˆæè¿° Agent çš„ä¸ªæ€§é£æ ¼ï¼‰",onInput:e[9]||(e[9]=t=>c.delete("soul"))},null,8,["modelValue","class"])]),_:1})]),a("div",Ee,[e[26]||(e[26]=a("div",{class:"section-title"},"æ¨¡å‹",-1)),n(v,{label:"é€‰æ‹©æ¨¡å‹"},{default:o(()=>[n(ie,{modelValue:l.modelId,"onUpdate:modelValue":e[10]||(e[10]=t=>l.modelId=t),placeholder:"é€‰æ‹©æ¨¡å‹",style:{width:"100%"}},{default:o(()=>[(i(!0),r(y,null,g(A.value,t=>(i(),f(ae,{key:t.id,label:`${t.name}ï¼ˆ${t.provider}ï¼‰`,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),a("div",Oe,[e[30]||(e[30]=a("div",{class:"section-title"},"æ¶ˆæ¯é€šé“",-1)),U.value.length===0?(i(),r("div",ze,[e[28]||(e[28]=d(" æš‚æ— é€šé“ï¼Œå…ˆåœ¨",-1)),n(P,{onClick:e[11]||(e[11]=t=>s.$router.push("/config/channels")),type:"primary"},{default:o(()=>[...e[27]||(e[27]=[d(" å…¨å±€é…ç½® ",-1)])]),_:1}),e[29]||(e[29]=d("æ·»åŠ  ",-1))])):(i(),f(O,{key:1,modelValue:l.channelIds,"onUpdate:modelValue":e[12]||(e[12]=t=>l.channelIds=t)},{default:o(()=>[(i(!0),r(y,null,g(U.value,t=>(i(),f(E,{key:t.id,label:t.id,value:t.id},{default:o(()=>[d(b(t.name)+" ",1),n(de,{size:"small",style:{"margin-left":"4px"}},{default:o(()=>[d(b(t.type),1)]),_:2},1024)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),a("div",Fe,[e[34]||(e[34]=a("div",{class:"section-title"},"å¼€å¯èƒ½åŠ›",-1)),D.value.length===0?(i(),r("div",Ye,[e[32]||(e[32]=d(" æš‚æ— èƒ½åŠ›ï¼Œå…ˆåœ¨",-1)),n(P,{onClick:e[13]||(e[13]=t=>s.$router.push("/config/tools")),type:"primary"},{default:o(()=>[...e[31]||(e[31]=[d(" å…¨å±€é…ç½® ",-1)])]),_:1}),e[33]||(e[33]=d("æ·»åŠ  ",-1))])):(i(),f(O,{key:1,modelValue:l.toolIds,"onUpdate:modelValue":e[14]||(e[14]=t=>l.toolIds=t)},{default:o(()=>[(i(!0),r(y,null,g(D.value,t=>(i(),f(E,{key:t.id,label:t.id,value:t.id},{default:o(()=>[d(b(t.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),a("div",Me,[e[35]||(e[35]=a("div",{class:"section-title"},"Skills",-1)),N.value.length===0?(i(),r("div",je,"æš‚æ— å·²å®‰è£…çš„ Skills")):(i(),f(O,{key:1,modelValue:l.skillIds,"onUpdate:modelValue":e[15]||(e[15]=t=>l.skillIds=t)},{default:o(()=>[(i(!0),r(y,null,g(N.value,t=>(i(),f(E,{key:t.id,label:t.id,value:t.id},{default:o(()=>[d(b(t.name)+" ",1),n(ue,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:o(()=>[d("v"+b(t.version),1)]),_:2},1024)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))])]),_:1},8,["model"]),a("div",Be,[n(m,{onClick:e[16]||(e[16]=t=>s.$router.push("/agents"))},{default:o(()=>[...e[36]||(e[36]=[d("å–æ¶ˆ",-1)])]),_:1}),n(m,{type:"primary",loading:S.value,onClick:te},{default:o(()=>[...e[37]||(e[37]=[d(" ä¿å­˜ Agent ",-1)])]),_:1},8,["loading"])])]),a("div",Pe,[a("div",he,[a("div",qe,[a("div",{class:V(["agent-tab",{active:I.value==="__assist__"}]),onClick:e[17]||(e[17]=t=>x("__assist__"))},[...e[38]||(e[38]=[a("span",{class:"tab-icon"},"ğŸ¤–",-1),d(" é…ç½®åŠ©æ‰‹ ",-1)])],2),(i(!0),r(y,null,g(j.value,t=>(i(),r("div",{key:t.id,class:V(["agent-tab",{active:I.value===t.id}]),onClick:q=>x(t.id)},[a("div",{class:"tab-avatar",style:G({background:t.avatarColor||"#409eff"})},b(t.name.charAt(0)),5),d(" "+b(t.name)+" ",1),n(_,{class:"tab-close",onClick:ke(q=>ne(t.id),["stop"])},{default:o(()=>[n(z(ge))]),_:1},8,["onClick"])],10,Re))),128)),n(fe,{onCommand:oe,trigger:"click"},{dropdown:o(()=>[n(me,null,{default:o(()=>[(i(!0),r(y,null,g(B.value,t=>(i(),f(h,{key:t.id,command:t.id},{default:o(()=>[d(b(t.name),1)]),_:2},1032,["command"]))),128)),B.value.length===0?(i(),f(h,{key:0,disabled:""},{default:o(()=>[...e[40]||(e[40]=[d("æš‚æ— å…¶ä»– Agent",-1)])]),_:1})):L("",!0)]),_:1})]),default:o(()=>[a("div",Je,[n(_,null,{default:o(()=>[n(z(_e))]),_:1}),e[39]||(e[39]=d(" æ›´å¤š",-1))])]),_:1})])]),R(n(W,{"agent-id":le.value,context:se.value,scenario:"agent-creation",placeholder:"å‘Šè¯‰æˆ‘è¿™ä¸ª Agent è¦åšä»€ä¹ˆ...",examples:["æˆ‘éœ€è¦ä¸€ä¸ªç”µå•†å®¢æœ Agentï¼Œè´Ÿè´£è§£ç­”è®¢å•é—®é¢˜ï¼Œè¯­æ°”äº²åˆ‡","å¸®æˆ‘åˆ›å»ºä¸€ä¸ªä»£ç å®¡æŸ¥åŠ©æ‰‹ï¼Œä¸“æ³¨äº Python ä»£ç è§„èŒƒ","åˆ›å»ºä¸€ä¸ªæ¯å¤©æ—©ä¸Šå‘é€å¤©æ°”æŠ¥å‘Šçš„ Agent"],height:"100%",compact:!0,"show-thinking":!0,applyable:!0,onApply:ee},null,8,["agent-id","context"]),[[J,I.value==="__assist__"]]),(i(!0),r(y,null,g(j.value,t=>R((i(),f(W,{key:t.id,"agent-id":t.id,scenario:"general","welcome-message":`ä½ å¥½ï¼Œæˆ‘æ˜¯ **${t.name}**ï¼Œæœ‰ä»€ä¹ˆéœ€è¦å¸®å¿™çš„ï¼Ÿ`,height:"100%",compact:!0,"show-thinking":!0},null,8,["agent-id","welcome-message"])),[[J,I.value===t.id]])),128))])])}}}),Ze=Ve(Ke,[["__scopeId","data-v-fe1313cf"]]);export{Ze as default};
