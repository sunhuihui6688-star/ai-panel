import{d as z,c as L,a as t,w as l,b as a,r as o,e as s,u as M,o as k,f as I,t as y,g as B,h as w,E as _}from"./index-0gFKGKul.js";import{a as C}from"./index-BclxA8EE.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"login-wrapper"},S={class:"captcha-row"},Z={class:"captcha-question"},A=z({__name:"LoginView",setup(F){const V=M(),r=s(""),u=s(!1),p=s(0),d=s(0),n=s("");function i(){p.value=Math.floor(Math.random()*9)+1,d.value=Math.floor(Math.random()*9)+1,n.value=""}i();async function h(){const c=parseInt(n.value.trim(),10);if(isNaN(c)||c!==p.value+d.value){_.error("验证码错误，请重新计算"),i();return}u.value=!0;try{localStorage.setItem("aipanel_token",r.value),await C.get("/health"),_.success("登录成功"),V.push("/")}catch{_.error("令牌无效"),localStorage.removeItem("aipanel_token"),i()}finally{u.value=!1}}return(c,e)=>{const v=o("el-input"),m=o("el-form-item"),g=o("el-button"),x=o("el-form"),b=o("el-card");return k(),L("div",E,[t(b,{class:"login-card",shadow:"always"},{header:l(()=>[...e[2]||(e[2]=[a("div",{class:"login-header"},[a("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M12 2L21.5 7.5V16.5L12 22L2.5 16.5V7.5L12 2Z",fill:"#409EFF"}),a("text",{x:"12",y:"16.5","text-anchor":"middle",fill:"white","font-size":"10","font-weight":"800","font-family":"sans-serif"},"Z")]),a("h2",null,"引巢 · ZyHive"),a("p",{class:"subtitle"},"zyling AI 团队操作系统")],-1)])]),default:l(()=>[t(x,{onSubmit:I(h,["prevent"])},{default:l(()=>[t(m,{label:"访问令牌"},{default:l(()=>[t(v,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=f=>r.value=f),type:"password",placeholder:"输入访问令牌","show-password":"",size:"large"},null,8,["modelValue"])]),_:1}),t(m,{label:"验证码"},{default:l(()=>[a("div",S,[a("span",Z,y(p.value)+" + "+y(d.value)+" = ?",1),t(v,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=f=>n.value=f),placeholder:"结果",size:"large",style:{width:"100px",margin:"0 8px"},onKeyup:B(h,["enter"])},null,8,["modelValue"]),t(g,{size:"small",text:"",type:"primary",onClick:i},{default:l(()=>[...e[3]||(e[3]=[w("换一题",-1)])]),_:1})])]),_:1}),t(m,null,{default:l(()=>[t(g,{type:"primary","native-type":"submit",loading:u.value,size:"large",style:{width:"100%"}},{default:l(()=>[...e[4]||(e[4]=[w(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e[5]||(e[5]=a("p",{class:"login-copyright"},"© 2026 引巢 · ZyHive · zyling",-1))])}}}),q=N(A,[["__scopeId","data-v-6674252a"]]);export{q as default};
