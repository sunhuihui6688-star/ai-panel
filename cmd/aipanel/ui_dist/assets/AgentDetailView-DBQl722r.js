import{d as Zl,D as Sl,i as et,o as i,c as f,b as s,a as e,w as t,k as C,F as E,m as le,s as Ee,t as p,j as x,h as r,f as qe,n as Xe,p as Ke,G as Il,v as Qt,l as B,e as d,z as ml,E as y,H as pl,r as w,I as Zt,J as ea,g as Je,T as pt,K as la,x as Tl,L as ta,A as aa,B as Nl,M as na,N as Ql,O as sa,P as oa,Q as ia,R as ua}from"./index-l_nKincc.js";import{h as Cl,f as q,i as _t,b as $l,m as da,j as Vl,k as zl,g as Bl,r as mt,e as xe,l as yt}from"./index-B6SLQW8T.js";import{A as lt}from"./AiChat-CQA35oh2.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ra={class:"skill-studio"},ca={class:"studio-sidebar"},va={class:"sidebar-top"},fa={class:"sidebar-acts"},pa={class:"skill-list"},ma={key:0,class:"list-empty"},ya=["onClick"],ga={class:"sk-icon"},_a={key:0},wa={class:"sk-info"},ba={class:"sk-name"},ka={class:"sk-id"},ha={class:"sk-right"},xa={key:0,class:"sk-streaming-dot",title:"AI ÁîüÊàê‰∏≠‚Ä¶"},Ca={class:"studio-editor"},$a={key:0,class:"editor-empty"},Va={class:"editor-toolbar"},za={class:"editor-breadcrumb"},Ta={class:"crumb-name"},Sa={class:"toolbar-acts"},Ia={class:"editor-body"},La={class:"file-tree"},Aa={class:"tree-title"},Ua={class:"tree-item tree-dir"},Ma=["onClick"],Da={key:0,class:"tree-empty"},Fa={key:0,class:"file-editor"},Na={class:"file-editor-head"},Ba={style:{display:"flex","align-items":"center",gap:"10px"}},Ra={style:{"font-size":"12px",color:"#909399"}},Ea={class:"json-preview"},Ka={key:1,class:"file-editor"},Pa={class:"file-editor-head"},ja={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Wa={style:{"font-size":"11px",color:"#c0c4cc"}},Oa={key:2,class:"file-editor"},Ha={class:"file-editor-head"},Ya={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},qa={style:{"font-size":"11px",color:"#c0c4cc"}},Ja=["placeholder"],Xa={class:"studio-chat"},Ga={class:"chat-panel-head"},Qa={key:0,style:{"margin-left":"auto","font-size":"11px",color:"#c0c4cc"}},Za={key:0,style:{"margin-left":"6px",color:"#e6a23c"}},en={class:"chat-wrap"},ln=Zl({__name:"SkillStudio",props:{agentId:{}},setup(yl){const _e=yl,g=_e.agentId,A=d([]),we=d(!1),m=d(null),V=d("meta"),I=d({name:"",icon:"",category:"",description:"",version:"1.0.0",enabled:!0}),F=d(""),Ce=d(!1),$e=d(!1),Pe=d(!1),be=d(!1),de=d(!1),se=d([]),h=d(!1),N=d(""),O=d(!1),J=d(!1),De={};function re(_,c){c?De[_]=c:delete De[_]}function Ve(_){return _?De[_]:null}const oe=d(new Set);function pe(_,c){const U=new Set(oe.value);c?U.add(_):U.delete(_),oe.value=U}const L=d(new Set);Sl(m,async _=>{_&&(L.value.has(_.id)||(L.value.add(_.id),await pl(),await Ve(_.id)?.resumeSession?.(`skill-studio-${_.id}`)))},{flush:"post"});const Fe=ml(()=>{if(!m.value)return"‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÂ∏ÆÂä©Áî®Êà∑ËÆæËÆ°Âíå‰ºòÂåñ AI ÊäÄËÉΩÁöÑÁ≥ªÁªüÊèêÁ§∫ËØç„ÄÇ";const _=JSON.stringify({id:m.value.id,name:m.value.name,icon:m.value.icon||"",category:m.value.category||"",description:m.value.description||"",version:m.value.version||"1.0.0",enabled:m.value.enabled,source:"local",installedAt:""},null,2);return`‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÊ≠£Âú®Â∏ÆÂä©Áî®Êà∑ÈÖçÁΩÆÊäÄËÉΩÔºàID: ${m.value.id}Ôºâ„ÄÇ

## ‚ö†Ô∏è Êñá‰ª∂Ë∑ØÂæÑËßÑÂàôÔºàÂøÖÈ°ªÈÅµÂÆàÔºâ
ÊâÄÊúâÊñá‰ª∂ÂøÖÈ°ªÂú® skills/${m.value.id}/ ÁõÆÂΩï‰∏ãÔºö
- ‚úÖ skills/${m.value.id}/SKILL.md
- ‚úÖ skills/${m.value.id}/skill.json
- ‚úÖ skills/${m.value.id}/tools/helper.py
- ‚ùå ‰ªª‰ΩïÂÖ∂‰ªñË∑ØÂæÑ

## ‚ö†Ô∏è ÂàõÂª∫ÊàñÊõ¥Êñ∞ÊäÄËÉΩÊó∂ÔºåÂøÖÈ°ªÂêåÊó∂ÂÜô‰∏§‰∏™Êñá‰ª∂

### 1. skills/${m.value.id}/skill.jsonÔºàÊäÄËÉΩÂÖÉÊï∞ÊçÆÔºâ
Ê†ºÂºèÂ¶Ç‰∏ãÔºå‰øÆÊîπ name/icon/category/description Â≠óÊÆµÔºö
\`\`\`json
${_}
\`\`\`

### 2. skills/${m.value.id}/SKILL.mdÔºàÁ≥ªÁªüÊèêÁ§∫ËØçÔºâ
ÂΩìÂâçÂÜÖÂÆπÔºö
\`\`\`markdown
${F.value||"ÔºàÁ©∫Ôºâ"}
\`\`\`

## ‰Ω†ÂèØ‰ª•Â∏ÆÂä©Ôºö
- ÂàõÂª∫/‰ºòÂåñÊäÄËÉΩÔºöÂêåÊó∂ÂÜô skill.jsonÔºàÂêçÁß∞„ÄÅÂàÜÁ±ª„ÄÅÊèèËø∞ÔºâÂíå SKILL.mdÔºàÊèêÁ§∫ËØçÔºâ
- Âú®ÊäÄËÉΩÁõÆÂΩï‰∏ãÂàõÂª∫Â∑•ÂÖ∑Êñá‰ª∂ÔºàPython Á≠âÔºâ
- ÊµãËØïÊäÄËÉΩÊïàÊûúÔºàÁõ¥Êé•ÂØπËØùÂç≥ÂèØÊµãËØïÔºâ`}),G=ml(()=>m.value?de.value?`Êñ∞ÊäÄËÉΩÂ∑≤ÂàõÂª∫ÔºàID: ${m.value.id}Ôºâ„ÄÇÂëäËØâÊàë‰Ω†ÊÉ≥Ë¶Å‰ªÄ‰πàÂäüËÉΩÔºåÊàëÊù•Â∏Æ‰Ω†ÁîüÊàêÂÆåÊï¥ÁöÑ SKILL.md ÂÜÖÂÆπÔºåÁîüÊàêÂêéÁõ¥Êé•ÁÇπ‰øùÂ≠òÂç≥ÂèØ„ÄÇ`:`ÂΩìÂâçÁºñËæë„Äå${m.value.name}„Äç„ÄÇ‰Ω†ÂèØ‰ª•ËÆ©Êàë‰ºòÂåñ SKILL.md„ÄÅÊµãËØïÊïàÊûúÔºåÊàñËÄÖÁõ¥Êé•ÂØπËØù‰ΩìÈ™åÂΩìÂâçÊäÄËÉΩ„ÄÇ`:"ÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂêéÔºåÊàëÂèØ‰ª•Â∏Æ‰Ω†‰ºòÂåñÈÖçÁΩÆ„ÄÅÂÜô SKILL.md„ÄÅÊµãËØïÊïàÊûú„ÄÇ"),je=ml(()=>m.value?de.value?[]:[`Â∏ÆÊàë‰ºòÂåñ„Äå${m.value.name}„ÄçÁöÑ SKILL.md`,"Ëøô‰∏™ÊäÄËÉΩÊÄé‰πàÂÜôÊïàÊûúÊõ¥Â•ΩÔºü","Áî®‰∏≠ÊñáÂõûÁ≠î‰∏ÄÈÅìÂéÜÂè≤È¢òÔºåÊµãËØïÂΩìÂâçÊäÄËÉΩÊïàÊûú"]:["Â∏ÆÊàëËÆæËÆ°‰∏Ä‰∏™‰ª£Á†ÅÂÆ°Êü•ÊäÄËÉΩ","Â∏ÆÊàëÂÜô‰∏Ä‰∏™ÁøªËØëÂä©ÊâãÁöÑ SKILL.md"]);async function H(){we.value=!0;try{const _=await Cl.list(g);if(A.value=_.data||[],m.value){const c=A.value.find(U=>U.id===m.value.id);c&&(m.value=c,ce(c))}}catch{}finally{we.value=!1}}function ce(_){I.value={name:_.name,icon:_.icon||"",category:_.category||"",description:_.description||"",version:_.version||"1.0.0",enabled:_.enabled}}async function me(_){m.value?.id!==_.id&&(m.value=_,ce(_),V.value="meta",$e.value=!1,F.value="",de.value=!1,Te(),ve())}async function ze(){m.value&&V.value!=="prompt"&&(V.value="prompt",F.value||await ve())}async function tl(_,c,U){const z=await q.read(g,_),Y=Array.isArray(z.data)?z.data:[],ye=[];for(const Q of Y){if(U===0&&Q.name==="skill.json")continue;const te=c?`${c}/${Q.name}`:Q.name;if(ye.push({name:Q.name,path:te,isDir:Q.isDir,depth:U}),Q.isDir){const ge=await tl(`skills/${m.value.id}/${te}`,te,U+1);ye.push(...ge)}}return ye}async function Te(){if(m.value){h.value=!0;try{se.value=await tl(`skills/${m.value.id}/`,"",0)}catch{se.value=[{name:"SKILL.md",path:"SKILL.md",isDir:!1,depth:0}]}finally{h.value=!1}}}async function al(_,c){if(!c){if(_==="SKILL.md"){await ze();return}V.value=_,O.value=!1,await We()}}async function We(){if(!(!m.value||!V.value||V.value==="meta"||V.value==="prompt")){J.value=!0;try{const _=await q.read(g,`skills/${m.value.id}/${V.value}`);N.value=_.data?.content||"",O.value=!1}catch{N.value=""}finally{J.value=!1}}}async function K(_){if(m.value)try{await q.delete(g,`skills/${m.value.id}/${_}`),V.value===_&&(V.value="prompt"),await Te(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function ie(){if(m.value){Pe.value=!0;try{V.value==="meta"||V.value==="prompt"?(await Cl.update(_e.agentId,m.value.id,{name:I.value.name,icon:I.value.icon,category:I.value.category,description:I.value.description,enabled:I.value.enabled}),(V.value==="prompt"||F.value)&&(await q.write(g,`skills/${m.value.id}/SKILL.md`,F.value),$e.value=!1),await H()):(await q.write(g,`skills/${m.value.id}/${V.value}`,N.value),O.value=!1),y.success("‰øùÂ≠òÊàêÂäü")}catch(_){y.error(_.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Pe.value=!1}}}async function Oe(_,c){try{await Cl.update(_e.agentId,_.id,{enabled:c}),await H()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function gl(){if(m.value)try{await Cl.remove(_e.agentId,m.value.id),y.success("Â∑≤Âà†Èô§"),m.value=null,await H()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ge(){if(be.value)return;be.value=!0;const _="skill_"+Date.now().toString(36);try{await Cl.create(_e.agentId,{meta:{id:_,name:"Êñ∞ÊäÄËÉΩ",icon:"",category:"",description:"",version:"1.0.0",enabled:!1,source:"local",installedAt:""},promptContent:""}),await H();const c=A.value.find(U=>U.id===_);c&&(await me(c),V.value="prompt",F.value="",de.value=!0,await pl(),L.value.has(_)||(L.value.add(_),await Ve(_)?.resumeSession?.(`skill-studio-${_}`)))}catch(c){y.error(c.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}finally{be.value=!1}}async function nl(_,c){_===m.value?.id&&(de.value=!1),await H(),_===m.value?.id&&(await Promise.all([Te(),ve()]),V.value!=="meta"&&V.value!=="prompt"&&await We())}async function ve(){if(m.value){Ce.value=!0;try{const _=await q.read(g,`skills/${m.value.id}/SKILL.md`);F.value=_.data?.content||"",$e.value=!1}catch{F.value=""}finally{Ce.value=!1}}}async function Se(){if(!m.value)return;F.value||await ze();const _=`ËØ∑Áî®„Äå${m.value.name}„ÄçÊäÄËÉΩÊïàÊûúÂõûÂ§çÔºö‰Ω†Â•ΩÔºåËØ∑‰ªãÁªç‰∏Ä‰∏ã‰Ω†ÁöÑÂäüËÉΩ„ÄÇ`;Ve(m.value?.id)?.fillInput?.(_),y.info("ÊµãËØïÊ∂àÊÅØÂ∑≤Â°´ÂÖ•Âè≥‰æßËÅäÂ§©Ê°ÜÔºåÁÇπÂáªÂèëÈÄÅÂç≥ÂèØÊµãËØï")}return et(H),(_,c)=>{const U=w("Refresh"),z=w("el-icon"),Y=w("el-button"),ye=w("Plus"),Q=w("Tools"),te=w("el-tag"),ge=w("el-switch"),Ne=w("Setting"),X=w("FolderOpened"),Qe=w("VideoPlay"),P=w("DocumentChecked"),sl=w("Delete"),ol=w("el-popconfirm"),Ze=w("Folder"),Be=w("Document"),Ie=w("el-input"),fe=w("el-form-item"),ke=w("el-col"),el=w("el-row"),il=w("el-collapse-item"),ul=w("el-collapse"),Re=w("el-form"),u=w("ChatLineRound");return i(),f("div",ra,[s("div",ca,[s("div",va,[c[13]||(c[13]=s("span",{class:"sidebar-title"},"ÊäÄËÉΩÂ∫ì",-1)),s("div",fa,[e(Y,{size:"small",loading:we.value,circle:"",onClick:H},{default:t(()=>[e(z,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"]),e(Y,{size:"small",type:"primary",circle:"",loading:be.value,onClick:Ge},{default:t(()=>[e(z,null,{default:t(()=>[e(ye)]),_:1})]),_:1},8,["loading"])])]),s("div",pa,[!we.value&&A.value.length===0?(i(),f("div",ma,"ÊöÇÊó†ÊäÄËÉΩ")):C("",!0),(i(!0),f(E,null,le(A.value,o=>(i(),f("div",{key:o.id,class:Ee(["skill-item",{active:m.value?.id===o.id}]),onClick:$=>me(o)},[s("span",ga,[o.icon?(i(),f("span",_a,p(o.icon),1)):(i(),x(z,{key:1},{default:t(()=>[e(Q)]),_:1}))]),s("div",wa,[s("div",ba,p(o.name),1),s("div",ka,p(o.id),1)]),s("div",ha,[oe.value.has(o.id)?(i(),f("span",xa)):o.category?(i(),x(te,{key:1,size:"small",effect:"plain",style:{"margin-right":"6px","font-size":"11px"}},{default:t(()=>[r(p(o.category),1)]),_:2},1024)):C("",!0),e(ge,{"model-value":o.enabled,size:"small",onChange:$=>Oe(o,$),onClick:c[0]||(c[0]=qe(()=>{},["stop"]))},null,8,["model-value","onChange"])])],10,ya))),128))])]),s("div",Ca,[m.value?(i(),f(E,{key:1},[s("div",Va,[s("div",za,[e(z,{style:{color:"#909399"}},{default:t(()=>[e(X)]),_:1}),c[16]||(c[16]=s("span",{class:"crumb-sep"},"skills /",-1)),s("span",Ta,p(m.value.id),1)]),s("div",Sa,[e(Y,{size:"small",onClick:Se},{default:t(()=>[e(z,null,{default:t(()=>[e(Qe)]),_:1}),c[17]||(c[17]=r(" ÊµãËØï ",-1))]),_:1}),e(Y,{size:"small",type:"primary",loading:Pe.value,onClick:ie},{default:t(()=>[e(z,null,{default:t(()=>[e(P)]),_:1}),c[18]||(c[18]=r(" ‰øùÂ≠ò ",-1))]),_:1},8,["loading"]),e(ol,{title:"Á°ÆËÆ§Âà†Èô§ËØ•ÊäÄËÉΩÔºü",onConfirm:gl},{reference:t(()=>[e(Y,{size:"small",type:"danger",plain:""},{default:t(()=>[e(z,null,{default:t(()=>[e(sl)]),_:1})]),_:1})]),_:1})])]),s("div",Ia,[s("div",La,[s("div",Aa,[c[19]||(c[19]=r(" ÁõÆÂΩï ",-1)),e(Y,{link:"",size:"small",loading:h.value,onClick:Te,style:{"margin-left":"auto",padding:"0"}},{default:t(()=>[e(z,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"])]),s("div",Ua,[e(z,null,{default:t(()=>[e(Ze)]),_:1}),s("span",null,p(m.value.id)+"/",1)]),s("div",{class:Ee(["tree-item",{"tree-active":V.value==="meta"}]),onClick:c[1]||(c[1]=o=>V.value="meta")},[e(z,null,{default:t(()=>[e(Be)]),_:1}),c[20]||(c[20]=s("span",null,"skill.json",-1))],2),(i(!0),f(E,null,le(se.value,o=>(i(),f("div",{key:o.path,class:Ee(["tree-item",{"tree-active":V.value===(o.path==="SKILL.md"?"prompt":o.path),"tree-dir-row":o.isDir}]),style:Xe({paddingLeft:`${12+o.depth*12}px`}),onClick:$=>al(o.path,o.isDir)},[o.isDir?(i(),x(z,{key:0,style:{color:"#e6a23c"}},{default:t(()=>[e(Ze)]),_:1})):(i(),x(z,{key:1},{default:t(()=>[e(Be)]),_:1})),s("span",null,p(o.name),1),o.path==="SKILL.md"&&m.value.enabled?(i(),x(te,{key:2,size:"small",type:"success",effect:"plain",style:{"margin-left":"4px","font-size":"10px"}},{default:t(()=>[...c[21]||(c[21]=[r("Ê≥®ÂÖ•‰∏≠",-1)])]),_:1})):C("",!0)],14,Ma))),128)),!h.value&&se.value.length===0?(i(),f("div",Da,"Á©∫ÁõÆÂΩï")):C("",!0)]),V.value==="meta"?(i(),f("div",Fa,[s("div",Na,[e(z,null,{default:t(()=>[e(Be)]),_:1}),c[22]||(c[22]=r(" skill.json ",-1)),c[23]||(c[23]=s("span",{class:"file-hint"},"ÊäÄËÉΩÂÖÉ‰ø°ÊÅØÔºåÂΩ±ÂìçÂàóË°®Â±ïÁ§∫Âíå runner Ë°å‰∏∫",-1))]),e(Re,{model:I.value,"label-width":"72px",size:"small",style:{padding:"16px 20px"}},{default:t(()=>[e(fe,{label:"ÊäÄËÉΩ ID"},{default:t(()=>[e(Ie,{value:m.value.id,disabled:""},null,8,["value"])]),_:1}),e(el,{gutter:12},{default:t(()=>[e(ke,{span:14},{default:t(()=>[e(fe,{label:"ÂêçÁß∞"},{default:t(()=>[e(Ie,{modelValue:I.value.name,"onUpdate:modelValue":c[2]||(c[2]=o=>I.value.name=o),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1})]),_:1}),e(ke,{span:10},{default:t(()=>[e(fe,{label:"ÂõæÊ†á"},{default:t(()=>[e(Ie,{modelValue:I.value.icon,"onUpdate:modelValue":c[3]||(c[3]=o=>I.value.icon=o),placeholder:"emoji"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(el,{gutter:12},{default:t(()=>[e(ke,{span:14},{default:t(()=>[e(fe,{label:"ÂàÜÁ±ª"},{default:t(()=>[e(Ie,{modelValue:I.value.category,"onUpdate:modelValue":c[4]||(c[4]=o=>I.value.category=o),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1})]),_:1}),e(ke,{span:10},{default:t(()=>[e(fe,{label:"ÁâàÊú¨"},{default:t(()=>[e(Ie,{modelValue:I.value.version,"onUpdate:modelValue":c[5]||(c[5]=o=>I.value.version=o),placeholder:"1.0.0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(fe,{label:"ÊèèËø∞"},{default:t(()=>[e(Ie,{modelValue:I.value.description,"onUpdate:modelValue":c[6]||(c[6]=o=>I.value.description=o),type:"textarea",rows:2,placeholder:"ÁÆÄË¶ÅÊèèËø∞ÊäÄËÉΩÂäüËÉΩ"},null,8,["modelValue"])]),_:1}),e(fe,{label:"Áä∂ÊÄÅ"},{default:t(()=>[s("div",Ba,[e(ge,{modelValue:I.value.enabled,"onUpdate:modelValue":c[7]||(c[7]=o=>I.value.enabled=o)},null,8,["modelValue"]),s("span",Ra,p(I.value.enabled?"Â∑≤ÂêØÁî®ÔºåSKILL.md Â∞ÜÊ≥®ÂÖ•Á≥ªÁªüÊèêÁ§∫":"Â∑≤Á¶ÅÁî®"),1)])]),_:1}),e(ul,{style:{"margin-top":"8px"}},{default:t(()=>[e(il,{title:"Êü•Áúã skill.json ÂéüÊñá"},{default:t(()=>[s("pre",Ea,p(JSON.stringify({id:m.value.id,...I.value},null,2)),1)]),_:1})]),_:1})]),_:1},8,["model"])])):V.value==="prompt"?(i(),f("div",Ka,[s("div",Pa,[e(z,null,{default:t(()=>[e(Be)]),_:1}),c[25]||(c[25]=r(" SKILL.md ",-1)),c[26]||(c[26]=s("span",{class:"file-hint"},"Ê≥®ÂÖ•Âà∞ AI System Prompt ÁöÑÊåá‰ª§ÂÜÖÂÆπ",-1)),s("div",ja,[$e.value?(i(),x(te,{key:0,type:"warning",size:"small"},{default:t(()=>[...c[24]||(c[24]=[r("Êú™‰øùÂ≠ò",-1)])]),_:1})):C("",!0),s("span",Wa,p(F.value.length)+" Â≠óÁ¨¶",1),e(Y,{size:"small",circle:"",loading:Ce.value,onClick:ve,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e(z,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"])])]),Ke(s("textarea",{"onUpdate:modelValue":c[8]||(c[8]=o=>F.value=o),class:"code-textarea",spellcheck:"false",placeholder:`# ÊäÄËÉΩÂêçÁß∞

## ÂäüËÉΩËØ¥Êòé
ÊèèËø∞ËØ•ÊäÄËÉΩÁöÑÁî®ÈÄî‚Ä¶

## Ë°å‰∏∫ËßÑËåÉ
- ËßÑËåÉ 1
- ËßÑËåÉ 2`,onInput:c[9]||(c[9]=o=>$e.value=!0)},null,544),[[Il,F.value]])])):(i(),f("div",Oa,[s("div",Ha,[e(z,null,{default:t(()=>[e(Be)]),_:1}),r(" "+p(V.value)+" ",1),s("div",Ya,[O.value?(i(),x(te,{key:0,type:"warning",size:"small"},{default:t(()=>[...c[27]||(c[27]=[r("Êú™‰øùÂ≠ò",-1)])]),_:1})):C("",!0),s("span",qa,p(N.value.length)+" Â≠óÁ¨¶",1),e(Y,{size:"small",circle:"",loading:J.value,onClick:We,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e(z,null,{default:t(()=>[e(U)]),_:1})]),_:1},8,["loading"]),e(ol,{title:"Á°ÆËÆ§Âà†Èô§ËØ•Êñá‰ª∂Ôºü",onConfirm:c[10]||(c[10]=o=>K(V.value))},{reference:t(()=>[e(Y,{size:"small",circle:"",type:"danger",plain:""},{default:t(()=>[e(z,null,{default:t(()=>[e(sl)]),_:1})]),_:1})]),_:1})])]),Ke(s("textarea",{"onUpdate:modelValue":c[11]||(c[11]=o=>N.value=o),class:"code-textarea",spellcheck:"false",placeholder:`ÁºñËæë ${V.value} ‚Ä¶`,onInput:c[12]||(c[12]=o=>O.value=!0)},null,40,Ja),[[Il,N.value]])]))])],64)):(i(),f("div",$a,[e(z,{size:"48",color:"#c0c4cc"},{default:t(()=>[e(Ne)]),_:1}),c[15]||(c[15]=s("p",null,"‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂºÄÂßãÁºñËæë",-1)),e(Y,{type:"primary",onClick:Ge},{default:t(()=>[e(z,null,{default:t(()=>[e(ye)]),_:1}),c[14]||(c[14]=r(" Êñ∞Âª∫ÊäÄËÉΩ",-1))]),_:1})]))]),s("div",Xa,[s("div",Ga,[e(z,null,{default:t(()=>[e(u)]),_:1}),c[28]||(c[28]=r(" AI Âçè‰ΩúÈÖçÁΩÆ ",-1)),m.value?(i(),f("span",Qa,[r(" ÂΩìÂâç: "+p(m.value.name)+" ",1),oe.value.size>1?(i(),f("span",Za," ("+p(oe.value.size)+" ‰∏™Âπ∂Ë°åÁîüÊàê‰∏≠) ",1)):C("",!0)])):C("",!0)]),s("div",en,[(i(!0),f(E,null,le(A.value,o=>Ke((i(),x(lt,{key:o.id,ref_for:!0,ref:$=>re(o.id,$),"agent-id":B(g),context:m.value?.id===o.id?Fe.value:"",scenario:"skill-studio","skill-id":o.id,"welcome-message":m.value?.id===o.id?G.value:"",examples:m.value?.id===o.id?je.value:[],compact:"",onResponse:$=>nl(o.id),onStreamingChange:$=>pe(o.id,$)},null,8,["agent-id","context","skill-id","welcome-message","examples","onResponse","onStreamingChange"])),[[Qt,m.value?.id===o.id]])),128))])])])}}}),tn=tt(ln,[["__scopeId","data-v-b0dbe659"]]),an={class:"wc-layout"},nn={class:"wc-panel-header"},sn={class:"wc-header-actions"},on={class:"wc-panel-body file-tree-body"},un={key:0,class:"wc-loading"},dn={key:1,class:"wc-empty"},rn={class:"tree-icon-wrap"},cn={key:0,class:"icon-folder-open",viewBox:"0 0 16 16"},vn={key:1,class:"icon-folder",viewBox:"0 0 16 16"},fn=["onKeyup","onBlur"],pn={key:1,class:"tree-node-name"},mn=["onClick"],yn=["onClick"],gn={class:"wc-panel-header"},_n={key:0,class:"wc-panel-title file-path-title"},wn={class:"file-ext-badge"},bn=["title"],kn={key:1,class:"wc-panel-title muted"},hn={class:"wc-header-actions"},xn={class:"wc-panel-body editor-body"},Cn={key:0,class:"wc-empty-editor"},$n={key:1,class:"wc-binary-notice"},Vn={class:"editor-wrap"},zn=["onKeydown"],Tn={class:"editor-statusbar"},Sn={class:"stat-chip"},In={key:0},Ln={key:1,class:"status-dirty"},An={key:2,class:"status-saved"},Un={class:"wc-panel wc-panel-right"},Mn={class:"session-bar"},Dn={class:"session-bar-left"},Fn={class:"session-opt"},Nn={class:"session-opt-title"},Bn={class:"session-opt-time"},Rn={class:"chat-area"},En={class:"wc-modal"},Kn={class:"wc-modal-footer"},gt=140,Pn=380,jn=900,Wn=Zl({__name:"WorkspaceChatLayout",props:{agentId:{}},emits:["session-change"],setup(yl,{emit:_e}){const g=yl,A=_e,we={label:"name",children:"children",isLeaf:u=>!u.isDir},m=d(200),V=d(460),I=d(),F=d(),Ce=d(),$e=d(),Pe=d(),be=d(),de=d([]),se=d(!1),h=d(""),N=d(""),O=d(!1),J=d(!1),De=d(null),re=d(!1),Ve=d(""),oe=d(""),pe=d(""),L=d({visible:!1,x:0,y:0,node:null}),Fe=d([]),G=d();let je=0,H=0,ce=null;const me=d(!1),ze=d(!1);function tl(u){al(u,"left")}function Te(u){al(u,"right")}function al(u,o){je=u.clientX,H=o==="left"?m.value:V.value,ce=o,o==="left"?me.value=!0:ze.value=!0,window.addEventListener("mousemove",We),window.addEventListener("mouseup",K),document.body.style.cssText+="cursor:col-resize;user-select:none;"}function We(u){const o=u.clientX-je;ce==="left"?m.value=Math.max(gt,Math.min(Pn,H+o)):ce==="right"&&(V.value=Math.max(gt,Math.min(jn,H+o)))}function K(){me.value=!1,ze.value=!1,ce=null,window.removeEventListener("mousemove",We),window.removeEventListener("mouseup",K),document.body.style.cursor="",document.body.style.userSelect=""}async function ie(){se.value=!0;try{const u=await q.readTree(g.agentId);de.value=Oe(u.data)}catch{de.value=[]}finally{se.value=!1}}function Oe(u){return(Array.isArray(u)?u:u?.children??[]).map($=>({name:$.name,path:$.path??$.name,isDir:!!($.isDir??$.type==="dir"),size:$.size,children:$.children?.length?Oe($.children):void 0})).sort(($,ae)=>+ae.isDir-+$.isDir||$.name.localeCompare(ae.name))}function gl(u){L.value.visible=!1,u.isDir||nl(u.path)}function Ge(u,o){u.preventDefault(),L.value={visible:!0,x:u.clientX,y:u.clientY,node:o}}async function nl(u){O.value&&h.value&&!await Tl.confirm("ÊúâÊú™‰øùÂ≠òÊõ¥ÊîπÔºåÁªßÁª≠ÂàáÊç¢Ôºü","ÊèêÁ§∫",{confirmButtonText:"ÁªßÁª≠",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)||(h.value=u,O.value=!1,pl(()=>I.value?.setCurrentKey(u)),await ve())}async function ve(){if(h.value)try{const o=(await q.read(g.agentId,h.value)).data;J.value=o.binary??o.encoding==="base64",J.value||(N.value=o.content??"",De.value=o.size!=null?{size:o.size,modTime:o.modTime}:null),O.value=!1}catch{N.value=""}}async function Se(){if(!(!h.value||J.value))try{await q.write(g.agentId,h.value,N.value),O.value=!1,y.success("Â∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}}async function _(){if(!(!h.value||!await Tl.confirm(`Âà†Èô§ ${h.value}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await q.delete(g.agentId,h.value),h.value="",N.value="",O.value=!1,await ie(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function c(){const u=Ve.value.trim();if(u)try{await q.write(g.agentId,u,""),re.value=!1,Ve.value="",await ie(),await nl(u)}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function U(u){if(await Tl.confirm(`Âà†Èô§ ${u.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1))try{await q.delete(g.agentId,u.path),h.value===u.path&&(h.value="",N.value=""),await ie(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function z(u){oe.value=u.path,pe.value=u.name,pl(()=>Pe.value?.focus())}async function Y(u){if(!oe.value||pe.value===u.name){oe.value="";return}const $=(u.path.includes("/")?u.path.substring(0,u.path.lastIndexOf("/")+1):"")+pe.value;try{const ae=await q.read(g.agentId,u.path);await q.write(g.agentId,$,ae.data?.content??""),await q.delete(g.agentId,u.path),h.value===u.path&&(h.value=$),await ie(),y.success("Â∑≤ÈáçÂëΩÂêç")}catch{y.error("ÈáçÂëΩÂêçÂ§±Ë¥•")}oe.value=""}function ye(){L.value.visible=!1,re.value=!0}function Q(){L.value.visible=!1,re.value=!0}function te(){const u=L.value.node;L.value.visible=!1,u&&z(u)}async function ge(){const u=L.value.node;if(L.value.visible=!1,!(!u||!await Tl.confirm(`Âà†Èô§ ${u.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await q.delete(g.agentId,u.path),h.value===u.path&&(h.value="",N.value=""),await ie(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function Ne(){L.value.visible&&(L.value.visible=!1)}async function X(){try{const u=await _t.list({agentId:g.agentId,limit:50});Fe.value=(u.data?.sessions||[]).sort((o,$)=>$.lastAt-o.lastAt)}catch{Fe.value=[]}}function Qe(u){G.value=u||void 0,u?be.value?.resumeSession(u):be.value?.startNewSession()}function P(){G.value=void 0,be.value?.startNewSession()}function sl(u){G.value=u,A("session-change",u),X()}async function ol(){await ie(),h.value&&(await new Promise(u=>setTimeout(u,300)),await ve())}const Ze=ml(()=>(N.value.match(/\n/g)??[]).length+1),Be=ml(()=>h.value?`Áî®Êà∑ÂΩìÂâçÊâìÂºÄÁöÑÊñá‰ª∂: ${h.value}`:void 0);function Ie(u){const o=F.value,$=o.selectionStart;N.value=o.value.slice(0,$)+"  "+o.value.slice(o.selectionEnd),pl(()=>{o.selectionStart=o.selectionEnd=$+2})}function fe(){Ce.value&&F.value&&(Ce.value.scrollTop=F.value.scrollTop)}Sl(re,async u=>{u&&(await pl(),$e.value?.focus())});function ke(u){const o=u.split(".").pop()?.toLowerCase();return o?`.${o}`:"txt"}function el(u){return u?u<1024?`${u}B`:u<1048576?`${(u/1024).toFixed(0)}K`:`${(u/1048576).toFixed(1)}M`:""}function il(u){return el(u)??""}function ul(u){const o=u.split(".").pop()?.toLowerCase()??"";return{ts:"fc-blue",tsx:"fc-blue",js:"fc-yellow",jsx:"fc-yellow",vue:"fc-green",py:"fc-blue",go:"fc-teal",rs:"fc-orange",md:"fc-gray",json:"fc-yellow",yaml:"fc-red",yml:"fc-red",toml:"fc-gray",html:"fc-orange",css:"fc-blue",scss:"fc-pink",sh:"fc-green",bash:"fc-green",sql:"fc-orange",png:"fc-purple",jpg:"fc-purple",jpeg:"fc-purple",gif:"fc-purple",svg:"fc-purple",webp:"fc-purple",env:"fc-yellow",gitignore:"fc-gray",dockerfile:"fc-teal"}[o]??"fc-default"}function Re(u){if(!u)return"";const o=new Date(u),ae=Date.now()-u;return ae<6e4?"ÂàöÂàö":ae<36e5?`${Math.floor(ae/6e4)}ÂàÜÈíüÂâç`:ae<864e5?`${Math.floor(ae/36e5)}Â∞èÊó∂Ââç`:o.toLocaleDateString()}return et(()=>{ie(),X(),document.addEventListener("click",Ne)}),Zt(()=>{K(),document.removeEventListener("click",Ne)}),(u,o)=>{const $=w("el-tooltip"),ae=w("el-icon"),Ll=w("el-tree"),he=w("el-tag"),_l=w("el-option"),He=w("el-select");return i(),f("div",an,[s("div",{class:"wc-panel wc-panel-left",style:Xe({width:m.value+"px"})},[s("div",nn,[o[12]||(o[12]=s("span",{class:"wc-panel-title"},"üìÅ Â∑•‰ΩúÂå∫Êñá‰ª∂",-1)),s("div",sn,[e($,{content:"Êñ∞Âª∫Êñá‰ª∂",placement:"top","show-after":500},{default:t(()=>[s("button",{class:"wc-icon-btn",onClick:o[0]||(o[0]=T=>re.value=!0)},"Ôºã")]),_:1}),e($,{content:"Âà∑Êñ∞",placement:"top","show-after":500},{default:t(()=>[s("button",{class:"wc-icon-btn",onClick:ie},"‚Ü∫")]),_:1})])]),s("div",on,[se.value?(i(),f("div",un,[e(ae,{class:"rotating"},{default:t(()=>[e(B(ea))]),_:1}),o[13]||(o[13]=r(" Âä†ËΩΩ‰∏≠‚Ä¶ ",-1))])):de.value.length?(i(),x(Ll,{key:2,ref_key:"treeRef",ref:I,data:de.value,props:we,"highlight-current":!0,"expand-on-click-node":!0,"default-expand-all":!1,"node-key":"path",class:"wc-file-tree",onNodeClick:gl,onNodeContextmenu:Ge},{default:t(({node:T,data:ne})=>[s("span",{class:Ee(["tree-node",{active:ne.path===h.value}])},[s("span",rn,[ne.isDir&&T.expanded?(i(),f("svg",cn,[...o[14]||(o[14]=[s("path",{d:"M1.5 3A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H7.914a.5.5 0 0 1-.354-.146L6.146 2.94A1.5 1.5 0 0 0 5.086 2.5H1.5z"},null,-1)])])):ne.isDir?(i(),f("svg",vn,[...o[15]||(o[15]=[s("path",{d:"M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31z"},null,-1)])])):(i(),f("svg",{key:2,class:Ee(["icon-file",ul(ne.name)]),viewBox:"0 0 16 16"},[...o[16]||(o[16]=[s("path",{"fill-rule":"evenodd",d:"M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3z"},null,-1)])],2))]),oe.value===ne.path?Ke((i(),f("input",{key:0,"onUpdate:modelValue":o[1]||(o[1]=Le=>pe.value=Le),class:"tree-rename-input",onKeyup:[Je(Le=>Y(ne),["enter"]),o[2]||(o[2]=Je(Le=>oe.value="",["escape"]))],onBlur:Le=>Y(ne),onClick:o[3]||(o[3]=qe(()=>{},["stop"])),ref_key:"renameInputRef",ref:Pe},null,40,fn)),[[Il,pe.value]]):(i(),f("span",pn,p(ne.name),1)),s("span",{class:"tree-node-actions",onClick:o[4]||(o[4]=qe(()=>{},["stop"]))},[s("button",{class:"tree-act-btn",title:"ÈáçÂëΩÂêç",onClick:Le=>z(ne)},[...o[17]||(o[17]=[s("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[s("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"})],-1)])],8,mn),s("button",{class:"tree-act-btn danger",title:"Âà†Èô§",onClick:Le=>U(ne)},[...o[18]||(o[18]=[s("svg",{viewBox:"0 0 16 16",width:"11",height:"11"},[s("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),s("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1)])],8,yn)])],2)]),_:1},8,["data"])):(i(),f("div",dn,"Â∑•‰ΩúÂå∫‰∏∫Á©∫"))]),(i(),x(pt,{to:"body"},[L.value.visible?(i(),f("div",{key:0,class:"ctx-menu",style:Xe({left:L.value.x+"px",top:L.value.y+"px"}),onMouseleave:o[5]||(o[5]=T=>L.value.visible=!1)},[s("div",{class:"ctx-item",onClick:ye},"üìÑ Êñ∞Âª∫Êñá‰ª∂"),s("div",{class:"ctx-item",onClick:Q},"üìÅ Êñ∞Âª∫Êñá‰ª∂Â§π"),L.value.node&&!L.value.node.isDir?(i(),f("div",{key:0,class:"ctx-item",onClick:te},"‚úé ÈáçÂëΩÂêç")):C("",!0),o[19]||(o[19]=s("div",{class:"ctx-divider"},null,-1)),s("div",{class:"ctx-item danger",onClick:ge},"‚úï Âà†Èô§")],36)):C("",!0)]))],4),s("div",{class:Ee(["wc-handle",{dragging:me.value}]),onMousedown:tl},[...o[20]||(o[20]=[s("div",{class:"wc-handle-bar"},null,-1)])],34),s("div",{class:"wc-panel wc-panel-mid",style:Xe({width:V.value+"px"})},[s("div",gn,[h.value?(i(),f("span",_n,[s("span",wn,p(ke(h.value)),1),s("span",{class:"file-path-text",title:h.value},p(h.value),9,bn)])):(i(),f("span",kn,"ÈÄâÊã©Êñá‰ª∂Êü•Áúã")),s("div",hn,[O.value?(i(),x(he,{key:0,size:"small",type:"warning",style:{"margin-right":"4px"}},{default:t(()=>[...o[21]||(o[21]=[r("Êú™‰øùÂ≠ò",-1)])]),_:1})):C("",!0),h.value&&O.value?(i(),f("button",{key:1,class:"wc-save-btn",onClick:Se},"‰øùÂ≠ò")):C("",!0),h.value?(i(),f("button",{key:2,class:"wc-icon-btn",title:"Âà∑Êñ∞",onClick:ve},"‚Ü∫")):C("",!0),h.value?(i(),f("button",{key:3,class:"wc-icon-btn danger",title:"Âà†Èô§Êñá‰ª∂",onClick:_},"‚úï")):C("",!0)])]),s("div",xn,[h.value?J.value?(i(),f("div",$n,"‚õî ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÊó†Ê≥ïÁºñËæë")):(i(),f(E,{key:2},[s("div",Vn,[s("div",{class:"line-numbers",ref_key:"lineNumRef",ref:Ce},[(i(!0),f(E,null,le(Ze.value,T=>(i(),f("div",{key:T,class:"line-num"},p(T),1))),128))],512),Ke(s("textarea",{ref_key:"editorRef",ref:F,"onUpdate:modelValue":o[6]||(o[6]=T=>N.value=T),class:"code-editor",spellcheck:"false",autocorrect:"off",autocapitalize:"off",onInput:o[7]||(o[7]=T=>{O.value=!0,fe()}),onScroll:fe,onKeydown:[Je(qe(Ie,["prevent"]),["tab"]),Je(qe(Se,["ctrl","prevent"]),["s"]),Je(qe(Se,["meta","prevent"]),["s"])]},null,40,zn),[[Il,N.value]])]),s("div",Tn,[s("span",Sn,p(ke(h.value)),1),s("span",null,p(Ze.value)+" Ë°å",1),s("span",null,p(N.value.length)+" Â≠óÁ¨¶",1),De.value?(i(),f("span",In,p(il(De.value.size)),1)):C("",!0),o[23]||(o[23]=s("span",{class:"stat-flex"},null,-1)),O.value?(i(),f("span",Ln,"‚óè Êú™‰øùÂ≠ò")):(i(),f("span",An,"‚úì Â∑≤‰øùÂ≠ò"))])],64)):(i(),f("div",Cn,[...o[22]||(o[22]=[s("div",{class:"wc-empty-icon"},"‚úèÔ∏è",-1),s("div",null,"‰ªéÂ∑¶‰æßÈÄâÊã©Êñá‰ª∂",-1),s("div",{class:"wc-empty-hint"},"ÊîØÊåÅÊãñÊãΩÊñá‰ª∂Âà∞Âè≥‰æßËÅäÂ§©Ê°Ü",-1)])]))])],4),s("div",{class:Ee(["wc-handle",{dragging:ze.value}]),onMousedown:Te},[...o[24]||(o[24]=[s("div",{class:"wc-handle-bar"},null,-1)])],34),s("div",Un,[s("div",Mn,[s("div",Dn,[e(ae,{style:{color:"#64748b","font-size":"13px"}},{default:t(()=>[e(B(la))]),_:1}),e(He,{modelValue:G.value,"onUpdate:modelValue":o[8]||(o[8]=T=>G.value=T),placeholder:"Êñ∞ÂØπËØù",size:"small",clearable:"",class:"session-select",onChange:Qe},{default:t(()=>[(i(!0),f(E,null,le(Fe.value,T=>(i(),x(_l,{key:T.id,value:T.id,label:T.title||"ÂØπËØù "+T.id.slice(0,8)},{default:t(()=>[s("div",Fn,[s("span",Nn,p(T.title||"Êó†Ê†áÈ¢ò"),1),s("span",Bn,p(Re(T.lastAt)),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),s("button",{class:"session-new-btn",title:"Êñ∞Âª∫ÂØπËØù",onClick:P},"Ôºã Êñ∞ÂØπËØù")]),s("div",Rn,[e(lt,{"agent-id":yl.agentId,"session-id":G.value||void 0,context:Be.value,height:"100%",ref_key:"chatRef",ref:be,onResponse:ol,onSessionChange:sl},null,8,["agent-id","session-id","context"])])]),(i(),x(pt,{to:"body"},[re.value?(i(),f("div",{key:0,class:"wc-modal-mask",onClick:o[11]||(o[11]=qe(T=>re.value=!1,["self"]))},[s("div",En,[o[25]||(o[25]=s("div",{class:"wc-modal-title"},"Êñ∞Âª∫Êñá‰ª∂",-1)),Ke(s("input",{"onUpdate:modelValue":o[9]||(o[9]=T=>Ve.value=T),class:"wc-modal-input",placeholder:"Â¶Ç notes.md Êàñ scripts/run.sh",onKeyup:Je(c,["enter"]),ref_key:"newFileInput",ref:$e},null,544),[[Il,Ve.value]]),s("div",Kn,[s("button",{class:"wc-btn",onClick:o[10]||(o[10]=T=>re.value=!1)},"ÂèñÊ∂à"),s("button",{class:"wc-btn primary",onClick:c},"ÂàõÂª∫")])])])):C("",!0)]))])}}}),On=tt(Wn,[["__scopeId","data-v-945cea34"]]),Hn={class:"header-left"},Yn={class:"chat-layout"},qn={class:"session-sidebar"},Jn={class:"session-sidebar-header"},Xn={class:"session-list"},Gn=["onClick"],Qn={class:"session-item-title"},Zn={class:"session-item-meta"},es={key:0,class:"session-empty"},ls={class:"at-panel"},ts={key:0,class:"at-form"},as={class:"chat-area"},ns={style:{display:"flex","justify-content":"space-between",width:"100%"}},ss={style:{color:"#999","font-size":"12px"}},os={style:{display:"flex","align-items":"center",gap:"8px"}},is={style:{"font-weight":"600"}},us={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},ds={style:{display:"flex","align-items":"center",gap:"8px"}},rs={style:{"font-size":"13px"}},cs={style:{"font-size":"13px",color:"#606266"}},vs={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},fs={key:1,class:"relations-list"},ps={class:"relation-info"},ms={class:"relation-name"},ys={class:"relation-tags"},gs={class:"relation-desc"},_s={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ws={style:{display:"flex",gap:"8px","margin-top":"4px"}},bs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ks={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},hs={style:{"font-size":"12px"}},xs={style:{"font-size":"12px",color:"#606266"}},Cs={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},$s={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},Vs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},zs={style:{"margin-bottom":"16px",display:"flex","align-items":"center",gap:"8px"}},Ts={class:"conv-drawer-body"},Ss={key:0,style:{"text-align":"center","margin-bottom":"12px"}},Is={class:"conv-msg-list"},Ls={class:"conv-msg-meta"},As={class:"conv-msg-role"},Us={key:0,class:"conv-msg-sender"},Ms={class:"conv-msg-time"},Ds={class:"conv-msg-content"},Fs={key:0,class:"conv-msg-empty"},Ns={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Bs={class:"channel-card-header"},Rs={class:"channel-card-left"},Es={class:"channel-card-name"},Ks={key:0,class:"channel-bot-username"},Ps={class:"channel-card-actions"},js={key:0,class:"channel-card-body"},Ws={class:"channel-info-row"},Os={class:"channel-info-value"},Hs={class:"channel-info-row"},Ys={class:"channel-info-value"},qs={key:1,class:"channel-card-body"},Js={class:"channel-info-row"},Xs={class:"channel-info-value"},Gs={style:{opacity:"0.6","font-size":"11px","margin-left":"3px"}},Qs={class:"pending-section"},Zs=["onClick"],eo={key:0,class:"pending-list"},lo={key:0,style:{"text-align":"center",padding:"12px"}},to={class:"pending-user-info"},ao={class:"pending-user-name"},no={key:0,class:"pending-user-username"},so={class:"pending-user-id"},oo={class:"pending-user-actions"},io={key:2,class:"pending-empty"},uo={style:{width:"100%"}},ro={style:{display:"flex",gap:"6px","align-items":"center"}},co={key:0,style:{"margin-top":"6px",display:"flex","align-items":"center",gap:"6px",color:"#909399","font-size":"13px"}},vo={key:1,style:{"margin-top":"6px",color:"#67c23a","font-size":"13px"}},fo={key:2,style:{"margin-top":"6px",color:"#e6a23c","font-size":"13px"}},po={key:3,style:{"margin-top":"6px",color:"#f56c6c","font-size":"13px"}},mo={key:4,style:{"margin-top":"4px"}},yo={class:"channel-url-preview"},go={class:"channel-url-text"},_o={class:"channel-url-preview"},wo={class:"channel-url-text"},bo={style:{padding:"20px","max-width":"800px"}},ko={style:{display:"flex",gap:"8px","margin-bottom":"16px","align-items":"flex-start"}},ho={style:{"font-size":"13px"}},xo=50,Co=Zl({__name:"AgentDetailView",setup(yl){const _e=ta(),g=_e.params.id,A=d(null),we=d("chat"),m=d(),V=d([]),I=d(!1),F=d();async function Ce(){I.value=!0;try{const n=await _t.list({agentId:g,limit:50});V.value=n.data.sessions}catch{}finally{I.value=!1}}function $e(n){F.value=n.id,m.value?.resumeSession(n.id)}function Pe(){F.value=void 0,m.value?.startNewSession()}function be(n){F.value=n,setTimeout(Ce,500)}function de(n){if(!n)return"";const l=Date.now()-n;return l<6e4?"ÂàöÂàö":l<36e5?`${Math.floor(l/6e4)}ÂàÜÂâç`:l<864e5?`${Math.floor(l/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(l/864e5)}Â§©Ââç`}const se=d(!1),h=d(""),N=d(""),O=d(!1),J=d([]);function De(){se.value=!se.value,se.value&&!J.value.length&&re()}async function re(){try{const n=await $l.list();J.value=n.data.filter(l=>l.id!==g)}catch{J.value=[]}}function Ve(n){const l=J.value.find(v=>v.id===n);l&&m.value?.fillInput(`@${l.name}: `)}async function oe(){const n=h.value,l=N.value.trim();if(!n||!l)return;const S=J.value.find(ll=>ll.id===n)?.name??n;O.value=!0;const Z={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${S}Ôºö
${l}`};m.value?.appendMessage(Z);try{const M=(await $l.message(n,l,g)).data.response,Ae={role:"assistant",text:`‚Üê **${S}** ÂõûÂ§çÔºö

${M}`};m.value?.appendMessage(Ae),N.value="",h.value="",se.value=!1,y.success(`${S} Â∑≤ÂõûÂ§ç`)}catch(ll){const M={role:"system",text:`[Â§±Ë¥•] ËΩ¨ÂèëÂ§±Ë¥•Ôºö${ll.response?.data?.error??ll.message??"ÁΩëÁªúÈîôËØØ"}`};m.value?.appendMessage(M),y.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{O.value=!1}}const pe=d(""),L=d(""),Fe=d([]),G=d(""),je=d(!1),H=d([]),ce=d(""),me=d(""),ze=d(!1);function tl(){const n=A.value?.env||{};H.value=Object.entries(n).map(([l,v])=>({key:l,value:v}))}function Te(){const n=ce.value.trim();if(!n)return;const l=H.value.findIndex(v=>v.key===n);l>=0?H.value[l].value=me.value:H.value.push({key:n,value:me.value}),ce.value="",me.value=""}function al(n){H.value.splice(n,1)}async function We(){ze.value=!0;try{const n={};for(const{key:v,value:S}of H.value)v.trim()&&(n[v.trim()]=S);const l=await $l.update(g,{env:n});A.value=l.data,y.success("ÁéØÂ¢ÉÂèòÈáèÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ze.value=!1}}const K=d({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),ie=d(!1),Oe=d(!1);async function gl(){try{const n=await Bl.getConfig(g);K.value=n.data,_()}catch{}}async function Ge(){ie.value=!0;try{const n=await Bl.setConfig(g,K.value);K.value=n.data,y.success(K.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ie.value=!1}}async function nl(){Oe.value=!0;try{await Bl.consolidate(g),y.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(_,1e4)}catch{y.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{Oe.value=!1}}const ve=d([]),Se=d(!1);async function _(){Se.value=!0;try{const n=await Bl.runLog(g);ve.value=n.data||[]}catch{ve.value=[]}finally{Se.value=!1}}const c=d([]),U=d(""),z=d(""),Y=d(!1),ye=d([]),Q=d(!1),te=d(""),ge=d(!1),Ne=d(""),X=d([]),Qe=d(!1),P=d({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function sl(){try{const n=await mt.get(g);X.value=n.data.parsed||[]}catch{X.value=[]}}function ol(n){const l=J.value.find(v=>v.id===n);P.value.agentName=l?l.name:n}async function Ze(){if(!P.value.agentId)return;if(X.value.find(l=>l.agentId===P.value.agentId)){y.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}X.value.push({...P.value}),P.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await fe()}async function Be(n){X.value.splice(n,1),await fe()}function Ie(){if(X.value.length===0)return"";const n=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,l=X.value.map(v=>`| ${v.agentId} | ${v.agentName} | ${v.relationType} | ${v.strength} | ${v.desc||""} |`).join(`
`);return n+`
`+l}async function fe(){Qe.value=!0;try{await mt.put(g,Ie()),y.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Qe.value=!1}}function ke(n){const l=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let v=0;for(let S=0;S<n.length;S++)v=n.charCodeAt(S)+((v<<5)-v);return l[Math.abs(v)%l.length]??"#409EFF"}function el(n){return n==="‰∏äÁ∫ß"?"danger":n==="‰∏ãÁ∫ß"?"":n==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function il(n){return n==="Ê†∏ÂøÉ"?"danger":n==="Â∏∏Áî®"?"warning":"info"}const ul=d([]),Re=d(!1),u=d({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function o(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function $(n){return n==="running"?"ËøêË°å‰∏≠":n==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function ae(n){return n?n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB":"0 B"}function Ll(n){return n?new Date(n).toLocaleString():""}const he=d([]),_l=d(!1),He=d(!1),T=d(""),ne=d(""),Le=d(!1),Rl=d(""),b=d({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""}),R=d({loading:!1,status:""});let El=null;function Kl(n){return/^\*+$/.test(n)}async function at(){const n=b.value.botToken;if(!(!n||Kl(n))){R.value={loading:!0,status:""};try{const v=(await xe.checkToken(g,n)).data;v.duplicate?R.value={loading:!1,status:"duplicate",usedBy:v.usedBy,usedByCh:v.usedByCh}:v.valid?(R.value={loading:!1,status:"ok",botName:v.botName},!b.value.name&&v.botName&&(b.value.name=v.botName)):R.value={loading:!1,status:"error",error:v.error||"Token Êó†Êïà"}}catch{R.value={loading:!1,status:"error",error:"ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï"}}}}Sl(()=>b.value.type,n=>{T.value||(ne.value=Pl(n))}),Sl(()=>b.value.botToken,n=>{R.value={loading:!1,status:""},El&&clearTimeout(El),!(!n||Kl(n)||n.length<20||!n.includes(":"))&&(El=setTimeout(at,800))});function dl(n,l){return l?`${window.location.origin}/chat/${n}/${l}`:`${window.location.origin}/chat/${n}`}function nt(n){navigator.clipboard.writeText(n).then(()=>y.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function rl(){_l.value=!0;try{const n=await xe.list(g);he.value=n.data||[]}catch{he.value=[]}finally{_l.value=!1}}function Pl(n){return n+"-"+Date.now().toString(36)}function wt(){T.value="";const n=A.value?.name||"";ne.value=Pl("telegram"),b.value={type:"telegram",name:n,enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},R.value={loading:!1,status:""},He.value=!0}function bt(n){T.value=n.id,b.value={type:n.type,name:n.name,enabled:n.enabled,botToken:n.config?.botToken||"",allowedFrom:n.config?.allowedFrom||"",webPassword:"",webWelcome:n.config?.welcomeMsg||"",webTitle:n.config?.title||""},R.value={loading:!1,status:""},He.value=!0}async function kt(){if(!b.value.name||!b.value.type){y.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}if(R.value.status==="duplicate"){y.error(`Bot Token Â∑≤Ë¢´ÊàêÂëò„Äå${R.value.usedBy}„Äç‰ΩøÁî®ÔºåËØ∑Êõ¥Êç¢`);return}Le.value=!0;try{const n={};if(b.value.type==="telegram"?(b.value.botToken&&(n.botToken=b.value.botToken),b.value.allowedFrom&&(n.allowedFrom=b.value.allowedFrom)):b.value.type==="web"&&(b.value.webPassword&&(n.password=b.value.webPassword),b.value.webWelcome&&(n.welcomeMsg=b.value.webWelcome),b.value.webTitle&&(n.title=b.value.webTitle)),T.value){const l=he.value.map(v=>v.id!==T.value?v:{...v,name:b.value.name,type:b.value.type,enabled:b.value.enabled,config:{...v.config,...n}});await xe.set(g,l)}else{const l={id:ne.value||Pl(b.value.type),name:b.value.name,type:b.value.type,enabled:b.value.enabled,config:n,status:"untested"};await xe.set(g,[...he.value,l])}y.success(b.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),He.value=!1,await rl()}catch(n){y.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Le.value=!1}}async function ht(){try{await xe.set(g,he.value)}catch(n){y.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•"),await rl()}}async function xt(n){const l=he.value.filter(v=>v.id!==n.id);try{await xe.set(g,l),he.value=l,y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ct(n){Rl.value=n.id;try{const l=await xe.test(g,n.id);l.data.valid?y.success(l.data.botName?`ÊµãËØïÊàêÂäü (@${l.data.botName})`:"ÊµãËØïÊàêÂäü"):y.error(l.data.error||"ÊµãËØïÂ§±Ë¥•"),await rl()}catch{y.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{Rl.value=""}}const cl=d({}),jl=d({}),wl=d(""),Wl=d("");async function Al(n){jl.value[n]=!0;try{const l=await xe.listPending(g,n);cl.value[n]=l.data||[]}catch{cl.value[n]=[]}finally{jl.value[n]=!1}}function $t(n){wl.value===n?wl.value="":(wl.value=n,Al(n))}async function Vt(n,l){Wl.value=`${n}-${l}`;try{await xe.allowUser(g,n,l),y.success(`Áî®Êà∑ ${l} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Al(n),await rl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}finally{Wl.value=""}}async function zt(n,l){try{await xe.dismissUser(g,n,l),y.success("Â∑≤ÂøΩÁï•"),await Al(n)}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function st(n,l){try{await Tl.confirm(`Á°ÆÂÆöÂ∞ÜÁî®Êà∑ ${l} ‰ªéÁôΩÂêçÂçï‰∏≠ÁßªÈô§ÔºüÁßªÈô§ÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®Ê≠§ Bot„ÄÇ`,"ÁßªÈô§ÁôΩÂêçÂçï",{confirmButtonText:"Á°ÆËÆ§ÁßªÈô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"})}catch{return}try{await xe.removeAllowed(g,n,l),y.success(`Áî®Êà∑ ${l} Â∑≤‰ªéÁôΩÂêçÂçïÁßªÈô§`),await rl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}et(async()=>{try{const v=await $l.get(g);A.value=v.data}catch{y.error("Âä†ËΩΩ Agent Â§±Ë¥•")}Tt(),St(),sl(),re(),gl(),Ul(),rl(),tl(),await Ce();const n=_e.query.tab;n&&(we.value=n);const l=_e.query.resumeSession;l&&(F.value=l,await new Promise(S=>setTimeout(S,100)),m.value?.resumeSession(l),V.value.find(S=>S.id===l)||(F.value=l))});async function Tt(){try{const[n,l]=await Promise.all([q.read(g,"IDENTITY.md"),q.read(g,"SOUL.md")]);pe.value=n.data?.content||"",L.value=l.data?.content||""}catch{}bl()}async function ot(n,l){try{await q.write(g,n,l),y.success(`${n} Â∑≤‰øùÂ≠ò`)}catch{y.error(`‰øùÂ≠ò ${n} Â§±Ë¥•`)}}async function St(){try{const n=await da.list();if(Fe.value=n.data||[],A.value?.modelId)G.value=A.value.modelId;else{const l=Fe.value.find(v=>v.provider+"/"+v.model===A.value?.model||v.id===A.value?.model);G.value=l?.id||""}}catch{}}async function It(){if(G.value){je.value=!0;try{const n=await $l.update(g,{modelId:G.value});A.value=n.data,y.success("Ê®°ÂûãÂ∑≤Êõ¥Êñ∞")}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}finally{je.value=!1}}}async function bl(){try{const n=await Vl.tree(g);c.value=n.data||[]}catch{c.value=[]}}async function Lt(n){if(!n.isDir){U.value=n.path,ye.value=n.path.split("/");try{const l=await Vl.readFile(g,n.path);z.value=l.data?.content||""}catch{z.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function At(){if(U.value){Y.value=!0;try{await Vl.writeFile(g,U.value,z.value),y.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),bl()}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Y.value=!1}}}async function Ut(){const n=te.value.trim();if(!n){y.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await Vl.writeFile(g,n,`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`),y.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),Q.value=!1,te.value="",bl(),U.value=n,ye.value=n.split("/"),z.value=`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function Mt(){const n=Ne.value.trim();if(!n){y.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await Vl.dailyLog(g,n),y.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),ge.value=!1,Ne.value="",bl()}catch{y.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Ul(){try{const n=await zl.list(g);ul.value=n.data||[]}catch{}}async function Dt(){try{await zl.create({name:u.value.name,enabled:u.value.enabled,agentId:g,schedule:{kind:"cron",expr:u.value.expr,tz:u.value.tz},payload:{kind:"agentTurn",message:u.value.message},delivery:{mode:"announce"}}),y.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),Re.value=!1,Ul()}catch(n){y.error(n.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Ft(n){try{await zl.update(n.id,n)}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function it(n){try{await zl.run(n.id),y.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(Ul,2e3)}catch{y.error("ËøêË°åÂ§±Ë¥•")}}async function Nt(n){try{await zl.delete(n.id),y.success("Â∑≤Âà†Èô§"),Ul()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}const Ml=d(!1),Ol=d([]),Hl=d(!1),Yl=d(""),Ye=d([]),ql=d(0),Dl=d(0),Bt=ml(()=>Ye.value.length<ql.value),kl=d(!1);async function ut(){Ml.value=!0;try{const n=await yt.list(g);Ol.value=n.data}catch{y.error("Âä†ËΩΩÂØπËØùÊ∏†ÈÅìÂ§±Ë¥•")}finally{Ml.value=!1}}async function Rt(n){Yl.value=n.channelId,Ye.value=[],ql.value=0,Dl.value=0,Hl.value=!0,await dt()}async function dt(){kl.value=!0;try{const l=(await yt.messages(g,Yl.value,{limit:xo,offset:Dl.value})).data;ql.value=l.total,Dl.value===0?Ye.value=l.messages:Ye.value=[...l.messages,...Ye.value],Dl.value+=l.messages.length}catch{y.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•")}finally{kl.value=!1}}async function Et(){await dt()}return Sl(we,n=>{n==="convlogs"&&Ol.value.length===0&&ut()}),(n,l)=>{const v=w("el-button"),S=w("el-tag"),Z=w("el-text"),ll=w("el-header"),M=w("el-option"),Ae=w("el-select"),j=w("el-input"),Ue=w("el-tab-pane"),D=w("el-form-item"),vl=w("el-form"),Me=w("el-card"),ue=w("el-col"),fl=w("el-row"),rt=w("el-badge"),W=w("el-table-column"),hl=w("el-table"),xl=w("el-switch"),Kt=w("el-input-number"),ee=w("el-icon"),Pt=w("el-tree"),Jl=w("el-empty"),ct=w("el-breadcrumb-item"),jt=w("el-breadcrumb"),Fl=w("el-dialog"),Wt=w("el-drawer"),Ot=w("el-link"),Ht=w("CircleCheck"),Yt=w("Warning"),qt=w("CircleClose"),vt=w("InfoFilled"),ft=w("Link"),Jt=w("el-tabs"),Xt=w("el-main"),Gt=w("el-container"),Xl=ua("loading");return i(),x(Gt,{class:"agent-detail"},{default:t(()=>[e(ll,{class:"detail-header"},{default:t(()=>[s("div",Hn,[e(v,{icon:B(aa),onClick:l[0]||(l[0]=a=>n.$router.push("/agents")),circle:""},null,8,["icon"]),s("h2",null,p(A.value?.name||"..."),1),e(S,{type:o(A.value?.status)},{default:t(()=>[r(p($(A.value?.status)),1)]),_:1},8,["type"])]),e(Z,{type:"info"},{default:t(()=>[r(p(A.value?.model),1)]),_:1})]),_:1}),e(Xt,null,{default:t(()=>[e(Jt,{modelValue:we.value,"onUpdate:modelValue":l[47]||(l[47]=a=>we.value=a),type:"border-card"},{default:t(()=>[e(Ue,{label:"ÂØπËØù",name:"chat"},{default:t(()=>[s("div",Yn,[s("div",qn,[s("div",Jn,[l[49]||(l[49]=s("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),e(v,{size:"small",type:"primary",plain:"",onClick:Pe,icon:B(Nl)},{default:t(()=>[...l[48]||(l[48]=[r("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),Ke((i(),f("div",Xn,[(i(!0),f(E,null,le(V.value,a=>(i(),f("div",{key:a.id,class:Ee(["session-item",{active:F.value===a.id}]),onClick:k=>$e(a)},[s("div",Qn,p(a.title||"Êñ∞ÂØπËØù"),1),s("div",Zn,[s("span",null,p(de(a.lastAt)),1),e(S,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[r(p(a.messageCount)+" Êù° ",1)]),_:2},1024),a.tokenEstimate>6e4?(i(),x(S,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[r("~"+p(Math.round(a.tokenEstimate/1e3))+"k",1)]),_:2},1024)):C("",!0)])],10,Gn))),128)),!I.value&&!V.value.length?(i(),f("div",es," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):C("",!0)])),[[Xl,I.value]]),s("div",ls,[e(v,{size:"small",plain:"",class:"at-toggle-btn",onClick:De},{default:t(()=>[...l[50]||(l[50]=[s("span",{class:"at-icon"},"@",-1),r(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),se.value?(i(),f("div",ts,[e(Ae,{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=a=>h.value=a),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:Ve},{default:t(()=>[(i(!0),f(E,null,le(J.value,a=>(i(),x(M,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(j,{modelValue:N.value,"onUpdate:modelValue":l[2]||(l[2]=a=>N.value=a),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),e(v,{type:"primary",size:"small",style:{width:"100%"},loading:O.value,disabled:!h.value||!N.value.trim(),onClick:oe},{default:t(()=>[...l[51]||(l[51]=[r(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):C("",!0)])]),s("div",as,[e(lt,{ref_key:"aiChatRef",ref:m,"agent-id":B(g),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${A.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:be},null,8,["agent-id","welcome-message"])])])]),_:1}),e(Ue,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:t(()=>[e(On,{"agent-id":B(g),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Ue,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:t(()=>[e(Me,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[52]||(l[52]=[s("span",{style:{"font-weight":"600"}},"Âü∫Êú¨ËÆæÁΩÆ",-1)])]),default:t(()=>[e(vl,{"label-width":"80px",size:"default"},{default:t(()=>[e(D,{label:"‰ΩøÁî®Ê®°Âûã"},{default:t(()=>[e(Ae,{modelValue:G.value,"onUpdate:modelValue":l[3]||(l[3]=a=>G.value=a),placeholder:"ÈÄâÊã©Ê®°Âûã",style:{width:"280px","margin-right":"10px"}},{default:t(()=>[(i(!0),f(E,null,le(Fe.value,a=>(i(),x(M,{key:a.id,label:a.name||a.model,value:a.id},{default:t(()=>[s("div",ns,[s("span",null,p(a.name||a.model),1),s("span",ss,p(a.provider),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(v,{type:"primary",loading:je.value,onClick:It,disabled:!G.value},{default:t(()=>[...l[53]||(l[53]=[r("‰øùÂ≠ò",-1)])]),_:1},8,["loading","disabled"]),A.value?.model?(i(),x(Z,{key:0,type:"info",style:{"margin-left":"12px","font-size":"12px"}},{default:t(()=>[r(" ÂΩìÂâçÔºö"+p(A.value.model),1)]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1}),e(fl,{gutter:20},{default:t(()=>[e(ue,{span:12},{default:t(()=>[e(Me,{header:"IDENTITY.md"},{default:t(()=>[e(j,{modelValue:pe.value,"onUpdate:modelValue":l[4]||(l[4]=a=>pe.value=a),type:"textarea",rows:15,onBlur:l[5]||(l[5]=a=>ot("IDENTITY.md",pe.value))},null,8,["modelValue"])]),_:1})]),_:1}),e(ue,{span:12},{default:t(()=>[e(Me,{header:"SOUL.md"},{default:t(()=>[e(j,{modelValue:L.value,"onUpdate:modelValue":l[6]||(l[6]=a=>L.value=a),type:"textarea",rows:15,onBlur:l[7]||(l[7]=a=>ot("SOUL.md",L.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ue,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:t(()=>[e(fl,{gutter:20},{default:t(()=>[e(ue,{span:14},{default:t(()=>[e(Me,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[54]||(l[54]=[s("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:t(()=>[e(vl,{model:P.value,"label-position":"top",size:"default"},{default:t(()=>[e(fl,{gutter:12},{default:t(()=>[e(ue,{span:10},{default:t(()=>[e(D,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:t(()=>[e(Ae,{modelValue:P.value.agentId,"onUpdate:modelValue":l[8]||(l[8]=a=>P.value.agentId=a),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:ol},{default:t(()=>[(i(!0),f(E,null,le(J.value,a=>(i(),x(M,{key:a.id,label:a.name,value:a.id},{default:t(()=>[s("div",os,[s("div",{style:Xe([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:ke(a.id)}])},p(a.name.charAt(0)),5),s("span",null,p(a.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ue,{span:7},{default:t(()=>[e(D,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:t(()=>[e(Ae,{modelValue:P.value.relationType,"onUpdate:modelValue":l[9]||(l[9]=a=>P.value.relationType=a),style:{width:"100%"}},{default:t(()=>[e(M,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),e(M,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),e(M,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),e(M,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ue,{span:7},{default:t(()=>[e(D,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:t(()=>[e(Ae,{modelValue:P.value.strength,"onUpdate:modelValue":l[10]||(l[10]=a=>P.value.strength=a),style:{width:"100%"}},{default:t(()=>[e(M,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),e(M,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),e(M,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(fl,{gutter:12},{default:t(()=>[e(ue,{span:18},{default:t(()=>[e(D,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:t(()=>[e(j,{modelValue:P.value.desc,"onUpdate:modelValue":l[11]||(l[11]=a=>P.value.desc=a),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),e(ue,{span:6},{default:t(()=>[e(D,{label:" "},{default:t(()=>[e(v,{type:"primary",style:{width:"100%"},disabled:!P.value.agentId||!P.value.relationType||!P.value.strength,loading:Qe.value,onClick:Ze},{default:t(()=>[...l[55]||(l[55]=[r(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Me,null,{header:t(()=>[s("span",is,[l[56]||(l[56]=r("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),e(rt,{value:X.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:t(()=>[X.value.length===0?(i(),f("div",us," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(i(),x(hl,{key:1,data:X.value,size:"small",style:{width:"100%"}},{default:t(()=>[e(W,{label:"ÊàêÂëò","min-width":"120"},{default:t(({row:a})=>[s("div",ds,[s("div",{style:Xe([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:ke(a.agentId)}])},p(a.agentName.charAt(0)),5),s("span",rs,p(a.agentName),1)])]),_:1}),e(W,{label:"Á±ªÂûã",width:"100"},{default:t(({row:a})=>[e(S,{type:el(a.relationType),size:"small"},{default:t(()=>[r(p(a.relationType),1)]),_:2},1032,["type"])]),_:1}),e(W,{label:"Á®ãÂ∫¶",width:"80"},{default:t(({row:a})=>[e(S,{type:il(a.strength),size:"small",effect:"plain"},{default:t(()=>[r(p(a.strength),1)]),_:2},1032,["type"])]),_:1}),e(W,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:t(({row:a})=>[s("span",cs,p(a.desc||"‚Äî"),1)]),_:1}),e(W,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:t(({$index:a})=>[e(v,{type:"danger",link:"",size:"small",onClick:k=>Be(a)},{default:t(()=>[...l[57]||(l[57]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),e(ue,{span:10},{default:t(()=>[e(Me,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:t(()=>[X.value.length===0?(i(),f("div",vs," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(i(),f("div",fs,[(i(!0),f(E,null,le(X.value,a=>(i(),f("div",{key:a.agentId,class:"relation-card"},[s("div",{class:"relation-avatar",style:Xe({background:ke(a.agentId)})},p(a.agentName.charAt(0).toUpperCase()),5),s("div",ps,[s("div",ms,p(a.agentName),1),s("div",ys,[e(S,{type:el(a.relationType),size:"small"},{default:t(()=>[r(p(a.relationType),1)]),_:2},1032,["type"]),e(S,{type:il(a.strength),size:"small",effect:"plain"},{default:t(()=>[r(p(a.strength),1)]),_:2},1032,["type"])]),s("div",gs,p(a.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(Ue,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:t(()=>[e(Me,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[s("div",_s,[l[58]||(l[58]=s("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),e(xl,{modelValue:K.value.enabled,"onUpdate:modelValue":l[12]||(l[12]=a=>K.value.enabled=a),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:Ge},null,8,["modelValue"])])]),default:t(()=>[e(vl,{model:K.value,"label-position":"top",size:"small",disabled:!K.value.enabled},{default:t(()=>[e(fl,{gutter:16},{default:t(()=>[e(ue,{span:6},{default:t(()=>[e(D,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:t(()=>[e(Ae,{modelValue:K.value.schedule,"onUpdate:modelValue":l[13]||(l[13]=a=>K.value.schedule=a),style:{width:"100%"}},{default:t(()=>[e(M,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),e(M,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),e(M,{label:"ÊØèÂ§©",value:"daily"}),e(M,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ue,{span:5},{default:t(()=>[e(D,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:t(()=>[e(Kt,{modelValue:K.value.keepTurns,"onUpdate:modelValue":l[14]||(l[14]=a=>K.value.keepTurns=a),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(ue,{span:13},{default:t(()=>[e(D,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:t(()=>[e(j,{modelValue:K.value.focusHint,"onUpdate:modelValue":l[15]||(l[15]=a=>K.value.focusHint=a),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s("div",ws,[e(v,{type:"primary",size:"small",loading:ie.value,onClick:Ge},{default:t(()=>[...l[59]||(l[59]=[r(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),e(v,{size:"small",loading:Oe.value,onClick:nl},{default:t(()=>[...l[60]||(l[60]=[r(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),e(Z,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:t(()=>[r(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+p(K.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),e(Me,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[s("div",bs,[l[62]||(l[62]=s("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),e(v,{size:"small",text:"",onClick:_,loading:Se.value},{default:t(()=>[...l[61]||(l[61]=[r("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:t(()=>[ve.value.length===0&&!Se.value?(i(),f("div",ks," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(i(),x(hl,{key:1,data:ve.value.slice(0,20),size:"small"},{default:t(()=>[e(W,{label:"Êó∂Èó¥",width:"160"},{default:t(({row:a})=>[s("span",hs,p(Ll(a.timestamp)),1)]),_:1}),e(W,{label:"Áä∂ÊÄÅ",width:"72"},{default:t(({row:a})=>[e(S,{type:a.status==="ok"?"success":"danger",size:"small"},{default:t(()=>[r(p(a.status),1)]),_:2},1032,["type"])]),_:1}),e(W,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[s("span",xs,p(a.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),s("div",Cs,[e(v,{type:"primary",size:"small",onClick:l[16]||(l[16]=a=>Q.value=!0)},{default:t(()=>[e(ee,null,{default:t(()=>[e(B(Nl))]),_:1}),l[63]||(l[63]=r(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),e(v,{size:"small",onClick:l[17]||(l[17]=a=>ge.value=!0)},{default:t(()=>[e(ee,null,{default:t(()=>[e(B(na))]),_:1}),l[64]||(l[64]=r(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),e(v,{size:"small",onClick:bl},{default:t(()=>[e(ee,null,{default:t(()=>[e(B(Ql))]),_:1}),l[65]||(l[65]=r(" Âà∑Êñ∞ ",-1))]),_:1})]),e(fl,{gutter:16},{default:t(()=>[e(ue,{span:7},{default:t(()=>[e(Me,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:t(()=>[e(Pt,{data:c.value,props:{label:"name",children:"children",isLeaf:a=>!a.isDir},onNodeClick:Lt,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:t(({data:a})=>[s("span",$s,[a.isDir?(i(),x(ee,{key:0,style:{color:"#E6A23C"}},{default:t(()=>[e(B(sa))]),_:1})):(i(),x(ee,{key:1,style:{color:"#409EFF"}},{default:t(()=>[e(B(oa))]),_:1})),s("span",null,p(a.name),1),!a.isDir&&a.size?(i(),x(Z,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:t(()=>[r(p(ae(a.size)),1)]),_:2},1024)):C("",!0)])]),_:1},8,["data","props"]),c.value.length===0?(i(),x(Jl,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):C("",!0)]),_:1})]),_:1}),e(ue,{span:17},{default:t(()=>[e(Me,{shadow:"hover"},{header:t(()=>[s("div",Vs,[e(jt,{separator:"/"},{default:t(()=>[e(ct,null,{default:t(()=>[...l[66]||(l[66]=[r("memory",-1)])]),_:1}),(i(!0),f(E,null,le(ye.value,(a,k)=>(i(),x(ct,{key:k},{default:t(()=>[r(p(a),1)]),_:2},1024))),128))]),_:1}),U.value?(i(),x(v,{key:0,type:"primary",size:"small",onClick:At,loading:Y.value},{default:t(()=>[...l[67]||(l[67]=[r("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):C("",!0)])]),default:t(()=>[U.value?(i(),x(j,{key:0,modelValue:z.value,"onUpdate:modelValue":l[18]||(l[18]=a=>z.value=a),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(i(),x(Jl,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),e(Fl,{modelValue:Q.value,"onUpdate:modelValue":l[21]||(l[21]=a=>Q.value=a),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:t(()=>[e(v,{onClick:l[20]||(l[20]=a=>Q.value=!1)},{default:t(()=>[...l[69]||(l[69]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Ut},{default:t(()=>[...l[70]||(l[70]=[r("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(vl,{"label-width":"80px"},{default:t(()=>[e(D,{label:"Ë∑ØÂæÑ"},{default:t(()=>[e(j,{modelValue:te.value,"onUpdate:modelValue":l[19]||(l[19]=a=>te.value=a),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),e(Z,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:t(()=>[...l[68]||(l[68]=[r("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Fl,{modelValue:ge.value,"onUpdate:modelValue":l[24]||(l[24]=a=>ge.value=a),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:t(()=>[e(v,{onClick:l[23]||(l[23]=a=>ge.value=!1)},{default:t(()=>[...l[71]||(l[71]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Mt},{default:t(()=>[...l[72]||(l[72]=[r("Êèê‰∫§",-1)])]),_:1})]),default:t(()=>[e(j,{modelValue:Ne.value,"onUpdate:modelValue":l[22]||(l[22]=a=>Ne.value=a),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(Ue,{label:"ÊäÄËÉΩ",name:"skills"},{default:t(()=>[e(tn,{"agent-id":B(g)},null,8,["agent-id"])]),_:1}),e(Ue,{label:"ÂéÜÂè≤ÂØπËØù",name:"convlogs"},{default:t(()=>[s("div",zs,[l[73]||(l[73]=s("span",{style:{"font-weight":"600","font-size":"15px"}},"Ê∏†ÈÅìÂØπËØùËÆ∞ÂΩï",-1)),e(v,{size:"small",icon:B(Ql),circle:"",onClick:ut,loading:Ml.value},null,8,["icon","loading"])]),Ke((i(),x(hl,{data:Ol.value,stripe:"","empty-text":"ÊöÇÊó†ÂØπËØùËÆ∞ÂΩï"},{default:t(()=>[e(W,{label:"Ê∏†ÈÅì","min-width":"200"},{default:t(({row:a})=>[s("span",null,p(a.channelType==="telegram"?"Telegram":"Web")+" "+p(a.channelId),1)]),_:1}),e(W,{label:"Ê∂àÊÅØÊï∞",width:"100"},{default:t(({row:a})=>[r(p(a.messageCount)+" Êù°",1)]),_:1}),e(W,{label:"ÊúÄÂêéÊ¥ªË∑É",width:"180"},{default:t(({row:a})=>[r(p(a.lastAt?new Date(a.lastAt).toLocaleString("zh-CN"):"-"),1)]),_:1}),e(W,{label:"Êìç‰Ωú",width:"100"},{default:t(({row:a})=>[e(v,{size:"small",type:"primary",plain:"",onClick:k=>Rt(a)},{default:t(()=>[...l[74]||(l[74]=[r("Êü•Áúã",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Xl,Ml.value]]),e(Wt,{modelValue:Hl.value,"onUpdate:modelValue":l[25]||(l[25]=a=>Hl.value=a),title:Yl.value+" ÂØπËØùËÆ∞ÂΩï",direction:"rtl",size:"520px","destroy-on-close":!1},{default:t(()=>[s("div",Ts,[Bt.value?(i(),f("div",Ss,[e(v,{size:"small",plain:"",loading:kl.value,onClick:Et},{default:t(()=>[...l[75]||(l[75]=[r("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):C("",!0),Ke((i(),f("div",Is,[(i(!0),f(E,null,le(Ye.value,(a,k)=>(i(),f("div",{key:k,class:Ee(["conv-msg-item",a.role==="user"?"conv-msg-user":"conv-msg-assistant"])},[s("div",Ls,[s("span",As,p(a.role==="user"?"Áî®Êà∑":"Âä©Êâã"),1),a.sender?(i(),f("span",Us,p(a.sender),1)):C("",!0),s("span",Ms,p(a.ts?new Date(a.ts).toLocaleString("zh-CN"):""),1)]),s("div",Ds,p(a.content),1)],2))),128)),!kl.value&&Ye.value.length===0?(i(),f("div",Fs," ÊöÇÊó†Ê∂àÊÅØËÆ∞ÂΩï ")):C("",!0)])),[[Xl,kl.value&&Ye.value.length===0]])])]),_:1},8,["modelValue","title"])]),_:1}),e(Ue,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:t(()=>[e(v,{type:"primary",onClick:l[26]||(l[26]=a=>Re.value=!0),style:{"margin-bottom":"16px"}},{default:t(()=>[e(ee,null,{default:t(()=>[e(B(Nl))]),_:1}),l[76]||(l[76]=r(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),e(hl,{data:ul.value,stripe:""},{default:t(()=>[e(W,{prop:"name",label:"ÂêçÁß∞"}),e(W,{label:"Ë∞ÉÂ∫¶"},{default:t(({row:a})=>[r(p(a.schedule?.expr)+" ("+p(a.schedule?.tz)+")",1)]),_:1}),e(W,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:t(({row:a})=>[a.state?.lastRunAtMs?(i(),f(E,{key:0},[e(S,{type:a.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:t(()=>[r(p(a.state?.lastStatus),1)]),_:2},1032,["type"]),e(Z,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:t(()=>[r(p(Ll(a.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(i(),x(Z,{key:1,type:"info",size:"small"},{default:t(()=>[...l[77]||(l[77]=[r("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),e(W,{label:"ÂêØÁî®",width:"80"},{default:t(({row:a})=>[e(xl,{modelValue:a.enabled,"onUpdate:modelValue":k=>a.enabled=k,onChange:k=>Ft(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(W,{label:"Êìç‰Ωú",width:"220"},{default:t(({row:a})=>[a.payload?.message==="__MEMORY_CONSOLIDATE__"?(i(),f(E,{key:0},[e(S,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:t(()=>[...l[78]||(l[78]=[r("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),e(v,{size:"small",onClick:k=>it(a)},{default:t(()=>[...l[79]||(l[79]=[r("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(i(),f(E,{key:1},[e(v,{size:"small",onClick:k=>it(a)},{default:t(()=>[...l[80]||(l[80]=[r("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),e(v,{size:"small",type:"danger",onClick:k=>Nt(a)},{default:t(()=>[...l[81]||(l[81]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),e(Fl,{modelValue:Re.value,"onUpdate:modelValue":l[33]||(l[33]=a=>Re.value=a),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:t(()=>[e(v,{onClick:l[32]||(l[32]=a=>Re.value=!1)},{default:t(()=>[...l[82]||(l[82]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Dt},{default:t(()=>[...l[83]||(l[83]=[r("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(vl,{model:u.value,"label-width":"100px"},{default:t(()=>[e(D,{label:"ÂêçÁß∞"},{default:t(()=>[e(j,{modelValue:u.value.name,"onUpdate:modelValue":l[27]||(l[27]=a=>u.value.name=a)},null,8,["modelValue"])]),_:1}),e(D,{label:"Cron Ë°®ËææÂºè"},{default:t(()=>[e(j,{modelValue:u.value.expr,"onUpdate:modelValue":l[28]||(l[28]=a=>u.value.expr=a),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),e(D,{label:"Êó∂Âå∫"},{default:t(()=>[e(Ae,{modelValue:u.value.tz,"onUpdate:modelValue":l[29]||(l[29]=a=>u.value.tz=a)},{default:t(()=>[e(M,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(M,{label:"UTC",value:"UTC"}),e(M,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),e(D,{label:"Ê∂àÊÅØ"},{default:t(()=>[e(j,{modelValue:u.value.message,"onUpdate:modelValue":l[30]||(l[30]=a=>u.value.message=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(D,{label:"ÂêØÁî®"},{default:t(()=>[e(xl,{modelValue:u.value.enabled,"onUpdate:modelValue":l[31]||(l[31]=a=>u.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),e(Ue,{label:"Ê∏†ÈÅì",name:"channels"},{default:t(()=>[s("div",Ns,[e(Z,{type:"info",size:"small"},{default:t(()=>[...l[84]||(l[84]=[r("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),e(v,{type:"primary",size:"small",onClick:wt},{default:t(()=>[e(ee,null,{default:t(()=>[e(B(Nl))]),_:1}),l[85]||(l[85]=r(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(i(!0),f(E,null,le(he.value,a=>(i(),f("div",{key:a.id,class:"channel-card"},[s("div",Bs,[s("div",Rs,[e(S,{size:"small",style:{"margin-right":"8px"}},{default:t(()=>[r(p(a.type),1)]),_:2},1024),s("span",Es,p(a.name),1),a.config?.botName?(i(),f("span",Ks,"@"+p(a.config.botName),1)):C("",!0),e(S,{type:a.status==="ok"?"success":a.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:t(()=>[r(p(a.status==="ok"?"‚úì Ê≠£Â∏∏":a.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),s("div",Ps,[e(xl,{modelValue:a.enabled,"onUpdate:modelValue":k=>a.enabled=k,size:"small",onChange:ht,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),e(v,{size:"small",onClick:k=>Ct(a),loading:Rl.value===a.id},{default:t(()=>[...l[86]||(l[86]=[r("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),e(v,{size:"small",onClick:k=>bt(a)},{default:t(()=>[...l[87]||(l[87]=[r("ÁºñËæë",-1)])]),_:1},8,["onClick"]),e(v,{size:"small",type:"danger",plain:"",onClick:k=>xt(a)},{default:t(()=>[...l[88]||(l[88]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),a.type==="web"?(i(),f("div",js,[s("div",Ws,[l[90]||(l[90]=s("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),s("span",Os,[e(Ot,{href:dl(B(g),a.id),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:t(()=>[r(p(dl(B(g),a.id)),1)]),_:2},1032,["href"]),e(v,{size:"small",link:"",style:{"margin-left":"8px"},onClick:k=>nt(dl(B(g),a.id))},{default:t(()=>[...l[89]||(l[89]=[r("Â§çÂà∂",-1)])]),_:1},8,["onClick"])])]),s("div",Hs,[l[91]||(l[91]=s("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),s("span",Ys,[e(S,{size:"small",type:a.config?.password?"warning":"info",effect:"plain"},{default:t(()=>[r(p(a.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):C("",!0),a.type==="telegram"?(i(),f("div",qs,[s("div",Js,[l[93]||(l[93]=s("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),s("span",Xs,[a.allowedFromUsers?.length?(i(!0),f(E,{key:0},le(a.allowedFromUsers,k=>(i(),x(S,{key:k.id,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Gl=>st(a.id,k.id)},{default:t(()=>[r(p(k.username?"@"+k.username:k.firstName||String(k.id))+" ",1),s("span",Gs,"("+p(k.id)+")",1)]),_:2},1032,["onClose"]))),128)):a.config?.allowedFrom?(i(!0),f(E,{key:1},le(a.config.allowedFrom.split(","),k=>(i(),x(S,{key:k,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Gl=>st(a.id,Number(k.trim()))},{default:t(()=>[r(p(k.trim()),1)]),_:2},1032,["onClose"]))),128)):(i(),x(Z,{key:2,type:"warning",size:"small"},{default:t(()=>[...l[92]||(l[92]=[r("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),s("div",Qs,[s("div",{class:"pending-section-header",onClick:k=>$t(a.id)},[l[95]||(l[95]=s("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),e(rt,{value:(cl.value[a.id]||[]).length,hidden:!(cl.value[a.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),e(v,{size:"small",link:"",onClick:qe(k=>Al(a.id),["stop"]),style:{"margin-left":"8px"}},{default:t(()=>[...l[94]||(l[94]=[r("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),e(ee,{style:Xe([{"margin-left":"4px",transition:"transform 0.2s"},{transform:wl.value===a.id?"rotate(180deg)":""}])},{default:t(()=>[e(B(ia))]),_:1},8,["style"])],8,Zs),wl.value===a.id?(i(),f("div",eo,[jl.value[a.id]?(i(),f("div",lo,[e(Z,{type:"info",size:"small"},{default:t(()=>[...l[96]||(l[96]=[r("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(cl.value[a.id]||[]).length?(i(!0),f(E,{key:1},le(cl.value[a.id],k=>(i(),f("div",{key:k.id,class:"pending-user-row"},[s("div",to,[s("span",ao,p(k.firstName||"Êú™Áü•"),1),k.username?(i(),f("span",no,"@"+p(k.username),1)):C("",!0),s("span",so,"ID: "+p(k.id),1),e(Z,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[r(p(de(k.lastSeen)),1)]),_:2},1024)]),s("div",oo,[e(v,{size:"small",type:"success",plain:"",onClick:Gl=>Vt(a.id,k.id),loading:Wl.value===`${a.id}-${k.id}`},{default:t(()=>[...l[97]||(l[97]=[r("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),e(v,{size:"small",type:"danger",plain:"",onClick:Gl=>zt(a.id,k.id)},{default:t(()=>[...l[98]||(l[98]=[r("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(i(),f("div",io," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):C("",!0)])])):C("",!0)]))),128)),!_l.value&&!he.value.length?(i(),x(Jl,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):C("",!0),e(Fl,{modelValue:He.value,"onUpdate:modelValue":l[44]||(l[44]=a=>He.value=a),title:T.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:t(()=>[e(v,{onClick:l[43]||(l[43]=a=>He.value=!1)},{default:t(()=>[...l[108]||(l[108]=[r("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:kt,loading:Le.value},{default:t(()=>[...l[109]||(l[109]=[r("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(vl,{model:b.value,"label-width":"120px"},{default:t(()=>[e(D,{label:"Á±ªÂûã",required:""},{default:t(()=>[e(Ae,{modelValue:b.value.type,"onUpdate:modelValue":l[34]||(l[34]=a=>b.value.type=a),style:{width:"100%"}},{default:t(()=>[e(M,{label:"Telegram",value:"telegram"}),e(M,{label:"Web ËÅäÂ§©È°µ",value:"web"}),e(M,{label:"iMessage",value:"imessage"}),e(M,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),e(D,{label:"ÂêçÁß∞",required:""},{default:t(()=>[e(j,{modelValue:b.value.name,"onUpdate:modelValue":l[35]||(l[35]=a=>b.value.name=a),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),b.value.type==="telegram"?(i(),f(E,{key:0},[e(D,{label:"Bot Token",required:""},{default:t(()=>[s("div",uo,[s("div",ro,[e(j,{modelValue:b.value.botToken,"onUpdate:modelValue":l[36]||(l[36]=a=>b.value.botToken=a),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ",style:{flex:"1"},status:R.value.status==="error"?"error":R.value.status==="ok"?"success":""},null,8,["modelValue","status"]),e(v,{size:"default",loading:R.value.loading,type:R.value.status==="ok"?"success":R.value.status==="error"?"danger":"default",onClick:at,disabled:!b.value.botToken||Kl(b.value.botToken)},{default:t(()=>[...l[99]||(l[99]=[r("È™åËØÅ",-1)])]),_:1},8,["loading","type","disabled"])]),R.value.loading?(i(),f("div",co,[e(ee,{class:"is-loading"},{default:t(()=>[e(B(Ql))]),_:1}),l[100]||(l[100]=r(" Ê≠£Âú®È™åËØÅ Token‚Ä¶ ",-1))])):R.value.status==="ok"?(i(),f("div",vo,[e(ee,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Ht)]),_:1}),l[101]||(l[101]=r("Token ÊúâÊïàÔºåBot ÂêçÁß∞Ôºö",-1)),s("b",null,"@"+p(R.value.botName),1)])):R.value.status==="duplicate"?(i(),f("div",fo,[e(ee,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Yt)]),_:1}),l[102]||(l[102]=r("Ê≠§ Token Â∑≤Ë¢´ÊàêÂëò„Äå",-1)),s("b",null,p(R.value.usedBy),1),r("„ÄçÁöÑÊ∏†ÈÅì„Äå"+p(R.value.usedByCh)+"„Äç‰ΩøÁî® ",1)])):R.value.status==="error"?(i(),f("div",po,[e(ee,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(qt)]),_:1}),r(p(R.value.error),1)])):(i(),f("div",mo,[e(Z,{type:"info",size:"small"},{default:t(()=>[e(ee,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(vt)]),_:1}),l[103]||(l[103]=r("ËæìÂÖ•ÂÆåÊàêÂêéËá™Âä®È™åËØÅÔºå‰πüÂèØÁÇπÂè≥‰æß„ÄåÈ™åËØÅ„ÄçÊåâÈíÆÊâãÂä®Ëß¶Âèë",-1))]),_:1})]))])]),_:1}),e(D,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:t(()=>[e(j,{modelValue:b.value.allowedFrom,"onUpdate:modelValue":l[37]||(l[37]=a=>b.value.allowedFrom=a),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),e(Z,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[e(ee,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(vt)]),_:1}),l[104]||(l[104]=r("ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1))]),_:1})]),_:1})],64)):C("",!0),b.value.type==="web"?(i(),f(E,{key:1},[T.value?(i(),x(D,{key:0,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[s("div",yo,[e(ee,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(ft)]),_:1}),s("span",go,p(dl(B(g),T.value)),1),e(v,{size:"small",link:"",onClick:l[38]||(l[38]=a=>nt(dl(B(g),T.value)))},{default:t(()=>[...l[105]||(l[105]=[r("Â§çÂà∂",-1)])]),_:1})])]),_:1})):C("",!0),T.value?C("",!0):(i(),x(D,{key:1,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[s("div",_o,[e(ee,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(ft)]),_:1}),s("span",wo,p(dl(B(g),ne.value)),1),e(S,{size:"small",type:"info",effect:"plain"},{default:t(()=>[...l[106]||(l[106]=[r("‰øùÂ≠òÂêéÁîüÊïà",-1)])]),_:1})]),e(Z,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...l[107]||(l[107]=[r(" ÊØè‰∏™ Web Ê∏†ÈÅìÊúâÁã¨Á´ãÈìæÊé•ÔºåÂèØÂêåÊó∂ÂºÄÊîæÂ§ö‰∏™ÂÖ•Âè£ ",-1)])]),_:1})]),_:1})),e(D,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:t(()=>[e(j,{modelValue:b.value.webPassword,"onUpdate:modelValue":l[39]||(l[39]=a=>b.value.webPassword=a),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),e(D,{label:"Ê¨¢ËøéËØ≠"},{default:t(()=>[e(j,{modelValue:b.value.webWelcome,"onUpdate:modelValue":l[40]||(l[40]=a=>b.value.webWelcome=a),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),e(D,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:t(()=>[e(j,{modelValue:b.value.webTitle,"onUpdate:modelValue":l[41]||(l[41]=a=>b.value.webTitle=a),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):C("",!0),e(D,{label:"ÂêØÁî®"},{default:t(()=>[e(xl,{modelValue:b.value.enabled,"onUpdate:modelValue":l[42]||(l[42]=a=>b.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(Ue,{label:"ÁéØÂ¢ÉÂèòÈáè",name:"env"},{default:t(()=>[s("div",bo,[l[113]||(l[113]=s("div",{style:{"margin-bottom":"16px"}},[s("h3",{style:{margin:"0 0 8px 0","font-size":"15px"}},"ÁéØÂ¢ÉÂèòÈáè"),s("p",{style:{margin:"0",color:"#666","font-size":"13px"}},[r(" ÈÖçÁΩÆÊ≠§ AI ÊàêÂëòÂú®ÊâßË°å exec ÂëΩ‰ª§Êó∂ÂèØÁî®ÁöÑÁéØÂ¢ÉÂèòÈáèÔºå‰æãÂ¶Ç GITHUB_TOKEN„ÄÅGIT_AUTHOR_NAME Á≠â„ÄÇ"),s("br"),r(" Ëøô‰∫õÂèòÈáè‰ºöÊ≥®ÂÖ•Âà∞ bash Â∑•ÂÖ∑ÁöÑÊâßË°åÁéØÂ¢É‰∏≠Ôºå"),s("strong",null,"‰∏çÂèóÁ≥ªÁªüÈªòËÆ§ÁöÑ token ËøáÊª§ÂΩ±Âìç"),r("„ÄÇ ")])],-1)),s("div",ko,[e(j,{modelValue:ce.value,"onUpdate:modelValue":l[45]||(l[45]=a=>ce.value=a),placeholder:"KEYÔºàÂ¶Ç GITHUB_TOKENÔºâ",style:{width:"220px","font-family":"monospace"},size:"small",onKeyup:Je(Te,["enter"])},null,8,["modelValue"]),e(j,{modelValue:me.value,"onUpdate:modelValue":l[46]||(l[46]=a=>me.value=a),placeholder:"VALUE",style:{flex:"1","font-family":"monospace"},size:"small",type:"password","show-password":"",onKeyup:Je(Te,["enter"])},null,8,["modelValue"]),e(v,{size:"small",type:"primary",onClick:Te,disabled:!ce.value.trim()},{default:t(()=>[...l[110]||(l[110]=[r(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled"])]),e(hl,{data:H.value,size:"small",style:{width:"100%","margin-bottom":"16px"},"empty-text":"ÊöÇÊó†ÁéØÂ¢ÉÂèòÈáè"},{default:t(()=>[e(W,{label:"KEY","min-width":"200"},{default:t(({row:a})=>[s("code",ho,p(a.key),1)]),_:1}),e(W,{label:"VALUE","min-width":"200"},{default:t(({row:a})=>[e(j,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,type:"password","show-password":"",size:"small",style:{"font-family":"monospace"},placeholder:"ÔºàÊú™ËÆæÁΩÆÔºâ"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(W,{label:"Êìç‰Ωú",width:"80",fixed:"right"},{default:t(({$index:a})=>[e(v,{size:"small",type:"danger",link:"",onClick:k=>al(a)},{default:t(()=>[...l[111]||(l[111]=[r("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(v,{type:"primary",size:"small",loading:ze.value,onClick:We},{default:t(()=>[...l[112]||(l[112]=[r(" ‰øùÂ≠òÁéØÂ¢ÉÂèòÈáè ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),So=tt(Co,[["__scopeId","data-v-eda6f391"]]);export{So as default};
