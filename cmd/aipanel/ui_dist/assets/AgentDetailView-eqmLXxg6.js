import{d as la,h as aa,E as f,i as w,w as t,B as ta,g as d,r as c,o as u,a as l,f as i,k as U,y as na,t as m,e as s,z as he,m as sa,c as v,F as $,l as L,q as oa,j as h,n as ze,C as ia,D as ua,G as da,H as ra,b as ma,I as fa,J as pa}from"./index-Zphxv18c.js";import{b as He,f as ue,g as de,h as re,i as va,e as Te,r as dl,j as S}from"./index-CTYBXBE4.js";import{A as ya}from"./AiChat-DqSzuDn4.js";import{_ as ca}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ga={class:"header-left"},_a={class:"chat-layout"},ba={class:"session-sidebar"},wa={class:"session-sidebar-header"},ka={class:"session-list"},Ca=["onClick"],xa={class:"session-item-title"},Va={class:"session-item-meta"},ha={key:0,class:"session-empty"},za={class:"at-panel"},Ta={key:0,class:"at-form"},Ua={class:"chat-area"},$a={style:{display:"flex","align-items":"center",gap:"8px"}},Aa={style:{"font-weight":"600"}},Fa={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},Ma={style:{display:"flex","align-items":"center",gap:"8px"}},Da={style:{"font-size":"13px"}},Na={style:{"font-size":"13px",color:"#606266"}},Sa={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},Ia={key:1,class:"relations-list"},Ea={class:"relation-info"},Ba={class:"relation-name"},La={class:"relation-tags"},Pa={class:"relation-desc"},Ra={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Wa={style:{display:"flex",gap:"8px","margin-top":"4px"}},ja={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Oa={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},Ya={style:{"font-size":"12px"}},qa={style:{"font-size":"12px",color:"#606266"}},Ha={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},Ja={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},Ga={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ka={style:{"margin-top":"8px",display:"flex",gap:"8px","align-items":"center"}},Qa={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Xa={class:"channel-card-header"},Za={class:"channel-card-left"},et={class:"channel-card-name"},lt={key:0,class:"channel-bot-username"},at={class:"channel-card-actions"},tt={key:0,class:"channel-card-body"},nt={class:"channel-info-row"},st={class:"channel-info-value"},ot={class:"channel-info-row"},it={class:"channel-info-value"},ut={key:1,class:"channel-card-body"},dt={class:"channel-info-row"},rt={class:"channel-info-value"},mt={class:"pending-section"},ft=["onClick"],pt={key:0,class:"pending-list"},vt={key:0,style:{"text-align":"center",padding:"12px"}},yt={class:"pending-user-info"},ct={class:"pending-user-name"},gt={key:0,class:"pending-user-username"},_t={class:"pending-user-id"},bt={class:"pending-user-actions"},wt={key:2,class:"pending-empty"},kt=la({__name:"AgentDetailView",setup(Ct){const Ue=ta(),p=Ue.params.id,j=d(null),$e=d("chat"),I=d(),me=d([]),fe=d(!1),O=d();async function Je(){fe.value=!0;try{const n=await va.list({agentId:p,limit:50});me.value=n.data.sessions}catch{}finally{fe.value=!1}}function rl(n){O.value=n.id,I.value?.resumeSession(n.id)}function ml(){O.value=void 0,I.value?.startNewSession()}function fl(n){O.value=n,setTimeout(Je,500)}function Ge(n){if(!n)return"";const e=Date.now()-n;return e<6e4?"ÂàöÂàö":e<36e5?`${Math.floor(e/6e4)}ÂàÜÂâç`:e<864e5?`${Math.floor(e/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(e/864e5)}Â§©Ââç`}const K=d(!1),Q=d(""),X=d(""),Ae=d(!1),E=d([]);function pl(){K.value=!K.value,K.value&&!E.value.length&&Ke()}async function Ke(){try{const n=await He.list();E.value=n.data.filter(e=>e.id!==p)}catch{E.value=[]}}function vl(n){const e=E.value.find(o=>o.id===n);e&&I.value?.fillInput(`@${e.name}: `)}async function yl(){const n=Q.value,e=X.value.trim();if(!n||!e)return;const g=E.value.find(P=>P.id===n)?.name??n;Ae.value=!0;const T={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${g}Ôºö
${e}`};I.value?.appendMessage(T);try{const _=(await He.message(n,e,p)).data.response,N={role:"assistant",text:`‚Üê **${g}** ÂõûÂ§çÔºö

${_}`};I.value?.appendMessage(N),X.value="",Q.value="",K.value=!1,f.success(`${g} Â∑≤ÂõûÂ§ç`)}catch(P){const _={role:"system",text:`‚ùå ËΩ¨ÂèëÂ§±Ë¥•Ôºö${P.response?.data?.error??P.message??"ÁΩëÁªúÈîôËØØ"}`};I.value?.appendMessage(_),f.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{Ae.value=!1}}const pe=d(""),ve=d(""),z=d({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),Fe=d(!1),Me=d(!1);async function cl(){try{const n=await Te.getConfig(p);z.value=n.data,De()}catch{}}async function Qe(){Fe.value=!0;try{const n=await Te.setConfig(p,z.value);z.value=n.data,f.success(z.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{f.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Fe.value=!1}}async function gl(){Me.value=!0;try{await Te.consolidate(p),f.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(De,1e4)}catch{f.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{Me.value=!1}}const ye=d([]),ce=d(!1);async function De(){ce.value=!0;try{const n=await Te.runLog(p);ye.value=n.data||[]}catch{ye.value=[]}finally{ce.value=!1}}const ge=d([]),Y=d(""),q=d(""),Ne=d(!1),Se=d([]),Z=d(!1),_e=d(""),ee=d(!1),be=d(""),Xe=d([]),H=d(""),le=d(""),we=d(null),F=d([]),Ie=d(!1),C=d({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function _l(){try{const n=await dl.get(p);F.value=n.data.parsed||[]}catch{F.value=[]}}function bl(n){const e=E.value.find(o=>o.id===n);C.value.agentName=e?e.name:n}async function wl(){if(!C.value.agentId)return;if(F.value.find(e=>e.agentId===C.value.agentId)){f.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}F.value.push({...C.value}),C.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await Ze()}async function kl(n){F.value.splice(n,1),await Ze()}function Cl(){if(F.value.length===0)return"";const n=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,e=F.value.map(o=>`| ${o.agentId} | ${o.agentName} | ${o.relationType} | ${o.strength} | ${o.desc||""} |`).join(`
`);return n+`
`+e}async function Ze(){Ie.value=!0;try{await dl.put(p,Cl()),f.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{f.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ie.value=!1}}function Ee(n){const e=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let o=0;for(let g=0;g<n.length;g++)o=n.charCodeAt(g)+((o<<5)-o);return e[Math.abs(o)%e.length]??"#409EFF"}function el(n){return n==="‰∏äÁ∫ß"?"danger":n==="‰∏ãÁ∫ß"?"":n==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function ll(n){return n==="Ê†∏ÂøÉ"?"danger":n==="Â∏∏Áî®"?"warning":"info"}const al=d([]),ae=d(!1),x=d({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function xl(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function Vl(n){return n==="running"?"ËøêË°å‰∏≠":n==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function tl(n){return n?n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB":"0 B"}function hl(n){return new Date(n).toLocaleString()}function nl(n){return n?new Date(n).toLocaleString():""}const D=d([]),Be=d(!1),J=d(!1),te=d(""),Le=d(!1),Pe=d(""),r=d({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""});function Re(n){return`${window.location.origin}/chat/${n}`}function zl(n){navigator.clipboard.writeText(n).then(()=>f.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function ke(){Be.value=!0;try{const n=await S.list(p);D.value=n.data||[]}catch{D.value=[]}finally{Be.value=!1}}function Tl(){te.value="",r.value={type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},J.value=!0}function Ul(n){te.value=n.id,r.value={type:n.type,name:n.name,enabled:n.enabled,botToken:n.config?.botToken||"",allowedFrom:n.config?.allowedFrom||"",webPassword:"",webWelcome:n.config?.welcomeMsg||"",webTitle:n.config?.title||""},J.value=!0}async function $l(){if(!r.value.name||!r.value.type){f.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}Le.value=!0;try{const n={};if(r.value.type==="telegram"?(r.value.botToken&&(n.botToken=r.value.botToken),r.value.allowedFrom&&(n.allowedFrom=r.value.allowedFrom)):r.value.type==="web"&&(r.value.webPassword&&(n.password=r.value.webPassword),r.value.webWelcome&&(n.welcomeMsg=r.value.webWelcome),r.value.webTitle&&(n.title=r.value.webTitle)),te.value){const e=D.value.map(o=>o.id!==te.value?o:{...o,name:r.value.name,type:r.value.type,enabled:r.value.enabled,config:{...o.config,...n}});await S.set(p,e)}else{const e={id:r.value.type+"-"+Date.now().toString(36),name:r.value.name,type:r.value.type,enabled:r.value.enabled,config:n,status:"untested"};await S.set(p,[...D.value,e])}f.success(r.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),J.value=!1,await ke()}catch(n){f.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Le.value=!1}}async function Al(){try{await S.set(p,D.value)}catch{f.error("‰øùÂ≠òÂ§±Ë¥•")}}async function Fl(n){const e=D.value.filter(o=>o.id!==n.id);try{await S.set(p,e),D.value=e,f.success("Â∑≤Âà†Èô§")}catch{f.error("Âà†Èô§Â§±Ë¥•")}}async function Ml(n){Pe.value=n.id;try{const e=await S.test(p,n.id);e.data.valid?f.success(e.data.botName?`ÊµãËØïÊàêÂäü (@${e.data.botName})`:"ÊµãËØïÊàêÂäü"):f.error(e.data.error||"ÊµãËØïÂ§±Ë¥•"),await ke()}catch{f.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{Pe.value=""}}const G=d({}),We=d({}),ne=d(""),je=d("");async function Ce(n){We.value[n]=!0;try{const e=await S.listPending(p,n);G.value[n]=e.data||[]}catch{G.value[n]=[]}finally{We.value[n]=!1}}function Dl(n){ne.value===n?ne.value="":(ne.value=n,Ce(n))}async function Nl(n,e){je.value=`${n}-${e}`;try{await S.allowUser(p,n,e),f.success(`Áî®Êà∑ ${e} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Ce(n),await ke()}catch{f.error("Êìç‰ΩúÂ§±Ë¥•")}finally{je.value=""}}async function Sl(n,e){try{await S.dismissUser(p,n,e),f.success("Â∑≤ÂøΩÁï•"),await Ce(n)}catch{f.error("Êìç‰ΩúÂ§±Ë¥•")}}aa(async()=>{try{const o=await He.get(p);j.value=o.data}catch{f.error("Âä†ËΩΩ Agent Â§±Ë¥•")}Il(),_l(),Ke(),cl(),Rl(),xe(),ke(),await Je();const n=Ue.query.tab;n&&($e.value=n);const e=Ue.query.resumeSession;e&&(O.value=e,await new Promise(g=>setTimeout(g,100)),I.value?.resumeSession(e),me.value.find(g=>g.id===e)||(O.value=e))});async function Il(){try{const[n,e]=await Promise.all([ue.read(p,"IDENTITY.md"),ue.read(p,"SOUL.md")]);pe.value=n.data?.content||"",ve.value=e.data?.content||""}catch{}se()}async function Oe(n,e){try{await ue.write(p,n,e),f.success(`${n} Â∑≤‰øùÂ≠ò`)}catch{f.error(`‰øùÂ≠ò ${n} Â§±Ë¥•`)}}async function se(){try{const n=await de.tree(p);ge.value=n.data||[]}catch{ge.value=[]}}async function El(n){if(!n.isDir){Y.value=n.path,Se.value=n.path.split("/");try{const e=await de.readFile(p,n.path);q.value=e.data?.content||""}catch{q.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function Bl(){if(Y.value){Ne.value=!0;try{await de.writeFile(p,Y.value,q.value),f.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),se()}catch{f.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ne.value=!1}}}async function Ll(){const n=_e.value.trim();if(!n){f.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await de.writeFile(p,n,`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`),f.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),Z.value=!1,_e.value="",se(),Y.value=n,Se.value=n.split("/"),q.value=`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`}catch{f.error("ÂàõÂª∫Â§±Ë¥•")}}async function Pl(){const n=be.value.trim();if(!n){f.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await de.dailyLog(p,n),f.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),ee.value=!1,be.value="",se()}catch{f.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Rl(){try{const n=await ue.read(p,"/");Array.isArray(n.data)&&(Xe.value=n.data.map(e=>({name:e.name,isDir:e.isDir,size:e.size,modTime:e.modTime,path:e.name})))}catch{}}async function Wl(n){if(!n.isDir){H.value=n.path||n.name,we.value=n;try{const e=await ue.read(p,H.value);le.value=e.data?.content||""}catch{le.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function jl(){H.value&&await Oe(H.value,le.value)}async function xe(){try{const n=await re.list();al.value=n.data||[]}catch{}}async function Ol(){try{await re.create({name:x.value.name,enabled:x.value.enabled,schedule:{kind:"cron",expr:x.value.expr,tz:x.value.tz},payload:{kind:"agentTurn",message:x.value.message},delivery:{mode:"announce"}}),f.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),ae.value=!1,xe()}catch(n){f.error(n.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Yl(n){try{await re.update(n.id,n)}catch{f.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function sl(n){try{await re.run(n.id),f.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(xe,2e3)}catch{f.error("ËøêË°åÂ§±Ë¥•")}}async function ql(n){try{await re.delete(n.id),f.success("Â∑≤Âà†Èô§"),xe()}catch{f.error("Âà†Èô§Â§±Ë¥•")}}return(n,e)=>{const o=c("el-button"),g=c("el-tag"),T=c("el-text"),P=c("el-header"),_=c("el-option"),N=c("el-select"),k=c("el-input"),R=c("el-tab-pane"),M=c("el-card"),V=c("el-col"),W=c("el-row"),b=c("el-form-item"),oe=c("el-form"),ol=c("el-badge"),A=c("el-table-column"),Ye=c("el-table"),ie=c("el-switch"),Hl=c("el-input-number"),B=c("el-icon"),il=c("el-tree"),qe=c("el-empty"),ul=c("el-breadcrumb-item"),Jl=c("el-breadcrumb"),Ve=c("el-dialog"),Gl=c("el-link"),Kl=c("el-tabs"),Ql=c("el-main"),Xl=c("el-container"),Zl=pa("loading");return u(),w(Xl,{class:"agent-detail"},{default:t(()=>[l(P,{class:"detail-header"},{default:t(()=>[i("div",ga,[l(o,{icon:U(na),onClick:e[0]||(e[0]=a=>n.$router.push("/agents")),circle:""},null,8,["icon"]),i("h2",null,m(j.value?.name||"..."),1),l(g,{type:xl(j.value?.status)},{default:t(()=>[s(m(Vl(j.value?.status)),1)]),_:1},8,["type"])]),l(T,{type:"info"},{default:t(()=>[s(m(j.value?.model),1)]),_:1})]),_:1}),l(Ql,null,{default:t(()=>[l(Kl,{modelValue:$e.value,"onUpdate:modelValue":e[44]||(e[44]=a=>$e.value=a),type:"border-card"},{default:t(()=>[l(R,{label:"ÂØπËØù",name:"chat"},{default:t(()=>[i("div",_a,[i("div",ba,[i("div",wa,[e[46]||(e[46]=i("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),l(o,{size:"small",type:"primary",plain:"",onClick:ml,icon:U(he)},{default:t(()=>[...e[45]||(e[45]=[s("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),sa((u(),v("div",ka,[(u(!0),v($,null,L(me.value,a=>(u(),v("div",{key:a.id,class:oa(["session-item",{active:O.value===a.id}]),onClick:y=>rl(a)},[i("div",xa,m(a.title||"Êñ∞ÂØπËØù"),1),i("div",Va,[i("span",null,m(Ge(a.lastAt)),1),l(g,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[s(m(a.messageCount)+" Êù° ",1)]),_:2},1024),a.tokenEstimate>6e4?(u(),w(g,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[s("~"+m(Math.round(a.tokenEstimate/1e3))+"k",1)]),_:2},1024)):h("",!0)])],10,Ca))),128)),!fe.value&&!me.value.length?(u(),v("div",ha," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):h("",!0)])),[[Zl,fe.value]]),i("div",za,[l(o,{size:"small",plain:"",class:"at-toggle-btn",onClick:pl},{default:t(()=>[...e[47]||(e[47]=[i("span",{class:"at-icon"},"@",-1),s(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),K.value?(u(),v("div",Ta,[l(N,{modelValue:Q.value,"onUpdate:modelValue":e[1]||(e[1]=a=>Q.value=a),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:vl},{default:t(()=>[(u(!0),v($,null,L(E.value,a=>(u(),w(_,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(k,{modelValue:X.value,"onUpdate:modelValue":e[2]||(e[2]=a=>X.value=a),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),l(o,{type:"primary",size:"small",style:{width:"100%"},loading:Ae.value,disabled:!Q.value||!X.value.trim(),onClick:yl},{default:t(()=>[...e[48]||(e[48]=[s(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):h("",!0)])]),i("div",Ua,[l(ya,{ref_key:"aiChatRef",ref:I,"agent-id":U(p),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${j.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:fl},null,8,["agent-id","welcome-message"])])])]),_:1}),l(R,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:t(()=>[l(W,{gutter:20},{default:t(()=>[l(V,{span:12},{default:t(()=>[l(M,{header:"IDENTITY.md"},{default:t(()=>[l(k,{modelValue:pe.value,"onUpdate:modelValue":e[3]||(e[3]=a=>pe.value=a),type:"textarea",rows:15,onBlur:e[4]||(e[4]=a=>Oe("IDENTITY.md",pe.value))},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{span:12},{default:t(()=>[l(M,{header:"SOUL.md"},{default:t(()=>[l(k,{modelValue:ve.value,"onUpdate:modelValue":e[5]||(e[5]=a=>ve.value=a),type:"textarea",rows:15,onBlur:e[6]||(e[6]=a=>Oe("SOUL.md",ve.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(R,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:t(()=>[l(W,{gutter:20},{default:t(()=>[l(V,{span:14},{default:t(()=>[l(M,{style:{"margin-bottom":"16px"}},{header:t(()=>[...e[49]||(e[49]=[i("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:t(()=>[l(oe,{model:C.value,"label-position":"top",size:"default"},{default:t(()=>[l(W,{gutter:12},{default:t(()=>[l(V,{span:10},{default:t(()=>[l(b,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:t(()=>[l(N,{modelValue:C.value.agentId,"onUpdate:modelValue":e[7]||(e[7]=a=>C.value.agentId=a),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:bl},{default:t(()=>[(u(!0),v($,null,L(E.value,a=>(u(),w(_,{key:a.id,label:a.name,value:a.id},{default:t(()=>[i("div",$a,[i("div",{style:ze([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:Ee(a.id)}])},m(a.name.charAt(0)),5),i("span",null,m(a.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(V,{span:7},{default:t(()=>[l(b,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:t(()=>[l(N,{modelValue:C.value.relationType,"onUpdate:modelValue":e[8]||(e[8]=a=>C.value.relationType=a),style:{width:"100%"}},{default:t(()=>[l(_,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),l(_,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),l(_,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),l(_,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(V,{span:7},{default:t(()=>[l(b,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:t(()=>[l(N,{modelValue:C.value.strength,"onUpdate:modelValue":e[9]||(e[9]=a=>C.value.strength=a),style:{width:"100%"}},{default:t(()=>[l(_,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),l(_,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),l(_,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(W,{gutter:12},{default:t(()=>[l(V,{span:18},{default:t(()=>[l(b,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:t(()=>[l(k,{modelValue:C.value.desc,"onUpdate:modelValue":e[10]||(e[10]=a=>C.value.desc=a),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{span:6},{default:t(()=>[l(b,{label:" "},{default:t(()=>[l(o,{type:"primary",style:{width:"100%"},disabled:!C.value.agentId||!C.value.relationType||!C.value.strength,loading:Ie.value,onClick:wl},{default:t(()=>[...e[50]||(e[50]=[s(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(M,null,{header:t(()=>[i("span",Aa,[e[51]||(e[51]=s("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),l(ol,{value:F.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:t(()=>[F.value.length===0?(u(),v("div",Fa," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(u(),w(Ye,{key:1,data:F.value,size:"small",style:{width:"100%"}},{default:t(()=>[l(A,{label:"ÊàêÂëò","min-width":"120"},{default:t(({row:a})=>[i("div",Ma,[i("div",{style:ze([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:Ee(a.agentId)}])},m(a.agentName.charAt(0)),5),i("span",Da,m(a.agentName),1)])]),_:1}),l(A,{label:"Á±ªÂûã",width:"100"},{default:t(({row:a})=>[l(g,{type:el(a.relationType),size:"small"},{default:t(()=>[s(m(a.relationType),1)]),_:2},1032,["type"])]),_:1}),l(A,{label:"Á®ãÂ∫¶",width:"80"},{default:t(({row:a})=>[l(g,{type:ll(a.strength),size:"small",effect:"plain"},{default:t(()=>[s(m(a.strength),1)]),_:2},1032,["type"])]),_:1}),l(A,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:t(({row:a})=>[i("span",Na,m(a.desc||"‚Äî"),1)]),_:1}),l(A,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:t(({$index:a})=>[l(o,{type:"danger",link:"",size:"small",onClick:y=>kl(a)},{default:t(()=>[...e[52]||(e[52]=[s("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),l(V,{span:10},{default:t(()=>[l(M,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:t(()=>[F.value.length===0?(u(),v("div",Sa," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(u(),v("div",Ia,[(u(!0),v($,null,L(F.value,a=>(u(),v("div",{key:a.agentId,class:"relation-card"},[i("div",{class:"relation-avatar",style:ze({background:Ee(a.agentId)})},m(a.agentName.charAt(0).toUpperCase()),5),i("div",Ea,[i("div",Ba,m(a.agentName),1),i("div",La,[l(g,{type:el(a.relationType),size:"small"},{default:t(()=>[s(m(a.relationType),1)]),_:2},1032,["type"]),l(g,{type:ll(a.strength),size:"small",effect:"plain"},{default:t(()=>[s(m(a.strength),1)]),_:2},1032,["type"])]),i("div",Pa,m(a.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),l(R,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:t(()=>[l(M,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[i("div",Ra,[e[53]||(e[53]=i("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),l(ie,{modelValue:z.value.enabled,"onUpdate:modelValue":e[11]||(e[11]=a=>z.value.enabled=a),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:Qe},null,8,["modelValue"])])]),default:t(()=>[l(oe,{model:z.value,"label-position":"top",size:"small",disabled:!z.value.enabled},{default:t(()=>[l(W,{gutter:16},{default:t(()=>[l(V,{span:6},{default:t(()=>[l(b,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:t(()=>[l(N,{modelValue:z.value.schedule,"onUpdate:modelValue":e[12]||(e[12]=a=>z.value.schedule=a),style:{width:"100%"}},{default:t(()=>[l(_,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),l(_,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),l(_,{label:"ÊØèÂ§©",value:"daily"}),l(_,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(V,{span:5},{default:t(()=>[l(b,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:t(()=>[l(Hl,{modelValue:z.value.keepTurns,"onUpdate:modelValue":e[13]||(e[13]=a=>z.value.keepTurns=a),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{span:13},{default:t(()=>[l(b,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:t(()=>[l(k,{modelValue:z.value.focusHint,"onUpdate:modelValue":e[14]||(e[14]=a=>z.value.focusHint=a),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i("div",Wa,[l(o,{type:"primary",size:"small",loading:Fe.value,onClick:Qe},{default:t(()=>[...e[54]||(e[54]=[s(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),l(o,{size:"small",loading:Me.value,onClick:gl},{default:t(()=>[...e[55]||(e[55]=[s(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),l(T,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:t(()=>[s(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+m(z.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),l(M,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[i("div",ja,[e[57]||(e[57]=i("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),l(o,{size:"small",text:"",onClick:De,loading:ce.value},{default:t(()=>[...e[56]||(e[56]=[s("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:t(()=>[ye.value.length===0&&!ce.value?(u(),v("div",Oa," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(u(),w(Ye,{key:1,data:ye.value.slice(0,20),size:"small"},{default:t(()=>[l(A,{label:"Êó∂Èó¥",width:"160"},{default:t(({row:a})=>[i("span",Ya,m(nl(a.timestamp)),1)]),_:1}),l(A,{label:"Áä∂ÊÄÅ",width:"72"},{default:t(({row:a})=>[l(g,{type:a.status==="ok"?"success":"danger",size:"small"},{default:t(()=>[s(m(a.status),1)]),_:2},1032,["type"])]),_:1}),l(A,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[i("span",qa,m(a.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),i("div",Ha,[l(o,{type:"primary",size:"small",onClick:e[15]||(e[15]=a=>Z.value=!0)},{default:t(()=>[l(B,null,{default:t(()=>[l(U(he))]),_:1}),e[58]||(e[58]=s(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),l(o,{size:"small",onClick:e[16]||(e[16]=a=>ee.value=!0)},{default:t(()=>[l(B,null,{default:t(()=>[l(U(ia))]),_:1}),e[59]||(e[59]=s(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),l(o,{size:"small",onClick:se},{default:t(()=>[l(B,null,{default:t(()=>[l(U(ua))]),_:1}),e[60]||(e[60]=s(" Âà∑Êñ∞ ",-1))]),_:1})]),l(W,{gutter:16},{default:t(()=>[l(V,{span:7},{default:t(()=>[l(M,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:t(()=>[l(il,{data:ge.value,props:{label:"name",children:"children",isLeaf:a=>!a.isDir},onNodeClick:El,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:t(({data:a})=>[i("span",Ja,[a.isDir?(u(),w(B,{key:0,style:{color:"#E6A23C"}},{default:t(()=>[l(U(da))]),_:1})):(u(),w(B,{key:1,style:{color:"#409EFF"}},{default:t(()=>[l(U(ra))]),_:1})),i("span",null,m(a.name),1),!a.isDir&&a.size?(u(),w(T,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:t(()=>[s(m(tl(a.size)),1)]),_:2},1024)):h("",!0)])]),_:1},8,["data","props"]),ge.value.length===0?(u(),w(qe,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):h("",!0)]),_:1})]),_:1}),l(V,{span:17},{default:t(()=>[l(M,{shadow:"hover"},{header:t(()=>[i("div",Ga,[l(Jl,{separator:"/"},{default:t(()=>[l(ul,null,{default:t(()=>[...e[61]||(e[61]=[s("memory",-1)])]),_:1}),(u(!0),v($,null,L(Se.value,(a,y)=>(u(),w(ul,{key:y},{default:t(()=>[s(m(a),1)]),_:2},1024))),128))]),_:1}),Y.value?(u(),w(o,{key:0,type:"primary",size:"small",onClick:Bl,loading:Ne.value},{default:t(()=>[...e[62]||(e[62]=[s("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):h("",!0)])]),default:t(()=>[Y.value?(u(),w(k,{key:0,modelValue:q.value,"onUpdate:modelValue":e[17]||(e[17]=a=>q.value=a),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(u(),w(qe,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),l(Ve,{modelValue:Z.value,"onUpdate:modelValue":e[20]||(e[20]=a=>Z.value=a),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:t(()=>[l(o,{onClick:e[19]||(e[19]=a=>Z.value=!1)},{default:t(()=>[...e[64]||(e[64]=[s("ÂèñÊ∂à",-1)])]),_:1}),l(o,{type:"primary",onClick:Ll},{default:t(()=>[...e[65]||(e[65]=[s("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[l(oe,{"label-width":"80px"},{default:t(()=>[l(b,{label:"Ë∑ØÂæÑ"},{default:t(()=>[l(k,{modelValue:_e.value,"onUpdate:modelValue":e[18]||(e[18]=a=>_e.value=a),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),l(T,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:t(()=>[...e[63]||(e[63]=[s("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Ve,{modelValue:ee.value,"onUpdate:modelValue":e[23]||(e[23]=a=>ee.value=a),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:t(()=>[l(o,{onClick:e[22]||(e[22]=a=>ee.value=!1)},{default:t(()=>[...e[66]||(e[66]=[s("ÂèñÊ∂à",-1)])]),_:1}),l(o,{type:"primary",onClick:Pl},{default:t(()=>[...e[67]||(e[67]=[s("Êèê‰∫§",-1)])]),_:1})]),default:t(()=>[l(k,{modelValue:be.value,"onUpdate:modelValue":e[21]||(e[21]=a=>be.value=a),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(R,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:t(()=>[l(W,{gutter:20},{default:t(()=>[l(V,{span:8},{default:t(()=>[l(M,{header:"Êñá‰ª∂ÂàóË°®"},{default:t(()=>[l(il,{data:Xe.value,props:{label:"name",children:"children"},onNodeClick:Wl,"highlight-current":"","default-expand-all":""},null,8,["data"])]),_:1})]),_:1}),l(V,{span:16},{default:t(()=>[l(M,{header:H.value||"ÈÄâÊã©Êñá‰ª∂Êü•Áúã"},{default:t(()=>[H.value?(u(),v($,{key:0},[l(k,{modelValue:le.value,"onUpdate:modelValue":e[24]||(e[24]=a=>le.value=a),type:"textarea",rows:20},null,8,["modelValue"]),i("div",Ka,[l(o,{type:"primary",onClick:jl},{default:t(()=>[...e[68]||(e[68]=[s("‰øùÂ≠ò",-1)])]),_:1}),we.value?(u(),w(T,{key:0,type:"info",size:"small"},{default:t(()=>[s(m(tl(we.value.size))+" ¬∑ "+m(hl(we.value.modTime)),1)]),_:1})):h("",!0)])],64)):h("",!0)]),_:1},8,["header"])]),_:1})]),_:1})]),_:1}),l(R,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:t(()=>[l(o,{type:"primary",onClick:e[25]||(e[25]=a=>ae.value=!0),style:{"margin-bottom":"16px"}},{default:t(()=>[l(B,null,{default:t(()=>[l(U(he))]),_:1}),e[69]||(e[69]=s(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),l(Ye,{data:al.value,stripe:""},{default:t(()=>[l(A,{prop:"name",label:"ÂêçÁß∞"}),l(A,{label:"Ë∞ÉÂ∫¶"},{default:t(({row:a})=>[s(m(a.schedule?.expr)+" ("+m(a.schedule?.tz)+")",1)]),_:1}),l(A,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:t(({row:a})=>[a.state?.lastRunAtMs?(u(),v($,{key:0},[l(g,{type:a.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:t(()=>[s(m(a.state?.lastStatus),1)]),_:2},1032,["type"]),l(T,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:t(()=>[s(m(nl(a.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(u(),w(T,{key:1,type:"info",size:"small"},{default:t(()=>[...e[70]||(e[70]=[s("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),l(A,{label:"ÂêØÁî®",width:"80"},{default:t(({row:a})=>[l(ie,{modelValue:a.enabled,"onUpdate:modelValue":y=>a.enabled=y,onChange:y=>Yl(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(A,{label:"Êìç‰Ωú",width:"220"},{default:t(({row:a})=>[a.payload?.message==="__MEMORY_CONSOLIDATE__"?(u(),v($,{key:0},[l(g,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:t(()=>[...e[71]||(e[71]=[s("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),l(o,{size:"small",onClick:y=>sl(a)},{default:t(()=>[...e[72]||(e[72]=[s("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(u(),v($,{key:1},[l(o,{size:"small",onClick:y=>sl(a)},{default:t(()=>[...e[73]||(e[73]=[s("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),l(o,{size:"small",type:"danger",onClick:y=>ql(a)},{default:t(()=>[...e[74]||(e[74]=[s("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),l(Ve,{modelValue:ae.value,"onUpdate:modelValue":e[32]||(e[32]=a=>ae.value=a),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:t(()=>[l(o,{onClick:e[31]||(e[31]=a=>ae.value=!1)},{default:t(()=>[...e[75]||(e[75]=[s("ÂèñÊ∂à",-1)])]),_:1}),l(o,{type:"primary",onClick:Ol},{default:t(()=>[...e[76]||(e[76]=[s("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[l(oe,{model:x.value,"label-width":"100px"},{default:t(()=>[l(b,{label:"ÂêçÁß∞"},{default:t(()=>[l(k,{modelValue:x.value.name,"onUpdate:modelValue":e[26]||(e[26]=a=>x.value.name=a)},null,8,["modelValue"])]),_:1}),l(b,{label:"Cron Ë°®ËææÂºè"},{default:t(()=>[l(k,{modelValue:x.value.expr,"onUpdate:modelValue":e[27]||(e[27]=a=>x.value.expr=a),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),l(b,{label:"Êó∂Âå∫"},{default:t(()=>[l(N,{modelValue:x.value.tz,"onUpdate:modelValue":e[28]||(e[28]=a=>x.value.tz=a)},{default:t(()=>[l(_,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),l(_,{label:"UTC",value:"UTC"}),l(_,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"Ê∂àÊÅØ"},{default:t(()=>[l(k,{modelValue:x.value.message,"onUpdate:modelValue":e[29]||(e[29]=a=>x.value.message=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),l(b,{label:"ÂêØÁî®"},{default:t(()=>[l(ie,{modelValue:x.value.enabled,"onUpdate:modelValue":e[30]||(e[30]=a=>x.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),l(R,{label:"Ê∏†ÈÅì",name:"channels"},{default:t(()=>[i("div",Qa,[l(T,{type:"info",size:"small"},{default:t(()=>[...e[77]||(e[77]=[s("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),l(o,{type:"primary",size:"small",onClick:Tl},{default:t(()=>[l(B,null,{default:t(()=>[l(U(he))]),_:1}),e[78]||(e[78]=s(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(u(!0),v($,null,L(D.value,a=>(u(),v("div",{key:a.id,class:"channel-card"},[i("div",Xa,[i("div",Za,[l(g,{size:"small",style:{"margin-right":"8px"}},{default:t(()=>[s(m(a.type),1)]),_:2},1024),i("span",et,m(a.name),1),a.config?.botName?(u(),v("span",lt,"@"+m(a.config.botName),1)):h("",!0),l(g,{type:a.status==="ok"?"success":a.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:t(()=>[s(m(a.status==="ok"?"‚úì Ê≠£Â∏∏":a.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),i("div",at,[l(ie,{modelValue:a.enabled,"onUpdate:modelValue":y=>a.enabled=y,size:"small",onChange:Al,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),l(o,{size:"small",onClick:y=>Ml(a),loading:Pe.value===a.id},{default:t(()=>[...e[79]||(e[79]=[s("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),l(o,{size:"small",onClick:y=>Ul(a)},{default:t(()=>[...e[80]||(e[80]=[s("ÁºñËæë",-1)])]),_:1},8,["onClick"]),l(o,{size:"small",type:"danger",plain:"",onClick:y=>Fl(a)},{default:t(()=>[...e[81]||(e[81]=[s("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),a.type==="web"?(u(),v("div",tt,[i("div",nt,[e[83]||(e[83]=i("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),i("span",st,[l(Gl,{href:Re(U(p)),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:t(()=>[s(m(Re(U(p))),1)]),_:1},8,["href"]),l(o,{size:"small",link:"",style:{"margin-left":"8px"},onClick:e[33]||(e[33]=y=>zl(Re(U(p))))},{default:t(()=>[...e[82]||(e[82]=[s("Â§çÂà∂",-1)])]),_:1})])]),i("div",ot,[e[84]||(e[84]=i("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),i("span",it,[l(g,{size:"small",type:a.config?.password?"warning":"info",effect:"plain"},{default:t(()=>[s(m(a.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):h("",!0),a.type==="telegram"?(u(),v("div",ut,[i("div",dt,[e[86]||(e[86]=i("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),i("span",rt,[a.config?.allowedFrom?(u(!0),v($,{key:0},L(a.config.allowedFrom.split(","),y=>(u(),w(g,{key:y,size:"small",style:{"margin-right":"4px"}},{default:t(()=>[s(m(y.trim()),1)]),_:2},1024))),128)):(u(),w(T,{key:1,type:"warning",size:"small"},{default:t(()=>[...e[85]||(e[85]=[s("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),i("div",mt,[i("div",{class:"pending-section-header",onClick:y=>Dl(a.id)},[e[88]||(e[88]=i("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),l(ol,{value:(G.value[a.id]||[]).length,hidden:!(G.value[a.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),l(o,{size:"small",link:"",onClick:ma(y=>Ce(a.id),["stop"]),style:{"margin-left":"8px"}},{default:t(()=>[...e[87]||(e[87]=[s("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),l(B,{style:ze([{"margin-left":"4px",transition:"transform 0.2s"},{transform:ne.value===a.id?"rotate(180deg)":""}])},{default:t(()=>[l(U(fa))]),_:1},8,["style"])],8,ft),ne.value===a.id?(u(),v("div",pt,[We.value[a.id]?(u(),v("div",vt,[l(T,{type:"info",size:"small"},{default:t(()=>[...e[89]||(e[89]=[s("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(G.value[a.id]||[]).length?(u(!0),v($,{key:1},L(G.value[a.id],y=>(u(),v("div",{key:y.id,class:"pending-user-row"},[i("div",yt,[i("span",ct,m(y.firstName||"Êú™Áü•"),1),y.username?(u(),v("span",gt,"@"+m(y.username),1)):h("",!0),i("span",_t,"ID: "+m(y.id),1),l(T,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[s(m(Ge(y.lastSeen)),1)]),_:2},1024)]),i("div",bt,[l(o,{size:"small",type:"success",plain:"",onClick:ea=>Nl(a.id,y.id),loading:je.value===`${a.id}-${y.id}`},{default:t(()=>[...e[90]||(e[90]=[s("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),l(o,{size:"small",type:"danger",plain:"",onClick:ea=>Sl(a.id,y.id)},{default:t(()=>[...e[91]||(e[91]=[s("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(u(),v("div",wt," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):h("",!0)])])):h("",!0)]))),128)),!Be.value&&!D.value.length?(u(),w(qe,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):h("",!0),l(Ve,{modelValue:J.value,"onUpdate:modelValue":e[43]||(e[43]=a=>J.value=a),title:te.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:t(()=>[l(o,{onClick:e[42]||(e[42]=a=>J.value=!1)},{default:t(()=>[...e[94]||(e[94]=[s("ÂèñÊ∂à",-1)])]),_:1}),l(o,{type:"primary",onClick:$l,loading:Le.value},{default:t(()=>[...e[95]||(e[95]=[s("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(oe,{model:r.value,"label-width":"120px"},{default:t(()=>[l(b,{label:"Á±ªÂûã",required:""},{default:t(()=>[l(N,{modelValue:r.value.type,"onUpdate:modelValue":e[34]||(e[34]=a=>r.value.type=a),style:{width:"100%"}},{default:t(()=>[l(_,{label:"Telegram",value:"telegram"}),l(_,{label:"Web ËÅäÂ§©È°µ",value:"web"}),l(_,{label:"iMessage",value:"imessage"}),l(_,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"ÂêçÁß∞",required:""},{default:t(()=>[l(k,{modelValue:r.value.name,"onUpdate:modelValue":e[35]||(e[35]=a=>r.value.name=a),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),r.value.type==="telegram"?(u(),v($,{key:0},[l(b,{label:"Bot Token",required:""},{default:t(()=>[l(k,{modelValue:r.value.botToken,"onUpdate:modelValue":e[36]||(e[36]=a=>r.value.botToken=a),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ"},null,8,["modelValue"]),l(T,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...e[92]||(e[92]=[s(" üí° ‰øùÂ≠òÂêéÁÇπÂáª„ÄåÊµãËØïËøûÊé•„ÄçÈ™åËØÅ Token ÊòØÂê¶ÊúâÊïà ",-1)])]),_:1})]),_:1}),l(b,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:t(()=>[l(k,{modelValue:r.value.allowedFrom,"onUpdate:modelValue":e[37]||(e[37]=a=>r.value.allowedFrom=a),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),l(T,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...e[93]||(e[93]=[s(" üí° ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1)])]),_:1})]),_:1})],64)):h("",!0),r.value.type==="web"?(u(),v($,{key:1},[l(b,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:t(()=>[l(k,{modelValue:r.value.webPassword,"onUpdate:modelValue":e[38]||(e[38]=a=>r.value.webPassword=a),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),l(b,{label:"Ê¨¢ËøéËØ≠"},{default:t(()=>[l(k,{modelValue:r.value.webWelcome,"onUpdate:modelValue":e[39]||(e[39]=a=>r.value.webWelcome=a),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),l(b,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:t(()=>[l(k,{modelValue:r.value.webTitle,"onUpdate:modelValue":e[40]||(e[40]=a=>r.value.webTitle=a),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):h("",!0),l(b,{label:"ÂêØÁî®"},{default:t(()=>[l(ie,{modelValue:r.value.enabled,"onUpdate:modelValue":e[41]||(e[41]=a=>r.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Tt=ca(kt,[["__scopeId","data-v-f1ea9a7e"]]);export{Tt as default};
