import{h as f}from"./index-BF1X9mkB.js";import{d as x,h as k,c as C,f as E,a as e,w as t,g as u,r as a,o as U,e as B,E as v}from"./index-DHBEgYOu.js";const N={class:"settings-page"},T=x({__name:"SettingsView",setup(z){const d=u(8080),r=u(""),i=u("zh"),_=u("light"),m=u(!1);k(async()=>{try{const o=await f.get();d.value=o.data.gateway?.port||8080}catch{}});async function g(){m.value=!0;try{const o={gateway:{port:d.value}};r.value&&(o.auth={mode:"token",token:r.value}),await f.patch(o),v.success("设置已保存")}catch(o){v.error(o.response?.data?.error||"保存失败")}finally{m.value=!1}}return(o,l)=>{const w=a("el-input-number"),s=a("el-form-item"),V=a("el-input"),p=a("el-option"),c=a("el-select"),b=a("el-button"),y=a("el-form"),h=a("el-card");return U(),C("div",N,[l[5]||(l[5]=E("h2",{style:{margin:"0 0 20px"}},"⚙️ 设置",-1)),e(h,{shadow:"hover",style:{"max-width":"600px"}},{default:t(()=>[e(y,{"label-width":"120px"},{default:t(()=>[e(s,{label:"面板端口"},{default:t(()=>[e(w,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=n=>d.value=n),min:1024,max:65535},null,8,["modelValue"])]),_:1}),e(s,{label:"访问令牌"},{default:t(()=>[e(V,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=n=>r.value=n),type:"password","show-password":"",placeholder:"留空使用默认",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),e(s,{label:"语言"},{default:t(()=>[e(c,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=n=>i.value=n),style:{width:"200px"}},{default:t(()=>[e(p,{label:"中文",value:"zh"}),e(p,{label:"English",value:"en",disabled:""})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"主题"},{default:t(()=>[e(c,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=n=>_.value=n),style:{width:"200px"}},{default:t(()=>[e(p,{label:"浅色",value:"light"}),e(p,{label:"深色",value:"dark",disabled:""})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(b,{type:"primary",onClick:g,loading:m.value},{default:t(()=>[...l[4]||(l[4]=[B("保存设置",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])}}});export{T as default};
