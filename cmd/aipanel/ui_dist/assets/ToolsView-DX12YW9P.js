import{t as c}from"./index-BF1X9mkB.js";import{d as A,h as D,c as M,f as w,a as e,w as a,g as v,r as s,o as B,e as d,t as k,k as O,l as R,q as F,E as i,L as G}from"./index-Cp9TmmPw.js";const H={class:"tools-page"},J={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px"}},Q={style:{"font-size":"12px",color:"#909399"}},Z=A({__name:"ToolsView",setup(W){const C=v([]),u=v(!1),f=v(""),V=v(!1),o=F({id:"",name:"",type:"brave_search",apiKey:"",baseUrl:"",enabled:!0});D(b);async function b(){try{const n=await c.list();C.value=n.data}catch{}}function h(){f.value="",Object.assign(o,{id:"",name:"",type:"brave_search",apiKey:"",baseUrl:"",enabled:!0}),u.value=!0}function z(n){f.value=n.id,Object.assign(o,{...n}),u.value=!0}async function E(){if(!o.name||!o.type){i.warning("è¯·å¡«å†™å¿…è¦å­—æ®µ");return}o.id||(o.id=o.type+"-"+Date.now().toString(36)),V.value=!0;try{f.value?await c.update(f.value,{...o}):await c.create({...o,status:"untested"}),i.success("ä¿å­˜æˆåŠŸ"),u.value=!1,b()}catch(n){i.error(n.response?.data?.error||"ä¿å­˜å¤±è´¥")}finally{V.value=!1}}async function K(n){try{await c.update(n.id,{enabled:n.enabled})}catch{i.error("æ›´æ–°å¤±è´¥")}}async function $(n){try{await c.test(n.id),i.success("æµ‹è¯•æˆåŠŸ"),b()}catch{i.error("æµ‹è¯•å¤±è´¥")}}async function T(n){try{await G.confirm(`ç¡®å®šåˆ é™¤ "${n.name}"ï¼Ÿ`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await c.delete(n.id),i.success("å·²åˆ é™¤"),b()}catch{}}return(n,l)=>{const q=s("Plus"),I=s("el-icon"),r=s("el-button"),m=s("el-table-column"),U=s("el-tag"),x=s("el-switch"),L=s("el-table"),N=s("el-card"),g=s("el-option"),P=s("el-select"),p=s("el-form-item"),y=s("el-input"),S=s("el-form"),j=s("el-dialog");return B(),M("div",H,[w("div",J,[l[9]||(l[9]=w("h2",{style:{margin:"0"}},"ðŸ› ï¸ èƒ½åŠ›é…ç½®",-1)),e(r,{type:"primary",onClick:h},{default:a(()=>[e(I,null,{default:a(()=>[e(q)]),_:1}),l[8]||(l[8]=d(" æ·»åŠ èƒ½åŠ› ",-1))]),_:1})]),e(N,{shadow:"hover"},{default:a(()=>[e(L,{data:C.value,stripe:""},{default:a(()=>[e(m,{prop:"name",label:"åç§°","min-width":"160"}),e(m,{label:"ç±»åž‹",width:"140"},{default:a(({row:t})=>[e(U,{size:"small"},{default:a(()=>[d(k(t.type),1)]),_:2},1024)]),_:1}),e(m,{label:"API Key","min-width":"180"},{default:a(({row:t})=>[w("code",Q,k(t.apiKey),1)]),_:1}),e(m,{label:"å¯ç”¨",width:"80"},{default:a(({row:t})=>[e(x,{modelValue:t.enabled,"onUpdate:modelValue":_=>t.enabled=_,onChange:_=>K(t),size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(m,{label:"çŠ¶æ€",width:"80"},{default:a(({row:t})=>[e(U,{type:t.status==="ok"?"success":"info",size:"small"},{default:a(()=>[d(k(t.status==="ok"?"âœ“":"?"),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"æ“ä½œ",width:"180"},{default:a(({row:t})=>[e(r,{size:"small",onClick:_=>$(t)},{default:a(()=>[...l[10]||(l[10]=[d("æµ‹è¯•",-1)])]),_:1},8,["onClick"]),e(r,{size:"small",onClick:_=>z(t)},{default:a(()=>[...l[11]||(l[11]=[d("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),e(r,{size:"small",type:"danger",onClick:_=>T(t)},{default:a(()=>[...l[12]||(l[12]=[d("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(j,{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=t=>u.value=t),title:f.value?"ç¼–è¾‘èƒ½åŠ›":"æ·»åŠ èƒ½åŠ›",width:"520px"},{footer:a(()=>[e(r,{onClick:l[6]||(l[6]=t=>u.value=!1)},{default:a(()=>[...l[13]||(l[13]=[d("å–æ¶ˆ",-1)])]),_:1}),e(r,{type:"primary",onClick:E,loading:V.value},{default:a(()=>[...l[14]||(l[14]=[d("ä¿å­˜",-1)])]),_:1},8,["loading"])]),default:a(()=>[e(S,{model:o,"label-width":"100px"},{default:a(()=>[e(p,{label:"ç±»åž‹",required:""},{default:a(()=>[e(P,{modelValue:o.type,"onUpdate:modelValue":l[0]||(l[0]=t=>o.type=t),style:{width:"100%"}},{default:a(()=>[e(g,{label:"Brave Search",value:"brave_search"}),e(g,{label:"ElevenLabs",value:"elevenlabs"}),e(g,{label:"è‡ªå®šä¹‰",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"åç§°",required:""},{default:a(()=>[e(y,{modelValue:o.name,"onUpdate:modelValue":l[1]||(l[1]=t=>o.name=t),placeholder:"å¦‚ Brave Search"},null,8,["modelValue"])]),_:1}),e(p,{label:"ID"},{default:a(()=>[e(y,{modelValue:o.id,"onUpdate:modelValue":l[2]||(l[2]=t=>o.id=t),placeholder:"å”¯ä¸€æ ‡è¯†"},null,8,["modelValue"])]),_:1}),e(p,{label:"API Key",required:""},{default:a(()=>[e(y,{modelValue:o.apiKey,"onUpdate:modelValue":l[3]||(l[3]=t=>o.apiKey=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o.type==="custom"?(B(),O(p,{key:0,label:"Base URL"},{default:a(()=>[e(y,{modelValue:o.baseUrl,"onUpdate:modelValue":l[4]||(l[4]=t=>o.baseUrl=t),placeholder:"https://..."},null,8,["modelValue"])]),_:1})):R("",!0),e(p,{label:"å¯ç”¨"},{default:a(()=>[e(x,{modelValue:o.enabled,"onUpdate:modelValue":l[5]||(l[5]=t=>o.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{Z as default};
