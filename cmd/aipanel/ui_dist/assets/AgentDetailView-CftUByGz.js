import{d as Zl,D as Ll,i as et,o as i,c as p,b as s,a as e,w as t,k as C,F as B,m as ne,s as Ze,t as f,j as $,h as d,f as Xe,n as Qe,p as Pe,G as Ul,v as Qt,l as E,e as u,z as gl,E as y,H as yl,r as w,I as Zt,J as ea,g as Ge,T as pt,K as la,x as Il,L as ta,A as aa,B as El,M as na,N as Ql,O as sa,P as oa,Q as ia,R as ua}from"./index-JBrLcEDh.js";import{h as Vl,f as J,i as _t,b as zl,m as da,j as Tl,k as Sl,g as Rl,r as mt,e as Ve,l as yt}from"./index-B6SLQW8T.js";import{A as lt}from"./AiChat-DLOL_f0y.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ra={class:"skill-studio"},ca={class:"studio-sidebar"},va={class:"sidebar-top"},fa={class:"sidebar-acts"},pa={class:"skill-list"},ma={key:0,class:"list-empty"},ya=["onClick"],ga={class:"sk-icon"},_a={key:0},wa={class:"sk-info"},ba={class:"sk-name"},ka={class:"sk-id"},ha={class:"sk-right"},xa={key:0,class:"sk-streaming-dot",title:"AI ÁîüÊàê‰∏≠‚Ä¶"},Ca={class:"studio-editor"},$a={key:0,class:"editor-empty"},Va={class:"editor-toolbar"},za={class:"editor-breadcrumb"},Ta={class:"crumb-name"},Sa={class:"toolbar-acts"},Ia={class:"editor-body"},La={class:"file-tree"},Ua={class:"tree-title"},Da={class:"tree-item tree-dir"},Aa=["onClick"],Fa={key:0,class:"tree-empty"},Ma={key:0,class:"file-editor"},Na={class:"file-editor-head"},Ea={style:{display:"flex","align-items":"center",gap:"10px"}},Ra={style:{"font-size":"12px",color:"#909399"}},Ba={class:"json-preview"},Ka={key:1,class:"file-editor"},Pa={class:"file-editor-head"},ja={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},Wa={style:{"font-size":"11px",color:"#c0c4cc"}},Oa={key:2,class:"file-editor"},Ya={class:"file-editor-head"},Ha={style:{"margin-left":"auto",display:"flex","align-items":"center",gap:"8px"}},qa={style:{"font-size":"11px",color:"#c0c4cc"}},Ja=["placeholder"],Xa={class:"studio-chat"},Ga={class:"chat-panel-head"},Qa={key:0,style:{"margin-left":"auto","font-size":"11px",color:"#c0c4cc"}},Za={key:0,style:{"margin-left":"6px",color:"#e6a23c"}},en={class:"chat-wrap"},ln=Zl({__name:"SkillStudio",props:{agentId:{}},setup(_l){const be=_l,_=be.agentId,L=u([]),ke=u(!1),m=u(null),V=u("meta"),T=u({name:"",icon:"",category:"",description:"",version:"1.0.0",enabled:!0}),M=u(""),ze=u(!1),Te=u(!1),je=u(!1),he=u(!1),re=u(!1),oe=u([]),h=u(!1),N=u(""),Y=u(!1),X=u(!1),Ne={};function ce(g,c){c?Ne[g]=c:delete Ne[g]}function xe(g){return g?Ne[g]:null}const ie=u(new Set);function me(g,c){const S=new Set(ie.value);c?S.add(g):S.delete(g),ie.value=S}const U=u(new Set);Ll(m,async g=>{g&&(U.value.has(g.id)||(U.value.add(g.id),await yl(),await xe(g.id)?.resumeSession?.(`skill-studio-${g.id}`)))},{flush:"post"});const Ee=gl(()=>{if(!m.value)return"‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÂ∏ÆÂä©Áî®Êà∑ËÆæËÆ°Âíå‰ºòÂåñ AI ÊäÄËÉΩÁöÑÁ≥ªÁªüÊèêÁ§∫ËØç„ÄÇ";const g=JSON.stringify({id:m.value.id,name:m.value.name,icon:m.value.icon||"",category:m.value.category||"",description:m.value.description||"",version:m.value.version||"1.0.0",enabled:m.value.enabled,source:"local",installedAt:""},null,2);return`‰Ω†ÊòØ‰∏Ä‰∏™ÊäÄËÉΩÈÖçÁΩÆÂä©ÊâãÔºåÊ≠£Âú®Â∏ÆÂä©Áî®Êà∑ÈÖçÁΩÆÊäÄËÉΩÔºàID: ${m.value.id}Ôºâ„ÄÇ

## ‚ö†Ô∏è Êñá‰ª∂Ë∑ØÂæÑËßÑÂàôÔºàÂøÖÈ°ªÈÅµÂÆàÔºâ
ÊâÄÊúâÊñá‰ª∂ÂøÖÈ°ªÂú® skills/${m.value.id}/ ÁõÆÂΩï‰∏ãÔºö
- ‚úÖ skills/${m.value.id}/SKILL.md
- ‚úÖ skills/${m.value.id}/skill.json
- ‚úÖ skills/${m.value.id}/tools/helper.py
- ‚ùå ‰ªª‰ΩïÂÖ∂‰ªñË∑ØÂæÑ

## ‚ö†Ô∏è ÂàõÂª∫ÊàñÊõ¥Êñ∞ÊäÄËÉΩÊó∂ÔºåÂøÖÈ°ªÂêåÊó∂ÂÜô‰∏§‰∏™Êñá‰ª∂

### 1. skills/${m.value.id}/skill.jsonÔºàÊäÄËÉΩÂÖÉÊï∞ÊçÆÔºâ
Ê†ºÂºèÂ¶Ç‰∏ãÔºå‰øÆÊîπ name/icon/category/description Â≠óÊÆµÔºö
\`\`\`json
${g}
\`\`\`

### 2. skills/${m.value.id}/SKILL.mdÔºàÁ≥ªÁªüÊèêÁ§∫ËØçÔºâ
ÂΩìÂâçÂÜÖÂÆπÔºö
\`\`\`markdown
${M.value||"ÔºàÁ©∫Ôºâ"}
\`\`\`

## ‰Ω†ÂèØ‰ª•Â∏ÆÂä©Ôºö
- ÂàõÂª∫/‰ºòÂåñÊäÄËÉΩÔºöÂêåÊó∂ÂÜô skill.jsonÔºàÂêçÁß∞„ÄÅÂàÜÁ±ª„ÄÅÊèèËø∞ÔºâÂíå SKILL.mdÔºàÊèêÁ§∫ËØçÔºâ
- Âú®ÊäÄËÉΩÁõÆÂΩï‰∏ãÂàõÂª∫Â∑•ÂÖ∑Êñá‰ª∂ÔºàPython Á≠âÔºâ
- ÊµãËØïÊäÄËÉΩÊïàÊûúÔºàÁõ¥Êé•ÂØπËØùÂç≥ÂèØÊµãËØïÔºâ`}),Z=gl(()=>m.value?re.value?`Êñ∞ÊäÄËÉΩÂ∑≤ÂàõÂª∫ÔºàID: ${m.value.id}Ôºâ„ÄÇÂëäËØâÊàë‰Ω†ÊÉ≥Ë¶Å‰ªÄ‰πàÂäüËÉΩÔºåÊàëÊù•Â∏Æ‰Ω†ÁîüÊàêÂÆåÊï¥ÁöÑ SKILL.md ÂÜÖÂÆπÔºåÁîüÊàêÂêéÁõ¥Êé•ÁÇπ‰øùÂ≠òÂç≥ÂèØ„ÄÇ`:`ÂΩìÂâçÁºñËæë„Äå${m.value.name}„Äç„ÄÇ‰Ω†ÂèØ‰ª•ËÆ©Êàë‰ºòÂåñ SKILL.md„ÄÅÊµãËØïÊïàÊûúÔºåÊàñËÄÖÁõ¥Êé•ÂØπËØù‰ΩìÈ™åÂΩìÂâçÊäÄËÉΩ„ÄÇ`:"ÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂêéÔºåÊàëÂèØ‰ª•Â∏Æ‰Ω†‰ºòÂåñÈÖçÁΩÆ„ÄÅÂÜô SKILL.md„ÄÅÊµãËØïÊïàÊûú„ÄÇ"),We=gl(()=>m.value?re.value?[]:[`Â∏ÆÊàë‰ºòÂåñ„Äå${m.value.name}„ÄçÁöÑ SKILL.md`,"Ëøô‰∏™ÊäÄËÉΩÊÄé‰πàÂÜôÊïàÊûúÊõ¥Â•ΩÔºü","Áî®‰∏≠ÊñáÂõûÁ≠î‰∏ÄÈÅìÂéÜÂè≤È¢òÔºåÊµãËØïÂΩìÂâçÊäÄËÉΩÊïàÊûú"]:["Â∏ÆÊàëËÆæËÆ°‰∏Ä‰∏™‰ª£Á†ÅÂÆ°Êü•ÊäÄËÉΩ","Â∏ÆÊàëÂÜô‰∏Ä‰∏™ÁøªËØëÂä©ÊâãÁöÑ SKILL.md"]);async function H(){ke.value=!0;try{const g=await Vl.list(_);if(L.value=g.data||[],m.value){const c=L.value.find(S=>S.id===m.value.id);c&&(m.value=c,ve(c))}}catch{}finally{ke.value=!1}}function ve(g){T.value={name:g.name,icon:g.icon||"",category:g.category||"",description:g.description||"",version:g.version||"1.0.0",enabled:g.enabled}}async function ye(g){m.value?.id!==g.id&&(m.value=g,ve(g),V.value="meta",Te.value=!1,M.value="",re.value=!1,Ie(),fe())}async function Se(){m.value&&V.value!=="prompt"&&(V.value="prompt",M.value||await fe())}async function nl(g,c,S){const x=await J.read(_,g),q=Array.isArray(x.data)?x.data:[],ge=[];for(const ee of q){if(S===0&&ee.name==="skill.json")continue;const se=c?`${c}/${ee.name}`:ee.name;if(ge.push({name:ee.name,path:se,isDir:ee.isDir,depth:S}),ee.isDir){const _e=await nl(`skills/${m.value.id}/${se}`,se,S+1);ge.push(..._e)}}return ge}async function Ie(){if(m.value){h.value=!0;try{oe.value=await nl(`skills/${m.value.id}/`,"",0)}catch{oe.value=[{name:"SKILL.md",path:"SKILL.md",isDir:!1,depth:0}]}finally{h.value=!1}}}async function sl(g,c){if(!c){if(g==="SKILL.md"){await Se();return}V.value=g,Y.value=!1,await Oe()}}async function Oe(){if(!(!m.value||!V.value||V.value==="meta"||V.value==="prompt")){X.value=!0;try{const g=await J.read(_,`skills/${m.value.id}/${V.value}`);N.value=g.data?.content||"",Y.value=!1}catch{N.value=""}finally{X.value=!1}}}async function K(g){if(m.value)try{await J.delete(_,`skills/${m.value.id}/${g}`),V.value===g&&(V.value="prompt"),await Ie(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function ue(){if(m.value){je.value=!0;try{V.value==="meta"||V.value==="prompt"?(await Vl.update(be.agentId,m.value.id,{name:T.value.name,icon:T.value.icon,category:T.value.category,description:T.value.description,enabled:T.value.enabled}),(V.value==="prompt"||M.value)&&(await J.write(_,`skills/${m.value.id}/SKILL.md`,M.value),Te.value=!1),await H()):(await J.write(_,`skills/${m.value.id}/${V.value}`,N.value),Y.value=!1),y.success("‰øùÂ≠òÊàêÂäü")}catch(g){y.error(g.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{je.value=!1}}}async function Ye(g,c){try{await Vl.update(be.agentId,g.id,{enabled:c}),await H()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function wl(){if(m.value)try{await Vl.remove(be.agentId,m.value.id),y.success("Â∑≤Âà†Èô§"),m.value=null,await H()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function el(){if(he.value)return;he.value=!0;const g="skill_"+Date.now().toString(36);try{await Vl.create(be.agentId,{meta:{id:g,name:"Êñ∞ÊäÄËÉΩ",icon:"",category:"",description:"",version:"1.0.0",enabled:!1,source:"local",installedAt:""},promptContent:""}),await H();const c=L.value.find(S=>S.id===g);if(c){await ye(c),V.value="prompt",M.value="",re.value=!0,await yl(),U.value.has(g)||(U.value.add(g),await xe(g)?.resumeSession?.(`skill-studio-${g}`));const S=L.value.filter(x=>x.id!==g).map(x=>x.name).join("„ÄÅ")||"ÊöÇÊó†";xe(g)?.sendSilent?.(`„ÄêÁ∫ØÊñáÂ≠óËæìÂá∫Ôºå‰∏ç‰ΩøÁî®‰ªª‰ΩïÂ∑•ÂÖ∑Ôºå‰∏çÂàõÂª∫‰ªª‰ΩïÊñá‰ª∂„ÄëÂΩìÂâçÂ∑≤ÊúâÊäÄËÉΩÔºö${S}„ÄÇËØ∑Êé®Ëçê3‰∏™ÂÖ®Êñ∞ÁöÑ„ÄÅ‰∏éÂ∑≤ÊúâÊäÄËÉΩ‰∏çÈáçÂ§çÁöÑÊäÄËÉΩÊñπÂêëÔºåÊØèÊù°‰∏ÄÂè•ËØùÔºåÁõ¥Êé•ÂàóÂá∫Âç≥ÂèØ„ÄÇ`)}}catch(c){y.error(c.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}finally{he.value=!1}}async function ol(g,c){g===m.value?.id&&(re.value=!1),await H(),g===m.value?.id&&(await Promise.all([Ie(),fe()]),V.value!=="meta"&&V.value!=="prompt"&&await Oe())}async function fe(){if(m.value){ze.value=!0;try{const g=await J.read(_,`skills/${m.value.id}/SKILL.md`);M.value=g.data?.content||"",Te.value=!1}catch{M.value=""}finally{ze.value=!1}}}async function Le(){if(!m.value)return;M.value||await Se();const g=`ËØ∑Áî®„Äå${m.value.name}„ÄçÊäÄËÉΩÊïàÊûúÂõûÂ§çÔºö‰Ω†Â•ΩÔºåËØ∑‰ªãÁªç‰∏Ä‰∏ã‰Ω†ÁöÑÂäüËÉΩ„ÄÇ`;xe(m.value?.id)?.fillInput?.(g),y.info("ÊµãËØïÊ∂àÊÅØÂ∑≤Â°´ÂÖ•Âè≥‰æßËÅäÂ§©Ê°ÜÔºåÁÇπÂáªÂèëÈÄÅÂç≥ÂèØÊµãËØï")}return et(H),(g,c)=>{const S=w("Refresh"),x=w("el-icon"),q=w("el-button"),ge=w("Plus"),ee=w("Tools"),se=w("el-tag"),_e=w("el-switch"),Re=w("Setting"),G=w("FolderOpened"),ll=w("VideoPlay"),P=w("DocumentChecked"),il=w("Delete"),ul=w("el-popconfirm"),tl=w("Folder"),Be=w("Document"),Ue=w("el-input"),pe=w("el-form-item"),Ce=w("el-col"),He=w("el-row"),dl=w("el-collapse-item"),rl=w("el-collapse"),Ke=w("el-form"),j=w("ChatLineRound");return i(),p("div",ra,[s("div",ca,[s("div",va,[c[13]||(c[13]=s("span",{class:"sidebar-title"},"ÊäÄËÉΩÂ∫ì",-1)),s("div",fa,[e(q,{size:"small",loading:ke.value,circle:"",onClick:H},{default:t(()=>[e(x,null,{default:t(()=>[e(S)]),_:1})]),_:1},8,["loading"]),e(q,{size:"small",type:"primary",circle:"",loading:he.value,onClick:el},{default:t(()=>[e(x,null,{default:t(()=>[e(ge)]),_:1})]),_:1},8,["loading"])])]),s("div",pa,[!ke.value&&L.value.length===0?(i(),p("div",ma,"ÊöÇÊó†ÊäÄËÉΩ")):C("",!0),(i(!0),p(B,null,ne(L.value,o=>(i(),p("div",{key:o.id,class:Ze(["skill-item",{active:m.value?.id===o.id}]),onClick:r=>ye(o)},[s("span",ga,[o.icon?(i(),p("span",_a,f(o.icon),1)):(i(),$(x,{key:1},{default:t(()=>[e(ee)]),_:1}))]),s("div",wa,[s("div",ba,f(o.name),1),s("div",ka,f(o.id),1)]),s("div",ha,[ie.value.has(o.id)?(i(),p("span",xa)):o.category?(i(),$(se,{key:1,size:"small",effect:"plain",style:{"margin-right":"6px","font-size":"11px"}},{default:t(()=>[d(f(o.category),1)]),_:2},1024)):C("",!0),e(_e,{"model-value":o.enabled,size:"small",onChange:r=>Ye(o,r),onClick:c[0]||(c[0]=Xe(()=>{},["stop"]))},null,8,["model-value","onChange"])])],10,ya))),128))])]),s("div",Ca,[m.value?(i(),p(B,{key:1},[s("div",Va,[s("div",za,[e(x,{style:{color:"#909399"}},{default:t(()=>[e(G)]),_:1}),c[16]||(c[16]=s("span",{class:"crumb-sep"},"skills /",-1)),s("span",Ta,f(m.value.id),1)]),s("div",Sa,[e(q,{size:"small",onClick:Le},{default:t(()=>[e(x,null,{default:t(()=>[e(ll)]),_:1}),c[17]||(c[17]=d(" ÊµãËØï ",-1))]),_:1}),e(q,{size:"small",type:"primary",loading:je.value,onClick:ue},{default:t(()=>[e(x,null,{default:t(()=>[e(P)]),_:1}),c[18]||(c[18]=d(" ‰øùÂ≠ò ",-1))]),_:1},8,["loading"]),e(ul,{title:"Á°ÆËÆ§Âà†Èô§ËØ•ÊäÄËÉΩÔºü",onConfirm:wl},{reference:t(()=>[e(q,{size:"small",type:"danger",plain:""},{default:t(()=>[e(x,null,{default:t(()=>[e(il)]),_:1})]),_:1})]),_:1})])]),s("div",Ia,[s("div",La,[s("div",Ua,[c[19]||(c[19]=d(" ÁõÆÂΩï ",-1)),e(q,{link:"",size:"small",loading:h.value,onClick:Ie,style:{"margin-left":"auto",padding:"0"}},{default:t(()=>[e(x,null,{default:t(()=>[e(S)]),_:1})]),_:1},8,["loading"])]),s("div",Da,[e(x,null,{default:t(()=>[e(tl)]),_:1}),s("span",null,f(m.value.id)+"/",1)]),s("div",{class:Ze(["tree-item",{"tree-active":V.value==="meta"}]),onClick:c[1]||(c[1]=o=>V.value="meta")},[e(x,null,{default:t(()=>[e(Be)]),_:1}),c[20]||(c[20]=s("span",null,"skill.json",-1))],2),(i(!0),p(B,null,ne(oe.value,o=>(i(),p("div",{key:o.path,class:Ze(["tree-item",{"tree-active":V.value===(o.path==="SKILL.md"?"prompt":o.path),"tree-dir-row":o.isDir}]),style:Qe({paddingLeft:`${12+o.depth*12}px`}),onClick:r=>sl(o.path,o.isDir)},[o.isDir?(i(),$(x,{key:0,style:{color:"#e6a23c"}},{default:t(()=>[e(tl)]),_:1})):(i(),$(x,{key:1},{default:t(()=>[e(Be)]),_:1})),s("span",null,f(o.name),1),o.path==="SKILL.md"&&m.value.enabled?(i(),$(se,{key:2,size:"small",type:"success",effect:"plain",style:{"margin-left":"4px","font-size":"10px"}},{default:t(()=>[...c[21]||(c[21]=[d("Ê≥®ÂÖ•‰∏≠",-1)])]),_:1})):C("",!0)],14,Aa))),128)),!h.value&&oe.value.length===0?(i(),p("div",Fa,"Á©∫ÁõÆÂΩï")):C("",!0)]),V.value==="meta"?(i(),p("div",Ma,[s("div",Na,[e(x,null,{default:t(()=>[e(Be)]),_:1}),c[22]||(c[22]=d(" skill.json ",-1)),c[23]||(c[23]=s("span",{class:"file-hint"},"ÊäÄËÉΩÂÖÉ‰ø°ÊÅØÔºåÂΩ±ÂìçÂàóË°®Â±ïÁ§∫Âíå runner Ë°å‰∏∫",-1))]),e(Ke,{model:T.value,"label-width":"72px",size:"small",style:{padding:"16px 20px"}},{default:t(()=>[e(pe,{label:"ÊäÄËÉΩ ID"},{default:t(()=>[e(Ue,{value:m.value.id,disabled:""},null,8,["value"])]),_:1}),e(He,{gutter:12},{default:t(()=>[e(Ce,{span:14},{default:t(()=>[e(pe,{label:"ÂêçÁß∞"},{default:t(()=>[e(Ue,{modelValue:T.value.name,"onUpdate:modelValue":c[2]||(c[2]=o=>T.value.name=o),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1})]),_:1}),e(Ce,{span:10},{default:t(()=>[e(pe,{label:"ÂõæÊ†á"},{default:t(()=>[e(Ue,{modelValue:T.value.icon,"onUpdate:modelValue":c[3]||(c[3]=o=>T.value.icon=o),placeholder:"emoji"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(He,{gutter:12},{default:t(()=>[e(Ce,{span:14},{default:t(()=>[e(pe,{label:"ÂàÜÁ±ª"},{default:t(()=>[e(Ue,{modelValue:T.value.category,"onUpdate:modelValue":c[4]||(c[4]=o=>T.value.category=o),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1})]),_:1}),e(Ce,{span:10},{default:t(()=>[e(pe,{label:"ÁâàÊú¨"},{default:t(()=>[e(Ue,{modelValue:T.value.version,"onUpdate:modelValue":c[5]||(c[5]=o=>T.value.version=o),placeholder:"1.0.0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(pe,{label:"ÊèèËø∞"},{default:t(()=>[e(Ue,{modelValue:T.value.description,"onUpdate:modelValue":c[6]||(c[6]=o=>T.value.description=o),type:"textarea",rows:2,placeholder:"ÁÆÄË¶ÅÊèèËø∞ÊäÄËÉΩÂäüËÉΩ"},null,8,["modelValue"])]),_:1}),e(pe,{label:"Áä∂ÊÄÅ"},{default:t(()=>[s("div",Ea,[e(_e,{modelValue:T.value.enabled,"onUpdate:modelValue":c[7]||(c[7]=o=>T.value.enabled=o)},null,8,["modelValue"]),s("span",Ra,f(T.value.enabled?"Â∑≤ÂêØÁî®ÔºåSKILL.md Â∞ÜÊ≥®ÂÖ•Á≥ªÁªüÊèêÁ§∫":"Â∑≤Á¶ÅÁî®"),1)])]),_:1}),e(rl,{style:{"margin-top":"8px"}},{default:t(()=>[e(dl,{title:"Êü•Áúã skill.json ÂéüÊñá"},{default:t(()=>[s("pre",Ba,f(JSON.stringify({id:m.value.id,...T.value},null,2)),1)]),_:1})]),_:1})]),_:1},8,["model"])])):V.value==="prompt"?(i(),p("div",Ka,[s("div",Pa,[e(x,null,{default:t(()=>[e(Be)]),_:1}),c[25]||(c[25]=d(" SKILL.md ",-1)),c[26]||(c[26]=s("span",{class:"file-hint"},"Ê≥®ÂÖ•Âà∞ AI System Prompt ÁöÑÊåá‰ª§ÂÜÖÂÆπ",-1)),s("div",ja,[Te.value?(i(),$(se,{key:0,type:"warning",size:"small"},{default:t(()=>[...c[24]||(c[24]=[d("Êú™‰øùÂ≠ò",-1)])]),_:1})):C("",!0),s("span",Wa,f(M.value.length)+" Â≠óÁ¨¶",1),e(q,{size:"small",circle:"",loading:ze.value,onClick:fe,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e(x,null,{default:t(()=>[e(S)]),_:1})]),_:1},8,["loading"])])]),Pe(s("textarea",{"onUpdate:modelValue":c[8]||(c[8]=o=>M.value=o),class:"code-textarea",spellcheck:"false",placeholder:`# ÊäÄËÉΩÂêçÁß∞

## ÂäüËÉΩËØ¥Êòé
ÊèèËø∞ËØ•ÊäÄËÉΩÁöÑÁî®ÈÄî‚Ä¶

## Ë°å‰∏∫ËßÑËåÉ
- ËßÑËåÉ 1
- ËßÑËåÉ 2`,onInput:c[9]||(c[9]=o=>Te.value=!0)},null,544),[[Ul,M.value]])])):(i(),p("div",Oa,[s("div",Ya,[e(x,null,{default:t(()=>[e(Be)]),_:1}),d(" "+f(V.value)+" ",1),s("div",Ha,[Y.value?(i(),$(se,{key:0,type:"warning",size:"small"},{default:t(()=>[...c[27]||(c[27]=[d("Êú™‰øùÂ≠ò",-1)])]),_:1})):C("",!0),s("span",qa,f(N.value.length)+" Â≠óÁ¨¶",1),e(q,{size:"small",circle:"",loading:X.value,onClick:Oe,title:"ÈáçÊñ∞Âä†ËΩΩ"},{default:t(()=>[e(x,null,{default:t(()=>[e(S)]),_:1})]),_:1},8,["loading"]),e(ul,{title:"Á°ÆËÆ§Âà†Èô§ËØ•Êñá‰ª∂Ôºü",onConfirm:c[10]||(c[10]=o=>K(V.value))},{reference:t(()=>[e(q,{size:"small",circle:"",type:"danger",plain:""},{default:t(()=>[e(x,null,{default:t(()=>[e(il)]),_:1})]),_:1})]),_:1})])]),Pe(s("textarea",{"onUpdate:modelValue":c[11]||(c[11]=o=>N.value=o),class:"code-textarea",spellcheck:"false",placeholder:`ÁºñËæë ${V.value} ‚Ä¶`,onInput:c[12]||(c[12]=o=>Y.value=!0)},null,40,Ja),[[Ul,N.value]])]))])],64)):(i(),p("div",$a,[e(x,{size:"48",color:"#c0c4cc"},{default:t(()=>[e(Re)]),_:1}),c[15]||(c[15]=s("p",null,"‰ªéÂ∑¶‰æßÈÄâÊã©‰∏Ä‰∏™ÊäÄËÉΩÂºÄÂßãÁºñËæë",-1)),e(q,{type:"primary",onClick:el},{default:t(()=>[e(x,null,{default:t(()=>[e(ge)]),_:1}),c[14]||(c[14]=d(" Êñ∞Âª∫ÊäÄËÉΩ",-1))]),_:1})]))]),s("div",Xa,[s("div",Ga,[e(x,null,{default:t(()=>[e(j)]),_:1}),c[28]||(c[28]=d(" AI Âçè‰ΩúÈÖçÁΩÆ ",-1)),m.value?(i(),p("span",Qa,[d(" ÂΩìÂâç: "+f(m.value.name)+" ",1),ie.value.size>1?(i(),p("span",Za," ("+f(ie.value.size)+" ‰∏™Âπ∂Ë°åÁîüÊàê‰∏≠) ",1)):C("",!0)])):C("",!0)]),s("div",en,[(i(!0),p(B,null,ne(L.value,o=>Pe((i(),$(lt,{key:o.id,ref_for:!0,ref:r=>ce(o.id,r),"agent-id":E(_),context:m.value?.id===o.id?Ee.value:"",scenario:"skill-studio","skill-id":o.id,"welcome-message":m.value?.id===o.id?Z.value:"",examples:m.value?.id===o.id?We.value:[],compact:"",onResponse:r=>ol(o.id),onStreamingChange:r=>me(o.id,r)},null,8,["agent-id","context","skill-id","welcome-message","examples","onResponse","onStreamingChange"])),[[Qt,m.value?.id===o.id]])),128))])])])}}}),tn=tt(ln,[["__scopeId","data-v-3a5bcde8"]]),an={class:"wc-layout"},nn={class:"wc-panel-header"},sn={class:"wc-header-actions"},on={class:"wc-panel-body file-tree-body"},un={key:0,class:"wc-loading"},dn={key:1,class:"wc-empty"},rn={class:"tree-node-icon"},cn={key:0},vn={key:1},fn=["onKeyup","onBlur"],pn={key:1,class:"tree-node-name"},mn={key:2,class:"tree-node-size"},yn=["onClick"],gn=["onClick"],_n={class:"wc-panel-header"},wn={key:0,class:"wc-panel-title file-path-title"},bn={class:"file-ext-badge"},kn=["title"],hn={key:1,class:"wc-panel-title muted"},xn={class:"wc-header-actions"},Cn={class:"wc-panel-body editor-body"},$n={key:0,class:"wc-empty-editor"},Vn={key:1,class:"wc-binary-notice"},zn={class:"editor-wrap"},Tn=["onKeydown"],Sn={class:"editor-statusbar"},In={class:"stat-chip"},Ln={key:0},Un={key:1,class:"status-dirty"},Dn={key:2,class:"status-saved"},An={class:"wc-panel wc-panel-right"},Fn={class:"session-bar"},Mn={class:"session-bar-left"},Nn={class:"session-opt"},En={class:"session-opt-title"},Rn={class:"session-opt-time"},Bn={class:"chat-area"},Kn={class:"wc-modal"},Pn={class:"wc-modal-footer"},gt=140,jn=380,Wn=900,On=Zl({__name:"WorkspaceChatLayout",props:{agentId:{}},emits:["session-change"],setup(_l,{emit:be}){const _=_l,L=be,ke={label:"name",children:"children",isLeaf:o=>!o.isDir},m=u(200),V=u(460),T=u(),M=u(),ze=u(),Te=u(),je=u(),he=u(),re=u([]),oe=u(!1),h=u(""),N=u(""),Y=u(!1),X=u(!1),Ne=u(null),ce=u(!1),xe=u(""),ie=u(""),me=u(""),U=u({visible:!1,x:0,y:0,node:null}),Ee=u([]),Z=u();let We=0,H=0,ve=null;const ye=u(!1),Se=u(!1);function nl(o){sl(o,"left")}function Ie(o){sl(o,"right")}function sl(o,r){We=o.clientX,H=r==="left"?m.value:V.value,ve=r,r==="left"?ye.value=!0:Se.value=!0,window.addEventListener("mousemove",Oe),window.addEventListener("mouseup",K),document.body.style.cssText+="cursor:col-resize;user-select:none;"}function Oe(o){const r=o.clientX-We;ve==="left"?m.value=Math.max(gt,Math.min(jn,H+r)):ve==="right"&&(V.value=Math.max(gt,Math.min(Wn,H+r)))}function K(){ye.value=!1,Se.value=!1,ve=null,window.removeEventListener("mousemove",Oe),window.removeEventListener("mouseup",K),document.body.style.cursor="",document.body.style.userSelect=""}async function ue(){oe.value=!0;try{const o=await J.readTree(_.agentId);re.value=Ye(o.data)}catch{re.value=[]}finally{oe.value=!1}}function Ye(o){return(Array.isArray(o)?o:o?.children??[]).map(D=>({name:D.name,path:D.path??D.name,isDir:!!(D.isDir??D.type==="dir"),size:D.size,children:D.children?.length?Ye(D.children):D.isDir?[]:void 0})).sort((D,le)=>+le.isDir-+D.isDir||D.name.localeCompare(le.name))}function wl(o){U.value.visible=!1,o.isDir||ol(o.path)}function el(o,r){o.preventDefault(),U.value={visible:!0,x:o.clientX,y:o.clientY,node:r}}async function ol(o){Y.value&&h.value&&!await Il.confirm("ÊúâÊú™‰øùÂ≠òÊõ¥ÊîπÔºåÁªßÁª≠ÂàáÊç¢Ôºü","ÊèêÁ§∫",{confirmButtonText:"ÁªßÁª≠",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)||(h.value=o,Y.value=!1,yl(()=>T.value?.setCurrentKey(o)),await fe())}async function fe(){if(h.value)try{const r=(await J.read(_.agentId,h.value)).data;X.value=r.binary??r.encoding==="base64",X.value||(N.value=r.content??"",Ne.value=r.size!=null?{size:r.size,modTime:r.modTime}:null),Y.value=!1}catch{N.value=""}}async function Le(){if(!(!h.value||X.value))try{await J.write(_.agentId,h.value,N.value),Y.value=!1,y.success("Â∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}}async function g(){if(!(!h.value||!await Il.confirm(`Âà†Èô§ ${h.value}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await J.delete(_.agentId,h.value),h.value="",N.value="",Y.value=!1,await ue(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function c(){const o=xe.value.trim();if(o)try{await J.write(_.agentId,o,""),ce.value=!1,xe.value="",await ue(),await ol(o)}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function S(o){if(await Il.confirm(`Âà†Èô§ ${o.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1))try{await J.delete(_.agentId,o.path),h.value===o.path&&(h.value="",N.value=""),await ue(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function x(o){ie.value=o.path,me.value=o.name,yl(()=>je.value?.focus())}async function q(o){if(!ie.value||me.value===o.name){ie.value="";return}const D=(o.path.includes("/")?o.path.substring(0,o.path.lastIndexOf("/")+1):"")+me.value;try{const le=await J.read(_.agentId,o.path);await J.write(_.agentId,D,le.data?.content??""),await J.delete(_.agentId,o.path),h.value===o.path&&(h.value=D),await ue(),y.success("Â∑≤ÈáçÂëΩÂêç")}catch{y.error("ÈáçÂëΩÂêçÂ§±Ë¥•")}ie.value=""}function ge(){U.value.visible=!1,ce.value=!0}function ee(){U.value.visible=!1,ce.value=!0}function se(){const o=U.value.node;U.value.visible=!1,o&&x(o)}async function _e(){const o=U.value.node;if(U.value.visible=!1,!(!o||!await Il.confirm(`Âà†Èô§ ${o.path}Ôºü`,"Á°ÆËÆ§",{confirmButtonText:"Âà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"}).then(()=>!0).catch(()=>!1)))try{await J.delete(_.agentId,o.path),h.value===o.path&&(h.value="",N.value=""),await ue(),y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}function Re(){U.value.visible&&(U.value.visible=!1)}async function G(){try{const o=await _t.list({agentId:_.agentId,limit:50});Ee.value=(o.data?.sessions||[]).sort((r,D)=>D.lastAt-r.lastAt)}catch{Ee.value=[]}}function ll(o){Z.value=o||void 0,o?he.value?.resumeSession(o):he.value?.startNewSession()}function P(){Z.value=void 0,he.value?.startNewSession()}function il(o){Z.value=o,L("session-change",o),G()}async function ul(){await ue(),h.value&&(await new Promise(o=>setTimeout(o,300)),await fe())}const tl=gl(()=>(N.value.match(/\n/g)??[]).length+1),Be=gl(()=>h.value?`Áî®Êà∑ÂΩìÂâçÊâìÂºÄÁöÑÊñá‰ª∂: ${h.value}`:void 0);function Ue(o){const r=M.value,D=r.selectionStart;N.value=r.value.slice(0,D)+"  "+r.value.slice(r.selectionEnd),yl(()=>{r.selectionStart=r.selectionEnd=D+2})}function pe(){ze.value&&M.value&&(ze.value.scrollTop=M.value.scrollTop)}Ll(ce,async o=>{o&&(await yl(),Te.value?.focus())});function Ce(o){const r=o.split(".").pop()?.toLowerCase();return r?`.${r}`:"txt"}function He(o){return o?o<1024?`${o}B`:o<1048576?`${(o/1024).toFixed(0)}K`:`${(o/1048576).toFixed(1)}M`:""}function dl(o){return He(o)??""}const rl={go:"üêπ",js:"üìú",ts:"üìò",tsx:"üìò",jsx:"üìú",vue:"üíö",py:"üêç",md:"üìù",markdown:"üìù",json:"üìã",yaml:"‚öôÔ∏è",yml:"‚öôÔ∏è",toml:"‚öôÔ∏è",sh:"‚ö°",bash:"‚ö°",html:"üåê",css:"üé®",scss:"üé®",sql:"üóÑÔ∏è",rs:"ü¶Ä",txt:"üìÑ",env:"üîí",dockerfile:"üê≥",png:"üñºÔ∏è",jpg:"üñºÔ∏è",jpeg:"üñºÔ∏è",gif:"üñºÔ∏è",svg:"üñºÔ∏è",webp:"üñºÔ∏è"};function Ke(o){const r=o.split(".").pop()?.toLowerCase()??"";return rl[r]??(o.startsWith(".")?"üîí":"üìÑ")}function j(o){if(!o)return"";const r=new Date(o),le=Date.now()-o;return le<6e4?"ÂàöÂàö":le<36e5?`${Math.floor(le/6e4)}ÂàÜÈíüÂâç`:le<864e5?`${Math.floor(le/36e5)}Â∞èÊó∂Ââç`:r.toLocaleDateString()}return et(()=>{ue(),G(),document.addEventListener("click",Re)}),Zt(()=>{K(),document.removeEventListener("click",Re)}),(o,r)=>{const D=w("el-tooltip"),le=w("el-icon"),$e=w("el-tree"),bl=w("el-tag"),qe=w("el-option"),we=w("el-select");return i(),p("div",an,[s("div",{class:"wc-panel wc-panel-left",style:Qe({width:m.value+"px"})},[s("div",nn,[r[12]||(r[12]=s("span",{class:"wc-panel-title"},"üìÅ Â∑•‰ΩúÂå∫Êñá‰ª∂",-1)),s("div",sn,[e(D,{content:"Êñ∞Âª∫Êñá‰ª∂",placement:"top","show-after":500},{default:t(()=>[s("button",{class:"wc-icon-btn",onClick:r[0]||(r[0]=I=>ce.value=!0)},"Ôºã")]),_:1}),e(D,{content:"Âà∑Êñ∞",placement:"top","show-after":500},{default:t(()=>[s("button",{class:"wc-icon-btn",onClick:ue},"‚Ü∫")]),_:1})])]),s("div",on,[oe.value?(i(),p("div",un,[e(le,{class:"rotating"},{default:t(()=>[e(E(ea))]),_:1}),r[13]||(r[13]=d(" Âä†ËΩΩ‰∏≠‚Ä¶ ",-1))])):re.value.length?(i(),$($e,{key:2,ref_key:"treeRef",ref:T,data:re.value,props:ke,"highlight-current":!0,"expand-on-click-node":!1,"default-expand-all":!1,"node-key":"path",class:"wc-file-tree",onNodeClick:wl,onNodeContextmenu:el},{default:t(({node:I,data:Q})=>[s("span",{class:Ze(["tree-node",{"is-file":!Q.isDir,"is-active":Q.path===h.value}])},[s("span",rn,[Q.isDir?(i(),p("span",cn,f(I.expanded?"üìÇ":"üìÅ"),1)):(i(),p("span",vn,f(Ke(Q.name)),1))]),ie.value===Q.path?Pe((i(),p("input",{key:0,"onUpdate:modelValue":r[1]||(r[1]=De=>me.value=De),class:"tree-rename-input",onKeyup:[Ge(De=>q(Q),["enter"]),r[2]||(r[2]=Ge(De=>ie.value="",["escape"]))],onBlur:De=>q(Q),onClick:r[3]||(r[3]=Xe(()=>{},["stop"])),ref_key:"renameInputRef",ref:je},null,40,fn)),[[Ul,me.value]]):(i(),p("span",pn,f(Q.name),1)),Q.isDir?C("",!0):(i(),p("span",mn,f(He(Q.size)),1)),s("span",{class:"tree-node-actions",onClick:r[4]||(r[4]=Xe(()=>{},["stop"]))},[Q.isDir?C("",!0):(i(),p("button",{key:0,class:"tree-act-btn",title:"ÈáçÂëΩÂêç",onClick:De=>x(Q)},"‚úé",8,yn)),s("button",{class:"tree-act-btn danger",title:"Âà†Èô§",onClick:De=>S(Q)},"‚úï",8,gn)])],2)]),_:1},8,["data"])):(i(),p("div",dn,"Â∑•‰ΩúÂå∫‰∏∫Á©∫"))]),(i(),$(pt,{to:"body"},[U.value.visible?(i(),p("div",{key:0,class:"ctx-menu",style:Qe({left:U.value.x+"px",top:U.value.y+"px"}),onMouseleave:r[5]||(r[5]=I=>U.value.visible=!1)},[s("div",{class:"ctx-item",onClick:ge},"üìÑ Êñ∞Âª∫Êñá‰ª∂"),s("div",{class:"ctx-item",onClick:ee},"üìÅ Êñ∞Âª∫Êñá‰ª∂Â§π"),U.value.node&&!U.value.node.isDir?(i(),p("div",{key:0,class:"ctx-item",onClick:se},"‚úé ÈáçÂëΩÂêç")):C("",!0),r[14]||(r[14]=s("div",{class:"ctx-divider"},null,-1)),s("div",{class:"ctx-item danger",onClick:_e},"‚úï Âà†Èô§")],36)):C("",!0)]))],4),s("div",{class:Ze(["wc-handle",{dragging:ye.value}]),onMousedown:nl},[...r[15]||(r[15]=[s("div",{class:"wc-handle-bar"},null,-1)])],34),s("div",{class:"wc-panel wc-panel-mid",style:Qe({width:V.value+"px"})},[s("div",_n,[h.value?(i(),p("span",wn,[s("span",bn,f(Ce(h.value)),1),s("span",{class:"file-path-text",title:h.value},f(h.value),9,kn)])):(i(),p("span",hn,"ÈÄâÊã©Êñá‰ª∂Êü•Áúã")),s("div",xn,[Y.value?(i(),$(bl,{key:0,size:"small",type:"warning",style:{"margin-right":"4px"}},{default:t(()=>[...r[16]||(r[16]=[d("Êú™‰øùÂ≠ò",-1)])]),_:1})):C("",!0),h.value&&Y.value?(i(),p("button",{key:1,class:"wc-save-btn",onClick:Le},"‰øùÂ≠ò")):C("",!0),h.value?(i(),p("button",{key:2,class:"wc-icon-btn",title:"Âà∑Êñ∞",onClick:fe},"‚Ü∫")):C("",!0),h.value?(i(),p("button",{key:3,class:"wc-icon-btn danger",title:"Âà†Èô§Êñá‰ª∂",onClick:g},"‚úï")):C("",!0)])]),s("div",Cn,[h.value?X.value?(i(),p("div",Vn,"‚õî ‰∫åËøõÂà∂Êñá‰ª∂ÔºåÊó†Ê≥ïÁºñËæë")):(i(),p(B,{key:2},[s("div",zn,[s("div",{class:"line-numbers",ref_key:"lineNumRef",ref:ze},[(i(!0),p(B,null,ne(tl.value,I=>(i(),p("div",{key:I,class:"line-num"},f(I),1))),128))],512),Pe(s("textarea",{ref_key:"editorRef",ref:M,"onUpdate:modelValue":r[6]||(r[6]=I=>N.value=I),class:"code-editor",spellcheck:"false",autocorrect:"off",autocapitalize:"off",onInput:r[7]||(r[7]=I=>{Y.value=!0,pe()}),onScroll:pe,onKeydown:[Ge(Xe(Ue,["prevent"]),["tab"]),Ge(Xe(Le,["ctrl","prevent"]),["s"]),Ge(Xe(Le,["meta","prevent"]),["s"])]},null,40,Tn),[[Ul,N.value]])]),s("div",Sn,[s("span",In,f(Ce(h.value)),1),s("span",null,f(tl.value)+" Ë°å",1),s("span",null,f(N.value.length)+" Â≠óÁ¨¶",1),Ne.value?(i(),p("span",Ln,f(dl(Ne.value.size)),1)):C("",!0),r[18]||(r[18]=s("span",{class:"stat-flex"},null,-1)),Y.value?(i(),p("span",Un,"‚óè Êú™‰øùÂ≠ò")):(i(),p("span",Dn,"‚úì Â∑≤‰øùÂ≠ò"))])],64)):(i(),p("div",$n,[...r[17]||(r[17]=[s("div",{class:"wc-empty-icon"},"‚úèÔ∏è",-1),s("div",null,"‰ªéÂ∑¶‰æßÈÄâÊã©Êñá‰ª∂",-1),s("div",{class:"wc-empty-hint"},"ÊîØÊåÅÊãñÊãΩÊñá‰ª∂Âà∞Âè≥‰æßËÅäÂ§©Ê°Ü",-1)])]))])],4),s("div",{class:Ze(["wc-handle",{dragging:Se.value}]),onMousedown:Ie},[...r[19]||(r[19]=[s("div",{class:"wc-handle-bar"},null,-1)])],34),s("div",An,[s("div",Fn,[s("div",Mn,[e(le,{style:{color:"#64748b","font-size":"13px"}},{default:t(()=>[e(E(la))]),_:1}),e(we,{modelValue:Z.value,"onUpdate:modelValue":r[8]||(r[8]=I=>Z.value=I),placeholder:"Êñ∞ÂØπËØù",size:"small",clearable:"",class:"session-select",onChange:ll},{default:t(()=>[(i(!0),p(B,null,ne(Ee.value,I=>(i(),$(qe,{key:I.id,value:I.id,label:I.title||"ÂØπËØù "+I.id.slice(0,8)},{default:t(()=>[s("div",Nn,[s("span",En,f(I.title||"Êó†Ê†áÈ¢ò"),1),s("span",Rn,f(j(I.lastAt)),1)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),s("button",{class:"session-new-btn",title:"Êñ∞Âª∫ÂØπËØù",onClick:P},"Ôºã Êñ∞ÂØπËØù")]),s("div",Bn,[e(lt,{"agent-id":_l.agentId,"session-id":Z.value||void 0,context:Be.value,height:"100%",ref_key:"chatRef",ref:he,onResponse:ul,onSessionChange:il},null,8,["agent-id","session-id","context"])])]),(i(),$(pt,{to:"body"},[ce.value?(i(),p("div",{key:0,class:"wc-modal-mask",onClick:r[11]||(r[11]=Xe(I=>ce.value=!1,["self"]))},[s("div",Kn,[r[20]||(r[20]=s("div",{class:"wc-modal-title"},"Êñ∞Âª∫Êñá‰ª∂",-1)),Pe(s("input",{"onUpdate:modelValue":r[9]||(r[9]=I=>xe.value=I),class:"wc-modal-input",placeholder:"Â¶Ç notes.md Êàñ scripts/run.sh",onKeyup:Ge(c,["enter"]),ref_key:"newFileInput",ref:Te},null,544),[[Ul,xe.value]]),s("div",Pn,[s("button",{class:"wc-btn",onClick:r[10]||(r[10]=I=>ce.value=!1)},"ÂèñÊ∂à"),s("button",{class:"wc-btn primary",onClick:c},"ÂàõÂª∫")])])])):C("",!0)]))])}}}),Yn=tt(On,[["__scopeId","data-v-8f3ea3d8"]]),Hn={class:"header-left"},qn={class:"chat-layout"},Jn={class:"session-sidebar"},Xn={class:"session-sidebar-header"},Gn={class:"session-list"},Qn=["onClick"],Zn={class:"session-item-title"},es={class:"session-item-meta"},ls={key:0,class:"session-empty"},ts={class:"at-panel"},as={key:0,class:"at-form"},ns={class:"chat-area"},ss={style:{display:"flex","justify-content":"space-between",width:"100%"}},os={style:{color:"#999","font-size":"12px"}},is={style:{display:"flex","align-items":"center",gap:"8px"}},us={style:{"font-weight":"600"}},ds={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},rs={style:{display:"flex","align-items":"center",gap:"8px"}},cs={style:{"font-size":"13px"}},vs={style:{"font-size":"13px",color:"#606266"}},fs={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},ps={key:1,class:"relations-list"},ms={class:"relation-info"},ys={class:"relation-name"},gs={class:"relation-tags"},_s={class:"relation-desc"},ws={style:{display:"flex","align-items":"center","justify-content":"space-between"}},bs={style:{display:"flex",gap:"8px","margin-top":"4px"}},ks={style:{display:"flex","align-items":"center","justify-content":"space-between"}},hs={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},xs={style:{"font-size":"12px"}},Cs={style:{"font-size":"12px",color:"#606266"}},$s={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},Vs={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},zs={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ts={style:{"margin-bottom":"16px",display:"flex","align-items":"center",gap:"8px"}},Ss={class:"conv-drawer-body"},Is={key:0,style:{"text-align":"center","margin-bottom":"12px"}},Ls={class:"conv-msg-list"},Us={class:"conv-msg-meta"},Ds={class:"conv-msg-role"},As={key:0,class:"conv-msg-sender"},Fs={class:"conv-msg-time"},Ms={class:"conv-msg-content"},Ns={key:0,class:"conv-msg-empty"},Es={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},Rs={class:"channel-card-header"},Bs={class:"channel-card-left"},Ks={class:"channel-card-name"},Ps={key:0,class:"channel-bot-username"},js={class:"channel-card-actions"},Ws={key:0,class:"channel-card-body"},Os={class:"channel-info-row"},Ys={class:"channel-info-value"},Hs={class:"channel-info-row"},qs={class:"channel-info-value"},Js={key:1,class:"channel-card-body"},Xs={class:"channel-info-row"},Gs={class:"channel-info-value"},Qs={style:{opacity:"0.6","font-size":"11px","margin-left":"3px"}},Zs={class:"pending-section"},eo=["onClick"],lo={key:0,class:"pending-list"},to={key:0,style:{"text-align":"center",padding:"12px"}},ao={class:"pending-user-info"},no={class:"pending-user-name"},so={key:0,class:"pending-user-username"},oo={class:"pending-user-id"},io={class:"pending-user-actions"},uo={key:2,class:"pending-empty"},ro={style:{width:"100%"}},co={style:{display:"flex",gap:"6px","align-items":"center"}},vo={key:0,style:{"margin-top":"6px",display:"flex","align-items":"center",gap:"6px",color:"#909399","font-size":"13px"}},fo={key:1,style:{"margin-top":"6px",color:"#67c23a","font-size":"13px"}},po={key:2,style:{"margin-top":"6px",color:"#e6a23c","font-size":"13px"}},mo={key:3,style:{"margin-top":"6px",color:"#f56c6c","font-size":"13px"}},yo={key:4,style:{"margin-top":"4px"}},go={class:"channel-url-preview"},_o={class:"channel-url-text"},wo={class:"channel-url-preview"},bo={class:"channel-url-text"},ko={style:{padding:"20px","max-width":"800px"}},ho={style:{display:"flex",gap:"8px","margin-bottom":"16px","align-items":"flex-start"}},xo={style:{"font-size":"13px"}},Co=50,$o=Zl({__name:"AgentDetailView",setup(_l){const be=ta(),_=be.params.id,L=u(null),ke=u("chat"),m=u(),V=u([]),T=u(!1),M=u();async function ze(){T.value=!0;try{const n=await _t.list({agentId:_,limit:50});V.value=n.data.sessions}catch{}finally{T.value=!1}}function Te(n){M.value=n.id,m.value?.resumeSession(n.id)}function je(){M.value=void 0,m.value?.startNewSession()}function he(n){M.value=n,setTimeout(ze,500)}function re(n){if(!n)return"";const l=Date.now()-n;return l<6e4?"ÂàöÂàö":l<36e5?`${Math.floor(l/6e4)}ÂàÜÂâç`:l<864e5?`${Math.floor(l/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(l/864e5)}Â§©Ââç`}const oe=u(!1),h=u(""),N=u(""),Y=u(!1),X=u([]);function Ne(){oe.value=!oe.value,oe.value&&!X.value.length&&ce()}async function ce(){try{const n=await zl.list();X.value=n.data.filter(l=>l.id!==_)}catch{X.value=[]}}function xe(n){const l=X.value.find(v=>v.id===n);l&&m.value?.fillInput(`@${l.name}: `)}async function ie(){const n=h.value,l=N.value.trim();if(!n||!l)return;const z=X.value.find(al=>al.id===n)?.name??n;Y.value=!0;const te={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${z}Ôºö
${l}`};m.value?.appendMessage(te);try{const A=(await zl.message(n,l,_)).data.response,Ae={role:"assistant",text:`‚Üê **${z}** ÂõûÂ§çÔºö

${A}`};m.value?.appendMessage(Ae),N.value="",h.value="",oe.value=!1,y.success(`${z} Â∑≤ÂõûÂ§ç`)}catch(al){const A={role:"system",text:`[Â§±Ë¥•] ËΩ¨ÂèëÂ§±Ë¥•Ôºö${al.response?.data?.error??al.message??"ÁΩëÁªúÈîôËØØ"}`};m.value?.appendMessage(A),y.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{Y.value=!1}}const me=u(""),U=u(""),Ee=u([]),Z=u(""),We=u(!1),H=u([]),ve=u(""),ye=u(""),Se=u(!1);function nl(){const n=L.value?.env||{};H.value=Object.entries(n).map(([l,v])=>({key:l,value:v}))}function Ie(){const n=ve.value.trim();if(!n)return;const l=H.value.findIndex(v=>v.key===n);l>=0?H.value[l].value=ye.value:H.value.push({key:n,value:ye.value}),ve.value="",ye.value=""}function sl(n){H.value.splice(n,1)}async function Oe(){Se.value=!0;try{const n={};for(const{key:v,value:z}of H.value)v.trim()&&(n[v.trim()]=z);const l=await zl.update(_,{env:n});L.value=l.data,y.success("ÁéØÂ¢ÉÂèòÈáèÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Se.value=!1}}const K=u({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),ue=u(!1),Ye=u(!1);async function wl(){try{const n=await Rl.getConfig(_);K.value=n.data,g()}catch{}}async function el(){ue.value=!0;try{const n=await Rl.setConfig(_,K.value);K.value=n.data,y.success(K.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ue.value=!1}}async function ol(){Ye.value=!0;try{await Rl.consolidate(_),y.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(g,1e4)}catch{y.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{Ye.value=!1}}const fe=u([]),Le=u(!1);async function g(){Le.value=!0;try{const n=await Rl.runLog(_);fe.value=n.data||[]}catch{fe.value=[]}finally{Le.value=!1}}const c=u([]),S=u(""),x=u(""),q=u(!1),ge=u([]),ee=u(!1),se=u(""),_e=u(!1),Re=u(""),G=u([]),ll=u(!1),P=u({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function il(){try{const n=await mt.get(_);G.value=n.data.parsed||[]}catch{G.value=[]}}function ul(n){const l=X.value.find(v=>v.id===n);P.value.agentName=l?l.name:n}async function tl(){if(!P.value.agentId)return;if(G.value.find(l=>l.agentId===P.value.agentId)){y.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}G.value.push({...P.value}),P.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await pe()}async function Be(n){G.value.splice(n,1),await pe()}function Ue(){if(G.value.length===0)return"";const n=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,l=G.value.map(v=>`| ${v.agentId} | ${v.agentName} | ${v.relationType} | ${v.strength} | ${v.desc||""} |`).join(`
`);return n+`
`+l}async function pe(){ll.value=!0;try{await mt.put(_,Ue()),y.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{ll.value=!1}}function Ce(n){const l=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let v=0;for(let z=0;z<n.length;z++)v=n.charCodeAt(z)+((v<<5)-v);return l[Math.abs(v)%l.length]??"#409EFF"}function He(n){return n==="‰∏äÁ∫ß"?"danger":n==="‰∏ãÁ∫ß"?"":n==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function dl(n){return n==="Ê†∏ÂøÉ"?"danger":n==="Â∏∏Áî®"?"warning":"info"}const rl=u([]),Ke=u(!1),j=u({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function o(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function r(n){return n==="running"?"ËøêË°å‰∏≠":n==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function D(n){return n?n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB":"0 B"}function le(n){return n?new Date(n).toLocaleString():""}const $e=u([]),bl=u(!1),qe=u(!1),we=u(""),I=u(""),Q=u(!1),De=u(""),b=u({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""}),R=u({loading:!1,status:""});let Bl=null;function Kl(n){return/^\*+$/.test(n)}async function at(){const n=b.value.botToken;if(!(!n||Kl(n))){R.value={loading:!0,status:""};try{const v=(await Ve.checkToken(_,n)).data;v.duplicate?R.value={loading:!1,status:"duplicate",usedBy:v.usedBy,usedByCh:v.usedByCh}:v.valid?(R.value={loading:!1,status:"ok",botName:v.botName},!b.value.name&&v.botName&&(b.value.name=v.botName)):R.value={loading:!1,status:"error",error:v.error||"Token Êó†Êïà"}}catch{R.value={loading:!1,status:"error",error:"ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï"}}}}Ll(()=>b.value.type,n=>{we.value||(I.value=Pl(n))}),Ll(()=>b.value.botToken,n=>{R.value={loading:!1,status:""},Bl&&clearTimeout(Bl),!(!n||Kl(n)||n.length<20||!n.includes(":"))&&(Bl=setTimeout(at,800))});function cl(n,l){return l?`${window.location.origin}/chat/${n}/${l}`:`${window.location.origin}/chat/${n}`}function nt(n){navigator.clipboard.writeText(n).then(()=>y.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function vl(){bl.value=!0;try{const n=await Ve.list(_);$e.value=n.data||[]}catch{$e.value=[]}finally{bl.value=!1}}function Pl(n){return n+"-"+Date.now().toString(36)}function wt(){we.value="";const n=L.value?.name||"";I.value=Pl("telegram"),b.value={type:"telegram",name:n,enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},R.value={loading:!1,status:""},qe.value=!0}function bt(n){we.value=n.id,b.value={type:n.type,name:n.name,enabled:n.enabled,botToken:n.config?.botToken||"",allowedFrom:n.config?.allowedFrom||"",webPassword:"",webWelcome:n.config?.welcomeMsg||"",webTitle:n.config?.title||""},R.value={loading:!1,status:""},qe.value=!0}async function kt(){if(!b.value.name||!b.value.type){y.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}if(R.value.status==="duplicate"){y.error(`Bot Token Â∑≤Ë¢´ÊàêÂëò„Äå${R.value.usedBy}„Äç‰ΩøÁî®ÔºåËØ∑Êõ¥Êç¢`);return}Q.value=!0;try{const n={};if(b.value.type==="telegram"?(b.value.botToken&&(n.botToken=b.value.botToken),b.value.allowedFrom&&(n.allowedFrom=b.value.allowedFrom)):b.value.type==="web"&&(b.value.webPassword&&(n.password=b.value.webPassword),b.value.webWelcome&&(n.welcomeMsg=b.value.webWelcome),b.value.webTitle&&(n.title=b.value.webTitle)),we.value){const l=$e.value.map(v=>v.id!==we.value?v:{...v,name:b.value.name,type:b.value.type,enabled:b.value.enabled,config:{...v.config,...n}});await Ve.set(_,l)}else{const l={id:I.value||Pl(b.value.type),name:b.value.name,type:b.value.type,enabled:b.value.enabled,config:n,status:"untested"};await Ve.set(_,[...$e.value,l])}y.success(b.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),qe.value=!1,await vl()}catch(n){y.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Q.value=!1}}async function ht(){try{await Ve.set(_,$e.value)}catch(n){y.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•"),await vl()}}async function xt(n){const l=$e.value.filter(v=>v.id!==n.id);try{await Ve.set(_,l),$e.value=l,y.success("Â∑≤Âà†Èô§")}catch{y.error("Âà†Èô§Â§±Ë¥•")}}async function Ct(n){De.value=n.id;try{const l=await Ve.test(_,n.id);l.data.valid?y.success(l.data.botName?`ÊµãËØïÊàêÂäü (@${l.data.botName})`:"ÊµãËØïÊàêÂäü"):y.error(l.data.error||"ÊµãËØïÂ§±Ë¥•"),await vl()}catch{y.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{De.value=""}}const fl=u({}),jl=u({}),kl=u(""),Wl=u("");async function Dl(n){jl.value[n]=!0;try{const l=await Ve.listPending(_,n);fl.value[n]=l.data||[]}catch{fl.value[n]=[]}finally{jl.value[n]=!1}}function $t(n){kl.value===n?kl.value="":(kl.value=n,Dl(n))}async function Vt(n,l){Wl.value=`${n}-${l}`;try{await Ve.allowUser(_,n,l),y.success(`Áî®Êà∑ ${l} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await Dl(n),await vl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}finally{Wl.value=""}}async function zt(n,l){try{await Ve.dismissUser(_,n,l),y.success("Â∑≤ÂøΩÁï•"),await Dl(n)}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}async function st(n,l){try{await Il.confirm(`Á°ÆÂÆöÂ∞ÜÁî®Êà∑ ${l} ‰ªéÁôΩÂêçÂçï‰∏≠ÁßªÈô§ÔºüÁßªÈô§ÂêéËØ•Áî®Êà∑Â∞ÜÊó†Ê≥ï‰ΩøÁî®Ê≠§ Bot„ÄÇ`,"ÁßªÈô§ÁôΩÂêçÂçï",{confirmButtonText:"Á°ÆËÆ§ÁßªÈô§",cancelButtonText:"ÂèñÊ∂à",type:"warning"})}catch{return}try{await Ve.removeAllowed(_,n,l),y.success(`Áî®Êà∑ ${l} Â∑≤‰ªéÁôΩÂêçÂçïÁßªÈô§`),await vl()}catch{y.error("Êìç‰ΩúÂ§±Ë¥•")}}et(async()=>{try{const v=await zl.get(_);L.value=v.data}catch{y.error("Âä†ËΩΩ Agent Â§±Ë¥•")}Tt(),St(),il(),ce(),wl(),Al(),vl(),nl(),await ze();const n=be.query.tab;n&&(ke.value=n);const l=be.query.resumeSession;l&&(M.value=l,await new Promise(z=>setTimeout(z,100)),m.value?.resumeSession(l),V.value.find(z=>z.id===l)||(M.value=l))});async function Tt(){try{const[n,l]=await Promise.all([J.read(_,"IDENTITY.md"),J.read(_,"SOUL.md")]);me.value=n.data?.content||"",U.value=l.data?.content||""}catch{}hl()}async function ot(n,l){try{await J.write(_,n,l),y.success(`${n} Â∑≤‰øùÂ≠ò`)}catch{y.error(`‰øùÂ≠ò ${n} Â§±Ë¥•`)}}async function St(){try{const n=await da.list();if(Ee.value=n.data||[],L.value?.modelId)Z.value=L.value.modelId;else{const l=Ee.value.find(v=>v.provider+"/"+v.model===L.value?.model||v.id===L.value?.model);Z.value=l?.id||""}}catch{}}async function It(){if(Z.value){We.value=!0;try{const n=await zl.update(_,{modelId:Z.value});L.value=n.data,y.success("Ê®°ÂûãÂ∑≤Êõ¥Êñ∞")}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}finally{We.value=!1}}}async function hl(){try{const n=await Tl.tree(_);c.value=n.data||[]}catch{c.value=[]}}async function Lt(n){if(!n.isDir){S.value=n.path,ge.value=n.path.split("/");try{const l=await Tl.readFile(_,n.path);x.value=l.data?.content||""}catch{x.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function Ut(){if(S.value){q.value=!0;try{await Tl.writeFile(_,S.value,x.value),y.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),hl()}catch{y.error("‰øùÂ≠òÂ§±Ë¥•")}finally{q.value=!1}}}async function Dt(){const n=se.value.trim();if(!n){y.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await Tl.writeFile(_,n,`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`),y.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),ee.value=!1,se.value="",hl(),S.value=n,ge.value=n.split("/"),x.value=`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`}catch{y.error("ÂàõÂª∫Â§±Ë¥•")}}async function At(){const n=Re.value.trim();if(!n){y.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await Tl.dailyLog(_,n),y.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),_e.value=!1,Re.value="",hl()}catch{y.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Al(){try{const n=await Sl.list(_);rl.value=n.data||[]}catch{}}async function Ft(){try{await Sl.create({name:j.value.name,enabled:j.value.enabled,agentId:_,schedule:{kind:"cron",expr:j.value.expr,tz:j.value.tz},payload:{kind:"agentTurn",message:j.value.message},delivery:{mode:"announce"}}),y.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),Ke.value=!1,Al()}catch(n){y.error(n.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Mt(n){try{await Sl.update(n.id,n)}catch{y.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function it(n){try{await Sl.run(n.id),y.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(Al,2e3)}catch{y.error("ËøêË°åÂ§±Ë¥•")}}async function Nt(n){try{await Sl.delete(n.id),y.success("Â∑≤Âà†Èô§"),Al()}catch{y.error("Âà†Èô§Â§±Ë¥•")}}const Fl=u(!1),Ol=u([]),Yl=u(!1),Hl=u(""),Je=u([]),ql=u(0),Ml=u(0),Et=gl(()=>Je.value.length<ql.value),xl=u(!1);async function ut(){Fl.value=!0;try{const n=await yt.list(_);Ol.value=n.data}catch{y.error("Âä†ËΩΩÂØπËØùÊ∏†ÈÅìÂ§±Ë¥•")}finally{Fl.value=!1}}async function Rt(n){Hl.value=n.channelId,Je.value=[],ql.value=0,Ml.value=0,Yl.value=!0,await dt()}async function dt(){xl.value=!0;try{const l=(await yt.messages(_,Hl.value,{limit:Co,offset:Ml.value})).data;ql.value=l.total,Ml.value===0?Je.value=l.messages:Je.value=[...l.messages,...Je.value],Ml.value+=l.messages.length}catch{y.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•")}finally{xl.value=!1}}async function Bt(){await dt()}return Ll(ke,n=>{n==="convlogs"&&Ol.value.length===0&&ut()}),(n,l)=>{const v=w("el-button"),z=w("el-tag"),te=w("el-text"),al=w("el-header"),A=w("el-option"),Ae=w("el-select"),W=w("el-input"),Fe=w("el-tab-pane"),F=w("el-form-item"),pl=w("el-form"),Me=w("el-card"),de=w("el-col"),ml=w("el-row"),rt=w("el-badge"),O=w("el-table-column"),Cl=w("el-table"),$l=w("el-switch"),Kt=w("el-input-number"),ae=w("el-icon"),Pt=w("el-tree"),Jl=w("el-empty"),ct=w("el-breadcrumb-item"),jt=w("el-breadcrumb"),Nl=w("el-dialog"),Wt=w("el-drawer"),Ot=w("el-link"),Yt=w("CircleCheck"),Ht=w("Warning"),qt=w("CircleClose"),vt=w("InfoFilled"),ft=w("Link"),Jt=w("el-tabs"),Xt=w("el-main"),Gt=w("el-container"),Xl=ua("loading");return i(),$(Gt,{class:"agent-detail"},{default:t(()=>[e(al,{class:"detail-header"},{default:t(()=>[s("div",Hn,[e(v,{icon:E(aa),onClick:l[0]||(l[0]=a=>n.$router.push("/agents")),circle:""},null,8,["icon"]),s("h2",null,f(L.value?.name||"..."),1),e(z,{type:o(L.value?.status)},{default:t(()=>[d(f(r(L.value?.status)),1)]),_:1},8,["type"])]),e(te,{type:"info"},{default:t(()=>[d(f(L.value?.model),1)]),_:1})]),_:1}),e(Xt,null,{default:t(()=>[e(Jt,{modelValue:ke.value,"onUpdate:modelValue":l[47]||(l[47]=a=>ke.value=a),type:"border-card"},{default:t(()=>[e(Fe,{label:"ÂØπËØù",name:"chat"},{default:t(()=>[s("div",qn,[s("div",Jn,[s("div",Xn,[l[49]||(l[49]=s("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),e(v,{size:"small",type:"primary",plain:"",onClick:je,icon:E(El)},{default:t(()=>[...l[48]||(l[48]=[d("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),Pe((i(),p("div",Gn,[(i(!0),p(B,null,ne(V.value,a=>(i(),p("div",{key:a.id,class:Ze(["session-item",{active:M.value===a.id}]),onClick:k=>Te(a)},[s("div",Zn,f(a.title||"Êñ∞ÂØπËØù"),1),s("div",es,[s("span",null,f(re(a.lastAt)),1),e(z,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[d(f(a.messageCount)+" Êù° ",1)]),_:2},1024),a.tokenEstimate>6e4?(i(),$(z,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:t(()=>[d("~"+f(Math.round(a.tokenEstimate/1e3))+"k",1)]),_:2},1024)):C("",!0)])],10,Qn))),128)),!T.value&&!V.value.length?(i(),p("div",ls," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):C("",!0)])),[[Xl,T.value]]),s("div",ts,[e(v,{size:"small",plain:"",class:"at-toggle-btn",onClick:Ne},{default:t(()=>[...l[50]||(l[50]=[s("span",{class:"at-icon"},"@",-1),d(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),oe.value?(i(),p("div",as,[e(Ae,{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=a=>h.value=a),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:xe},{default:t(()=>[(i(!0),p(B,null,ne(X.value,a=>(i(),$(A,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(W,{modelValue:N.value,"onUpdate:modelValue":l[2]||(l[2]=a=>N.value=a),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),e(v,{type:"primary",size:"small",style:{width:"100%"},loading:Y.value,disabled:!h.value||!N.value.trim(),onClick:ie},{default:t(()=>[...l[51]||(l[51]=[d(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):C("",!0)])]),s("div",ns,[e(lt,{ref_key:"aiChatRef",ref:m,"agent-id":E(_),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${L.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:he},null,8,["agent-id","welcome-message"])])])]),_:1}),e(Fe,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:t(()=>[e(Yn,{"agent-id":E(_),style:{height:"calc(100vh - 145px)"}},null,8,["agent-id"])]),_:1}),e(Fe,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:t(()=>[e(Me,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[52]||(l[52]=[s("span",{style:{"font-weight":"600"}},"Âü∫Êú¨ËÆæÁΩÆ",-1)])]),default:t(()=>[e(pl,{"label-width":"80px",size:"default"},{default:t(()=>[e(F,{label:"‰ΩøÁî®Ê®°Âûã"},{default:t(()=>[e(Ae,{modelValue:Z.value,"onUpdate:modelValue":l[3]||(l[3]=a=>Z.value=a),placeholder:"ÈÄâÊã©Ê®°Âûã",style:{width:"280px","margin-right":"10px"}},{default:t(()=>[(i(!0),p(B,null,ne(Ee.value,a=>(i(),$(A,{key:a.id,label:a.name||a.model,value:a.id},{default:t(()=>[s("div",ss,[s("span",null,f(a.name||a.model),1),s("span",os,f(a.provider),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(v,{type:"primary",loading:We.value,onClick:It,disabled:!Z.value},{default:t(()=>[...l[53]||(l[53]=[d("‰øùÂ≠ò",-1)])]),_:1},8,["loading","disabled"]),L.value?.model?(i(),$(te,{key:0,type:"info",style:{"margin-left":"12px","font-size":"12px"}},{default:t(()=>[d(" ÂΩìÂâçÔºö"+f(L.value.model),1)]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1}),e(ml,{gutter:20},{default:t(()=>[e(de,{span:12},{default:t(()=>[e(Me,{header:"IDENTITY.md"},{default:t(()=>[e(W,{modelValue:me.value,"onUpdate:modelValue":l[4]||(l[4]=a=>me.value=a),type:"textarea",rows:15,onBlur:l[5]||(l[5]=a=>ot("IDENTITY.md",me.value))},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{span:12},{default:t(()=>[e(Me,{header:"SOUL.md"},{default:t(()=>[e(W,{modelValue:U.value,"onUpdate:modelValue":l[6]||(l[6]=a=>U.value=a),type:"textarea",rows:15,onBlur:l[7]||(l[7]=a=>ot("SOUL.md",U.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Fe,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:t(()=>[e(ml,{gutter:20},{default:t(()=>[e(de,{span:14},{default:t(()=>[e(Me,{style:{"margin-bottom":"16px"}},{header:t(()=>[...l[54]||(l[54]=[s("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:t(()=>[e(pl,{model:P.value,"label-position":"top",size:"default"},{default:t(()=>[e(ml,{gutter:12},{default:t(()=>[e(de,{span:10},{default:t(()=>[e(F,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:t(()=>[e(Ae,{modelValue:P.value.agentId,"onUpdate:modelValue":l[8]||(l[8]=a=>P.value.agentId=a),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:ul},{default:t(()=>[(i(!0),p(B,null,ne(X.value,a=>(i(),$(A,{key:a.id,label:a.name,value:a.id},{default:t(()=>[s("div",is,[s("div",{style:Qe([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:Ce(a.id)}])},f(a.name.charAt(0)),5),s("span",null,f(a.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(de,{span:7},{default:t(()=>[e(F,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:t(()=>[e(Ae,{modelValue:P.value.relationType,"onUpdate:modelValue":l[9]||(l[9]=a=>P.value.relationType=a),style:{width:"100%"}},{default:t(()=>[e(A,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),e(A,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),e(A,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),e(A,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(de,{span:7},{default:t(()=>[e(F,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:t(()=>[e(Ae,{modelValue:P.value.strength,"onUpdate:modelValue":l[10]||(l[10]=a=>P.value.strength=a),style:{width:"100%"}},{default:t(()=>[e(A,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),e(A,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),e(A,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ml,{gutter:12},{default:t(()=>[e(de,{span:18},{default:t(()=>[e(F,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:t(()=>[e(W,{modelValue:P.value.desc,"onUpdate:modelValue":l[11]||(l[11]=a=>P.value.desc=a),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{span:6},{default:t(()=>[e(F,{label:" "},{default:t(()=>[e(v,{type:"primary",style:{width:"100%"},disabled:!P.value.agentId||!P.value.relationType||!P.value.strength,loading:ll.value,onClick:tl},{default:t(()=>[...l[55]||(l[55]=[d(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Me,null,{header:t(()=>[s("span",us,[l[56]||(l[56]=d("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),e(rt,{value:G.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:t(()=>[G.value.length===0?(i(),p("div",ds," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(i(),$(Cl,{key:1,data:G.value,size:"small",style:{width:"100%"}},{default:t(()=>[e(O,{label:"ÊàêÂëò","min-width":"120"},{default:t(({row:a})=>[s("div",rs,[s("div",{style:Qe([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:Ce(a.agentId)}])},f(a.agentName.charAt(0)),5),s("span",cs,f(a.agentName),1)])]),_:1}),e(O,{label:"Á±ªÂûã",width:"100"},{default:t(({row:a})=>[e(z,{type:He(a.relationType),size:"small"},{default:t(()=>[d(f(a.relationType),1)]),_:2},1032,["type"])]),_:1}),e(O,{label:"Á®ãÂ∫¶",width:"80"},{default:t(({row:a})=>[e(z,{type:dl(a.strength),size:"small",effect:"plain"},{default:t(()=>[d(f(a.strength),1)]),_:2},1032,["type"])]),_:1}),e(O,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:t(({row:a})=>[s("span",vs,f(a.desc||"‚Äî"),1)]),_:1}),e(O,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:t(({$index:a})=>[e(v,{type:"danger",link:"",size:"small",onClick:k=>Be(a)},{default:t(()=>[...l[57]||(l[57]=[d("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),e(de,{span:10},{default:t(()=>[e(Me,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:t(()=>[G.value.length===0?(i(),p("div",fs," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(i(),p("div",ps,[(i(!0),p(B,null,ne(G.value,a=>(i(),p("div",{key:a.agentId,class:"relation-card"},[s("div",{class:"relation-avatar",style:Qe({background:Ce(a.agentId)})},f(a.agentName.charAt(0).toUpperCase()),5),s("div",ms,[s("div",ys,f(a.agentName),1),s("div",gs,[e(z,{type:He(a.relationType),size:"small"},{default:t(()=>[d(f(a.relationType),1)]),_:2},1032,["type"]),e(z,{type:dl(a.strength),size:"small",effect:"plain"},{default:t(()=>[d(f(a.strength),1)]),_:2},1032,["type"])]),s("div",_s,f(a.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(Fe,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:t(()=>[e(Me,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[s("div",ws,[l[58]||(l[58]=s("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),e($l,{modelValue:K.value.enabled,"onUpdate:modelValue":l[12]||(l[12]=a=>K.value.enabled=a),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:el},null,8,["modelValue"])])]),default:t(()=>[e(pl,{model:K.value,"label-position":"top",size:"small",disabled:!K.value.enabled},{default:t(()=>[e(ml,{gutter:16},{default:t(()=>[e(de,{span:6},{default:t(()=>[e(F,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:t(()=>[e(Ae,{modelValue:K.value.schedule,"onUpdate:modelValue":l[13]||(l[13]=a=>K.value.schedule=a),style:{width:"100%"}},{default:t(()=>[e(A,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),e(A,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),e(A,{label:"ÊØèÂ§©",value:"daily"}),e(A,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(de,{span:5},{default:t(()=>[e(F,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:t(()=>[e(Kt,{modelValue:K.value.keepTurns,"onUpdate:modelValue":l[14]||(l[14]=a=>K.value.keepTurns=a),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{span:13},{default:t(()=>[e(F,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:t(()=>[e(W,{modelValue:K.value.focusHint,"onUpdate:modelValue":l[15]||(l[15]=a=>K.value.focusHint=a),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s("div",bs,[e(v,{type:"primary",size:"small",loading:ue.value,onClick:el},{default:t(()=>[...l[59]||(l[59]=[d(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),e(v,{size:"small",loading:Ye.value,onClick:ol},{default:t(()=>[...l[60]||(l[60]=[d(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),e(te,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:t(()=>[d(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+f(K.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),e(Me,{style:{"margin-bottom":"16px"},shadow:"never"},{header:t(()=>[s("div",ks,[l[62]||(l[62]=s("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),e(v,{size:"small",text:"",onClick:g,loading:Le.value},{default:t(()=>[...l[61]||(l[61]=[d("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:t(()=>[fe.value.length===0&&!Le.value?(i(),p("div",hs," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(i(),$(Cl,{key:1,data:fe.value.slice(0,20),size:"small"},{default:t(()=>[e(O,{label:"Êó∂Èó¥",width:"160"},{default:t(({row:a})=>[s("span",xs,f(le(a.timestamp)),1)]),_:1}),e(O,{label:"Áä∂ÊÄÅ",width:"72"},{default:t(({row:a})=>[e(z,{type:a.status==="ok"?"success":"danger",size:"small"},{default:t(()=>[d(f(a.status),1)]),_:2},1032,["type"])]),_:1}),e(O,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[s("span",Cs,f(a.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),s("div",$s,[e(v,{type:"primary",size:"small",onClick:l[16]||(l[16]=a=>ee.value=!0)},{default:t(()=>[e(ae,null,{default:t(()=>[e(E(El))]),_:1}),l[63]||(l[63]=d(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),e(v,{size:"small",onClick:l[17]||(l[17]=a=>_e.value=!0)},{default:t(()=>[e(ae,null,{default:t(()=>[e(E(na))]),_:1}),l[64]||(l[64]=d(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),e(v,{size:"small",onClick:hl},{default:t(()=>[e(ae,null,{default:t(()=>[e(E(Ql))]),_:1}),l[65]||(l[65]=d(" Âà∑Êñ∞ ",-1))]),_:1})]),e(ml,{gutter:16},{default:t(()=>[e(de,{span:7},{default:t(()=>[e(Me,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:t(()=>[e(Pt,{data:c.value,props:{label:"name",children:"children",isLeaf:a=>!a.isDir},onNodeClick:Lt,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:t(({data:a})=>[s("span",Vs,[a.isDir?(i(),$(ae,{key:0,style:{color:"#E6A23C"}},{default:t(()=>[e(E(sa))]),_:1})):(i(),$(ae,{key:1,style:{color:"#409EFF"}},{default:t(()=>[e(E(oa))]),_:1})),s("span",null,f(a.name),1),!a.isDir&&a.size?(i(),$(te,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:t(()=>[d(f(D(a.size)),1)]),_:2},1024)):C("",!0)])]),_:1},8,["data","props"]),c.value.length===0?(i(),$(Jl,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):C("",!0)]),_:1})]),_:1}),e(de,{span:17},{default:t(()=>[e(Me,{shadow:"hover"},{header:t(()=>[s("div",zs,[e(jt,{separator:"/"},{default:t(()=>[e(ct,null,{default:t(()=>[...l[66]||(l[66]=[d("memory",-1)])]),_:1}),(i(!0),p(B,null,ne(ge.value,(a,k)=>(i(),$(ct,{key:k},{default:t(()=>[d(f(a),1)]),_:2},1024))),128))]),_:1}),S.value?(i(),$(v,{key:0,type:"primary",size:"small",onClick:Ut,loading:q.value},{default:t(()=>[...l[67]||(l[67]=[d("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):C("",!0)])]),default:t(()=>[S.value?(i(),$(W,{key:0,modelValue:x.value,"onUpdate:modelValue":l[18]||(l[18]=a=>x.value=a),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(i(),$(Jl,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),e(Nl,{modelValue:ee.value,"onUpdate:modelValue":l[21]||(l[21]=a=>ee.value=a),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:t(()=>[e(v,{onClick:l[20]||(l[20]=a=>ee.value=!1)},{default:t(()=>[...l[69]||(l[69]=[d("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Dt},{default:t(()=>[...l[70]||(l[70]=[d("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(pl,{"label-width":"80px"},{default:t(()=>[e(F,{label:"Ë∑ØÂæÑ"},{default:t(()=>[e(W,{modelValue:se.value,"onUpdate:modelValue":l[19]||(l[19]=a=>se.value=a),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),e(te,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:t(()=>[...l[68]||(l[68]=[d("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Nl,{modelValue:_e.value,"onUpdate:modelValue":l[24]||(l[24]=a=>_e.value=a),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:t(()=>[e(v,{onClick:l[23]||(l[23]=a=>_e.value=!1)},{default:t(()=>[...l[71]||(l[71]=[d("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:At},{default:t(()=>[...l[72]||(l[72]=[d("Êèê‰∫§",-1)])]),_:1})]),default:t(()=>[e(W,{modelValue:Re.value,"onUpdate:modelValue":l[22]||(l[22]=a=>Re.value=a),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(Fe,{label:"ÊäÄËÉΩ",name:"skills"},{default:t(()=>[e(tn,{"agent-id":E(_)},null,8,["agent-id"])]),_:1}),e(Fe,{label:"ÂéÜÂè≤ÂØπËØù",name:"convlogs"},{default:t(()=>[s("div",Ts,[l[73]||(l[73]=s("span",{style:{"font-weight":"600","font-size":"15px"}},"Ê∏†ÈÅìÂØπËØùËÆ∞ÂΩï",-1)),e(v,{size:"small",icon:E(Ql),circle:"",onClick:ut,loading:Fl.value},null,8,["icon","loading"])]),Pe((i(),$(Cl,{data:Ol.value,stripe:"","empty-text":"ÊöÇÊó†ÂØπËØùËÆ∞ÂΩï"},{default:t(()=>[e(O,{label:"Ê∏†ÈÅì","min-width":"200"},{default:t(({row:a})=>[s("span",null,f(a.channelType==="telegram"?"Telegram":"Web")+" "+f(a.channelId),1)]),_:1}),e(O,{label:"Ê∂àÊÅØÊï∞",width:"100"},{default:t(({row:a})=>[d(f(a.messageCount)+" Êù°",1)]),_:1}),e(O,{label:"ÊúÄÂêéÊ¥ªË∑É",width:"180"},{default:t(({row:a})=>[d(f(a.lastAt?new Date(a.lastAt).toLocaleString("zh-CN"):"-"),1)]),_:1}),e(O,{label:"Êìç‰Ωú",width:"100"},{default:t(({row:a})=>[e(v,{size:"small",type:"primary",plain:"",onClick:k=>Rt(a)},{default:t(()=>[...l[74]||(l[74]=[d("Êü•Áúã",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Xl,Fl.value]]),e(Wt,{modelValue:Yl.value,"onUpdate:modelValue":l[25]||(l[25]=a=>Yl.value=a),title:Hl.value+" ÂØπËØùËÆ∞ÂΩï",direction:"rtl",size:"520px","destroy-on-close":!1},{default:t(()=>[s("div",Ss,[Et.value?(i(),p("div",Is,[e(v,{size:"small",plain:"",loading:xl.value,onClick:Bt},{default:t(()=>[...l[75]||(l[75]=[d("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):C("",!0),Pe((i(),p("div",Ls,[(i(!0),p(B,null,ne(Je.value,(a,k)=>(i(),p("div",{key:k,class:Ze(["conv-msg-item",a.role==="user"?"conv-msg-user":"conv-msg-assistant"])},[s("div",Us,[s("span",Ds,f(a.role==="user"?"Áî®Êà∑":"Âä©Êâã"),1),a.sender?(i(),p("span",As,f(a.sender),1)):C("",!0),s("span",Fs,f(a.ts?new Date(a.ts).toLocaleString("zh-CN"):""),1)]),s("div",Ms,f(a.content),1)],2))),128)),!xl.value&&Je.value.length===0?(i(),p("div",Ns," ÊöÇÊó†Ê∂àÊÅØËÆ∞ÂΩï ")):C("",!0)])),[[Xl,xl.value&&Je.value.length===0]])])]),_:1},8,["modelValue","title"])]),_:1}),e(Fe,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:t(()=>[e(v,{type:"primary",onClick:l[26]||(l[26]=a=>Ke.value=!0),style:{"margin-bottom":"16px"}},{default:t(()=>[e(ae,null,{default:t(()=>[e(E(El))]),_:1}),l[76]||(l[76]=d(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),e(Cl,{data:rl.value,stripe:""},{default:t(()=>[e(O,{prop:"name",label:"ÂêçÁß∞"}),e(O,{label:"Ë∞ÉÂ∫¶"},{default:t(({row:a})=>[d(f(a.schedule?.expr)+" ("+f(a.schedule?.tz)+")",1)]),_:1}),e(O,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:t(({row:a})=>[a.state?.lastRunAtMs?(i(),p(B,{key:0},[e(z,{type:a.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:t(()=>[d(f(a.state?.lastStatus),1)]),_:2},1032,["type"]),e(te,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:t(()=>[d(f(le(a.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(i(),$(te,{key:1,type:"info",size:"small"},{default:t(()=>[...l[77]||(l[77]=[d("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),e(O,{label:"ÂêØÁî®",width:"80"},{default:t(({row:a})=>[e($l,{modelValue:a.enabled,"onUpdate:modelValue":k=>a.enabled=k,onChange:k=>Mt(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(O,{label:"Êìç‰Ωú",width:"220"},{default:t(({row:a})=>[a.payload?.message==="__MEMORY_CONSOLIDATE__"?(i(),p(B,{key:0},[e(z,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:t(()=>[...l[78]||(l[78]=[d("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),e(v,{size:"small",onClick:k=>it(a)},{default:t(()=>[...l[79]||(l[79]=[d("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(i(),p(B,{key:1},[e(v,{size:"small",onClick:k=>it(a)},{default:t(()=>[...l[80]||(l[80]=[d("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),e(v,{size:"small",type:"danger",onClick:k=>Nt(a)},{default:t(()=>[...l[81]||(l[81]=[d("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),e(Nl,{modelValue:Ke.value,"onUpdate:modelValue":l[33]||(l[33]=a=>Ke.value=a),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:t(()=>[e(v,{onClick:l[32]||(l[32]=a=>Ke.value=!1)},{default:t(()=>[...l[82]||(l[82]=[d("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:Ft},{default:t(()=>[...l[83]||(l[83]=[d("ÂàõÂª∫",-1)])]),_:1})]),default:t(()=>[e(pl,{model:j.value,"label-width":"100px"},{default:t(()=>[e(F,{label:"ÂêçÁß∞"},{default:t(()=>[e(W,{modelValue:j.value.name,"onUpdate:modelValue":l[27]||(l[27]=a=>j.value.name=a)},null,8,["modelValue"])]),_:1}),e(F,{label:"Cron Ë°®ËææÂºè"},{default:t(()=>[e(W,{modelValue:j.value.expr,"onUpdate:modelValue":l[28]||(l[28]=a=>j.value.expr=a),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),e(F,{label:"Êó∂Âå∫"},{default:t(()=>[e(Ae,{modelValue:j.value.tz,"onUpdate:modelValue":l[29]||(l[29]=a=>j.value.tz=a)},{default:t(()=>[e(A,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(A,{label:"UTC",value:"UTC"}),e(A,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),e(F,{label:"Ê∂àÊÅØ"},{default:t(()=>[e(W,{modelValue:j.value.message,"onUpdate:modelValue":l[30]||(l[30]=a=>j.value.message=a),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),e(F,{label:"ÂêØÁî®"},{default:t(()=>[e($l,{modelValue:j.value.enabled,"onUpdate:modelValue":l[31]||(l[31]=a=>j.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),e(Fe,{label:"Ê∏†ÈÅì",name:"channels"},{default:t(()=>[s("div",Es,[e(te,{type:"info",size:"small"},{default:t(()=>[...l[84]||(l[84]=[d("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),e(v,{type:"primary",size:"small",onClick:wt},{default:t(()=>[e(ae,null,{default:t(()=>[e(E(El))]),_:1}),l[85]||(l[85]=d(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(i(!0),p(B,null,ne($e.value,a=>(i(),p("div",{key:a.id,class:"channel-card"},[s("div",Rs,[s("div",Bs,[e(z,{size:"small",style:{"margin-right":"8px"}},{default:t(()=>[d(f(a.type),1)]),_:2},1024),s("span",Ks,f(a.name),1),a.config?.botName?(i(),p("span",Ps,"@"+f(a.config.botName),1)):C("",!0),e(z,{type:a.status==="ok"?"success":a.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:t(()=>[d(f(a.status==="ok"?"‚úì Ê≠£Â∏∏":a.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),s("div",js,[e($l,{modelValue:a.enabled,"onUpdate:modelValue":k=>a.enabled=k,size:"small",onChange:ht,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),e(v,{size:"small",onClick:k=>Ct(a),loading:De.value===a.id},{default:t(()=>[...l[86]||(l[86]=[d("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),e(v,{size:"small",onClick:k=>bt(a)},{default:t(()=>[...l[87]||(l[87]=[d("ÁºñËæë",-1)])]),_:1},8,["onClick"]),e(v,{size:"small",type:"danger",plain:"",onClick:k=>xt(a)},{default:t(()=>[...l[88]||(l[88]=[d("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),a.type==="web"?(i(),p("div",Ws,[s("div",Os,[l[90]||(l[90]=s("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),s("span",Ys,[e(Ot,{href:cl(E(_),a.id),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:t(()=>[d(f(cl(E(_),a.id)),1)]),_:2},1032,["href"]),e(v,{size:"small",link:"",style:{"margin-left":"8px"},onClick:k=>nt(cl(E(_),a.id))},{default:t(()=>[...l[89]||(l[89]=[d("Â§çÂà∂",-1)])]),_:1},8,["onClick"])])]),s("div",Hs,[l[91]||(l[91]=s("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),s("span",qs,[e(z,{size:"small",type:a.config?.password?"warning":"info",effect:"plain"},{default:t(()=>[d(f(a.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):C("",!0),a.type==="telegram"?(i(),p("div",Js,[s("div",Xs,[l[93]||(l[93]=s("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),s("span",Gs,[a.allowedFromUsers?.length?(i(!0),p(B,{key:0},ne(a.allowedFromUsers,k=>(i(),$(z,{key:k.id,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Gl=>st(a.id,k.id)},{default:t(()=>[d(f(k.username?"@"+k.username:k.firstName||String(k.id))+" ",1),s("span",Qs,"("+f(k.id)+")",1)]),_:2},1032,["onClose"]))),128)):a.config?.allowedFrom?(i(!0),p(B,{key:1},ne(a.config.allowedFrom.split(","),k=>(i(),$(z,{key:k,size:"small",closable:"","disable-transitions":!0,style:{"margin-right":"4px","margin-bottom":"4px"},onClose:Gl=>st(a.id,Number(k.trim()))},{default:t(()=>[d(f(k.trim()),1)]),_:2},1032,["onClose"]))),128)):(i(),$(te,{key:2,type:"warning",size:"small"},{default:t(()=>[...l[92]||(l[92]=[d("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),s("div",Zs,[s("div",{class:"pending-section-header",onClick:k=>$t(a.id)},[l[95]||(l[95]=s("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),e(rt,{value:(fl.value[a.id]||[]).length,hidden:!(fl.value[a.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),e(v,{size:"small",link:"",onClick:Xe(k=>Dl(a.id),["stop"]),style:{"margin-left":"8px"}},{default:t(()=>[...l[94]||(l[94]=[d("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),e(ae,{style:Qe([{"margin-left":"4px",transition:"transform 0.2s"},{transform:kl.value===a.id?"rotate(180deg)":""}])},{default:t(()=>[e(E(ia))]),_:1},8,["style"])],8,eo),kl.value===a.id?(i(),p("div",lo,[jl.value[a.id]?(i(),p("div",to,[e(te,{type:"info",size:"small"},{default:t(()=>[...l[96]||(l[96]=[d("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(fl.value[a.id]||[]).length?(i(!0),p(B,{key:1},ne(fl.value[a.id],k=>(i(),p("div",{key:k.id,class:"pending-user-row"},[s("div",ao,[s("span",no,f(k.firstName||"Êú™Áü•"),1),k.username?(i(),p("span",so,"@"+f(k.username),1)):C("",!0),s("span",oo,"ID: "+f(k.id),1),e(te,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[d(f(re(k.lastSeen)),1)]),_:2},1024)]),s("div",io,[e(v,{size:"small",type:"success",plain:"",onClick:Gl=>Vt(a.id,k.id),loading:Wl.value===`${a.id}-${k.id}`},{default:t(()=>[...l[97]||(l[97]=[d("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),e(v,{size:"small",type:"danger",plain:"",onClick:Gl=>zt(a.id,k.id)},{default:t(()=>[...l[98]||(l[98]=[d("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(i(),p("div",uo," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):C("",!0)])])):C("",!0)]))),128)),!bl.value&&!$e.value.length?(i(),$(Jl,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):C("",!0),e(Nl,{modelValue:qe.value,"onUpdate:modelValue":l[44]||(l[44]=a=>qe.value=a),title:we.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:t(()=>[e(v,{onClick:l[43]||(l[43]=a=>qe.value=!1)},{default:t(()=>[...l[108]||(l[108]=[d("ÂèñÊ∂à",-1)])]),_:1}),e(v,{type:"primary",onClick:kt,loading:Q.value},{default:t(()=>[...l[109]||(l[109]=[d("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:t(()=>[e(pl,{model:b.value,"label-width":"120px"},{default:t(()=>[e(F,{label:"Á±ªÂûã",required:""},{default:t(()=>[e(Ae,{modelValue:b.value.type,"onUpdate:modelValue":l[34]||(l[34]=a=>b.value.type=a),style:{width:"100%"}},{default:t(()=>[e(A,{label:"Telegram",value:"telegram"}),e(A,{label:"Web ËÅäÂ§©È°µ",value:"web"}),e(A,{label:"iMessage",value:"imessage"}),e(A,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),e(F,{label:"ÂêçÁß∞",required:""},{default:t(()=>[e(W,{modelValue:b.value.name,"onUpdate:modelValue":l[35]||(l[35]=a=>b.value.name=a),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),b.value.type==="telegram"?(i(),p(B,{key:0},[e(F,{label:"Bot Token",required:""},{default:t(()=>[s("div",ro,[s("div",co,[e(W,{modelValue:b.value.botToken,"onUpdate:modelValue":l[36]||(l[36]=a=>b.value.botToken=a),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ",style:{flex:"1"},status:R.value.status==="error"?"error":R.value.status==="ok"?"success":""},null,8,["modelValue","status"]),e(v,{size:"default",loading:R.value.loading,type:R.value.status==="ok"?"success":R.value.status==="error"?"danger":"default",onClick:at,disabled:!b.value.botToken||Kl(b.value.botToken)},{default:t(()=>[...l[99]||(l[99]=[d("È™åËØÅ",-1)])]),_:1},8,["loading","type","disabled"])]),R.value.loading?(i(),p("div",vo,[e(ae,{class:"is-loading"},{default:t(()=>[e(E(Ql))]),_:1}),l[100]||(l[100]=d(" Ê≠£Âú®È™åËØÅ Token‚Ä¶ ",-1))])):R.value.status==="ok"?(i(),p("div",fo,[e(ae,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Yt)]),_:1}),l[101]||(l[101]=d("Token ÊúâÊïàÔºåBot ÂêçÁß∞Ôºö",-1)),s("b",null,"@"+f(R.value.botName),1)])):R.value.status==="duplicate"?(i(),p("div",po,[e(ae,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(Ht)]),_:1}),l[102]||(l[102]=d("Ê≠§ Token Â∑≤Ë¢´ÊàêÂëò„Äå",-1)),s("b",null,f(R.value.usedBy),1),d("„ÄçÁöÑÊ∏†ÈÅì„Äå"+f(R.value.usedByCh)+"„Äç‰ΩøÁî® ",1)])):R.value.status==="error"?(i(),p("div",mo,[e(ae,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(qt)]),_:1}),d(f(R.value.error),1)])):(i(),p("div",yo,[e(te,{type:"info",size:"small"},{default:t(()=>[e(ae,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(vt)]),_:1}),l[103]||(l[103]=d("ËæìÂÖ•ÂÆåÊàêÂêéËá™Âä®È™åËØÅÔºå‰πüÂèØÁÇπÂè≥‰æß„ÄåÈ™åËØÅ„ÄçÊåâÈíÆÊâãÂä®Ëß¶Âèë",-1))]),_:1})]))])]),_:1}),e(F,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:t(()=>[e(W,{modelValue:b.value.allowedFrom,"onUpdate:modelValue":l[37]||(l[37]=a=>b.value.allowedFrom=a),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),e(te,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[e(ae,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(vt)]),_:1}),l[104]||(l[104]=d("ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1))]),_:1})]),_:1})],64)):C("",!0),b.value.type==="web"?(i(),p(B,{key:1},[we.value?(i(),$(F,{key:0,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[s("div",go,[e(ae,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(ft)]),_:1}),s("span",_o,f(cl(E(_),we.value)),1),e(v,{size:"small",link:"",onClick:l[38]||(l[38]=a=>nt(cl(E(_),we.value)))},{default:t(()=>[...l[105]||(l[105]=[d("Â§çÂà∂",-1)])]),_:1})])]),_:1})):C("",!0),we.value?C("",!0):(i(),$(F,{key:1,label:"ËÆøÈóÆÈìæÊé•"},{default:t(()=>[s("div",wo,[e(ae,{style:{"flex-shrink":"0",color:"#909399"}},{default:t(()=>[e(ft)]),_:1}),s("span",bo,f(cl(E(_),I.value)),1),e(z,{size:"small",type:"info",effect:"plain"},{default:t(()=>[...l[106]||(l[106]=[d("‰øùÂ≠òÂêéÁîüÊïà",-1)])]),_:1})]),e(te,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:t(()=>[...l[107]||(l[107]=[d(" ÊØè‰∏™ Web Ê∏†ÈÅìÊúâÁã¨Á´ãÈìæÊé•ÔºåÂèØÂêåÊó∂ÂºÄÊîæÂ§ö‰∏™ÂÖ•Âè£ ",-1)])]),_:1})]),_:1})),e(F,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:t(()=>[e(W,{modelValue:b.value.webPassword,"onUpdate:modelValue":l[39]||(l[39]=a=>b.value.webPassword=a),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),e(F,{label:"Ê¨¢ËøéËØ≠"},{default:t(()=>[e(W,{modelValue:b.value.webWelcome,"onUpdate:modelValue":l[40]||(l[40]=a=>b.value.webWelcome=a),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),e(F,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:t(()=>[e(W,{modelValue:b.value.webTitle,"onUpdate:modelValue":l[41]||(l[41]=a=>b.value.webTitle=a),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):C("",!0),e(F,{label:"ÂêØÁî®"},{default:t(()=>[e($l,{modelValue:b.value.enabled,"onUpdate:modelValue":l[42]||(l[42]=a=>b.value.enabled=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}),e(Fe,{label:"ÁéØÂ¢ÉÂèòÈáè",name:"env"},{default:t(()=>[s("div",ko,[l[113]||(l[113]=s("div",{style:{"margin-bottom":"16px"}},[s("h3",{style:{margin:"0 0 8px 0","font-size":"15px"}},"ÁéØÂ¢ÉÂèòÈáè"),s("p",{style:{margin:"0",color:"#666","font-size":"13px"}},[d(" ÈÖçÁΩÆÊ≠§ AI ÊàêÂëòÂú®ÊâßË°å exec ÂëΩ‰ª§Êó∂ÂèØÁî®ÁöÑÁéØÂ¢ÉÂèòÈáèÔºå‰æãÂ¶Ç GITHUB_TOKEN„ÄÅGIT_AUTHOR_NAME Á≠â„ÄÇ"),s("br"),d(" Ëøô‰∫õÂèòÈáè‰ºöÊ≥®ÂÖ•Âà∞ bash Â∑•ÂÖ∑ÁöÑÊâßË°åÁéØÂ¢É‰∏≠Ôºå"),s("strong",null,"‰∏çÂèóÁ≥ªÁªüÈªòËÆ§ÁöÑ token ËøáÊª§ÂΩ±Âìç"),d("„ÄÇ ")])],-1)),s("div",ho,[e(W,{modelValue:ve.value,"onUpdate:modelValue":l[45]||(l[45]=a=>ve.value=a),placeholder:"KEYÔºàÂ¶Ç GITHUB_TOKENÔºâ",style:{width:"220px","font-family":"monospace"},size:"small",onKeyup:Ge(Ie,["enter"])},null,8,["modelValue"]),e(W,{modelValue:ye.value,"onUpdate:modelValue":l[46]||(l[46]=a=>ye.value=a),placeholder:"VALUE",style:{flex:"1","font-family":"monospace"},size:"small",type:"password","show-password":"",onKeyup:Ge(Ie,["enter"])},null,8,["modelValue"]),e(v,{size:"small",type:"primary",onClick:Ie,disabled:!ve.value.trim()},{default:t(()=>[...l[110]||(l[110]=[d(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled"])]),e(Cl,{data:H.value,size:"small",style:{width:"100%","margin-bottom":"16px"},"empty-text":"ÊöÇÊó†ÁéØÂ¢ÉÂèòÈáè"},{default:t(()=>[e(O,{label:"KEY","min-width":"200"},{default:t(({row:a})=>[s("code",xo,f(a.key),1)]),_:1}),e(O,{label:"VALUE","min-width":"200"},{default:t(({row:a})=>[e(W,{modelValue:a.value,"onUpdate:modelValue":k=>a.value=k,type:"password","show-password":"",size:"small",style:{"font-family":"monospace"},placeholder:"ÔºàÊú™ËÆæÁΩÆÔºâ"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(O,{label:"Êìç‰Ωú",width:"80",fixed:"right"},{default:t(({$index:a})=>[e(v,{size:"small",type:"danger",link:"",onClick:k=>sl(a)},{default:t(()=>[...l[111]||(l[111]=[d("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(v,{type:"primary",size:"small",loading:Se.value,onClick:Oe},{default:t(()=>[...l[112]||(l[112]=[d(" ‰øùÂ≠òÁéØÂ¢ÉÂèòÈáè ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Io=tt($o,[["__scopeId","data-v-eda6f391"]]);export{Io as default};
