import{d as mt,h as pt,E as m,i as x,w as a,B as ft,g as d,r as _,o as u,a as l,f as s,k as A,y as vt,t as r,e as o,z as $e,m as yt,c as v,F as $,l as N,q as ct,j as V,n as Ae,C as gt,D as _t,G as bt,H as wt,b as kt,I as xt,J as Vt}from"./index-rS0KrWAa.js";import{b as Ze,f as me,g as pe,h as fe,i as Fe,j as Ct,e as Se,r as yl,k as E}from"./index-C0TYH7GB.js";import{A as ht}from"./AiChat-D_VLNIcC.js";import{_ as zt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Tt={class:"header-left"},Ut={class:"chat-layout"},$t={class:"session-sidebar"},At={class:"session-sidebar-header"},Ft={class:"session-list"},St=["onClick"],Dt={class:"session-item-title"},It={class:"session-item-meta"},Mt={key:0,class:"session-empty"},Nt={class:"at-panel"},Et={key:0,class:"at-form"},Lt={class:"chat-area"},Bt={style:{display:"flex","align-items":"center",gap:"8px"}},Pt={style:{"font-weight":"600"}},Rt={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"32px 0","font-size":"14px"}},jt={style:{display:"flex","align-items":"center",gap:"8px"}},Wt={style:{"font-size":"13px"}},Ot={style:{"font-size":"13px",color:"#606266"}},Yt={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"40px 0"}},qt={key:1,class:"relations-list"},Ht={class:"relation-info"},Jt={class:"relation-name"},Kt={class:"relation-tags"},Gt={class:"relation-desc"},Qt={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Xt={style:{display:"flex",gap:"8px","margin-top":"4px"}},Zt={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ea={key:0,style:{"text-align":"center",color:"#c0c4cc",padding:"16px 0","font-size":"13px"}},la={style:{"font-size":"12px"}},ta={style:{"font-size":"12px",color:"#606266"}},aa={class:"memory-toolbar",style:{"margin-bottom":"12px",display:"flex",gap:"8px"}},na={style:{display:"flex","align-items":"center",gap:"4px","font-size":"13px"}},oa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},sa={style:{padding:"16px"}},ia={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},ua={key:0,style:{"text-align":"center",color:"#999",padding:"40px 0"}},da={style:{display:"flex","align-items":"flex-start",gap:"12px"}},ra={style:{"font-size":"28px","line-height":"1"}},ma={style:{flex:"1","min-width":"0"}},pa={style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"4px"}},fa={style:{"font-weight":"600","font-size":"15px"}},va={style:{color:"#666","font-size":"13px","margin-bottom":"6px"}},ya={style:{color:"#999","font-size":"12px"}},ca={style:{display:"flex","align-items":"center",gap:"8px","flex-shrink":"0"}},ga={style:{"margin-top":"8px",display:"flex",gap:"8px","align-items":"center"}},_a={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},ba={class:"channel-card-header"},wa={class:"channel-card-left"},ka={class:"channel-card-name"},xa={key:0,class:"channel-bot-username"},Va={class:"channel-card-actions"},Ca={key:0,class:"channel-card-body"},ha={class:"channel-info-row"},za={class:"channel-info-value"},Ta={class:"channel-info-row"},Ua={class:"channel-info-value"},$a={key:1,class:"channel-card-body"},Aa={class:"channel-info-row"},Fa={class:"channel-info-value"},Sa={class:"pending-section"},Da=["onClick"],Ia={key:0,class:"pending-list"},Ma={key:0,style:{"text-align":"center",padding:"12px"}},Na={class:"pending-user-info"},Ea={class:"pending-user-name"},La={key:0,class:"pending-user-username"},Ba={class:"pending-user-id"},Pa={class:"pending-user-actions"},Ra={key:2,class:"pending-empty"},ja=mt({__name:"AgentDetailView",setup(Wa){const De=ft(),f=De.params.id,O=d(null),Ie=d("chat"),L=d(),ve=d([]),ye=d(!1),Y=d();async function el(){ye.value=!0;try{const n=await Ct.list({agentId:f,limit:50});ve.value=n.data.sessions}catch{}finally{ye.value=!1}}function cl(n){Y.value=n.id,L.value?.resumeSession(n.id)}function gl(){Y.value=void 0,L.value?.startNewSession()}function _l(n){Y.value=n,setTimeout(el,500)}function ll(n){if(!n)return"";const e=Date.now()-n;return e<6e4?"ÂàöÂàö":e<36e5?`${Math.floor(e/6e4)}ÂàÜÂâç`:e<864e5?`${Math.floor(e/36e5)}Â∞èÊó∂Ââç`:`${Math.floor(e/864e5)}Â§©Ââç`}const Z=d(!1),ee=d(""),le=d(""),Me=d(!1),B=d([]);function bl(){Z.value=!Z.value,Z.value&&!B.value.length&&tl()}async function tl(){try{const n=await Ze.list();B.value=n.data.filter(e=>e.id!==f)}catch{B.value=[]}}function wl(n){const e=B.value.find(i=>i.id===n);e&&L.value?.fillInput(`@${e.name}: `)}async function kl(){const n=ee.value,e=le.value.trim();if(!n||!e)return;const c=B.value.find(j=>j.id===n)?.name??n;Me.value=!0;const U={role:"user",text:`‚Üí ËΩ¨ÂèëÁªô ${c}Ôºö
${e}`};L.value?.appendMessage(U);try{const b=(await Ze.message(n,e,f)).data.response,M={role:"assistant",text:`‚Üê **${c}** ÂõûÂ§çÔºö

${b}`};L.value?.appendMessage(M),le.value="",ee.value="",Z.value=!1,m.success(`${c} Â∑≤ÂõûÂ§ç`)}catch(j){const b={role:"system",text:`‚ùå ËΩ¨ÂèëÂ§±Ë¥•Ôºö${j.response?.data?.error??j.message??"ÁΩëÁªúÈîôËØØ"}`};L.value?.appendMessage(b),m.error("ËΩ¨ÂèëÂ§±Ë¥•")}finally{Me.value=!1}}const ce=d(""),ge=d(""),T=d({enabled:!1,schedule:"daily",keepTurns:3,focusHint:"",cronJobId:""}),Ne=d(!1),Ee=d(!1);async function xl(){try{const n=await Se.getConfig(f);T.value=n.data,Le()}catch{}}async function al(){Ne.value=!0;try{const n=await Se.setConfig(f,T.value);T.value=n.data,m.success(T.value.enabled?"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂºÄÂêØ":"Ëá™Âä®ËÆ∞ÂøÜÂ∑≤ÂÖ≥Èó≠")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Ne.value=!1}}async function Vl(){Ee.value=!0;try{await Se.consolidate(f),m.success("ËÆ∞ÂøÜÊï¥ÁêÜÂ∑≤Âú®ÂêéÂè∞ÂêØÂä®ÔºàÁ∫¶ÈúÄ10~30ÁßíÔºâÔºåÁ®çÂêéËá™Âä®Âà∑Êñ∞Êó•Âøó"),setTimeout(Le,1e4)}catch{m.error("Êï¥ÁêÜÂ§±Ë¥•")}finally{Ee.value=!1}}const _e=d([]),be=d(!1);async function Le(){be.value=!0;try{const n=await Se.runLog(f);_e.value=n.data||[]}catch{_e.value=[]}finally{be.value=!1}}const we=d([]),q=d(""),H=d(""),Be=d(!1),Pe=d([]),te=d(!1),ke=d(""),ae=d(!1),xe=d(""),nl=d([]),J=d(""),ne=d(""),Ve=d(null),S=d([]),Re=d(!1),C=d({agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""});async function Cl(){try{const n=await yl.get(f);S.value=n.data.parsed||[]}catch{S.value=[]}}function hl(n){const e=B.value.find(i=>i.id===n);C.value.agentName=e?e.name:n}async function zl(){if(!C.value.agentId)return;if(S.value.find(e=>e.agentId===C.value.agentId)){m.warning("ËØ•ÊàêÂëòÂÖ≥Á≥ªÂ∑≤Â≠òÂú®ÔºåËØ∑ÂÖàÂà†Èô§ÂÜçÈáçÊñ∞Ê∑ªÂä†");return}S.value.push({...C.value}),C.value={agentId:"",agentName:"",relationType:"Âπ≥Á∫ßÂçè‰Ωú",strength:"Â∏∏Áî®",desc:""},await ol()}async function Tl(n){S.value.splice(n,1),await ol()}function Ul(){if(S.value.length===0)return"";const n=`| ÊàêÂëòID | ÊàêÂëòÂêçÁß∞ | ÂÖ≥Á≥ªÁ±ªÂûã | ÂÖ≥Á≥ªÁ®ãÂ∫¶ | ËØ¥Êòé |
|--------|--------|--------|--------|------|`,e=S.value.map(i=>`| ${i.agentId} | ${i.agentName} | ${i.relationType} | ${i.strength} | ${i.desc||""} |`).join(`
`);return n+`
`+e}async function ol(){Re.value=!0;try{await yl.put(f,Ul()),m.success("ÂÖ≥Á≥ªÂ∑≤‰øùÂ≠ò")}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Re.value=!1}}function je(n){const e=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#B45309","#7C3AED","#0891B2"];let i=0;for(let c=0;c<n.length;c++)i=n.charCodeAt(c)+((i<<5)-i);return e[Math.abs(i)%e.length]??"#409EFF"}function sl(n){return n==="‰∏äÁ∫ß"?"danger":n==="‰∏ãÁ∫ß"?"":n==="Âπ≥Á∫ßÂçè‰Ωú"?"success":"info"}function il(n){return n==="Ê†∏ÂøÉ"?"danger":n==="Â∏∏Áî®"?"warning":"info"}const ul=d([]),oe=d(!1),h=d({name:"",expr:"0 9 * * *",tz:"Asia/Shanghai",message:"",enabled:!0});function $l(n){return n==="running"?"success":n==="stopped"?"danger":"info"}function Al(n){return n==="running"?"ËøêË°å‰∏≠":n==="stopped"?"Â∑≤ÂÅúÊ≠¢":"Á©∫Èó≤"}function dl(n){return n?n<1024?n+" B":n<1048576?(n/1024).toFixed(1)+" KB":(n/1048576).toFixed(1)+" MB":"0 B"}function Fl(n){return new Date(n).toLocaleString()}function rl(n){return n?new Date(n).toLocaleString():""}const I=d([]),We=d(!1),K=d(!1),se=d(""),Oe=d(!1),Ye=d(""),p=d({type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""});function qe(n){return`${window.location.origin}/chat/${n}`}function Sl(n){navigator.clipboard.writeText(n).then(()=>m.success("ÈìæÊé•Â∑≤Â§çÂà∂"))}async function Ce(){We.value=!0;try{const n=await E.list(f);I.value=n.data||[]}catch{I.value=[]}finally{We.value=!1}}function Dl(){se.value="",p.value={type:"telegram",name:"",enabled:!0,botToken:"",allowedFrom:"",webPassword:"",webWelcome:"",webTitle:""},K.value=!0}function Il(n){se.value=n.id,p.value={type:n.type,name:n.name,enabled:n.enabled,botToken:n.config?.botToken||"",allowedFrom:n.config?.allowedFrom||"",webPassword:"",webWelcome:n.config?.welcomeMsg||"",webTitle:n.config?.title||""},K.value=!0}async function Ml(){if(!p.value.name||!p.value.type){m.warning("ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁ±ªÂûã");return}Oe.value=!0;try{const n={};if(p.value.type==="telegram"?(p.value.botToken&&(n.botToken=p.value.botToken),p.value.allowedFrom&&(n.allowedFrom=p.value.allowedFrom)):p.value.type==="web"&&(p.value.webPassword&&(n.password=p.value.webPassword),p.value.webWelcome&&(n.welcomeMsg=p.value.webWelcome),p.value.webTitle&&(n.title=p.value.webTitle)),se.value){const e=I.value.map(i=>i.id!==se.value?i:{...i,name:p.value.name,type:p.value.type,enabled:p.value.enabled,config:{...i.config,...n}});await E.set(f,e)}else{const e={id:p.value.type+"-"+Date.now().toString(36),name:p.value.name,type:p.value.type,enabled:p.value.enabled,config:n,status:"untested"};await E.set(f,[...I.value,e])}m.success(p.value.type==="web"?"‰øùÂ≠òÊàêÂäüÔºåWeb ËÅäÂ§©È°µÁ´ãÂç≥ÁîüÊïà":"‰øùÂ≠òÊàêÂäüÔºåÈáçÂêØÂêéÊñ∞Ê∏†ÈÅìÁîüÊïà"),K.value=!1,await Ce()}catch(n){m.error(n.response?.data?.error||"‰øùÂ≠òÂ§±Ë¥•")}finally{Oe.value=!1}}async function Nl(){try{await E.set(f,I.value)}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}}async function El(n){const e=I.value.filter(i=>i.id!==n.id);try{await E.set(f,e),I.value=e,m.success("Â∑≤Âà†Èô§")}catch{m.error("Âà†Èô§Â§±Ë¥•")}}async function Ll(n){Ye.value=n.id;try{const e=await E.test(f,n.id);e.data.valid?m.success(e.data.botName?`ÊµãËØïÊàêÂäü (@${e.data.botName})`:"ÊµãËØïÊàêÂäü"):m.error(e.data.error||"ÊµãËØïÂ§±Ë¥•"),await Ce()}catch{m.error("ÊµãËØïËØ∑Ê±ÇÂ§±Ë¥•")}finally{Ye.value=""}}const G=d({}),He=d({}),ie=d(""),Je=d("");async function he(n){He.value[n]=!0;try{const e=await E.listPending(f,n);G.value[n]=e.data||[]}catch{G.value[n]=[]}finally{He.value[n]=!1}}function Bl(n){ie.value===n?ie.value="":(ie.value=n,he(n))}async function Pl(n,e){Je.value=`${n}-${e}`;try{await E.allowUser(f,n,e),m.success(`Áî®Êà∑ ${e} Â∑≤Âä†ÂÖ•ÁôΩÂêçÂçï`),await he(n),await Ce()}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}finally{Je.value=""}}async function Rl(n,e){try{await E.dismissUser(f,n,e),m.success("Â∑≤ÂøΩÁï•"),await he(n)}catch{m.error("Êìç‰ΩúÂ§±Ë¥•")}}pt(async()=>{try{const i=await Ze.get(f);O.value=i.data}catch{m.error("Âä†ËΩΩ Agent Â§±Ë¥•")}jl(),Cl(),tl(),xl(),Hl(),ze(),Ce(),Ue(),await el();const n=De.query.tab;n&&(Ie.value=n);const e=De.query.resumeSession;e&&(Y.value=e,await new Promise(c=>setTimeout(c,100)),L.value?.resumeSession(e),ve.value.find(c=>c.id===e)||(Y.value=e))});async function jl(){try{const[n,e]=await Promise.all([me.read(f,"IDENTITY.md"),me.read(f,"SOUL.md")]);ce.value=n.data?.content||"",ge.value=e.data?.content||""}catch{}ue()}async function Ke(n,e){try{await me.write(f,n,e),m.success(`${n} Â∑≤‰øùÂ≠ò`)}catch{m.error(`‰øùÂ≠ò ${n} Â§±Ë¥•`)}}async function ue(){try{const n=await pe.tree(f);we.value=n.data||[]}catch{we.value=[]}}async function Wl(n){if(!n.isDir){q.value=n.path,Pe.value=n.path.split("/");try{const e=await pe.readFile(f,n.path);H.value=e.data?.content||""}catch{H.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function Ol(){if(q.value){Be.value=!0;try{await pe.writeFile(f,q.value,H.value),m.success("ËÆ∞ÂøÜÊñá‰ª∂Â∑≤‰øùÂ≠ò"),ue()}catch{m.error("‰øùÂ≠òÂ§±Ë¥•")}finally{Be.value=!1}}}async function Yl(){const n=ke.value.trim();if(!n){m.warning("ËØ∑ËæìÂÖ•Ë∑ØÂæÑ");return}try{await pe.writeFile(f,n,`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`),m.success("Êñá‰ª∂Â∑≤ÂàõÂª∫"),te.value=!1,ke.value="",ue(),q.value=n,Pe.value=n.split("/"),H.value=`# ${n.split("/").pop()?.replace(".md","")||"New File"}

`}catch{m.error("ÂàõÂª∫Â§±Ë¥•")}}async function ql(){const n=xe.value.trim();if(!n){m.warning("ËØ∑ËæìÂÖ•ÂÜÖÂÆπ");return}try{await pe.dailyLog(f,n),m.success("Êó•ÂøóÂ∑≤Ê∑ªÂä†"),ae.value=!1,xe.value="",ue()}catch{m.error("Ê∑ªÂä†Â§±Ë¥•")}}async function Hl(){try{const n=await me.read(f,"/");Array.isArray(n.data)&&(nl.value=n.data.map(e=>({name:e.name,isDir:e.isDir,size:e.size,modTime:e.modTime,path:e.name})))}catch{}}async function Jl(n){if(!n.isDir){J.value=n.path||n.name,Ve.value=n;try{const e=await me.read(f,J.value);ne.value=e.data?.content||""}catch{ne.value="(Êó†Ê≥ïËØªÂèñ)"}}}async function Kl(){J.value&&await Ke(J.value,ne.value)}async function ze(){try{const n=await fe.list();ul.value=n.data||[]}catch{}}async function Gl(){try{await fe.create({name:h.value.name,enabled:h.value.enabled,schedule:{kind:"cron",expr:h.value.expr,tz:h.value.tz},payload:{kind:"agentTurn",message:h.value.message},delivery:{mode:"announce"}}),m.success("‰ªªÂä°ÂàõÂª∫ÊàêÂäü"),oe.value=!1,ze()}catch(n){m.error(n.response?.data?.error||"ÂàõÂª∫Â§±Ë¥•")}}async function Ql(n){try{await fe.update(n.id,n)}catch{m.error("Êõ¥Êñ∞Â§±Ë¥•")}}async function ml(n){try{await fe.run(n.id),m.success("Â∑≤Ëß¶ÂèëËøêË°å"),setTimeout(ze,2e3)}catch{m.error("ËøêË°åÂ§±Ë¥•")}}async function Xl(n){try{await fe.delete(n.id),m.success("Â∑≤Âà†Èô§"),ze()}catch{m.error("Âà†Èô§Â§±Ë¥•")}}const Te=d([]),de=d(!1),Ge=d(!1),k=d({id:"",name:"",icon:"",category:"",description:"",promptContent:""});async function Ue(){try{const n=await Fe.list(f);Te.value=n.data||[]}catch{Te.value=[]}}function Zl(){k.value={id:"",name:"",icon:"",category:"",description:"",promptContent:""},de.value=!0}async function et(){if(!k.value.id||!k.value.name){m.warning("ID ÂíåÂêçÁß∞‰∏∫ÂøÖÂ°´È°π");return}Ge.value=!0;try{await Fe.create(f,{meta:{id:k.value.id,name:k.value.name,icon:k.value.icon,category:k.value.category,description:k.value.description,version:"1.0.0",source:"local"},promptContent:k.value.promptContent||void 0}),m.success("ÊäÄËÉΩÂ∑≤ÂÆâË£Ö"),de.value=!1,Ue()}catch(n){m.error(n?.response?.data?.error||"ÂÆâË£ÖÂ§±Ë¥•")}finally{Ge.value=!1}}async function lt(n,e){try{await Fe.update(f,n.id,{enabled:e}),n.enabled=e,m.success(e?"Â∑≤ÂêØÁî®":"Â∑≤Á¶ÅÁî®")}catch{m.error("Êìç‰ΩúÂ§±Ë¥•"),Ue()}}async function tt(n){try{await Fe.remove(f,n),m.success("ÊäÄËÉΩÂ∑≤Âç∏ËΩΩ"),Ue()}catch{m.error("Âç∏ËΩΩÂ§±Ë¥•")}}return(n,e)=>{const i=_("el-button"),c=_("el-tag"),U=_("el-text"),j=_("el-header"),b=_("el-option"),M=_("el-select"),w=_("el-input"),P=_("el-tab-pane"),D=_("el-card"),z=_("el-col"),W=_("el-row"),g=_("el-form-item"),Q=_("el-form"),pl=_("el-badge"),F=_("el-table-column"),Qe=_("el-table"),X=_("el-switch"),at=_("el-input-number"),R=_("el-icon"),fl=_("el-tree"),Xe=_("el-empty"),vl=_("el-breadcrumb-item"),nt=_("el-breadcrumb"),re=_("el-dialog"),ot=_("el-link"),st=_("el-tabs"),it=_("el-main"),ut=_("el-container"),dt=Vt("loading");return u(),x(ut,{class:"agent-detail"},{default:a(()=>[l(j,{class:"detail-header"},{default:a(()=>[s("div",Tt,[l(i,{icon:A(vt),onClick:e[0]||(e[0]=t=>n.$router.push("/agents")),circle:""},null,8,["icon"]),s("h2",null,r(O.value?.name||"..."),1),l(c,{type:$l(O.value?.status)},{default:a(()=>[o(r(Al(O.value?.status)),1)]),_:1},8,["type"])]),l(U,{type:"info"},{default:a(()=>[o(r(O.value?.model),1)]),_:1})]),_:1}),l(it,null,{default:a(()=>[l(st,{modelValue:Ie.value,"onUpdate:modelValue":e[52]||(e[52]=t=>Ie.value=t),type:"border-card"},{default:a(()=>[l(P,{label:"ÂØπËØù",name:"chat"},{default:a(()=>[s("div",Ut,[s("div",$t,[s("div",At,[e[54]||(e[54]=s("span",{class:"sidebar-title"},"ÂéÜÂè≤ÂØπËØù",-1)),l(i,{size:"small",type:"primary",plain:"",onClick:gl,icon:A($e)},{default:a(()=>[...e[53]||(e[53]=[o("Êñ∞Âª∫",-1)])]),_:1},8,["icon"])]),yt((u(),v("div",Ft,[(u(!0),v($,null,N(ve.value,t=>(u(),v("div",{key:t.id,class:ct(["session-item",{active:Y.value===t.id}]),onClick:y=>cl(t)},[s("div",Dt,r(t.title||"Êñ∞ÂØπËØù"),1),s("div",It,[s("span",null,r(ll(t.lastAt)),1),l(c,{size:"small",type:"info",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:a(()=>[o(r(t.messageCount)+" Êù° ",1)]),_:2},1024),t.tokenEstimate>6e4?(u(),x(c,{key:0,size:"small",type:"warning",effect:"plain",style:{"font-size":"10px",padding:"0 4px"}},{default:a(()=>[o("~"+r(Math.round(t.tokenEstimate/1e3))+"k",1)]),_:2},1024)):V("",!0)])],10,St))),128)),!ye.value&&!ve.value.length?(u(),v("div",Mt," ËøòÊ≤°ÊúâÂØπËØùËÆ∞ÂΩï ")):V("",!0)])),[[dt,ye.value]]),s("div",Nt,[l(i,{size:"small",plain:"",class:"at-toggle-btn",onClick:bl},{default:a(()=>[...e[55]||(e[55]=[s("span",{class:"at-icon"},"@",-1),o(" ÂÖ∂‰ªñÊàêÂëò ",-1)])]),_:1}),Z.value?(u(),v("div",Et,[l(M,{modelValue:ee.value,"onUpdate:modelValue":e[1]||(e[1]=t=>ee.value=t),placeholder:"ÈÄâÊã©ÊàêÂëò",size:"small",style:{width:"100%","margin-bottom":"6px"},onChange:wl},{default:a(()=>[(u(!0),v($,null,N(B.value,t=>(u(),x(b,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(w,{modelValue:le.value,"onUpdate:modelValue":e[2]||(e[2]=t=>le.value=t),type:"textarea",rows:3,placeholder:"ËæìÂÖ•Ë¶ÅËΩ¨ÂèëÁöÑÊ∂àÊÅØ‚Ä¶",size:"small",style:{"margin-bottom":"6px"}},null,8,["modelValue"]),l(i,{type:"primary",size:"small",style:{width:"100%"},loading:Me.value,disabled:!ee.value||!le.value.trim(),onClick:kl},{default:a(()=>[...e[56]||(e[56]=[o(" ËΩ¨Âèë ",-1)])]),_:1},8,["loading","disabled"])])):V("",!0)])]),s("div",Lt,[l(ht,{ref_key:"aiChatRef",ref:L,"agent-id":A(f),scenario:"agent-detail","welcome-message":`‰Ω†Â•ΩÔºÅÊàëÊòØ **${O.value?.name||"AI"}**ÔºåÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü`,height:"calc(100vh - 145px)","show-thinking":!0,onSessionChange:_l},null,8,["agent-id","welcome-message"])])])]),_:1}),l(P,{label:"Ë∫´‰ªΩ & ÁÅµÈ≠Ç",name:"identity"},{default:a(()=>[l(W,{gutter:20},{default:a(()=>[l(z,{span:12},{default:a(()=>[l(D,{header:"IDENTITY.md"},{default:a(()=>[l(w,{modelValue:ce.value,"onUpdate:modelValue":e[3]||(e[3]=t=>ce.value=t),type:"textarea",rows:15,onBlur:e[4]||(e[4]=t=>Ke("IDENTITY.md",ce.value))},null,8,["modelValue"])]),_:1})]),_:1}),l(z,{span:12},{default:a(()=>[l(D,{header:"SOUL.md"},{default:a(()=>[l(w,{modelValue:ge.value,"onUpdate:modelValue":e[5]||(e[5]=t=>ge.value=t),type:"textarea",rows:15,onBlur:e[6]||(e[6]=t=>Ke("SOUL.md",ge.value))},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(P,{label:"ÂÖ≥Á≥ª",name:"relations"},{default:a(()=>[l(W,{gutter:20},{default:a(()=>[l(z,{span:14},{default:a(()=>[l(D,{style:{"margin-bottom":"16px"}},{header:a(()=>[...e[57]||(e[57]=[s("span",{style:{"font-weight":"600"}},"Ê∑ªÂä†ÂÖ≥Á≥ª",-1)])]),default:a(()=>[l(Q,{model:C.value,"label-position":"top",size:"default"},{default:a(()=>[l(W,{gutter:12},{default:a(()=>[l(z,{span:10},{default:a(()=>[l(g,{label:"ÂÖ≥ËÅîÊàêÂëò"},{default:a(()=>[l(M,{modelValue:C.value.agentId,"onUpdate:modelValue":e[7]||(e[7]=t=>C.value.agentId=t),placeholder:"ÈÄâÊã©Á≥ªÁªüÊàêÂëò",filterable:"",style:{width:"100%"},onChange:hl},{default:a(()=>[(u(!0),v($,null,N(B.value,t=>(u(),x(b,{key:t.id,label:t.name,value:t.id},{default:a(()=>[s("div",Bt,[s("div",{style:Ae([{width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"11px",color:"#fff","flex-shrink":"0"},{background:je(t.id)}])},r(t.name.charAt(0)),5),s("span",null,r(t.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(z,{span:7},{default:a(()=>[l(g,{label:"ÂÖ≥Á≥ªÁ±ªÂûã"},{default:a(()=>[l(M,{modelValue:C.value.relationType,"onUpdate:modelValue":e[8]||(e[8]=t=>C.value.relationType=t),style:{width:"100%"}},{default:a(()=>[l(b,{label:"‰∏äÁ∫ß",value:"‰∏äÁ∫ß"}),l(b,{label:"‰∏ãÁ∫ß",value:"‰∏ãÁ∫ß"}),l(b,{label:"Âπ≥Á∫ßÂçè‰Ωú",value:"Âπ≥Á∫ßÂçè‰Ωú"}),l(b,{label:"ÊîØÊåÅ",value:"ÊîØÊåÅ"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(z,{span:7},{default:a(()=>[l(g,{label:"Âçè‰ΩúÁ®ãÂ∫¶"},{default:a(()=>[l(M,{modelValue:C.value.strength,"onUpdate:modelValue":e[9]||(e[9]=t=>C.value.strength=t),style:{width:"100%"}},{default:a(()=>[l(b,{label:"Ê†∏ÂøÉ",value:"Ê†∏ÂøÉ"}),l(b,{label:"Â∏∏Áî®",value:"Â∏∏Áî®"}),l(b,{label:"ÂÅ∂Â∞î",value:"ÂÅ∂Â∞î"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(W,{gutter:12},{default:a(()=>[l(z,{span:18},{default:a(()=>[l(g,{label:"ËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ"},{default:a(()=>[l(w,{modelValue:C.value.desc,"onUpdate:modelValue":e[10]||(e[10]=t=>C.value.desc=t),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËøôÊÆµÂÖ≥Á≥ª..."},null,8,["modelValue"])]),_:1})]),_:1}),l(z,{span:6},{default:a(()=>[l(g,{label:" "},{default:a(()=>[l(i,{type:"primary",style:{width:"100%"},disabled:!C.value.agentId||!C.value.relationType||!C.value.strength,loading:Re.value,onClick:zl},{default:a(()=>[...e[58]||(e[58]=[o(" Ê∑ªÂä† ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(D,null,{header:a(()=>[s("span",Pt,[e[59]||(e[59]=o("Â∑≤ÊúâÂÖ≥Á≥ª ",-1)),l(pl,{value:S.value.length,type:"info",style:{"margin-left":"4px"}},null,8,["value"])])]),default:a(()=>[S.value.length===0?(u(),v("div",Rt," ÊöÇÊó†ÂÖ≥Á≥ªÔºåËØ∑Âú®‰∏äÊñπÊ∑ªÂä† ")):(u(),x(Qe,{key:1,data:S.value,size:"small",style:{width:"100%"}},{default:a(()=>[l(F,{label:"ÊàêÂëò","min-width":"120"},{default:a(({row:t})=>[s("div",jt,[s("div",{style:Ae([{width:"28px",height:"28px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"12px",color:"#fff","flex-shrink":"0"},{background:je(t.agentId)}])},r(t.agentName.charAt(0)),5),s("span",Wt,r(t.agentName),1)])]),_:1}),l(F,{label:"Á±ªÂûã",width:"100"},{default:a(({row:t})=>[l(c,{type:sl(t.relationType),size:"small"},{default:a(()=>[o(r(t.relationType),1)]),_:2},1032,["type"])]),_:1}),l(F,{label:"Á®ãÂ∫¶",width:"80"},{default:a(({row:t})=>[l(c,{type:il(t.strength),size:"small",effect:"plain"},{default:a(()=>[o(r(t.strength),1)]),_:2},1032,["type"])]),_:1}),l(F,{label:"ËØ¥Êòé","min-width":"120","show-overflow-tooltip":""},{default:a(({row:t})=>[s("span",Ot,r(t.desc||"‚Äî"),1)]),_:1}),l(F,{label:"Êìç‰Ωú",width:"70",fixed:"right"},{default:a(({$index:t})=>[l(i,{type:"danger",link:"",size:"small",onClick:y=>Tl(t)},{default:a(()=>[...e[60]||(e[60]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})]),_:1}),l(z,{span:10},{default:a(()=>[l(D,{header:"ÂÖ≥Á≥ªÈ¢ÑËßà"},{default:a(()=>[S.value.length===0?(u(),v("div",Yt," ÊöÇÊó†ÂÖ≥Á≥ªÊï∞ÊçÆ ")):(u(),v("div",qt,[(u(!0),v($,null,N(S.value,t=>(u(),v("div",{key:t.agentId,class:"relation-card"},[s("div",{class:"relation-avatar",style:Ae({background:je(t.agentId)})},r(t.agentName.charAt(0).toUpperCase()),5),s("div",Ht,[s("div",Jt,r(t.agentName),1),s("div",Kt,[l(c,{type:sl(t.relationType),size:"small"},{default:a(()=>[o(r(t.relationType),1)]),_:2},1032,["type"]),l(c,{type:il(t.strength),size:"small",effect:"plain"},{default:a(()=>[o(r(t.strength),1)]),_:2},1032,["type"])]),s("div",Gt,r(t.desc),1)])]))),128))]))]),_:1})]),_:1})]),_:1})]),_:1}),l(P,{label:"ËÆ∞ÂøÜ",name:"memory"},{default:a(()=>[l(D,{style:{"margin-bottom":"16px"},shadow:"never"},{header:a(()=>[s("div",Qt,[e[61]||(e[61]=s("span",{style:{"font-weight":"600"}},"Ëá™Âä®ËÆ∞ÂøÜ",-1)),l(X,{modelValue:T.value.enabled,"onUpdate:modelValue":e[11]||(e[11]=t=>T.value.enabled=t),"active-text":"Â∑≤ÂºÄÂêØ","inactive-text":"Â∑≤ÂÖ≥Èó≠",onChange:al},null,8,["modelValue"])])]),default:a(()=>[l(Q,{model:T.value,"label-position":"top",size:"small",disabled:!T.value.enabled},{default:a(()=>[l(W,{gutter:16},{default:a(()=>[l(z,{span:6},{default:a(()=>[l(g,{label:"Êï¥ÁêÜÈ¢ëÁéá"},{default:a(()=>[l(M,{modelValue:T.value.schedule,"onUpdate:modelValue":e[12]||(e[12]=t=>T.value.schedule=t),style:{width:"100%"}},{default:a(()=>[l(b,{label:"ÊØèÂ∞èÊó∂",value:"hourly"}),l(b,{label:"ÊØè6Â∞èÊó∂",value:"every6h"}),l(b,{label:"ÊØèÂ§©",value:"daily"}),l(b,{label:"ÊØèÂë®",value:"weekly"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(z,{span:5},{default:a(()=>[l(g,{label:"ÊØè‰∏™‰ºöËØù‰øùÁïôËΩÆÊï∞"},{default:a(()=>[l(at,{modelValue:T.value.keepTurns,"onUpdate:modelValue":e[13]||(e[13]=t=>T.value.keepTurns=t),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(z,{span:13},{default:a(()=>[l(g,{label:"ËÆ∞ÂΩïÈáçÁÇπÔºàÁïôÁ©∫ÂàôËá™Âä®Ôºâ"},{default:a(()=>[l(w,{modelValue:T.value.focusHint,"onUpdate:modelValue":e[14]||(e[14]=t=>T.value.focusHint=t),placeholder:"‰æãÂ¶ÇÔºöËÆ∞ÂΩïÊï∞Â≠¶Ëß£È¢òÊ≠•È™§ÂíåÁî®Êà∑Â∏∏ËßÅÈîôËØØ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s("div",Xt,[l(i,{type:"primary",size:"small",loading:Ne.value,onClick:al},{default:a(()=>[...e[62]||(e[62]=[o(" ‰øùÂ≠òËÆæÁΩÆ ",-1)])]),_:1},8,["loading"]),l(i,{size:"small",loading:Ee.value,onClick:Vl},{default:a(()=>[...e[63]||(e[63]=[o(" Á´ãÂç≥Êï¥ÁêÜ ",-1)])]),_:1},8,["loading"]),l(U,{type:"info",size:"small",style:{"align-self":"center","margin-left":"4px"}},{default:a(()=>[o(" Êï¥ÁêÜÂêéÔºöLLMÊèêÁÇºÊëòË¶ÅÂÜôÂÖ• MEMORY.mdÔºåÊØè‰∏™‰ºöËØùÂè™‰øùÁïôÊúÄËøë "+r(T.value.keepTurns)+" ËΩÆÂØπËØù ",1)]),_:1})])]),_:1},8,["model","disabled"])]),_:1}),l(D,{style:{"margin-bottom":"16px"},shadow:"never"},{header:a(()=>[s("div",Zt,[e[65]||(e[65]=s("span",{style:{"font-weight":"600"}},"Êï¥ÁêÜÊó•Âøó",-1)),l(i,{size:"small",text:"",onClick:Le,loading:be.value},{default:a(()=>[...e[64]||(e[64]=[o("Âà∑Êñ∞",-1)])]),_:1},8,["loading"])])]),default:a(()=>[_e.value.length===0&&!be.value?(u(),v("div",ea," ÊöÇÊó†ËøêË°åËÆ∞ÂΩïÔºåÁÇπÂáª„ÄåÁ´ãÂç≥Êï¥ÁêÜ„ÄçËß¶ÂèëÁ¨¨‰∏ÄÊ¨° ")):(u(),x(Qe,{key:1,data:_e.value.slice(0,20),size:"small"},{default:a(()=>[l(F,{label:"Êó∂Èó¥",width:"160"},{default:a(({row:t})=>[s("span",la,r(rl(t.timestamp)),1)]),_:1}),l(F,{label:"Áä∂ÊÄÅ",width:"72"},{default:a(({row:t})=>[l(c,{type:t.status==="ok"?"success":"danger",size:"small"},{default:a(()=>[o(r(t.status),1)]),_:2},1032,["type"])]),_:1}),l(F,{label:"ÁªìÊûú","min-width":"200","show-overflow-tooltip":""},{default:a(({row:t})=>[s("span",ta,r(t.message||"‚Äî"),1)]),_:1})]),_:1},8,["data"]))]),_:1}),s("div",aa,[l(i,{type:"primary",size:"small",onClick:e[15]||(e[15]=t=>te.value=!0)},{default:a(()=>[l(R,null,{default:a(()=>[l(A($e))]),_:1}),e[66]||(e[66]=o(" Êñ∞Âª∫Êñá‰ª∂ ",-1))]),_:1}),l(i,{size:"small",onClick:e[16]||(e[16]=t=>ae.value=!0)},{default:a(()=>[l(R,null,{default:a(()=>[l(A(gt))]),_:1}),e[67]||(e[67]=o(" Ê∑ªÂä†Êó•Âøó ",-1))]),_:1}),l(i,{size:"small",onClick:ue},{default:a(()=>[l(R,null,{default:a(()=>[l(A(_t))]),_:1}),e[68]||(e[68]=o(" Âà∑Êñ∞ ",-1))]),_:1})]),l(W,{gutter:16},{default:a(()=>[l(z,{span:7},{default:a(()=>[l(D,{header:"ËÆ∞ÂøÜÁõÆÂΩï",shadow:"hover"},{default:a(()=>[l(fl,{data:we.value,props:{label:"name",children:"children",isLeaf:t=>!t.isDir},onNodeClick:Wl,"highlight-current":"","default-expand-all":"","expand-on-click-node":!1},{default:a(({data:t})=>[s("span",na,[t.isDir?(u(),x(R,{key:0,style:{color:"#E6A23C"}},{default:a(()=>[l(A(bt))]),_:1})):(u(),x(R,{key:1,style:{color:"#409EFF"}},{default:a(()=>[l(A(wt))]),_:1})),s("span",null,r(t.name),1),!t.isDir&&t.size?(u(),x(U,{key:2,type:"info",size:"small",style:{"margin-left":"auto"}},{default:a(()=>[o(r(dl(t.size)),1)]),_:2},1024)):V("",!0)])]),_:1},8,["data","props"]),we.value.length===0?(u(),x(Xe,{key:0,description:"ËÆ∞ÂøÜÊ†ë‰∏∫Á©∫","image-size":40})):V("",!0)]),_:1})]),_:1}),l(z,{span:17},{default:a(()=>[l(D,{shadow:"hover"},{header:a(()=>[s("div",oa,[l(nt,{separator:"/"},{default:a(()=>[l(vl,null,{default:a(()=>[...e[69]||(e[69]=[o("memory",-1)])]),_:1}),(u(!0),v($,null,N(Pe.value,(t,y)=>(u(),x(vl,{key:y},{default:a(()=>[o(r(t),1)]),_:2},1024))),128))]),_:1}),q.value?(u(),x(i,{key:0,type:"primary",size:"small",onClick:Ol,loading:Be.value},{default:a(()=>[...e[70]||(e[70]=[o("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])):V("",!0)])]),default:a(()=>[q.value?(u(),x(w,{key:0,modelValue:H.value,"onUpdate:modelValue":e[17]||(e[17]=t=>H.value=t),type:"textarea",rows:22,style:{"font-family":"monospace"}},null,8,["modelValue"])):(u(),x(Xe,{key:1,description:"ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂Êü•ÁúãÂíåÁºñËæë","image-size":60}))]),_:1})]),_:1})]),_:1}),l(re,{modelValue:te.value,"onUpdate:modelValue":e[20]||(e[20]=t=>te.value=t),title:"Êñ∞Âª∫ËÆ∞ÂøÜÊñá‰ª∂",width:"480px"},{footer:a(()=>[l(i,{onClick:e[19]||(e[19]=t=>te.value=!1)},{default:a(()=>[...e[72]||(e[72]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:Yl},{default:a(()=>[...e[73]||(e[73]=[o("ÂàõÂª∫",-1)])]),_:1})]),default:a(()=>[l(Q,{"label-width":"80px"},{default:a(()=>[l(g,{label:"Ë∑ØÂæÑ"},{default:a(()=>[l(w,{modelValue:ke.value,"onUpdate:modelValue":e[18]||(e[18]=t=>ke.value=t),placeholder:"‰æãÂ¶Ç: projects/my-project.md Êàñ topics/cooking.md"},null,8,["modelValue"]),l(U,{type:"info",size:"small",style:{"margin-top":"4px"}},{default:a(()=>[...e[71]||(e[71]=[o("Áõ∏ÂØπ‰∫é memory/ ÁõÆÂΩï",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:ae.value,"onUpdate:modelValue":e[23]||(e[23]=t=>ae.value=t),title:"Ê∑ªÂä†‰ªäÊó•Êó•Âøó",width:"600px"},{footer:a(()=>[l(i,{onClick:e[22]||(e[22]=t=>ae.value=!1)},{default:a(()=>[...e[74]||(e[74]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:ql},{default:a(()=>[...e[75]||(e[75]=[o("Êèê‰∫§",-1)])]),_:1})]),default:a(()=>[l(w,{modelValue:xe.value,"onUpdate:modelValue":e[21]||(e[21]=t=>xe.value=t),type:"textarea",rows:10,placeholder:"ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÈáçË¶Å‰∫ãÈ°π„ÄÅÂ≠¶‰π†ÂøÉÂæó„ÄÅÂæÖÂäû..."},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l(P,{label:"ÊäÄËÉΩ",name:"skills"},{default:a(()=>[s("div",sa,[s("div",ia,[e[77]||(e[77]=s("span",{style:{"font-size":"16px","font-weight":"600"}},"Â∑≤ÂÆâË£ÖÊäÄËÉΩ",-1)),l(i,{type:"primary",size:"small",onClick:Zl},{default:a(()=>[...e[76]||(e[76]=[o("ÂÆâË£ÖÊäÄËÉΩ",-1)])]),_:1})]),Te.value.length===0?(u(),v("div",ua," ÊöÇÊú™ÂÆâË£Ö‰ªª‰ΩïÊäÄËÉΩÔºåÁÇπÂáª„ÄåÂÆâË£ÖÊäÄËÉΩ„ÄçÂºÄÂßãÂêß ")):V("",!0),(u(!0),v($,null,N(Te.value,t=>(u(),x(D,{key:t.id,style:{"margin-bottom":"12px"},shadow:"hover"},{default:a(()=>[s("div",da,[s("span",ra,r(t.icon||"üîß"),1),s("div",ma,[s("div",pa,[s("span",fa,r(t.name),1),l(c,{size:"small",type:"info",effect:"plain"},{default:a(()=>[o("v"+r(t.version),1)]),_:2},1024),t.category?(u(),x(c,{key:0,size:"small",effect:"plain"},{default:a(()=>[o(r(t.category),1)]),_:2},1024)):V("",!0)]),s("div",va,r(t.description),1),s("div",ya," Êù•Ê∫ê: "+r(t.source)+" ¬∑ "+r(t.installedAt?t.installedAt.slice(0,10):""),1)]),s("div",ca,[l(X,{"model-value":t.enabled,onChange:y=>lt(t,y),size:"small"},null,8,["model-value","onChange"]),l(i,{size:"small",type:"danger",plain:"",onClick:y=>tt(t.id)},{default:a(()=>[...e[78]||(e[78]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128))]),l(re,{modelValue:de.value,"onUpdate:modelValue":e[31]||(e[31]=t=>de.value=t),title:"ÂÆâË£ÖÊäÄËÉΩ",width:"520px"},{footer:a(()=>[l(i,{onClick:e[30]||(e[30]=t=>de.value=!1)},{default:a(()=>[...e[79]||(e[79]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",loading:Ge.value,onClick:et},{default:a(()=>[...e[80]||(e[80]=[o("ÂÆâË£Ö",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(Q,{model:k.value,"label-width":"80px"},{default:a(()=>[l(g,{label:"ID"},{default:a(()=>[l(w,{modelValue:k.value.id,"onUpdate:modelValue":e[24]||(e[24]=t=>k.value.id=t),placeholder:"Â¶Ç translateÔºàËã±ÊñáÂ∞èÂÜôÔºâ"},null,8,["modelValue"])]),_:1}),l(g,{label:"ÂêçÁß∞"},{default:a(()=>[l(w,{modelValue:k.value.name,"onUpdate:modelValue":e[25]||(e[25]=t=>k.value.name=t),placeholder:"Â¶Ç ÁøªËØëÂä©Êâã"},null,8,["modelValue"])]),_:1}),l(g,{label:"ÂõæÊ†á"},{default:a(()=>[l(w,{modelValue:k.value.icon,"onUpdate:modelValue":e[26]||(e[26]=t=>k.value.icon=t),placeholder:"Â¶Ç üåê"},null,8,["modelValue"])]),_:1}),l(g,{label:"ÂàÜÁ±ª"},{default:a(()=>[l(w,{modelValue:k.value.category,"onUpdate:modelValue":e[27]||(e[27]=t=>k.value.category=t),placeholder:"Â¶Ç ËØ≠Ë®Ä"},null,8,["modelValue"])]),_:1}),l(g,{label:"ÊèèËø∞"},{default:a(()=>[l(w,{modelValue:k.value.description,"onUpdate:modelValue":e[28]||(e[28]=t=>k.value.description=t),placeholder:"ÁÆÄË¶ÅÊèèËø∞ËØ•ÊäÄËÉΩ"},null,8,["modelValue"])]),_:1}),l(g,{label:"Á≥ªÁªüÊåá‰ª§"},{default:a(()=>[l(w,{modelValue:k.value.promptContent,"onUpdate:modelValue":e[29]||(e[29]=t=>k.value.promptContent=t),type:"textarea",rows:5,placeholder:"ÔºàÂèØÈÄâÔºâÊ≥®ÂÖ•Âà∞Á≥ªÁªüÊèêÁ§∫ÁöÑ SKILL.md ÂÜÖÂÆπ"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),l(P,{label:"Â∑•‰ΩúÂå∫",name:"workspace"},{default:a(()=>[l(W,{gutter:20},{default:a(()=>[l(z,{span:8},{default:a(()=>[l(D,{header:"Êñá‰ª∂ÂàóË°®"},{default:a(()=>[l(fl,{data:nl.value,props:{label:"name",children:"children"},onNodeClick:Jl,"highlight-current":"","default-expand-all":""},null,8,["data"])]),_:1})]),_:1}),l(z,{span:16},{default:a(()=>[l(D,{header:J.value||"ÈÄâÊã©Êñá‰ª∂Êü•Áúã"},{default:a(()=>[J.value?(u(),v($,{key:0},[l(w,{modelValue:ne.value,"onUpdate:modelValue":e[32]||(e[32]=t=>ne.value=t),type:"textarea",rows:20},null,8,["modelValue"]),s("div",ga,[l(i,{type:"primary",onClick:Kl},{default:a(()=>[...e[81]||(e[81]=[o("‰øùÂ≠ò",-1)])]),_:1}),Ve.value?(u(),x(U,{key:0,type:"info",size:"small"},{default:a(()=>[o(r(dl(Ve.value.size))+" ¬∑ "+r(Fl(Ve.value.modTime)),1)]),_:1})):V("",!0)])],64)):V("",!0)]),_:1},8,["header"])]),_:1})]),_:1})]),_:1}),l(P,{label:"ÂÆöÊó∂‰ªªÂä°",name:"cron"},{default:a(()=>[l(i,{type:"primary",onClick:e[33]||(e[33]=t=>oe.value=!0),style:{"margin-bottom":"16px"}},{default:a(()=>[l(R,null,{default:a(()=>[l(A($e))]),_:1}),e[82]||(e[82]=o(" Êñ∞Âª∫‰ªªÂä° ",-1))]),_:1}),l(Qe,{data:ul.value,stripe:""},{default:a(()=>[l(F,{prop:"name",label:"ÂêçÁß∞"}),l(F,{label:"Ë∞ÉÂ∫¶"},{default:a(({row:t})=>[o(r(t.schedule?.expr)+" ("+r(t.schedule?.tz)+")",1)]),_:1}),l(F,{label:"ÊúÄËøëËøêË°å",width:"180"},{default:a(({row:t})=>[t.state?.lastRunAtMs?(u(),v($,{key:0},[l(c,{type:t.state?.lastStatus==="ok"?"success":"danger",size:"small"},{default:a(()=>[o(r(t.state?.lastStatus),1)]),_:2},1032,["type"]),l(U,{type:"info",size:"small",style:{"margin-left":"4px"}},{default:a(()=>[o(r(rl(t.state?.lastRunAtMs)),1)]),_:2},1024)],64)):(u(),x(U,{key:1,type:"info",size:"small"},{default:a(()=>[...e[83]||(e[83]=[o("Êú™ËøêË°å",-1)])]),_:1}))]),_:1}),l(F,{label:"ÂêØÁî®",width:"80"},{default:a(({row:t})=>[l(X,{modelValue:t.enabled,"onUpdate:modelValue":y=>t.enabled=y,onChange:y=>Ql(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(F,{label:"Êìç‰Ωú",width:"220"},{default:a(({row:t})=>[t.payload?.message==="__MEMORY_CONSOLIDATE__"?(u(),v($,{key:0},[l(c,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:a(()=>[...e[84]||(e[84]=[o("ËÆ∞ÂøÜÁÆ°ÁêÜ",-1)])]),_:1}),l(i,{size:"small",onClick:y=>ml(t)},{default:a(()=>[...e[85]||(e[85]=[o("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"])],64)):(u(),v($,{key:1},[l(i,{size:"small",onClick:y=>ml(t)},{default:a(()=>[...e[86]||(e[86]=[o("Á´ãÂç≥ËøêË°å",-1)])]),_:1},8,["onClick"]),l(i,{size:"small",type:"danger",onClick:y=>Xl(t)},{default:a(()=>[...e[87]||(e[87]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data"]),l(re,{modelValue:oe.value,"onUpdate:modelValue":e[40]||(e[40]=t=>oe.value=t),title:"Êñ∞Âª∫ÂÆöÊó∂‰ªªÂä°",width:"520px"},{footer:a(()=>[l(i,{onClick:e[39]||(e[39]=t=>oe.value=!1)},{default:a(()=>[...e[88]||(e[88]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:Gl},{default:a(()=>[...e[89]||(e[89]=[o("ÂàõÂª∫",-1)])]),_:1})]),default:a(()=>[l(Q,{model:h.value,"label-width":"100px"},{default:a(()=>[l(g,{label:"ÂêçÁß∞"},{default:a(()=>[l(w,{modelValue:h.value.name,"onUpdate:modelValue":e[34]||(e[34]=t=>h.value.name=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"Cron Ë°®ËææÂºè"},{default:a(()=>[l(w,{modelValue:h.value.expr,"onUpdate:modelValue":e[35]||(e[35]=t=>h.value.expr=t),placeholder:"30 3 * * *"},null,8,["modelValue"])]),_:1}),l(g,{label:"Êó∂Âå∫"},{default:a(()=>[l(M,{modelValue:h.value.tz,"onUpdate:modelValue":e[36]||(e[36]=t=>h.value.tz=t)},{default:a(()=>[l(b,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),l(b,{label:"UTC",value:"UTC"}),l(b,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"Ê∂àÊÅØ"},{default:a(()=>[l(w,{modelValue:h.value.message,"onUpdate:modelValue":e[37]||(e[37]=t=>h.value.message=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),l(g,{label:"ÂêØÁî®"},{default:a(()=>[l(X,{modelValue:h.value.enabled,"onUpdate:modelValue":e[38]||(e[38]=t=>h.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}),l(P,{label:"Ê∏†ÈÅì",name:"channels"},{default:a(()=>[s("div",_a,[l(U,{type:"info",size:"small"},{default:a(()=>[...e[90]||(e[90]=[o("ÊØè‰∏™ AI ÊàêÂëòÁã¨Á´ãÈÖçÁΩÆËá™Â∑±ÁöÑÊ∂àÊÅØÈÄöÈÅìÔºàÂ¶Ç Telegram Bot TokenÔºâ",-1)])]),_:1}),l(i,{type:"primary",size:"small",onClick:Dl},{default:a(()=>[l(R,null,{default:a(()=>[l(A($e))]),_:1}),e[91]||(e[91]=o(" Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì ",-1))]),_:1})]),(u(!0),v($,null,N(I.value,t=>(u(),v("div",{key:t.id,class:"channel-card"},[s("div",ba,[s("div",wa,[l(c,{size:"small",style:{"margin-right":"8px"}},{default:a(()=>[o(r(t.type),1)]),_:2},1024),s("span",ka,r(t.name),1),t.config?.botName?(u(),v("span",xa,"@"+r(t.config.botName),1)):V("",!0),l(c,{type:t.status==="ok"?"success":t.status==="error"?"danger":"info",size:"small",effect:"plain",style:{"margin-left":"8px"}},{default:a(()=>[o(r(t.status==="ok"?"‚úì Ê≠£Â∏∏":t.status==="error"?"‚úó ÈîôËØØ":"Êú™ÊµãËØï"),1)]),_:2},1032,["type"])]),s("div",Va,[l(X,{modelValue:t.enabled,"onUpdate:modelValue":y=>t.enabled=y,size:"small",onChange:Nl,style:{"margin-right":"8px"}},null,8,["modelValue","onUpdate:modelValue"]),l(i,{size:"small",onClick:y=>Ll(t),loading:Ye.value===t.id},{default:a(()=>[...e[92]||(e[92]=[o("ÊµãËØïËøûÊé•",-1)])]),_:1},8,["onClick","loading"]),l(i,{size:"small",onClick:y=>Il(t)},{default:a(()=>[...e[93]||(e[93]=[o("ÁºñËæë",-1)])]),_:1},8,["onClick"]),l(i,{size:"small",type:"danger",plain:"",onClick:y=>El(t)},{default:a(()=>[...e[94]||(e[94]=[o("Âà†Èô§",-1)])]),_:1},8,["onClick"])])]),t.type==="web"?(u(),v("div",Ca,[s("div",ha,[e[96]||(e[96]=s("span",{class:"channel-info-label"},"ÂÖ¨ÂºÄÂú∞ÂùÄ",-1)),s("span",za,[l(ot,{href:qe(A(f)),target:"_blank",type:"primary",style:{"font-size":"13px"}},{default:a(()=>[o(r(qe(A(f))),1)]),_:1},8,["href"]),l(i,{size:"small",link:"",style:{"margin-left":"8px"},onClick:e[41]||(e[41]=y=>Sl(qe(A(f))))},{default:a(()=>[...e[95]||(e[95]=[o("Â§çÂà∂",-1)])]),_:1})])]),s("div",Ta,[e[97]||(e[97]=s("span",{class:"channel-info-label"},"ËÆøÈóÆÂØÜÁ†Å",-1)),s("span",Ua,[l(c,{size:"small",type:t.config?.password?"warning":"info",effect:"plain"},{default:a(()=>[o(r(t.config?.password?"Â∑≤ËÆæÁΩÆ":"Êó†ÂØÜÁ†Å"),1)]),_:2},1032,["type"])])])])):V("",!0),t.type==="telegram"?(u(),v("div",$a,[s("div",Aa,[e[99]||(e[99]=s("span",{class:"channel-info-label"},"ÁôΩÂêçÂçïÁî®Êà∑",-1)),s("span",Fa,[t.config?.allowedFrom?(u(!0),v($,{key:0},N(t.config.allowedFrom.split(","),y=>(u(),x(c,{key:y,size:"small",style:{"margin-right":"4px"}},{default:a(()=>[o(r(y.trim()),1)]),_:2},1024))),128)):(u(),x(U,{key:1,type:"warning",size:"small"},{default:a(()=>[...e[98]||(e[98]=[o("Êú™ËÆæÁΩÆÔºàÈÖçÂØπÊ®°ÂºèÔºåÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºâ",-1)])]),_:1}))])]),s("div",Sa,[s("div",{class:"pending-section-header",onClick:y=>Bl(t.id)},[e[101]||(e[101]=s("span",null,"ÂæÖÂÆ°Ê†∏Áî®Êà∑",-1)),l(pl,{value:(G.value[t.id]||[]).length,hidden:!(G.value[t.id]||[]).length,type:"warning",style:{"margin-left":"6px"}},null,8,["value","hidden"]),l(i,{size:"small",link:"",onClick:kt(y=>he(t.id),["stop"]),style:{"margin-left":"8px"}},{default:a(()=>[...e[100]||(e[100]=[o("Âà∑Êñ∞",-1)])]),_:1},8,["onClick"]),l(R,{style:Ae([{"margin-left":"4px",transition:"transform 0.2s"},{transform:ie.value===t.id?"rotate(180deg)":""}])},{default:a(()=>[l(A(xt))]),_:1},8,["style"])],8,Da),ie.value===t.id?(u(),v("div",Ia,[He.value[t.id]?(u(),v("div",Ma,[l(U,{type:"info",size:"small"},{default:a(()=>[...e[102]||(e[102]=[o("Âä†ËΩΩ‰∏≠...",-1)])]),_:1})])):(G.value[t.id]||[]).length?(u(!0),v($,{key:1},N(G.value[t.id],y=>(u(),v("div",{key:y.id,class:"pending-user-row"},[s("div",Na,[s("span",Ea,r(y.firstName||"Êú™Áü•"),1),y.username?(u(),v("span",La,"@"+r(y.username),1)):V("",!0),s("span",Ba,"ID: "+r(y.id),1),l(U,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:a(()=>[o(r(ll(y.lastSeen)),1)]),_:2},1024)]),s("div",Pa,[l(i,{size:"small",type:"success",plain:"",onClick:rt=>Pl(t.id,y.id),loading:Je.value===`${t.id}-${y.id}`},{default:a(()=>[...e[103]||(e[103]=[o("Âä†ÂÖ•ÁôΩÂêçÂçï",-1)])]),_:1},8,["onClick","loading"]),l(i,{size:"small",type:"danger",plain:"",onClick:rt=>Rl(t.id,y.id)},{default:a(()=>[...e[104]||(e[104]=[o("ÂøΩÁï•",-1)])]),_:1},8,["onClick"])])]))),128)):(u(),v("div",Ra," ÊöÇÊó†ÂæÖÂÆ°Ê†∏Áî®Êà∑„ÄÇËÆ©Áî®Êà∑Âêë Bot ÂèëÈÄÅ /start Âç≥ÂèØÂá∫Áé∞Âú®Ê≠§Â§Ñ„ÄÇ "))])):V("",!0)])])):V("",!0)]))),128)),!We.value&&!I.value.length?(u(),x(Xe,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØÊ∏†ÈÅìÔºåÁÇπÂáª„ÄåÊ∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì„ÄçÂºÄÂßãÈÖçÁΩÆ","image-size":80,style:{"margin-top":"40px"}})):V("",!0),l(re,{modelValue:K.value,"onUpdate:modelValue":e[51]||(e[51]=t=>K.value=t),title:se.value?"ÁºñËæëÊ∂àÊÅØÊ∏†ÈÅì":"Ê∑ªÂä†Ê∂àÊÅØÊ∏†ÈÅì",width:"540px"},{footer:a(()=>[l(i,{onClick:e[50]||(e[50]=t=>K.value=!1)},{default:a(()=>[...e[107]||(e[107]=[o("ÂèñÊ∂à",-1)])]),_:1}),l(i,{type:"primary",onClick:Ml,loading:Oe.value},{default:a(()=>[...e[108]||(e[108]=[o("‰øùÂ≠ò",-1)])]),_:1},8,["loading"])]),default:a(()=>[l(Q,{model:p.value,"label-width":"120px"},{default:a(()=>[l(g,{label:"Á±ªÂûã",required:""},{default:a(()=>[l(M,{modelValue:p.value.type,"onUpdate:modelValue":e[42]||(e[42]=t=>p.value.type=t),style:{width:"100%"}},{default:a(()=>[l(b,{label:"Telegram",value:"telegram"}),l(b,{label:"Web ËÅäÂ§©È°µ",value:"web"}),l(b,{label:"iMessage",value:"imessage"}),l(b,{label:"WhatsApp",value:"whatsapp"})]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"ÂêçÁß∞",required:""},{default:a(()=>[l(w,{modelValue:p.value.name,"onUpdate:modelValue":e[43]||(e[43]=t=>p.value.name=t),placeholder:"Â¶ÇÔºöÂÆ¢Êúç Bot"},null,8,["modelValue"])]),_:1}),p.value.type==="telegram"?(u(),v($,{key:0},[l(g,{label:"Bot Token",required:""},{default:a(()=>[l(w,{modelValue:p.value.botToken,"onUpdate:modelValue":e[44]||(e[44]=t=>p.value.botToken=t),type:"password","show-password":"",placeholder:"‰ªé @BotFather Ëé∑Âèñ"},null,8,["modelValue"]),l(U,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:a(()=>[...e[105]||(e[105]=[o(" üí° ‰øùÂ≠òÂêéÁÇπÂáª„ÄåÊµãËØïËøûÊé•„ÄçÈ™åËØÅ Token ÊòØÂê¶ÊúâÊïà ",-1)])]),_:1})]),_:1}),l(g,{label:"ÁôΩÂêçÂçïÁî®Êà∑"},{default:a(()=>[l(w,{modelValue:p.value.allowedFrom,"onUpdate:modelValue":e[45]||(e[45]=t=>p.value.allowedFrom=t),placeholder:"Â°´ÂÖ• Telegram Áî®Êà∑ IDÔºåÂ§ö‰∏™Áî®ÈÄóÂè∑ÂàÜÈöî"},null,8,["modelValue"]),l(U,{type:"info",size:"small",style:{display:"block","margin-top":"4px"}},{default:a(()=>[...e[106]||(e[106]=[o(" üí° ÁïôÁ©∫Êó∂ Bot ËøõÂÖ•ÈÖçÂØπÊ®°Âºè‚Äî‚ÄîÂêëÁî®Êà∑ËøîÂõûÂÖ∂ IDÔºåÂºïÂØºËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ∑ªÂä†ÁôΩÂêçÂçï ",-1)])]),_:1})]),_:1})],64)):V("",!0),p.value.type==="web"?(u(),v($,{key:1},[l(g,{label:"ËÆøÈóÆÂØÜÁ†Å"},{default:a(()=>[l(w,{modelValue:p.value.webPassword,"onUpdate:modelValue":e[46]||(e[46]=t=>p.value.webPassword=t),type:"password","show-password":"",placeholder:"ÁïôÁ©∫ÂàôÊó†ÈúÄÂØÜÁ†Å"},null,8,["modelValue"])]),_:1}),l(g,{label:"Ê¨¢ËøéËØ≠"},{default:a(()=>[l(w,{modelValue:p.value.webWelcome,"onUpdate:modelValue":e[47]||(e[47]=t=>p.value.webWelcome=t),placeholder:"‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÂèØ‰ª•Â∏Æ‰Ω†ÁöÑÔºü"},null,8,["modelValue"])]),_:1}),l(g,{label:"È°µÈù¢Ê†áÈ¢ò"},{default:a(()=>[l(w,{modelValue:p.value.webTitle,"onUpdate:modelValue":e[48]||(e[48]=t=>p.value.webTitle=t),placeholder:"AI Âä©Êâã"},null,8,["modelValue"])]),_:1})],64)):V("",!0),l(g,{label:"ÂêØÁî®"},{default:a(()=>[l(X,{modelValue:p.value.enabled,"onUpdate:modelValue":e[49]||(e[49]=t=>p.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Ja=zt(ja,[["__scopeId","data-v-6b4a5126"]]);export{Ja as default};
