import{u as D}from"./agents-DMEpAG3f.js";import{s as S}from"./index-BclxA8EE.js";import{d as B,i as F,c as w,b as n,a as e,w as t,j as y,k as x,e as N,r as i,o as _,t as o,l as b,h as d,n as M,F as j,m as L}from"./index-8TE50JZr.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"dashboard-page"},G={class:"stat-value"},H={class:"stat-value"},J={class:"stat-value"},K={class:"stat-value"},O={style:{"font-weight":"600"}},P={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Q={style:{display:"flex","align-items":"center",gap:"8px"}},R=B({__name:"DashboardView",setup(U){const f=D(),u=N(null);F(async()=>{f.fetchAll();try{const l=await S.get();u.value=l.data}catch{}});function A(l){return l==="running"?"success":l==="stopped"?"danger":"info"}function C(l){return l==="running"?"运行中":l==="stopped"?"已停止":"空闲"}function h(l){return l?l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}k`:String(l):"0"}return(l,a)=>{const p=i("el-card"),c=i("el-col"),$=i("el-row"),z=i("DataAnalysis"),I=i("el-icon"),v=i("el-button"),r=i("el-table-column"),m=i("el-tag"),k=i("el-table"),T=i("el-text"),V=i("el-empty");return _(),w("div",q,[a[10]||(a[10]=n("h2",{style:{margin:"0 0 20px"}},"仪表盘",-1)),e($,{gutter:16,style:{"margin-bottom":"24px"}},{default:t(()=>[e(c,{span:6},{default:t(()=>[e(p,{shadow:"never",class:"stat-card stat-card--members"},{default:t(()=>[a[1]||(a[1]=n("div",{class:"stat-label"},"AI 成员",-1)),n("div",G,o(u.value?.agents.total??b(f).list.length),1)]),_:1})]),_:1}),e(c,{span:6},{default:t(()=>[e(p,{shadow:"never",class:"stat-card stat-card--sessions"},{default:t(()=>[a[2]||(a[2]=n("div",{class:"stat-label"},"对话总数",-1)),n("div",H,o(u.value?.sessions.total??0),1)]),_:1})]),_:1}),e(c,{span:6},{default:t(()=>[e(p,{shadow:"never",class:"stat-card stat-card--messages"},{default:t(()=>[a[3]||(a[3]=n("div",{class:"stat-label"},"消息总数",-1)),n("div",J,o(u.value?.sessions.totalMessages??0),1)]),_:1})]),_:1}),e(c,{span:6},{default:t(()=>[e(p,{shadow:"never",class:"stat-card stat-card--tokens"},{default:t(()=>[a[4]||(a[4]=n("div",{class:"stat-label"},"Token 用量",-1)),n("div",K,o(h(u.value?.sessions.totalTokens??0)),1)]),_:1})]),_:1})]),_:1}),u.value?.topAgents?.length?(_(),y(p,{key:0,shadow:"hover",style:{"margin-bottom":"24px"}},{header:t(()=>[n("span",O,[e(I,{style:{"vertical-align":"-2px","margin-right":"4px"}},{default:t(()=>[e(z)]),_:1}),a[5]||(a[5]=d("成员用量排行",-1))])]),default:t(()=>[e(k,{data:u.value.topAgents,stripe:"",style:{width:"100%"}},{default:t(()=>[e(r,{label:"成员","min-width":"140"},{default:t(({row:s})=>[e(v,{type:"primary",link:"",onClick:g=>l.$router.push(`/agents/${s.id}`)},{default:t(()=>[d(o(s.name),1)]),_:2},1032,["onClick"])]),_:1}),e(r,{label:"对话数",width:"100",align:"center"},{default:t(({row:s})=>[e(m,{size:"small",type:"info"},{default:t(()=>[d(o(s.sessions),1)]),_:2},1024)]),_:1}),e(r,{label:"消息数",width:"100",align:"center"},{default:t(({row:s})=>[d(o(s.messages),1)]),_:1}),e(r,{label:"Token 用量",width:"130",align:"center"},{default:t(({row:s})=>[e(m,{size:"small",type:s.tokens>1e5?"danger":s.tokens>5e4?"warning":"success",effect:"plain"},{default:t(()=>[d(o(h(s.tokens)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})):x("",!0),e(p,{shadow:"hover"},{header:t(()=>[n("div",P,[a[7]||(a[7]=n("span",{style:{"font-weight":"600"}},"成员状态",-1)),e(v,{type:"primary",size:"small",onClick:a[0]||(a[0]=s=>l.$router.push("/agents"))},{default:t(()=>[...a[6]||(a[6]=[d(" 管理成员 ",-1)])]),_:1})])]),default:t(()=>[e(k,{data:b(f).list,stripe:"",style:{width:"100%"}},{default:t(()=>[e(r,{label:"名称","min-width":"150"},{default:t(({row:s})=>[n("div",Q,[n("div",{class:"avatar-dot",style:M({background:s.avatarColor||"#409eff"})},o(s.name.charAt(0)),5),n("span",null,o(s.name),1)])]),_:1}),e(r,{label:"模型","min-width":"180"},{default:t(({row:s})=>[e(m,{size:"small",type:"info"},{default:t(()=>[d(o(s.modelId||s.model||"-"),1)]),_:2},1024)]),_:1}),e(r,{label:"通道","min-width":"140"},{default:t(({row:s})=>[s.channelIds?.length?(_(!0),w(j,{key:0},L(s.channelIds,g=>(_(),y(m,{key:g,size:"small",style:{"margin-right":"4px"}},{default:t(()=>[d(o(g),1)]),_:2},1024))),128)):(_(),y(T,{key:1,type:"info",size:"small"},{default:t(()=>[...a[8]||(a[8]=[d("—",-1)])]),_:1}))]),_:1}),e(r,{label:"状态",width:"100"},{default:t(({row:s})=>[e(m,{type:A(s.status),size:"small"},{default:t(()=>[d(o(C(s.status)),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作",width:"100"},{default:t(({row:s})=>[e(v,{type:"primary",size:"small",link:"",onClick:g=>l.$router.push(`/agents/${s.id}`)},{default:t(()=>[...a[9]||(a[9]=[d(" 对话 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),b(f).list.length===0?(_(),y(V,{key:0,description:"暂无 AI 成员"})):x("",!0)]),_:1})])}}}),tt=E(R,[["__scopeId","data-v-3f062603"]]);export{tt as default};
